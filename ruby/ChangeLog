-*- coding: utf-8 -*-

commit a0c7c23c9cec0d0ffcba012279cd652d28ad5bf3
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-03-31 19:27:41 +0900

    v2.7.1p83

commit f832d957b837d5167058a3f8579d66e5b5d3472e
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-03-31 19:26:10 +0900

    ext/socket/init.c: do not return uninitialized buffer

    BasicSocket#read_nonblock and some methods changes the size of a buffer
    string, but when no data is available, the buffer is returned as
    uninitialized.

    Co-Authored-By: Samuel Williams <samuel.williams@oriontransfer.co.nz>

commit 5caee29164de6477b5cad1328b56e696a41d5025
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-03-31 16:31:53 +0900

    * 2020-03-31 [ci skip]

commit bb93659fefd7f4557129043742771a33bd30c255
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2020-03-31 16:10:57 +0900

    Fix pp when passed a empty ruby2_keywords-flagged hash as array element (#2966)

    This causes problems because the hash is passed to a block not
    accepting keywords.  Because the hash is empty and keyword flagged,
    it is removed before calling the block.  This doesn't cause an
    ArgumentError because it is a block and not a lambda.  Just like
    any other block not passed required arguments, arguments not
    passed are set to nil.

    Issues like this are a strong reason not to have ruby2_keywords
    by default.

    Fixes [Bug #16519]

    This backports 28d31ead34baff1c4abc0d7d902ef4bc1d576fb2 and
    0ea759eac9234afc47e8fb1bcacfe9ee12c8ffb6, but needed to be modified
    for 2.7 as 2.7 will perform empty keyword to positional hash
    conversion for required arguments, which will happen if "v" in the
    seplist method is empty when yielded.

    Co-authored-by: NARUSE, Yui <nurse@users.noreply.github.com>

commit d04856bdc502eec4055da1e5cf717639c314e189
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-03-30 19:15:42 +0900

    * 2020-03-30 [ci skip]

commit b5fa156b7907b8ea1baf8b9f0cb6a66b0fecb3d4
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2020-03-11 23:37:14 +0900

    Clear all trace events during teardown

    Since 0c2d81dada, not all trace events are cleared during VM teardown.
    This causes a crash when there is a tracepoint for
    `RUBY_INTERNAL_EVENT_GC_EXIT` active during teardown.

    The commit looks like a refactoring commit so I think this change was
    unintentional.

    [Bug #16682]

    (cherry picked from commit b385f7670ffa420790bc548747fa4b58c4c5d8f6)

commit 0057fe4063b57b445d6ffc893e442f362e3a19e0
  Author: aycabta <aycabta@gmail.com>
  Date:   2020-03-30 19:09:50 +0900

    Ruby 2.7 backport about IRB (#2990)

    * [ruby/reline] Sort completion list

    #### Legacy mode:

      ```console
      $ irb --legacy
      irb(main):001:0> l[TAB][TAB]
      lambda           load             local_variables  loop
      ```

    #### Before this patch:

      ```console
      $ irb
      irb(main):001:0> l[TAB][TAB]
      local_variables
      loop
      lambda
      load
      ```

    #### After this patch:

      ```console
      $ irb
      irb(main):001:0> l[TAB][TAB]
      lambda
      load
      local_variables
      loop
      ```

    https://github.com/ruby/reline/commit/6074069c7d

    * Drop an invalid char as UTF-8

    * Add test_completion_with_indent_and_completer_quote_characters

    This is for 8a705245e55575d4d310a2e956b89a36a5931971.

    * [ruby/irb] Add tests for RubyLex

    The set_auto_indent method calculates the correct number of spaces for
    indenting a line. We think there might be a few bugs in this method so
    we are testing the current functionality to make sure nothing breaks
    when we address those bugs.

    Example test failure:

    ```
      1) Failure:
    TestIRB::TestRubyLex#test_auto_indent [/Users/Ben/Projects/irb/test/irb/test_ruby_lex.rb:75]:
    Calculated the wrong number of spaces for:
     def each_top_level_statement
      initialize_input
      catch(:TERM_INPUT) do
        loop do
          begin
            prompt
            unless l = lex
              throw :TERM_INPUT if @line == ''
            else
    .
    <10> expected but was
    <12>.
    ```

    https://github.com/ruby/irb/commit/752d5597ab

    * [ruby/reline] Degenerate the terminal size to [$LINES, $COLUMNS] if it is unknown

    This is a workaround for https://github.com/ruby/irb/issues/50

    https://github.com/ruby/reline/commit/5725677d1a

    * [ruby/irb] Fix newline depth with multiple braces

    This commit fixes the check_newline_depth_difference method to multiple
    open braces on one line into account. Before this change we were
    subtracting from the depth in check_newline_depth_difference on
    every open brace. This is the right thing to do if the opening and
    closing brace are on the same line. For example in a method definition we
    have an opening and closing parentheses we want to add 1 to our depth,
    and then remove it.

    ```
    def foo()
    end
    ```

    However this isn't the correct behavior when the brace spans multiple
    lines. If a brace spans multiple lines we don't want to subtract from
    check_newline_depth_difference and we want to treat the braces the same
    way as we do `end` and allow check_corresponding_token_depth to pop the
    correct depth.

    Example of bad behavior:

    ```
    def foo()
      [
      ]
    puts 'bar'
    end
    ```

    Example of desired behavior:

    ```
    def foo()
      [
      ]
      puts 'bar'
    end
    ```

    https://github.com/ruby/irb/commit/7dc8af01e0

    * text/readline/test_readline.rb - fix skip on Reline (#2743)

    TestRelineAsReadline#test_input_metachar passes on MinGW

    * Add "require 'openstruct'" what is forgotten

    * [ruby/irb] Fix lib name of OpenStruct

    https://github.com/ruby/irb/commit/1f3a84ab6b

    * Add load path and require for ruby/ruby

    * Rescue EOFError

    If C-d is pressed before IRB is ready, IRB crashes because EOFError occurs.

    * Complete indented and quoted string correctly

      def foo
        ''.upca[TAB]

    This will be completed to be:

      def foo
      ''.upcase

    The indent was gone. This commit fixes the bug.

    * [ruby/irb] Fix crashing when multiple open braces per line

    https://github.com/ruby/irb/issues/55

    If we had put multiple open braces on a line the with no closing brace
    spaces_of_nest array keeps getting '0' added to it. This means that when
    we pop off of this array we are saying that we should be in position zero
    for the next line. This is an issue because we don't always want to be
    in position 0 after a closing brace.

    Example:
    ```
    [[[
    ]
    ]
    ]
    ```
    In the above example the 'spaces_of_nest' array looks like this after
    the first line is entered: [0,0,0]. We really want to be indented 4
    spaces for the 1st closing brace 2 for the 2nd and 0 for the 3rd. i.e.
    we want it to be: [0,2,4].

    We also saw this issue with a heredoc inside of an array.

    ```
    [<<FOO]
    hello
    FOO
    ```

    https://github.com/ruby/irb/commit/80c69c8272

    * Support history-size in .inputrc correctly

    * Introduce an abstracted structure about the encoding of Reline

    The command prompt on Windows always uses Unicode to take input and print
    output but most Reline implementation depends on Encoding.default_external.
    This commit introduces an abstracted structure about the encoding of Reline.

    * Remove an unused setting variable

    * Use Reline.encoding_system_needs if exists

    * Add tests for vi_insert and vi_add

    * Implement vi_insert_at_bol and vi_add_at_eol

    * [ruby/reline] Implement vi_to_next_char

    https://github.com/ruby/reline/commit/066ecb0a21

    * [ruby/reline] Implement vi_prev_char and vi_to_prev_char

    https://github.com/ruby/reline/commit/0ad3ee63fa

    * [ruby/readline-ext] Include ruby/assert.h in ruby/ruby.h so that assertions can be there

    https://github.com/ruby/readline-ext/commit/4d44c12832

    * Stop using minitest dependent methods

    * Skip a test that uses assert_ruby_status if it doesn't exist

    * Use omit instead of skip

    * Check DONT_RUN_RELINE_TEST envvar

    * [ruby/irb] Add newline_before_multiline_output

    https://github.com/ruby/irb/commit/9eb1801a66

    * [ruby/irb] Fix compatibility with rails before 5.2

    Rails before 5.2 added Array#append as an alias to Array#<< ,
    so that it expects only one argument.
    However ruby-2.5 added Array#append as an alias to Array#push
    which takes any number of arguments.

    If irb completion is used in `rails c` (for example "IO.<tab>")
    it fails with:
      irb/completion.rb:206:in `<<': wrong number of arguments (given 3, expected 1) (ArgumentError)

    Using Array#push instead of Array#append fixes compatibility.

    https://github.com/ruby/irb/commit/5b7bbf9c34

    * Reline: Use a more robust detection of MinTTY

    The previous detection per get_screen_size fails when stdout is passed
    to a pipe. That is the case when running ruby tests in parallel ("-j" switch).
    In this case Reline believes that it's running on MinTTY and the tests
    are running with ANSI IOGate instead of the Windows adapter on MINGW.
    So parallel test results were different to that of a single process.
    This commit fixes these differencies.

    The code is taken from git sources and translated to ruby.
    NtQueryObject() is replaced by GetFileInformationByHandleEx(), because
    NtQueryObject() is undocumented and is more difficult to use:
      https://github.com/git-for-windows/git/blob/c5a03b1e29c69f3f06c8fabd92493edb73469176/compat/winansi.c#L558

    * Reline: Fix changed test results due to change to UTF-8 on Windows

    In commit f8ea2860b0cac1aec79978e6c44168802958e8af the Reline encoding
    for native windows console was changed to hardcoded UTF-8.
    This caused failures in reline and readline tests, but they were hidden,
    because parallel ruby tests incorrectly used Reline::ANSI as IOGate.
    Tests failures were raised in single process mode, but not with -j switch.

    This patch corrects encodings on native Windows console.

    * [ruby/irb] [ruby/irb] Rewrite an expression to detect multiline

    https://github.com/ruby/irb/commit/ed5cf375a6

    https://github.com/ruby/irb/commit/5b7bbf9c34

    * [ruby/reline] Implement vi_change_meta

    https://github.com/ruby/reline/commit/8538e0e10f

    * Always refer to Reline::IOGate.encoding

    * Always use UTF-8 for Reline::GeneralIO on Windows

    * Use test_mode on Reline::History::Test for encoding

    * [ruby/reline] Support GNOME style Home/End key sequences [Bug #16510]

    https://github.com/ruby/reline/commit/788f0df845

    * [ruby/irb] Add a new easter egg: dancing ruby

    https://github.com/ruby/irb/commit/e37dc7e58e

    * [ruby/irb] Exclude useless files from RDoc

    https://github.com/ruby/irb/commit/8f1ab2400c

    * [ruby/irb] Exclude useless files from RDoc

    * Fix inaccuracy in encoding tests

    These tests assume
      Encoding.find('locale') == Encoding.find('external')
    and fail if they are distinct.

    * [ruby/reline] Fix Reline::Windows#scroll_down

    I mistook Right and Bottom.

    https://github.com/ruby/reline/commit/8be401c5f5

    * [ruby/reline] Bypass cursor down when a char is rendered at eol on Windows

    A newline is automatically inserted if a character is rendered at eol on
    Windows command prompt.

    https://github.com/ruby/reline/commit/4bfea07e4a

    * [ruby/reline] Organize special keys escape sequences

    https://github.com/ruby/reline/commit/41deb1a3d9

    * [ruby/readline-ext] Remove unnecessary -I$(top_srcdir) when it's an individual gem

    https://github.com/ruby/readline-ext/commit/efaca4a5f4

    * [ruby/readline-ext] Check TestRelineAsReadline existance

    https://github.com/ruby/readline-ext/commit/c0a6303168

    * [ruby/readline-ext] The ruby/assert.h is adopted by Ruby 2.7 or later

    https://github.com/ruby/readline-ext/commit/106c31fc1b

    * Revert "[ruby/readline-ext] Include ruby/assert.h in ruby/ruby.h so that assertions can be there"

    This reverts commit 425b2064d394639101854c83a061a0918b33b857.

    This cherry-pick was a mistake.

    * [ruby/readline-ext] Use require check instead of DONT_RUN_RELINE_TEST env

    https://github.com/ruby/readline-ext/commit/1df99d1481

    * [ruby/readline-ext] Add spec.extensions

    https://github.com/ruby/readline-ext/commit/8c33abb13c

    * [ruby/readline-ext] Use rake/extensiokntask to build

    https://github.com/ruby/readline-ext/commit/b0b5f709bd

    * Fix readline build dependency

    * [ruby/irb] Add test_complete_symbol

    https://github.com/ruby/irb/commit/dbbf086c1f

    * [ruby/irb] Check doc namespace correctly

    IRB::InputCompletor::PerfectMatchedProc crashes when doc not found because a
    variable name was incorrect.

    https://github.com/ruby/irb/commit/889fd4928f

    * [ruby/irb] Fix auto indent with closed brace

    A closed brace in auto-indent shouldn't affect the next brace in the same line,
    but it behaves like below:

      p() {
        }

    It's a bug.

    https://github.com/ruby/irb/commit/fbe59e344f

    * [ruby/irb] Use 0.step instead of (..0).each for Ruby 2.5

    https://github.com/ruby/irb/commit/5d628ca40e

    * Revert "[ruby/irb] Add test_complete_symbol"

    This reverts commit 3af3431c2c145134996e66f3d8d9ade8ad81bde0.

    * [ruby/irb] fix reserved words and completion for them

    https://github.com/ruby/irb/commit/6184b227ad

    * Add test_complete_symbol

    The previous version of the test method used a symbol, ":abcdefg" to complete
    but longer symbols that can be completed are defined by other test methods of
    other libs.

    * test/irb/test_completion.rb: suppress a warning: unused literal ignored

    * [ruby/reline] Use IO#write instead of IO#print

    IO#print always adds a string of $\ automatically.

    https://github.com/ruby/reline/commit/a93119c847

    * [ruby/irb] Version 1.2.2

    https://github.com/ruby/irb/commit/a71753f15a

    * [ruby/reline] Version 0.1.3

    https://github.com/ruby/reline/commit/ea2b182466

    * [ruby/irb] Include easter-egg.rb in gemspec

    `irb` doesn't run because this file isn't included in the gem.
    https://github.com/ruby/irb/commit/73cda56d25

    * [ruby/irb] Version 1.2.3

    https://github.com/ruby/irb/commit/dd56e06df5

    * support multi-run test for test_readline.rb

    * [ruby/irb] `yield` outside method definition is a syntax error

    https://github.com/ruby/irb/commit/dbc7b059c7

    * test/readline - allow ENV control of test class creation

    In ruby/ruby, the tests run on both readline & reline by creating four test classes:
    ```
    TestReadline
    TestReadlineHistory

    TestRelineAsReadline
    TestRelineAsReadlineHistory
    ```

    Reline inports the test files and uses them in its CI.  Adding the ENV control allows it to only run the `TestRelineAsReadline` classes.

    * Omit test_using_quoting_detection_proc_with_multibyte_input temporarily for random order test

    * support random order test.

    test_readline:
      HISTORY should be empty.

    test_using_quoting_detection_proc:
    test_using_quoting_detection_proc_with_multibyte_input:
      Readline.completer_quote_characters= and
      Readline.completer_word_break_characters= doesn't accept nil,
      so skip if previous values are nil.

    * Set Readline.completion_append_character = nil always

    GNU Readline add a white space when Readline.completion_append_character is
    not initialized.

    * Fix a typo [ci skip]

    * skip test if Reline.completion_proc is nil.

    Some other tests can set Reline.completion_proc, so if it is nil,
    simply skip this test.

    * Reset Reline.point

    TestRelineAsReadline#test_insert_text expects Readline.point == 0
    at the beginning of the test, but a test violate this assumption.

    * Convert incompatible encoding symbol names

    * Ignore incompatible convert of symbols

    * Add workaround for test-bundler failure

    https://github.com/ruby/actions/runs/500526558?check_suite_focus=true#step:16:127
    ```
    Failures:

      1) Bundler.setup when Bundler is bundled doesn't blow up
         Failure/Error: expect(err).to be_empty

           expected `"fatal: not a git repository (or any of the parent directories): .git\nfatal: not a git repository (o...the parent directories): .git\nfatal: not a git repository (or any of the parent directories): .git".empty?` to return true, got false

           Commands:
           $ /home/runner/work/actions/actions/snapshot-master/ruby \
             -I/home/runner/work/actions/actions/snapshot-master/lib:/home/runner/work/actions/actions/snapshot-master/spec/bundler \
             -rsupport/hax -rsupport/artifice/fail \
             /home/runner/work/actions/actions/snapshot-master/libexec/bundle install --retry 0
           Resolving dependencies...
           Using bundler 2.1.4
           Bundle complete! 1 Gemfile dependency, 1 gem now installed.
           Use `bundle info [gemname]` to see where a bundled gem is installed.
           fatal: not a git repository (or any of the parent directories): .git
           fatal: not a git repository (or any of the parent directories): .git
           fatal: not a git repository (or any of the parent directories): .git
           # $? => 0

           $ /home/runner/work/actions/actions/snapshot-master/ruby \
             -I/home/runner/work/actions/actions/snapshot-master/lib:/home/runner/work/actions/actions/snapshot-master/spec/bundler \
             -rsupport/hax -rsupport/artifice/fail \
             /home/runner/work/actions/actions/snapshot-master/libexec/bundle exec ruby -e \
             require\ \'bundler\'\;\ Bundler.setup
           fatal: not a git repository (or any of the parent directories): .git
           fatal: not a git repository (or any of the parent directories): .git
           fatal: not a git repository (or any of the parent directories): .git
           # $? => 0
         # ./spec/bundler/runtime/setup_spec.rb:1056:in `block (3 levels) in <top (required)>'
         # ./spec/bundler/spec_helper.rb:111:in `block (3 levels) in <top (required)>'
         # ./spec/bundler/spec_helper.rb:111:in `block (2 levels) in <top (required)>'
         # ./spec/bundler/spec_helper.rb:78:in `block (2 levels) in <top (required)>'
    make: *** [yes-test-bundler] Error 1
    ```

    * [ruby/irb] Unnamed groups are not captured when named groups are used

    https://github.com/ruby/irb/commit/0a641a69b0

    * [ruby/reline] Work with wrong $/ value correctly

    https://github.com/ruby/reline/commit/962ebf5a1b

    * [ruby/irb] Detect multiple lines output simplify

    The old implementation performance test code:

        require 'objspace'
        puts "%.5g MB" % (ObjectSpace.memsize_of_all * 0.001 * 0.001)
        /\A.*\Z/ !~ ('abc' * 20_000_000)
        puts "%.5g MB" % (ObjectSpace.memsize_of_all * 0.001 * 0.001)

    and run `time test.rb`:

        2.5868 MB
        62.226 MB

        real    0m1.307s
        user    0m0.452s
        sys     0m0.797s

    The new implementation performance test code:

        require 'objspace'
        puts "%.5g MB" % (ObjectSpace.memsize_of_all * 0.001 * 0.001)
        ('abc' * 20_000_000).include?("\n")
        puts "%.5g MB" % (ObjectSpace.memsize_of_all * 0.001 * 0.001)

    and run `time test.rb`:

        2.5861 MB
        62.226 MB

        real    0m0.132s
        user    0m0.088s
        sys     0m0.042s

    https://github.com/ruby/irb/commit/40d6610baf

    * [ruby/reline] Suppress error in case INPUTRC env is empty

    https://github.com/ruby/reline/commit/bce7e7562b

    * [ruby/reline] Add yamatanooroti rendering test

    https://github.com/ruby/reline/commit/f092519525

    * [ruby/reline] Rename test suite name of yamatanooroti test

    https://github.com/ruby/reline/commit/b0f32f5de4

    * [ruby/reline] Add a comment why rescue yamatanooroti loading error on the test

    https://github.com/ruby/reline/commit/2a8061daec

    * [ruby/irb] Suppress crashing when EncodingError has occurred without lineno

    https://github.com/ruby/irb/commit/13572d8cdc

    * [ruby/reline] Suppress error when check ambiguous char width in LANG=C

    https://github.com/ruby/reline/commit/623dffdd75

    * [ruby/io-console] Enable only interrupt bits on `intr: true`

    https://github.com/ruby/io-console/commit/baaf929041

    * [ruby/io-console] bump up to 0.5.4

    * [ruby/io-console] Update the minimum requirement of Ruby version

    https://github.com/ruby/io-console/commit/73e7b6318a

    * [ruby/io-console] Filter Ruby engine name rather than just /ruby/

    This breaks tests using this path on JRuby because the `jruby`
    executable turns into `jjruby` after the sub.

    https://github.com/ruby/io-console/commit/e5951aa34c

    * [ruby/io-console] bump up to 0.5.5

    * [ruby/io-console] Prefer keyword arguments

    https://github.com/ruby/io-console/commit/5facbfc4c8

    * [ruby/io-console] [DOC] Improved about `intr:`

    https://github.com/ruby/io-console/commit/82b630cd79

    * [ruby/io-console] Just ignore the extension on other than CRuby

    https://github.com/ruby/io-console/commit/41b6f09574

    * [ruby/io-console] bump up to 0.5.6

    Co-authored-by: KOBAYASHI Shuji <shuujii@gmail.com>
    Co-authored-by: Ben <kanobt61@gmail.com>
    Co-authored-by: Yusuke Endoh <mame@ruby-lang.org>
    Co-authored-by: MSP-Greg <MSP-Greg@users.noreply.github.com>
    Co-authored-by: Nobuyoshi Nakada <nobu@ruby-lang.org>
    Co-authored-by: Kenta Murata <mrkn@mrkn.jp>
    Co-authored-by: Lars Kanis <lars@greiz-reinsdorf.de>
    Co-authored-by: Lars Kanis <kanis@comcard.de>
    Co-authored-by: Alan Wu <XrXr@users.noreply.github.com>
    Co-authored-by: Hiroshi SHIBATA <hsbt@ruby-lang.org>
    Co-authored-by: Nobuhiro IMAI <nov@yo.rim.or.jp>
    Co-authored-by: Nick Lewis <nick@puppet.com>
    Co-authored-by: S-H-GAMELINKS <gamelinks007@gmail.com>
    Co-authored-by: Koichi Sasada <ko1@atdot.net>
    Co-authored-by: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
    Co-authored-by: Charles Oliver Nutter <headius@headius.com>

commit ecf874edea92796c63cc2b50b36b1179de5114c6
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-03-28 06:14:02 +0900

    * 2020-03-28 [ci skip]

commit 22c3014e36219b072fd6b1e963c4c64c7015a3cd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2020-03-03 20:54:31 +0900

    Suppress an "assigned but unused variable" warning

    (cherry picked from commit 501f2c44e6ae79c02a5c4d0f872fc7fa77258fcf)

commit 44f7e3883e49d287a96f7ef36b5c935d833300e5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-03-03 15:48:53 +0900

    Preserve `kwarg` flag and fix up f5c904c2a9

    (cherry picked from commit c8d0bf0156878df03a71fffc97c44abf7333d5d7)

commit aeda3a7f036aa7c768abffd1965972c658f49c22
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2020-03-02 22:37:04 +0900

    Suppress "assigned but unused variable" warnings

    (cherry picked from commit 65dd50fc25f6522536d5c4749055384bde1f9371)

commit 004c298738dc0924e7483b0c3f41c798dabe9e5b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-03-02 15:49:03 +0900

    Allow newlines inside braced pattern

    (cherry picked from commit f5c904c2a907013e22ff74bc3686952c5448d493)

commit 93aaa0bcce829b880d8f52a9168d17c93ecde85b
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2020-03-01 14:23:51 +0900

    Allow trailing comma in hash pattern

    (cherry picked from commit d25a4f413dce6ad3a8baaf61591415b9a8cce082)

commit 5ccf57f23eb7a35ac699edc2fc598c47fa1844a0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-03-25 22:00:15 +0900

    Make RbConfig::CONFIG values mutable [Bug #16738]

    As `RbConfig.expand` modifies the argument and involved `CONFIG`
    values, its values should be mutable.

    (cherry picked from commit 4adb2d655dcd54b28366b4d17e86b21e2b622cd1)

commit 7b5133801340cfa7e4e4e5dd61384cb90c3f6085
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2020-01-08 16:11:52 +0900

    Merge bundler-2.1.4

commit 572021c6e4e01c3b8ece90ad42fdd4ee71b8acc5
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-03-26 23:51:12 +0900

    * 2020-03-26 [ci skip]

commit c9a7643a7e5993975e7e8c985df157d73b16a490
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2020-03-21 15:46:33 +0900

    test/openssl/test_ssl.rb: ignore SSLError when the connection is closed

    "test_close_after_socket_close" checks if ssl.close is no-op even after
    the wrapped socket is closed.  The test itself is fair, but the other
    endpoint that is reading the SSL connection may fail with SSLError:
    "SSL_read: unexpected eof while reading" in some environments:

    https://github.com/ruby/ruby/actions/runs/60085389 (MinGW)
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/android28-x86_64/ruby-master/log/20200321T034442Z.fail.html.gz
    ```
      1) Failure:
    OpenSSL::TestSSL#test_close_after_socket_close [D:/a/ruby/ruby/src/test/openssl/utils.rb:299]:
    exceptions on 1 threads:
    SSL_read: unexpected eof while reading
    ```

    This changeset rescues and ignores the SSLError in the test.

    (cherry picked from commit be76e86e69106c6906322dc30aa75c3ff65da63c)

commit 897d4e31b0e5b29405480ed3236bc8c5c6cac3fa
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2020-03-07 03:55:54 +0900

    check ar_table first.

    RHASH_AR_TABLE_SIZE() has assertion that it is a ar_talbe.
    The last commit breaks this assumption so check ar_table first.

    (cherry picked from commit c3584dfacce4d0f2058d8403de6fdce4fd4d686b)

commit ab6f78bc926f6fc12dc8d7846056fc9c04d63ead
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2020-03-07 03:32:15 +0900

    check ar_table after `#hash` call

    ar_table can be converted to st_table just after `ar_do_hash()`
    function which calls `#hash` method. We need to check
    the representation to detect this mutation.
    [Bug #16676]

    (cherry picked from commit 4c019f5a626523e99e2827ed917802e3097c380d)

commit e4efca87ba1aa5b6a94b9007040ac3e783c26b43
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2020-03-26 01:16:50 +0900

    check flags passed to rb_nogvl()

    RB_NOGVL_UBF_ASYNC_SAFE is wrongly specified because flags
    is not checked.
    [Bug #15499] 23444302

    (cherry picked from commit ff98931daca1265e5bd33025d160c77e452c399e)

commit 2a3027b7b54a3118731f70c9e88aabbd495bb9fe
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2020-03-14 09:59:55 +0900

    Add missing write barrier for Hash#transform_values{,!}

    21994b7fd686f263544fcac1616ecf3189fb78b3 removed the write barrier that
    was present in rb_hash_aset(). Re-insert it to not crash during GC.

    [Bug #16689]

    (cherry picked from commit 713dc619f5372a645b66bef9dacee217c4101cb4)

commit 95c3bb6c426a11253644a86137bb67c542fd5799
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-03-16 17:26:10 +0900

    Do not make disabled directories at installation  [Bug #12392]

    (cherry picked from commit 8a6ba10f9dd456cf54de800203cf04bbe42271fb)

commit 1853efc46dba862c50df7710cfbacded999ae2ec
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-03-26 21:17:07 +0900

    Use power_assert 1.1.7

    Mainly for pry compatibility in test
    https://github.com/k-tsj/power_assert/commit/dcc14cbef48d9790187fa400a5df7531d81a5971

    Also include "Show full_message if available"
    https://github.com/k-tsj/power_assert/commit/53ce0400bf47f722830d6604be0a2e30cccabf34

commit 47b08728cf3d0441a3da4dc1dcdd578817b0e036
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2020-03-12 21:55:20 +0900

    [ruby/stringio] StringIO#initialize default to the source string encoding

    [Bug #16497]

    https://github.com/ruby/stringio/commit/4958a5ccab
    (cherry picked from commit e257c08f2ec27e2d66cdfa7e2415deb492522e22)

commit 3efbd527a86203406664a01126784a10eb136405
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2020-01-25 05:13:41 +0900

    Do not autosplat when calling proc with empty keyword splat

    With the removal of the splatted argument when using an empty
    keyword splat, the autosplat code considered an empty keyword
    splat the same as no argument at all.  However, that results
    in autosplat behavior changing dependent on the content of
    the splatted hash, which is not what anyone would expect or
    want.  This change always skips an autosplat if keywords were
    provided.

    Fixes [Bug #16560]

    (cherry picked from commit c1d8829ef515ee51fadeadd7dd022b5c47a71cdd)

commit c858a10ce87033beec63516fe6407b50c6539177
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-03-15 19:35:48 +0900

    * 2020-03-15 [ci skip]

commit a36ead3f4fe801ddaebe6d1ed905e9e3276dbac7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-02-29 16:58:33 +0900

    Prevent unloading methods used in root_fiber while calling another Fiber (#2939)

    Fixing SEGVs like:
    http://ci.rvm.jp/results/trunk-mjit-wait@silicon-docker/2744905
    http://ci.rvm.jp/results/trunk-mjit-wait@silicon-docker/2744420
    http://ci.rvm.jp/results/trunk-mjit-wait@silicon-docker/2741400
    [Bug #16664]

    (cherry picked from commit adcf0316d1ecedae2a9157ad941550e0c0fb510b)

commit 17e925b9917f4877f2da8c64316feb3ce1ca2932
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-02-29 16:20:44 +0900

    Avoid infinite loop on --jit-wait

    (cherry picked from commit a8dcab723316997d9e01c89d6df969edce75bdca)

commit c6944377d798e088042f2944b81aa3fa8a4e5411
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2020-02-03 20:29:37 +0900

    Fix SimpleDelegator respond_to? regression

    In 2.6, SimpleDelegator would always use the target `respond_to?`

    In 2.7.0 it doesn't if the target does not inherit from Object.

    This breaks compatibility for delegated objects that inherit
    from BasicObject and redefine `respond_to?`. [Bug #16606]

    (cherry picked from commit f2552216d43040cd42bbb9fd484eab6c70856fe6)

commit d07a6dc10efa71123b36a4a3ff7d2ec6e52804d7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-01-21 11:47:04 +0900

    delegate.rb: fixed keyword arguments in DelegateClass

    `Delegator.delegating_block` should delegate keyword arguments
    separately.  [ruby-core:96949]

    (cherry picked from commit 9bcf4f3db26249772c983896ebbc9ff41f4614db)

commit e70d52b0c377f8b2ed04311710c0ca9f4ebabd90
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2020-02-25 06:19:37 +0900

    Make ruby2_keywords methods correctly handle **{} optimization

    Previously, this code:

      ruby2_keywords def foo(*a) a.last end
      foo(**{})

    Returned an empty frozen hash.  However, the final hash should
    not be frozen in this case, as it wouldn't be if foo accepted
    a keyword splat.

    Use a new unfrozen empty hash instead of reusing the frozen empty
    hash in this case.

    Fixes [Bug #16642]

commit b3fabedc7043593812c9ad507b4648a55d74df99
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-03-14 20:27:57 +0900

    * 2020-03-14 [ci skip]

commit e7555d467b882fa8213f17643b00557ed420b640
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-31 16:20:17 +0900

    Drop MinGW build from AppVeyor

    in favor of #2791

    (cherry picked from commit b00418732c89ce42c1c4cef57d08344659fbdd2b)

commit 0d24fb774d84d4a99454ce10fd343da00049a588
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2020-03-09 23:57:16 +0900

    Don't display singleton class in Method#inspect unless method defined there

    Previously, if an object has a singleton class, and you call
    Object#method on the object, the resulting string would include
    the object's singleton class, even though the method was not
    defined in the singleton class.

    Change this so the we only show the singleton class if the method
    is defined in the singleton class.

    Fixes [Bug #15608]

    (cherry picked from commit e02bd0e713ef920e6d12c27f16548f48ec5c2cf0)

commit eabf35a5d298c68f45dc600477fc586d7b868788
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-02-10 12:15:48 +0900

    Fixed duplicated warning

    As `command_rhs` is always a "value expression", `command_asgn`
    does not need the same check. [Bug #16619]

    (cherry picked from commit 6e6844320de989cb88a154e2ac75066ccea1bba2)

commit fa48a26d886d86469a0075d91d152252e9fc0c8c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-02-24 15:33:50 +0900

    Fixed symbol misused as ID

    `rb_funcallv_public` and `rb_respond_to` require an `ID`, not a
    `Symbol`.  [Bug #16649]

    (cherry picked from commit 8b6e2685a4b7c7de905f7ed60c02ef85e0724754)

commit 3e7e1b965b06f3c843972d7e2f6e3d040374d67f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-02-18 14:34:26 +0900

    Pass keyword arguments to IOs properly [Bug #16639]

    (cherry picked from commit 041c2932e336b509b0ddc1fdbd9f160bce8d4893)

commit 2339be74e737b4c5f5330f845af2e7db0c7450e1
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2020-02-15 16:27:03 +0900

    lib/drb/drb.rb: Use ruby2_keywords for keyword separation

    [Bug #16634]

    (cherry picked from commit fb472ca7adbaceb35aae1b3a6b948720ffc9eb53)

commit c7e0ce67430b5e312eb626a2c2f4b6a810b3b68b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-02-04 15:21:49 +0900

    Add the loaded feature after no exception raised

    Retrying after rescued `require` should try to load the same
    library again.  [Bug #16607]

    (cherry picked from commit 7d6903dc476f982e7b432adbeef3a3d9372a309f)

commit 7518b4e945675df9aca223c30ca711e1d82341ec
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-03-13 22:31:29 +0900

    fix the order of definition

commit fcaa00e58fd3a4cbaa19c6558783b43ee324d19e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2020-03-07 20:42:44 +0900

    Use osuosl instead of GitHub releases

      Because the package provided by GitHub releases is different from sourceware.

    (cherry picked from commit 47a1872cd8b901b8aab6dedce7fa3807c97d290d)

commit 6a2d779027818eda418c9118f700b36816e833a5
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2020-03-07 19:57:28 +0900

    Switch to download libffi source package to github releases from sourceware.org

    [Bug #16681]
    (cherry picked from commit 86022167461dc90b70164e2bb23316959bbfd6ba)

commit 60d98fad86da1ada204c53789431ac0f5f3390ff
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-01-17 23:49:26 +0900

    [ruby/io-console] Set `OPOST` when `intr` is true

    To enable implementation-defined output processing, for the
    compatibility with readline.  [Bug #16509]

    https://bugs.ruby-lang.org/issues/16509

    https://github.com/ruby/io-console/commit/8c8b0b6757
    (cherry picked from commit 4e56ec4ef74cf77dbcb4ce7c669e0595cd0d12fa)

commit 9f504bb474770f1cac68988eac2a410e41c4bbb8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-02-09 16:56:40 +0900

    Separate objspace argument for rb_gc_disable and rb_gc_enable

    (cherry picked from commit aeaf0dc55595b8a5bfdd92007fb85ef13855c632)

commit 047dfbdf69e1a300109c729c66b6a761032402dd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-01-28 09:18:12 +0900

    Skip empty directories to install [Bug #16596]

    (cherry picked from commit 33d02e6bc7502c5a3f09c59908a8c9f08a474b8d)

commit 5bdbee96e479f714c7f9b6b98f012268cbd9051b
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-03-13 21:43:44 +0900

    Squashed commit of the following: [Backport #16516]

    commit c98c492578d898dc07a04b8240d8d5b1508ffafa
    Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
    Date:   Fri Jan 17 16:56:53 2020 +0900

        Added test for f38b3e8c707ebdcad05aa9485cf1760640b74fbb

    commit f38b3e8c707ebdcad05aa9485cf1760640b74fbb
    Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
    Date:   Thu Jan 16 18:34:31 2020 +0900

        Fixed the location of args node with numbered parameter

commit a9284ecb90176b4d8e9aa264da14ea08931be48f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-02-09 16:41:56 +0900

    Disable GC until VM objects get initialized [Bug #16616]

commit 215eb86a7729bf0db487f399031ad55a1062fada
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2020-01-15 22:40:01 +0900

    Increase the frozen_strings table initial size

    It was set to 1000 in a4a2b9be7a55bb61d17cf9673ed0d2a93bb52d31.

    However on ruby-2.7.0p0, there are much more than 1k frozen string right after boot:

    ```
    $ ruby -robjspace -e 'p ObjectSpace.each_object(String).select { |s| s.frozen? && ObjectSpace.dump(s).include?(%{"fstring":true})}.uniq.count'
    5948
    ```

commit 8a54630a6608d9b1a9d32db2ba33289a5454810d
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-03-13 21:32:13 +0900

    * 2020-03-13 [ci skip]

commit 3c93ed59773ca547239850d16f06451afbb0aeec
  Author: Adam Isom <adam.r.isom@gmail.com>
  Date:   2020-01-17 06:42:36 +0900

    Update documentation for Array/Hash Argument section of methods.rdoc

    [Bug #16514]

commit c3cd92582f970812be51310e377c82b6d9e7be92
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2020-02-20 00:13:44 +0900

    Use `brew upgrade` instead of `brew update`

commit 0149863dff42e0b7b6876cc3669aa3efcab6776e
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-02-20 16:36:30 +0900

    * 2020-02-20 [ci skip]

commit eaee631d5eda03f77ec39ec6fc1826a06ab06205
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-02-19 16:16:19 +0900

    Avoid jumping to a wrong destination

    when the next insn is already compiled by former branches.

commit ccc3b9119c39a6cb08a643ab3d15a9c07ec28b1a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-02-18 15:30:37 +0900

    * 2020-02-18 [ci skip]

commit 789c1df10a13a53d0504d4ba87c4e246692b1973
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-02-18 15:30:00 +0900

    increment teeny

commit 0643eb2e59dbd80f9be001c2ec77c980e8aeff3f
  Author: Ryuta Kamizono <kamipo@gmail.com>
  Date:   2020-01-19 12:49:40 +0900

    Fix typo s/test_ruby2_keywords_hash!/test_ruby2_keywords_hash/

    In #2818, `Hash.ruby2_keywords!` has renamed to `Hash.ruby2_keywords_hash`.

commit 9820f9ee0aaccd78e6e0489e8915d3925c6ee97c
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2020-01-06 18:22:43 +0900

    hash.c: Add a feature to manipulate ruby2_keywords flag

    It was found that a feature to check and add ruby2_keywords flag to an
    existing Hash is needed when arguments are serialized and deserialized.
    It is possible to do the same without explicit APIs, but it would be
    good to provide them as a core feature.

    https://github.com/rails/rails/pull/38105#discussion_r361863767

    Hash.ruby2_keywords_hash?(hash) checks if hash is flagged or not.
    Hash.ruby2_keywords_hash(hash) returns a duplicated hash that has a
    ruby2_keywords flag,

    [Bug #16486]

commit 420a88d3da6deb5f7d4d8e088cb3737b9a23d29d
  Author: git <svn-admin@ruby-lang.org>
  Date:   2020-02-13 15:23:02 +0900

    * 2020-02-13 [ci skip]

commit 78cbe7106b67d007ffdcc1276b352212eaaef4b2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-01-31 12:52:22 +0900

    Return the makefile content

    Block for `create_makefile` is expected to return the content of
    the makefile.

commit b8e62ccaecf49372833d7eeeb3fdfded4bb2f042
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-01-31 08:00:56 +0900

    Move .IGNORE in extconf.rb

commit a89821243da3c80e08bf46669e16ae46d687c80b
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-01-31 06:34:49 +0900

    Support nmake

commit a930174d798b58ee10493bf192d277ffe08518a7
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-01-31 02:46:05 +0900

    Ignore expected errors on compiling C++ source [Bug #16331]

    BSD make can run parallel more aggressively than GNU make. It communicate
    with other make process through -J option in MAKEFLAGS environment variable
    to notify a build failure happend in an other pararell make process.
    https://www.freebsd.org/cgi/man.cgi?make

    It usually works well but ext/-test-/cxxanyargs/Makefile has two targets
    which are expected to fail (failure.o and failurem1.o).

    Additional note:
    To test and debug this issue, following command will speed up it.
    `make -f exts.mk -j8 clean all`

commit 95ab9cd8f453099d7649dc0e0eec55ea891340f5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-02-11 15:52:25 +0900

    Restart timer thread even after preparation failed

    If the timer thread is left stopped, memory crash or segfault can
    happen. [Bug #16624]

commit 9c07f803db1c20241fa73e91a8a959d6cbb82e8b
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2020-01-30 13:36:47 +0900

    check ruby_2_7 branch

commit 49430aa4e5bf4020dbdb1cce3bc547cffad6ffae
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-01-19 11:02:18 +0900

    Allow rexml to fail on macOS of Github Actions

    And revert "Stop test-bundled-gems on macOS for now",
    28b290f7f4cb332dab3ddf3132e1916d413ea65c.

commit 30a9dc4aa9cb1985cfe5bd318b8b35dacc103127
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-01-19 09:48:33 +0900

    Stop test-bundled-gems on macOS for now

commit 095a937dc2c0924dbfda7f7625ac2921a10de231
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2020-01-17 17:25:05 +0900

    .github/workflows/cygwin.yml: Removed

    There is no active maintainer for cygwin.  The CI failure is too noisy.

    [Misc #16407]

commit 5eced3c030f39d10e193c5e33a70365d8e011bb1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-01-13 10:02:04 +0900

    Checkout with git on cygwin for EOL code

    `shell: bash` runs bash on msys which prefers git on msys too,
    then checked out in CRLF mode.  Cygwin sed doesn't consider the CR
    a part of EOL code, though.

commit 6ec6acd76ed7c718a469841afe4f32571e757c9d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2020-01-12 09:59:10 +0900

    Allow failures with rss tests on test-bundled-gems

commit 504b082f364e35516b2727c11713c28b684b5af0
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2020-01-11 16:24:16 +0900

    Add branch option to checkout on push

commit 5dc82455aef4a42817208e11fbfbcdc1351f0734
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-01-06 18:52:19 +0900

    Slightly change the job wording [ci skip]

    mame-san said it's weird

commit 7d4243254629004007a390f7f1afc4a570a1fd00
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-01-06 18:45:47 +0900

    Support running Actions on a fork

    Since 8c9450e7b875db846b19cc631af0d7fee66db5c6, we increased the chance
    to run GitHub Actions on a fork, as we usually use a topic branch
    instead of master when filing a pull request.

    This patch makes it possible to reuse the same GitHub Actions config on
    a fork repository.

commit bd48a28b1cb9848d194a82139d018f87dd689f99
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-01-06 18:42:30 +0900

    Directly refer to GitHub events

    instead of unnecessarily defining env vars

commit 48f82ad28961c0998b1d426493614875bb487d29
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-01-01 15:03:07 +0900

    Remove code to prevent double build on trunk

    trunk branch was deleted.

commit fdd9d7cd41cde130889d84414395da22706972c8
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-01-01 14:26:39 +0900

    More consistent failure notifications

    The format is the same as Travis / AppVeyor now.

commit 531bbec111d588ad497dd528eae3ac36e2af2632
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-01-01 08:27:40 +0900

    Make test run condition consistent with other jobs

    When `make all` fails, we should not run tests and output of such run is
    confusing.

commit 4d04b32986bb73bfd5d5e56bcd17cfa82c90885c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-01-01 03:24:00 +0900

    Run tests in the consistent order

    `make check` runs test -> test-all -> test-spec, and other CIs follow that too.

commit 24621f23e5cc9403910b82e671c2b299ec65bd67
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-01-01 02:37:03 +0900

    Fix an outdated comment

    We're actually using it for PR :p

commit e3dfd9f2b5729d4d8ac4541110af409ee218aadd
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2020-01-01 02:35:43 +0900

    Actions MinGW - fix test-all (#2803)

commit a24d2f3b8cf98d067f6648a0609b6251d3e0a464
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2020-01-01 02:34:29 +0900

    Use actions/checkout for PR (#2804)

commit 77dfa520d476143b8be6c4805354838012b4d335
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-31 18:49:08 +0900

    Official actions/checkout is useless

    It died again https://github.com/ruby/ruby/runs/368837347

commit 124878c6aad7c708d7121199bea29962713d319a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-31 16:46:17 +0900

    Make Slack notifications consistent

commit 110b4e974ddb74472a0eb3ce181705b47eb28d50
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-31 16:42:20 +0900

    There's no such target

commit 4d9f106eaefeee4b160d3c5580039c64ff9c01ae
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-31 16:30:34 +0900

    Make all Actions job names consistent

    like "{platform} / make ({make target}, ...)"

commit ca48fa8e81ca19f4d0c24017662245c933be86eb
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-31 16:23:25 +0900

    Do not doubly build on trunk

commit 44ef8af4fb0a793f020147e3f077cd061953c8fa
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-12-31 16:19:31 +0900

    MinGW on Actions (#2791)

    * MinGW - skip spec in spec/ruby/optional/capi/thread_spec.rb

    C-API Thread function rb_thread_call_without_gvl
          -- runs a C function with the global lock unlocked and unlocks IO with the generic RUBY_UBF_IO

    stops/freezes spec tests

    See https://bugs.ruby-lang.org/issues/16265

    * MinGW - skip test test/resolv/test_dns.rb

    Test times out in CI (both AppVeyor & Actions), cannot repo locally

    * MinGW - skip test test/ruby/test_thread_queue.rb

    * Add Actions mingw.yml

commit 6646c2b2ab7efd389075ad5f187b458c4bc138cc
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-31 16:09:24 +0900

    Revert "Remove TEST_BUNDLED_GEMS_ALLOW_FAILURES"

    This reverts commit 75e8dd58f69c190c9698d0133942032903fb2f07.

    We seem to randomly hit another issue these days:
    https://github.com/ruby/ruby/runs/368756135
    https://github.com/ruby/ruby/runs/368756191

commit 716e05b82338d75452e86c999ae3e5874a642ecd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-01-27 10:46:57 +0900

    Fixed a segfault `GC.verify_compaction_references`

    Which is by coercion of `Qundef`, when any keyword argument
    without `toward:` option is given.  [Bug #16598]

commit 52bb32d6b71365cb24273de3eed5a712206815f3
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-12-31 08:13:55 +0900

    Fix Proc#<< spec

    [Bug #16406]

commit db4d136889afbf59e69efcfd495fd91cd401f378
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2020-01-16 11:25:43 +0900

    `Regexp` in `MatchData` can be `nil`

    `String#sub` with a string pattern defers creating a `Regexp`
    until `MatchData#regexp` creates a `Regexp` from the matched
    string.  `Regexp#last_match(group_name)` accessed its content
    without creating the `Regexp` though.  [Bug #16508]

commit 8e8841f6bf58031a1fe5b0dbacb5a1fb442102df
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2020-01-13 03:36:47 +0900

    reload AR table body for transient heap.

    ar_talbe (Hash representation for <=8 size) can use transient heap
    and the memory area can move. So we need to restore `pair' ptr after
    `func` call (which can run any programs) because of moving.
    [Bug #16503]

commit 48f324e92f9b36edc267f9871e35039cbd1c2eb9
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2020-01-09 08:21:42 +0900

    lib/net/imap.rb: use `&blk` instead of Kernel#proc with no block

    [Bug #16488]

commit 580edc25aa00930bdb71b244d70a2007905f5fec
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2020-01-06 11:36:51 +0900

    script_compiled event on compile error.

    script_compiled event for TracePoint should not be invoked on
    compile error (SyntaxError) because it is not "compiled".
    [Bug #16459]

commit 647ee6f091eafcce70ffb75ddf7e121e192ab217
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 18:46:39 +0900

    [ruby/reline] Version 0.1.2

    https://github.com/ruby/reline/commit/b41024e317

commit 1341a279a4becd91f35b23eca6d129990eccc8bb
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 18:45:02 +0900

    Save last breaking point to complete

commit a52e364e6541a6e234718ac63aa7eb5c3f2c832f
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-25 18:02:53 +0900

    fix version regexp

commit ecbf7fe27ce444782f0a48fc41f8043a25078666
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-25 17:01:26 +0900

    fix typo

commit a65e8644fb97491314387e4138cabf6378a8e8d5
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-25 15:48:56 +0900

    v2.7.0p0

commit 75dca097b873222eaf3c70b7f43e3ffb98b7f2ed
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-25 14:13:15 +0900

    [bundler/bundler] Do `require "rubygems"` only when needed

    This require causes circular require.

    ```
    $ touch empty_file

    $ RUBYGEMS_GEMDEPS=empty_file ./local/bin/ruby -w -e ''
    /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems/core_ext/kernel_require.rb:92: warning: /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems/core_ext/kernel_require.rb:92: warning: loading in progress, circular require considered harmful - /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems.rb
            from <internal:gem_prelude>:1:in  `<internal:gem_prelude>'
            from <internal:gem_prelude>:1:in  `require'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems.rb:1417:in  `<top (required)>'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems.rb:1203:in  `use_gemdeps'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems/user_interaction.rb:47:in  `use_ui'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems.rb:1204:in  `block in use_gemdeps'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems/core_ext/kernel_require.rb:92:in  `require'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems/core_ext/kernel_require.rb:92:in  `require'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/bundler.rb:11:in  `<top (required)>'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/bundler.rb:11:in  `require_relative'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/bundler/rubygems_integration.rb:3:in  `<top (required)>'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems/core_ext/kernel_require.rb:92:in  `require'
            from /home/mame/work/ruby/local/lib/ruby/2.7.0/rubygems/core_ext/kernel_require.rb:92:in  `require'
    ```

    https://github.com/bundler/bundler/commit/c7c5bcea92

commit 27453b04c85249372950b6b12fabbef8c0d1a80b
  Author: Kenta Murata <mrkn@users.noreply.github.com>
  Date:   2019-12-25 15:21:50 +0900

    Update the version of bigdecimal to 2.0.0 (#2784)

  Notes:
    Merged-By: mrkn <mrkn@ruby-lang.org>

commit 56e002981fab73a94c6038cb9de82aba6ff84eb4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-25 14:47:31 +0900

    Show the error line only when same as the current

commit 9808e010907bb16068497d9f0f8593a7165fa42d
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-25 14:37:53 +0900

    export a function for MJIT.

    rb_iseq_complete() can be used by MJIT.

commit d9bf9c572f461c282fa6e65833e98bc7d453a66f
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-25 14:10:35 +0900

    take care of USE_LAZY_LOAD=1.

    On USE_LAZY_LOAD=1, the iseq should be loaded. So rb_iseq_check()
    is needed. Furthermore, now lazy loading with builtin_function_table
    is not supported, so it should cancel lazy loading.

commit 81e377023c490998a3fec245ca2fb2b3c710c2c6
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-25 13:35:22 +0900

    range.c: Range#min with a beginless one now raises an explicit exception

    [Bug #16450]

commit cd6c013b075c9c27437f30efcee9d4dd9e0ee1c5
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 12:55:31 +0900

    Add readline and readline-ext to default gems list in NEWS

commit 227c3d642631262acfbf140c566a7841c32b372f
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-25 12:06:02 +0900

    add ref to NEWS entry

commit 3345eab934073bdd8394ee8a46fc18954999af76
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-25 11:37:27 +0900

    NEWS: add a ticket reference

commit b9e35d27096290f9544dca685fb4cf5bd0e09397
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-25 11:31:44 +0900

    NEWS: add a ticket reference

commit e0929c44ddc7490dc97cabf12c7505173316a623
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-25 11:27:13 +0900

    NEWS: add ticket references

commit eb3f19b9b896094ae9754de1b48fed86fb35fe39
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-25 11:17:24 +0900

    update-bundled_gems: drop branch name on github [ci skip]

commit 00710d10761ad1aa752cf2c035e3bfbde40092b6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 10:47:53 +0900

    [ruby/readline] Version 0.0.2

    https://github.com/ruby/readline/commit/42b71f3fc0

commit e51a34511c9e4394467cde24deee19cf8536a3e7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 10:47:34 +0900

    [ruby/readline] Use a box to make easier to see the message

    https://github.com/ruby/readline/commit/e49e942053

commit 57c74841c7bc2bb2ffbb8ed89597e993116e26a8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 10:44:52 +0900

    [ruby/readline] Fix any wrong in messages

    https://github.com/ruby/readline/commit/a2cf437c8f

commit de0f4f2fd7620e2486f5aef031dad18324437c2b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 10:30:24 +0900

    [ruby/readline] Version 0.0.1

    https://github.com/ruby/readline/commit/d2363cad33

commit 5d20865708552a522d5eb39c4d9238f96693f8f2
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 10:25:15 +0900

    [ruby/readline] Add post_install_message

    https://github.com/ruby/readline/commit/03126372b5

commit 999a2819a75e40aec405e088d01b12eda341025d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 10:31:03 +0900

    [ruby/readline-ext] Version 0.1.0

    https://github.com/ruby/readline-ext/commit/f5abaf5be1

commit 246242700867ed3fdce8288897d74bd261379018
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 10:08:06 +0900

    [ruby/reline] Version 0.1.1

    https://github.com/ruby/reline/commit/923f97d068

commit ed5b4bae6a4f991a0c5299581bd0b137a98d3723
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 09:52:25 +0900

    The behavior of vi_end_of_transmission should be the same of vi_list_or_eof

commit 03c504ac59a2bf78bab925379e93184d81296e96
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-25 09:38:12 +0900

    Commented-out btest on cygwin environment of GitHub Actions

commit 622e47a1dbeee52fb218b816943b69cb88e17ae6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-25 09:29:46 +0900

    ^D on non-empty line in vi mode behaves like Enter

commit 8e6d51e09a93ae2c57d56105a5fd39fb92855394
  Author: Yuki Nishijima <yk.nishijima@gmail.com>
  Date:   2019-12-25 08:41:26 +0900

    Sync did_you_mean

commit 2b2be71cabf987effd2783747eedf573af1400cf
  Author: Yuki Nishijima <yk.nishijima@gmail.com>
  Date:   2019-12-25 08:23:59 +0900

    Add did_you_mean's promotion to the NEWS

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2782

commit 1857b4427817755bb0879ca67e1b2f3276f95d4c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-25 07:28:02 +0900

    Merge Bundler 2.1.2 from bundler/bundler.

    [Misc #16449][ruby-core:96458]

commit da0a0bae8b50087d140309b27eb4d4b4776c27e4
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-25 06:13:49 +0900

    NEWS: add meaning of "CoW" ("copy-on-write")

commit ceba5b70889666b82b80910a441cf4a92b5c7160
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-25 05:50:27 +0900

    [DOC] Fix typo in Time#inspect

commit f3067deb88badf8d15e49d13f082284f58b2c62b
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-12-25 04:54:20 +0900

    Revert "Add NEWS entry about Module#name performance (#2779)" (#2781)

    This reverts commit 3e9221d94a12b54c1285923b642364acdbc31c7e.

  Notes:
    Merged-By: XrXr

commit 3e9221d94a12b54c1285923b642364acdbc31c7e
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-12-25 04:02:50 +0900

    Add NEWS entry about Module#name performance (#2779)

  Notes:
    Merged-By: XrXr

commit 5220145ea289d9eb955b373f31773fab2d4f0271
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-25 01:32:37 +0900

    add debug_counter access functions.

    These functions are enabled only on USE_DEBUG_COUNTER=1.

commit 9b617ffa8884f9f80a0b1bdb89169d8139ba5001
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-25 01:00:40 +0900

    * 2019-12-25 [ci skip]

commit 3679023df822d8bf3f88b9b2e4b849318d2c409e
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-25 00:57:30 +0900

    [DOC] Fix typo and language

commit 8c017824c8eeffe11070ce69c914725af314d9f6
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-24 22:31:38 +0900

    Added entry for json-2.3.0

commit 1cd2ebed616473ed56730292879e8bc9d6dfd060
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-24 21:39:37 +0900

    Update the news entries for RubyGems and Bundler

commit 05b0410f91360e15511903580f0401b123f3abce
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 21:17:00 +0900

    [ruby/irb] Fix typo

    https://github.com/ruby/irb/commit/4bb1340687

commit 54083fd41bf876b42e1a97acdc7574c8edbb87ed
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 21:01:47 +0900

    [DOC] Fix grammar in Process module docs

commit 66e518f7b3e0bf307f86a51e6db02c3d1ec8df84
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 21:01:24 +0900

    [DOC] Fix typo

commit 4ba9347554ab1ac79fdaf1d5b3320776a2b10615
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 18:49:57 +0900

    `Object#=~` warning also obeys `Warning[:deprecated]`

commit a3c5dbf29191aa8622d8be7d990c4ac2f9392427
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 14:56:17 +0900

    Scale sleeping times to wait for the OS operations

commit 7758849cb5432ae974f616668f9c9bab415bb18a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-24 18:39:48 +0900

    Remove unused variable

commit 42e2a322f100c7c798fcfbcbbfe0b4cdaf3f5855
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-24 18:32:50 +0900

    The delete-char-or-list shows completed list when called at end of line

    It doesn't behave the same as the delete-char.

commit b03aea62abfbdc7c8ee53c30a27127c3c394a6ba
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 18:02:22 +0900

    NEWS: fix method references for Range#{cover?,include?}

commit 44a1f51695058159ff2f191c97a082bed9665137
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 17:49:22 +0900

    NEWS: improve sections for warning option / Warning

commit 27b4f477d960c75f3ff5cd5e045b307cad314ec7
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 17:03:42 +0900

    [DOC] Improve docs for Enumerator.produce, Enumerator.new

commit 81504e83e72bf125476528e5f119604d9697f682
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 15:47:59 +0900

    Synchronize with a Queue instead of sleeping

commit 47ad57f2450251f47b3f8e1f744d782269bbcdeb
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-24 15:38:46 +0900

    Revert "Scale sleeping times"

    This reverts commit e57d6194218efc73c30f3fed9dd321d2e357030b.

    Test fails:
    http://ci.rvm.jp/results/trunk-gc-asserts@ruby-sky1/2518563
    http://ci.rvm.jp/results/trunk-gc_compact@silicon-docker/2518533

commit c47106699cf2bcf426285efcd795223c200a3120
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 14:57:55 +0900

    NEWS: added references to warning option [ci skip]

commit e57d6194218efc73c30f3fed9dd321d2e357030b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 14:56:17 +0900

    Scale sleeping times

commit adf498b84f56e57b74b72a3ddcc512f6d2078cef
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 13:24:41 +0900

    Moved warning option section and added a reference [ci skip]

commit 302e896833bc611ba39c8697712313fd2dbd70cc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 13:12:28 +0900

    Added warning.rb to .document

commit 3739ddc36f462b794ec05c0cfc36458a8d1e17a7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 12:11:42 +0900

    Added `-W:experimental` to `--help` [Feature #16420]

commit d0f1eb3e4ef7cde2d78b493b3ba1561eee79b18f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 11:28:18 +0900

    Separated command line option in NEWS [ci skip]

commit 5a62fb1277fb351a1a11b89b0f8510c8f1a0cdff
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 11:14:13 +0900

    Mentioned `-W:` command option in NEWS [ci skip]

commit f2e1e6cba451375d8eb839bf2e7c9a39bccc044c
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-22 06:23:20 +0900

    Enhance explanations for beginless range and #clamp, and add missing feature

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2769

commit e954be14d07e54b8dbf71c0fa227e5818eaa01e6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 10:27:18 +0900

    Get rid of false positive misspellings

    [Bug #16437]

commit 992aa2cda50140abbca165024682eae998756e2d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-24 10:24:45 +0900

    enc/x_emoji.h: fixed dead-links [ci skip]

    English version pages seem no longer provided.

commit f09a4ff265093742c356c69bcf56db68bd6cf064
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-12-24 09:53:36 +0900

    Added NEWS for Feature 15373

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2777

commit 360f153fcaab637486aa2669d354d53e0eb1c3d2
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-24 10:23:38 +0900

    remove "experimental" from numbered parameter.

    Numbered parameter is not an experimental feature,
    confirmed by Matz.
    https://twitter.com/yukihiro_matz/status/1209271452798607361

commit 5e17834fc900a699241764ef0baacd53992d7f07
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-24 09:55:05 +0900

    [ruby/reline] Version 0.1.0

    https://github.com/ruby/reline/commit/55d4dfec1e

commit 8316b330fb04413bb480462941cb6b14c5352e2e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-24 09:54:38 +0900

    [ruby/irb] Version 1.2.1

    https://github.com/ruby/irb/commit/8da0c74640

commit 0e528ae9cb5c1078e4d07287e403cb548e97f0a3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-24 09:53:43 +0900

    [ruby/irb] Remove warning message to bundle on Ruby 2.7.0

    https://github.com/ruby/irb/commit/d9a7844f50

commit 0231661939310951c8ed339d8600a53a21015918
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 08:13:46 +0900

    [DOC] Fix wording in Math::E documentation

commit 30c5e8c4b9353dfb716033901cec7529eace3922
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-24 08:03:00 +0900

    [ruby/rdoc] Version 6.2.1

    https://github.com/ruby/rdoc/commit/c65e14d112

commit 2bf0743edcf6fd70cd73952e1e023821c4549a9e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-24 07:58:49 +0900

    Update parsers of RDoc that are generated by Racc

commit adc9b3ca7f4e75e368731fe8a7092ce078bcec04
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-24 07:41:37 +0900

    [ruby/rdoc] Support newline in the middle of constant definition

    https://github.com/ruby/rdoc/commit/74d3984324

commit e50e55269358520dc55595a9c3e074d351d96b66
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-24 07:00:35 +0900

    [ruby/rdoc] Treat Proc#call syntax sugar for constant correctly

    https://github.com/ruby/rdoc/commit/957d041ae0

commit 819b604037c317d2b53a1aaca67aef25da2d5ec9
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 16:34:16 +0900

    Reword keyword arguments warning messages to convey these are deprecation warnings

commit df6f5c44af1f261fa940ec3954468be8b820450e
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 06:41:58 +0900

    [DOC] Fix invalid code to make it syntax highlighted

commit a7b5018495c4a6b82d779958b086647226ce61e7
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 06:07:02 +0900

    [DOC] Use capitalized "Ruby"

commit ba9ccef81811e9387c0189d596189236b25d0dba
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-24 06:04:59 +0900

    [DOC] Various fixes in bug triaging guide

commit aa01441fd29be8be28644db7abac9f7940fcc814
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-24 04:17:11 +0900

    * 2019-12-24 [ci skip]

commit f201700051cc107b55c425bf331ce6d7ad3ef22b
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-24 04:16:40 +0900

    move a NEWS entry about inline method cache

commit 16fddfe352828d26aaa6cdbce696e62de04511ce
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-23 23:02:59 +0900

    [DOC] Improve readability of requirements for <=>

commit 9a42e0c7ed4dcc57043a8a35a50686625adba686
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-23 22:46:58 +0900

    NEWS: add reference for [Feature #14405]

commit de1a462454f4196490263c9be8be16a44513f5a0
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-23 22:45:24 +0900

    NEWS: revise grammar, language, markup, etc.

commit bbde77cd2694e87646842777e873d849bbf5703e
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-23 17:46:08 +0900

    NEWS: fix some typos, grammar, and language

commit 100fc2750b8f2c4dbe0aaa6c622bbf5f6d61e3c0
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-23 17:04:31 +0900

    fix wmap_finalize.

    wmap_finalize expects id2ref() returns a corresponding object
    even if the object is dead. Make id2ref_obj_tbl() for this
    purpose.

commit 9eeaae432b9a894e28e3906435f3d454d8fd025c
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-23 16:30:45 +0900

    add more debug counters to count numeric objects.

commit 7779ade48c2786992e41c0ab87761ab467f4be49
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 15:59:17 +0900

    NEWS: Fix issue reference [#15807] [DOC]

commit dadf1255b6e13578f888c239f0dc6fb201fd40bb
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 15:55:39 +0900

    README: Add Range#minmax to the list of potential incompatibilities [#15929] [DOC]

commit 3e1adf573110ddce8f900d9473dde7fa7de9c0e2
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 15:48:38 +0900

    README: Improve wording [DOC]

commit 7df2503b7770147a8589a594bf30726f733b1d86
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 15:37:45 +0900

    NEWS: Hint at potential incompatibility with Range#minmax [#15807]

commit a96f8cecc2488126d7298ea304da8bad3dde1792
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-23 15:02:14 +0900

    ObjectSpace._id2ref should check liveness.

    objspace->id_to_obj_tbl can contain dead objects because of lazy
    sweep, so that it should check liveness.

commit 672a61b97fe0cdb256611c707e7cc69856208467
  Author: Yuki Nishijima <yk.nishijima@gmail.com>
  Date:   2019-12-23 14:47:03 +0900

    Port https://github.com/ruby/did_you_mean/commit/dd1dd86e6c3188c36224d5dd4389676e6653a727

commit 92d0958257965adf426e6f6c654c5935a690bf5b
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-23 13:23:08 +0900

    FrozenError.new accepts :receiver instead of 2nd argument [ci skip]

    [ruby-core:96227] [Feature #16419]

commit 3142a6beb28db36dc9150f1ad6752cd1e19a8712
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-23 12:07:15 +0900

    Revert "Changed behavior on windows platforms too [ci skip]"

    This reverts commit 1bf8d5e9797f6304b2e27cb7f42d467f84de0ff4.

    Because 204dc3f39f12b4e2640555306bd1dd4530344277 reverts 61aff0cd189e67fa6f2565639ad0128fa33b88fc

commit 204dc3f39f12b4e2640555306bd1dd4530344277
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-12-23 11:54:25 +0900

    Revert "Should return "." for File.extname("file.") also on Windows"

    We want to introduce consistency and better compatibility with unixen,
    but the Windows APIs do not have consistency fundamentally and
    we can not found any logical way...

    This reverts commit 61aff0cd189e67fa6f2565639ad0128fa33b88fc.

commit 048f797bf019cdf303d70494fba63d4a4e606462
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 10:54:50 +0900

    [ruby/prime] Bump version

commit 446c243da35831de701ff6dd6c3c6da8252b6a10
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 09:44:43 +0900

    [ruby/ostruct] Bump version

commit 9be3295d53b6fd9f8a3ad8157aa0655b1976d8ac
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 09:40:32 +0900

    [ruby/ostruct] Create OpenStruct::VERSION

commit 49d94248ebfb7a51e342f8102d21ad132a40f91a
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 09:34:42 +0900

    [ruby/ostruct] Move gemspec

commit 48d1acdf25b13bd9e28bf6baa3f74ec082a27a00
  Author: Marc-Andre Lafortune <github@marc-andre.ca>
  Date:   2019-12-23 08:33:19 +0900

    [ruby/matrix] Bump version

commit 1ed87dd3c4fb085955bb3848579a3ed7aba38507
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-22 13:56:20 +0900

    Add NEWS about Warning.[] [Feature #16345] [ci skip]

commit 5de284ec78220e75643f89b454ce999da0c1c195
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-23 10:37:30 +0900

    Fixed a typo in an exception class name

commit 5f18635a800eee29fd051ea758a2ec561f090ebe
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-23 10:10:23 +0900

    make-snapshot: fixed mode

    "X" must be used in conjunction with "+".

commit 80d5d220b948517306e23b18260768ab8fe008bc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-23 08:42:53 +0900

    Fix typo in commit logs by log-fix notes

commit 4de2297d74fbc0a0e69ac8bcc2aad5b192fd11b6
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-23 09:07:07 +0900

    Re-apply f85e8d2a8b keeping characters < 80

commit f156f70b3192ddab41e432e743936a09a5aaae09
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-23 09:02:49 +0900

    Revert "Fixed misspellings"

    This reverts commit f85e8d2a8b2a37740334db4fd92ef820f05ddbc5.

    It violated the limit of width (> 80) and caused the test failure

commit f85e8d2a8b2a37740334db4fd92ef820f05ddbc5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-23 08:31:46 +0900

    Fixed misspellings

    Fixed misspellings reported at [Bug #16437]

commit a4b99f97642d31fc8ddd537155ff6cf61be6a43c
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-23 05:56:44 +0900

    Fix typos of previous docs PR

    In #2612 I made two typos (extra ,, and copy-pasted
    same line of code instead of showing two different
    ones), fixing them.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2771

commit c1bd1bf27236b33965dd92c1b2297edc91327cfb
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-14 01:59:23 +0900

    Document Module#const_source_location

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2750

commit ade6543f4cf7dfb1ab4585a1bfca20f3d64d5add
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-12-23 08:21:13 +0900

    Adjust sentence in doc [ci skip]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2773

    Merged-By: XrXr

commit bb05cdcd78b3e3d54f0ad9afc01de383ed33dc1c
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-23 06:36:14 +0900

    [DOC] Improve documentation for Enumerable#tally

commit 7c37f2cb1ad248a1db327f3522a8e3ffa5c5412f
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-23 03:46:24 +0900

    Some fixes in Enumerator::Lazy docs

    * fix list in #flat_map
    * fix wrong indentation in #filter_map and #with_index
    * other small fixes

commit 679bc4f9cb6a5471df903436c6240ca2157986dd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-08 21:04:46 +0900

    [ruby/reline] Use IO#raw to read one byte

    https://github.com/ruby/reline/commit/be17740e82

commit 3a18e43caac4ce31702c9b79de3b6e8af05ef173
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-23 00:17:25 +0900

    * 2019-12-23 [ci skip]

commit 1bf8d5e9797f6304b2e27cb7f42d467f84de0ff4
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-23 00:16:51 +0900

    Changed behavior on windows platforms too [ci skip]

    at 61aff0cd189e67fa6f2565639ad0128fa33b88fc [Bug #15267]

commit d339de9d1a11923cd6d435d995ee479d08791720
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-22 06:05:45 +0900

    Enhance docs for Module#deprecate_constant

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2768

commit 5a0102cb615f27f2daef8af6d9ae996926b2d167
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-22 05:58:14 +0900

    Enhance Range docs

    * Change === docs to mention it uses cover?
    * Add different example to === docs to showcase
      behavior better
    * Change include? docs to mention cover?
      and clarify the difference

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2768

commit 4988843188c7a1666b11e1390acd7b991941c3a8
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-22 05:37:35 +0900

    Actualize Time#inspect docs

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2768

commit 5fa9c2eeb04a2e44a2a028d933bc95f219a6a282
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-22 05:31:30 +0900

    Actualize Method#inspect docs

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2768

commit d78fcfb7ab351fd4861e42985db34e9bda3509a7
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-22 05:21:20 +0900

    Fix FrozenError#receiver and #initialize docs

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2768

commit e568bb5649a93c60aaa51c1e5308054079815bcc
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-22 05:17:35 +0900

    Update private visibility explanation

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2768

commit 03b983d54c17615e36d56d2937a685fc8c3f2cdb
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-12-21 05:51:22 +0900

    Document numbered block parameters

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2767

commit 890c834ec6bb03fab4fee6f5b14f99660a64d207
  Author: BurdetteLamar <burdettelamar@yahoo.com>
  Date:   2019-12-17 07:58:53 +0900

    Enhancements for ENV doc

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2757

commit 54be15f3256fd2dbb0d5d7962e9dfac2b87c797b
  Author: QuestionDriven <QuestionDriven@gmail.com>
  Date:   2019-12-17 16:11:02 +0900

    [Doc] Fix sample in Encoding#names

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2760

commit 9654241d5d5717b7cd6ddedb6c192e971f9d473a
  Author: QuestionDriven <QuestionDriven@gmail.com>
  Date:   2019-12-17 16:05:17 +0900

    [Doc] Fix wrong example in Encoding.aliases

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2760

commit cc87037f1c5a143af8089555e704505fcf0b2879
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-22 22:49:17 +0900

    Fixed misspellings

    Fixed misspellings reported at [Bug #16437], missed and a new
    typo.

commit 7c33ee5ddfafe737add2a7f4c4975108f9196dbd
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-12-22 19:39:22 +0900

    Move version guard outside to make it clear the method was added in Ruby 2.5

commit d76c8cfecdaa2960153b5b24ccd0d61f9af60abd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-22 15:18:22 +0900

    RDoc of Warning.[] and .[]= [Feature #16345] [ci skip]

commit d2ac6d4d9f57b34eeb94bd6302b54a632051ce64
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-22 14:45:42 +0900

    Manage deprecation warning by the flag

commit 58527a79263c6572bd4f97d0a0e0359c0ace6f3c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-22 13:52:59 +0900

    [ruby/io-console] bump up to 0.5.3

commit ced4c5dace63dcb5aabe4d9c480e02e7581b8816
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-22 11:40:07 +0900

    add NEWS about cache improvement [ci skip]

commit efd4a11ada731ce18f5eb1500c76f77b4d0f313f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-22 11:46:09 +0900

    Support multibyte input

commit cf59e1476d01be27dc88cbee5f6c6cf87f007043
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-22 06:28:13 +0900

    fix a thread test.

    * Use Queue for synchronization.
    * Don't use `sleep 0.2` and use `th.join` because created thread
      can raise an exception after 0.2 seconds.

commit fa1bf8ab37caad5fa0679adc0ecb8f6f5cec2eea
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-19 23:13:21 +0900

    [ruby/reline] Support Ctrl+right as em_next_word, and Ctrl+left as ed_prev_word

    https://github.com/ruby/reline/commit/e98ad3b486

commit 644336eef54c8ee2aeb7fd6c55fcd5620bcfa5b4
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-22 05:20:08 +0900

    add a NEWS entry for [Feature #16163]

commit 75acbd5f0076970d48bc423c2b058adbdb5da9e8
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-22 03:31:27 +0900

    compile.c: avoid newarraykwsplat for arguments

    `foo(*rest, post, **empty_kw)` is compiled like
    `foo(*rest + [post, **empty_kw])`, and `**empty_kw` is removed by
    "newarraykwsplat" instruction.
    However, the method call still has a flag of KW_SPLAT, so "post" is
    considered as a keyword hash, which caused a segfault.
    Note that the flag cannot be removed if "empty_kw" is not always empty.

    This change fixes the issue by compiling arguments with "newarray"
    instead of "newarraykwsplat".

    [Bug #16442]

commit 3a29f05ba5ba7ed4b821ba5f566eeb3ff3c5c3b1
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-22 01:39:17 +0900

    Move stats under a dict

commit 61aff0cd189e67fa6f2565639ad0128fa33b88fc
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-12-22 02:36:55 +0900

    Should return "." for File.extname("file.") also on Windows

    But not changes another cases, such as "file.rb."
    [Bug #15267]

commit 29ea228efc5af08a0e91fafe155617f20e22976b
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-22 01:58:02 +0900

    * 2019-12-22 [ci skip]

commit 0835a971ef84dfebefbc73ddd468450cbfb90974
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-18 22:57:25 +0900

    Remove TODO comment

commit 616f1357c3030fad73c42ea061a7f21b0df57fb5
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-14 16:14:43 +0900

    [ruby/irb] Make nesting level up for `1.times do`

    Follow up of the previous commit

    https://github.com/ruby/irb/commit/ab207353d3

commit a3cc2a2fbde23637fb924f75e977599b7a475118
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-14 16:07:21 +0900

    [ruby/irb] Fix auto-indent for `1.times do`

    Fixes #47

    https://github.com/ruby/irb/commit/6b8eca4635

commit ec1de789a98923417cf983cb3cdaed003c0f8be6
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-14 15:46:42 +0900

    [ruby/reline] Preserve the input buffer across cursor_pos

    The old version of cursor_pos discards the input buffer, which made IRB
    ignore the input immediately after IRB is invoked.

    This change keeps the input before cursor_pos by using ungetc.

    https://github.com/ruby/reline/commit/4a8cca331f

commit 7fd6077d9896cc10244fb9416ef87ae461c079db
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-14 11:01:49 +0900

    [ruby/reline] Consider Reline::ANSI.input at prep

    https://github.com/ruby/reline/commit/b111cde3c3

commit 85a337f986fe6da99c7f8358f790f17b122b3903
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-07-14 01:04:01 +0900

    Kernel#lambda: return forwarded block as non-lambda proc

    Before this commit, Kernel#lambda can't tell the difference between a
    directly passed literal block and one passed with an ampersand.

    A block passed with an ampersand is semantically speaking already a
    non-lambda proc. When Kernel#lambda receives a non-lambda proc, it
    should simply return it.

    Implementation wise, when the VM calls a method with a literal block, it
    places the code for the block on the calling control frame and passes a
    pointer (block handler) to the callee. Before this commit, the VM
    forwards block arguments by simply forwarding the block handler, which
    leaves the slot for block code unused when a control frame forwards its
    block argument. I use the vacant space to indicate that a frame has
    forwarded its block argument and inspect that in Kernel#lambda to detect
    forwarded blocks.

    This is a very ad-hoc solution and relies *heavily* on the way block
    passing works in the VM. However, it's the most self-contained solution
    I have.

    [Bug #15620]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2289

commit ddb6023d64a8c96348b4e67603753e2916a04f28
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-07-15 13:35:30 +0900

    Add spec for capturing Kernel#lambda with Kernel#method

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2289

commit e0b336c8ce84e1456fc6126ca232289667db3e19
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-07-15 12:41:43 +0900

    Add specs for calling into Kernel#lambda with super

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2289

commit ea405ee8ed00c03e0521ff4b852d8f3bea849243
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-21 10:06:14 +0900

    test/ruby/test_pattern_matching.rb: suppress "unused variable" warning

commit 9eded02446e34d4db1051f5f18c2d7d554e792d3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-12-21 03:47:56 +0900

    Add Array#minmax, Range#minmax, and Proc#ruby2_keywords to NEWS

commit 63ce77929ab0ebe992e91a1bad436a5d8e6488a9
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-21 00:07:13 +0900

    * 2019-12-21 [ci skip]

commit 484c1be8956b7bb7a0253c6d6c7a740c341487fa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 23:51:17 +0900

    Added `-W:experimental` command line option

    [Feature #16420]

commit 07e595fdbd75ed44473073cdf8cd758572d11709
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 23:48:15 +0900

    Added `experimental` warning category

    [Feature #16420]

commit dd7f0c87c9da8e695c38a6529deb6e0f24f6d06c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 23:36:19 +0900

    Hoisted out new_case3

commit a84ad24386d27269b90794146c2a351c1d79471b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 23:05:22 +0900

    Added -W: command line option

    To manage `Warning[category]` flags.  Only `-W:deprecated` and
    `-W:no-deprecated` are available now.  [Feature #16345]

commit 6876aa38f607cdd6fb24910e54143d9110d025c9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 22:50:46 +0900

    Added `FEATURE_SET_RESTORE` macro

commit 1fea3a7636cfaf25baba1e9f208c68a8a8ba52cc
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-20 21:37:46 +0900

    NEWS: Update the explanation of pattern matching

    Add an example of "<expr> in <pattern>", an example of
    NoMatchingPatternError, and mention that the slides are slightly
    obsolete.

commit f7aee584987e24768670e96b1455ed1193f91ef2
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-20 19:41:15 +0900

    vm_args.c: rephrase the warning message of keyword argument separation

    (old)
    test.rb:4: warning: The last argument is used as the keyword parameter
    test.rb:1: warning: for `foo' defined here; maybe ** should be added to the call?

    (new)
    test.rb:4: warning: The last argument is used as keyword parameters; maybe ** should be added to the call
    test.rb:1: warning: The called method `foo' is defined here

commit 2b2030f265e4ec0782de9c8dd9f8828a1a0af1b5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 15:05:10 +0900

    Refined the warning message for $, and $;

    [Bug #16438]

commit 7a94225e7d04f17ddd37433c3904b04fec97f281
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 14:54:44 +0900

    Refined the warning message for numbered-parameter like variables

    [Bug #16438]

commit a8bddb3a189545a2bef8ee7cffdb328d8de7974c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 14:29:42 +0900

    Refined the warning message for numbered-parameter like variables

    [Bug #16438]

commit 435a4ca2a38f3be1f5d2db0f71487a52c8285e9c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 14:14:07 +0900

    Makes the receiver to FrozenError.new a keyword parameter

    [Feature #16419]

commit 216b62aa87f069c51085e9f9abb548930370bc53
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-20 14:10:37 +0900

    use UTC to use previous day in midnight

commit e68999c82c4863d33a6f893661fba1b7538c5671
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 12:19:45 +0900

    Fixed misspellings

    Fixed misspellings reported at [Bug #16437], for default gems.

commit e672494cd737b8fea3a186aeb5c2c17d1a18cb96
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-20 11:50:32 +0900

    Merge RubyGems 3.1.2

commit fac60be324260cd834478fedf934e59b97935dbf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 09:39:50 +0900

    shell.rb is no longer bundled [ci skip]

commit db166290088fb7d39d01f68b9860253893d4f1a7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 09:19:39 +0900

    Fixed misspellings

    Fixed misspellings reported at [Bug #16437], only in ruby and rubyspec.

commit 2898367b3a1de00ca78067cc17dd4d1f8df37778
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 08:18:19 +0900

    Warn also numbered parameter like methods

commit 3816cd945d68eac7ca8fecbc9d71f878ff3e7b3d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-20 01:40:00 +0900

    Add `URI#open` to warning message

commit 844f1fada6f364dc26bd6eb6de2c4299a69e272a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-20 01:37:11 +0900

    * 2019-12-20 [ci skip]

commit 27ddb6e99848c397a415b785315896ab50308076
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-20 01:01:17 +0900

    Warn also numbered parameter like parameters

    [Feature #16433]

commit c6c67254fb17b3196a7b0d3fda4650f6b20a467d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 17:17:07 +0900

    Added rb_warn_deprecated

commit 7aa8a786740fd84bd718b0c055f190b25a8f0277
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 17:16:12 +0900

    Manage deprecation warnings about keyword argument

commit 9bf9de3d9d2f67bc401151fb94abf75b5eff5913
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 14:52:15 +0900

    Made the warning for deprecated constants follow the category flag

commit 76035e5bb6a5b44621fd1c11a0553780474d1c01
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-16 18:19:01 +0900

    Adjusted the format

commit e732e0074e53e7ddbaf863197ec3775d7e9d4516
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-19 02:08:51 +0900

    * 2019-12-19 [ci skip]

commit 1e88f6eb95672cae2b0628895a9ee9a5d384e048
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-12-18 10:26:11 +0900

    Refactor free page insertion

    I am trying to fix this error:

      http://ci.rvm.jp/results/trunk-gc_compact@silicon-docker/2491596

    Somehow we have a page in the `free_pages` list that is full.  This
    commit refactors the code so that any time we add a page to the
    `free_pages` list, we do it via `heap_add_freepage`.  That function then
    asserts that the free slots on that page are not 0.

commit efbc0d499c0dc5b74698418c76e58098c6c113e1
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-18 14:53:19 +0900

    Merge bundler-2.1.1 from bundler/bundler

commit fa7fa5c86b0674eca233922045e4d3dd4ee49cb7
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-18 13:03:54 +0900

    delete rb_vm_call()

    Nobody uses it any longer.

commit dcb603bbdbe3a8ea6f6d07198c8711cf9a44a4d2
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-18 12:57:46 +0900

    describe mc_miss_reuse_call [ci skip]

commit fcd8bafd086a7105b535ec1691f960e37d5c911b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-18 13:35:58 +0900

    Use a temporary file for chown test

    Errno::EROFS may occur when the source tree is placed in a
    read-only filesystem.

commit c147eeff7c2b8d4b8864c8be6496abf7f622a983
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-18 13:29:55 +0900

    [ruby/io-console] Skip Interrupt test on Linux

    Hangs up only in ruby/ruby on Travis-CI.

    https://github.com/ruby/io-console/commit/de39aa6dd6

commit f054f11a38f66af17a0aed8e0d2d46731eaab27d
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-17 15:49:41 +0900

    per-method serial number

    Methods and their definitions can be allocated/deallocated on-the-fly.
    One pathological situation is when a method is deallocated then another
    one is allocated immediately after that.  Address of those old/new method
    entries/definitions can be the same then, depending on underlying
    malloc/free implementation.

    So pointer comparison is insufficient.  We have to check the contents.
    To do so we introduce def->method_serial, which is an integer unique to
    that specific method definition.

    PS: Note that method_serial being uintptr_t rather than rb_serial_t is
    intentional.  This is because rb_serial_t can be bigger than a pointer
    on a 32bit system (rb_serial_t is at least 64bit).  In order to preserve
    old packing of struct rb_call_cache, rb_serial_t is inappropriate.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2759

commit 77e3078ede833e86a1ee0e2ce745b15e892bdbf6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-18 10:25:18 +0900

    [ruby/io-console] Set raw mode strictly same as cfmakeraw

    * Default VMIN and VTIME to minimum input.
    * Disable parity check bits explicitly.
    * Disable all bits for flow control on input.

    Co-Authored-By: NARUSE, Yui <naruse@airemix.jp>

    https://github.com/ruby/io-console/commit/5ce201a686

commit 254477248cde5bf82c4f256dca05b13d01c9774c
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-12-13 08:47:59 +0900

    Skip optimized method check for most method IDs

    Previously every time a method was defined on a module, we would
    recursively walk all subclasses to see if the module was included in a
    class which the VM optimizes for (such as Integer#+).

    For most method definitions we can tell immediately that this won't be
    the case based on the method's name. To do this we just keep a hash with
    method IDs of optimized methods and if our new method isn't in that list
    we don't need to check subclasses at all.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2752

commit 9245462499e7c3216a468aadccdc11e69de8cd54
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-12-13 15:43:00 +0900

    Replace debug test with assertion

    It's a Ruby bug if this ever happens check it as an assertion instead of
    paying the cost of the check every time.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2752

commit a01d22b8c16d9bd44767cced8d45398493af0a7c
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-12-12 08:47:49 +0900

    Check type with BUILTIN_TYPE in method cache clear

    We know that this is a heap-allocated object (a CLASS, MODULE, or
    ICLASS) so we don't need to check if it is an immediate value. This
    should be very slightly faster.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2752

commit 8e56d3a6ab7cc05be586010acd9f85384d53403a
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-12-13 09:42:34 +0900

    Define PREV_CLASS_SERIAL

    Avoids generating a "throwaway" sentinel class serial. There wasn't any
    read harm in doing so (we're at no risk of exhaustion and there'd be no
    measurable performance impact), but if feels cleaner that all class
    serials actually end up assigned and used (especially now that we won't
    overwrite them in a single method definition).

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2752

commit d7a50a5cc694ab28608a9d5a2e39c2766330ffe6
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-12-12 06:10:39 +0900

    Avoid revisiting seen nodes clearing method cache

    rb_clear_method_cache_by_class calls rb_class_clear_method_cache
    recursively on subclasses, where it will bump the class serial and clear
    some other data (callable_m_tbl, and some mjit data).

    Previously this could end up taking a long time to clear all the classes
    if the module was included a few levels deep and especially if there
    were multiple paths to it in the dependency tree (ie. a class includes
    two modules which both include the same other module) as we end up
    revisiting class/iclass/module objects multiple times.

    This commit avoids revisiting the same object, by short circuiting when
    revisit the same object. We can check this efficiently by comparing the
    class serial of each object we visit with the next class serial at the
    start. We know that any objects with a higher class serial have already
    been visited.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2752

commit 8a40dce0ff2964df22e06ae9a08f50592d17caf0
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-18 00:08:43 +0900

    * 2019-12-18 [ci skip]

commit bcec03af05649a8132f5e4e49c2c64762e60b605
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-18 00:08:21 +0900

    Revert "Skip interruptible raw mode test on Travis-CI"

    This reverts commit 65731a1330ed02691e3c343d2feeb8d0a72af3fd.

commit 07ed8f2f916a512b35bc69b49f1c482a2ea6e9dd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 23:26:07 +0900

    [ruby/io-console] Skip interrupt

    https://github.com/ruby/io-console/commit/8ed5a2bcc3

commit 905a926ea84e199478e32e6da5cd0e8d756132f1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 18:20:37 +0900

    [ruby/io-console] Timeout in the child process

    https://github.com/ruby/io-console/commit/b8411689a5

commit 4b7d27ca0de5e1294fa2072d948953ef49753fc5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 17:24:21 +0900

    [ruby/io-console] Use IO.console instead of STDIN

    https://github.com/ruby/io-console/commit/9e3ec5b936

commit 1b86309b04709ce0a64a9206ca638eccda9d4fec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 23:38:18 +0900

    Squelch filter-branch warning and sleeping

commit ffa7ceceaf7d9f0268db9021eb0df6f197dcb3c8
  Author: mihaibuzgau <mihai.buzgau@puppet.com>
  Date:   2019-12-17 19:47:15 +0900

    [rubygems/rubygems] Move `require uri` to source_list

    https://github.com/rubygems/rubygems/commit/c6b4df5bfc

commit 299db379575da122bc20745811fc1e20ba01f3ce
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-17 09:46:45 +0900

    Use while instead of loop

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2758

commit 9d3ffcfbfc742ed5053b59678dbf97773a7dddc1
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-17 20:22:00 +0900

    disable assertion.

    This assertion is not needed because we found the bug.
    ba11a74745.

commit 65731a1330ed02691e3c343d2feeb8d0a72af3fd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 17:18:42 +0900

    Skip interruptible raw mode test on Travis-CI

commit b226a68141bd60db4b14264cb579e3eab9b6bcbd
  Author: mihaibuzgau <mihai.buzgau@puppet.com>
  Date:   2019-12-16 21:42:34 +0900

    [rubygems/rubygems] require `uri` in source.rb

    https://github.com/rubygems/rubygems/commit/8de4d0272e

commit ea717d1ce1199bbd2e6532f1607bab6e1a1f9274
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-17 13:22:24 +0900

    convert macros into inline functions

    For better readability.

commit d616926af916d140f0bd1be3cdc232193d46286a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-17 14:20:51 +0900

    Remove an unnecessary variable

commit 8f52604b478fee5243080116b8e62f0c1f5cb9a0
  Author: Masataka Pocke Kuwabara <kuwabara@pocke.me>
  Date:   2019-12-09 00:48:13 +0900

    Remove unnecessary double bangs from Pathname#root?

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2732

commit 9421c7804191b73aa9fde8f14235b3a1f37ffd4b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-16 12:33:13 +0900

    [ruby/logger] Fixed leaked tempfile

    https://github.com/ruby/logger/commit/fb3eff153f

commit 4f9a4c1a8f6a31def5fdf58582f064cf644a5828
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-17 13:47:06 +0900

    Remove unnecessary branches

commit e36319249b1a9967a83e66df2661769c136594ad
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 13:57:58 +0900

    [ruby/io-console] bump up to 0.5.2

commit b39d5da97426c6f65e2b39b307ce19d774d93ddd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-14 19:15:02 +0900

    [ruby/io-console] Use TCSANOW to prevent from discarding the input buffer

    TCSAFLUSH discards the buffer read before the mode change, which makes
    IRB ignore the buffer input immediately after invoked.  TCSANOW
    preserves the buffer.

    https://github.com/ruby/io-console/commit/b362920182

commit 81eb2d16efcb29899e88e30a25ca5440195e2393
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-13 11:41:31 +0900

    [ruby/io-console] Disable implementation-defined special control characters

    In raw mode with interrupt enabled.

    https://github.com/ruby/io-console/commit/e9e8e3ff17

commit ec89a0f8033215817d9c6f9300d9513178e785b7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-13 12:14:10 +0900

    [ruby/io-console] Added the test for intr option

    https://github.com/ruby/io-console/commit/4f01db102d

commit a9d17af242748c160cb79909fd881e06141fe428
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 10:07:00 +0900

    [ruby/io-console] Removed dead code

    https://github.com/ruby/io-console/commit/a49462ed97

commit 64ce658ec5a6d6fc6eb969f607e703fd9372287a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-17 13:30:54 +0900

    Fix return condition according to the condition to skip

commit a1713bedb1de676fdd7d9bf3458b931c4702a1af
  Author: Thomas Leitner <t_leitner@gmx.at>
  Date:   2019-10-04 17:03:32 +0900

    [ruby/reline] Implement completion_append_character

    There is already the possibility to set Reline.completion_append_character.
    However, it is not used by the line editor.

    https://github.com/ruby/reline/commit/ab798931b9

commit 11db4d3a3b315ed2495ec0cdde4449554c002bff
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-14 11:05:16 +0900

    [ruby/reline] Disable any implementation-defined special control characters

    Including dsusp, lnext, and so on.

    https://github.com/ruby/reline/commit/a44abe586b

commit fbe229906b6e55c2e7bb1e68452d5c225503b9ca
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-17 13:14:52 +0900

    add debug counter to count `call` reusing cases.

commit 618d09115185efa05f6948247d86087f4aa96118
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-17 13:10:39 +0900

    Support change search direction

commit a14a0244b48c422e392547b198af6fb57f7ca568
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-17 12:47:09 +0900

    Support forward-search-history by C-s

commit c687be4bc01c9ce52ea990945d9304d6fe59fe9b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 11:53:30 +0900

    Added a test for [Bug #16159]

commit ebe5b66ca8e639468e14c4134a415403d949385e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-17 10:48:17 +0900

    Reduce tzset calls

    Set up-to-date flag always when calling tzset().

commit d6a2bce64a7fa1099e507e1d36b5f1533f42f60f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-17 10:31:20 +0900

    time.c (find_time_t): fix round-to-zero bug

    `find_time_t` did not work correctly for year older than the Epoch
    because it used C's integer division (which rounds negative to zero).

    For example, `TIme.new(1933)` returned a wrong time whose year is 1922
    in Asia/Kuala_Lumpur because there is no 00:00:00 1st Jan. 1933 in the
    time zone.

    ```
    $ TZ=Asia/Kuala_Lumpur ruby -e 'p Time.new(1933)'
    1932-12-31 00:00:00 +0700
    ```

    This change fixes the issue by using `DIV` macro instead of `/`.
    Now `Time.new(1933)` returns a time in 1933.

    ```
    $ TZ=Asia/Kuala_Lumpur ruby -e 'p Time.new(1933)'
    1933-01-01 00:20:00 +0720
    ```

    [Bug #16159]

commit 5da4a310ccf7f4131c1814a2c9279a5682777f1b
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-17 00:49:17 +0900

    close datasocket on stor of server side

commit 5be34d6a3310065850c0c530db6936415124b5d9
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-10 19:25:00 +0900

    ensure to close the data connection [Bug #16413]

commit 95213f6df6a23918d57a743975708c638da42aae
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-15 10:29:44 +0900

    Check whether Readline.completion_append_character= exists

commit b12bc3b0461f7331db6e27865fa7a8ef29a0f652
  Author: Eric Wong <normal@ruby-lang.org>
  Date:   2019-12-17 03:28:44 +0900

    thread.c: avoid needless read after select|ppoll

    We do not need to issue pipe|eventfd read(2) syscall
    unless select, ppoll|poll declares the FD needs reading.

commit bba6386d9568123a7c76693e3a5fa5e33562a640
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-17 00:44:32 +0900

    test/ruby/test_process.rb: suppress "unused variable" warning

commit c6b1342d29a71e44c0275516d4f8408ce07bf397
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-17 00:01:56 +0900

    * 2019-12-17 [ci skip]

commit 6a75a460536a32fb62184dc5d8d66ddd737a9bad
  Author: Richard Viney <richard.viney@gmail.com>
  Date:   2017-01-22 10:50:08 +0900

    Make prettyprints cycle detection aware of Delegator instances

    Fixes [Bug #13144]

    Co-Authored-By: Nobuyoshi Nakada <nobu@ruby-lang.org>

commit 251f5d8226dbde06ba06e980e3b741b45ae3826d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-16 23:39:10 +0900

    Revert "lib/net/http/response.rb: support raw deflate correctly"

    This reverts commit 5105240b1e851410020b3b3f1a2bead7ffdd4291.

    In RFC 2616:

    ```
       deflate
            The "zlib" format defined in RFC 1950 [31] in combination with
            the "deflate" compression mechanism described in RFC 1951 [29].
    ```

    So "Content-Encoding: deflate" means zlib format, not raw deflate.

    [Bug #11268]

commit 5105240b1e851410020b3b3f1a2bead7ffdd4291
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-16 23:20:42 +0900

    lib/net/http/response.rb: support raw deflate correctly

    Net::HTTP had used `Zlib::Inflate.new(32 + Zlib::MAX_WBITS)` for all
    content encoding (deflate, zlib, and gzip).
    But the argument `32 + Zlib::MAX_WBITS` means zlib and gzip decoding
    with automatic header detection, so (raw) deflate compression had not
    been supported.

    This change makes it support raw deflate correctly by passing an
    argument `-Zlib::MAX_WBITS` (which means raw deflate) to
    `Zlib::Inflate.new`.  All deflate-mode tests are fixed too.

    [Bug #11268]

commit d6fd39030d8b14eef117c1e5e265e0b769a9f4fd
  Author: BurdetteLamar <burdettelamar@yahoo.com>
  Date:   2019-12-14 04:46:54 +0900

    Enhancements for ENV doc

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2751

commit d8db343a21b175563fa58a7d33c600ae7c7973cc
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-16 20:47:02 +0900

    Merge RubyGems 3.1.1 and update the NEWS entry for RubyGems

commit ba11a74745e10fac88a74c2da2e0032ccf254265
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-16 17:38:41 +0900

    ensure cc->def == cc->me->def

    The equation shall hold for every call cache.  However prior to this
    changeset cc->me could be updated without also updating cc->def.  Let's
    make it sure by introducing new macro named CC_SET_ME which sets cc->me
    and cc->def at once.

commit 6545d5bbb9517a9364bd59a12a98d3e00516e07e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-16 16:59:23 +0900

    Use CDN instead of raw.githubusercontent.com

commit 8b921813aa8d5ea8f4e6c1e700ad48a120c500ab
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-16 16:58:21 +0900

    Fix open without close [ci skip]

commit 04e95f8985066b4ae1e97b045efda98bdefa07bd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-16 11:19:59 +0900

    Get rid of infinite recursion at loading transcoder

    Disable encoding US-ASCII path to filesystem on Windows too.
    [Bug #16392]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2755

commit d2f04d332f2ff04f25202ed38e23de526a9aea46
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-16 09:44:01 +0900

    Kernel#abort without arguments should print error info

    [Bug #16424]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2754

commit 1e80a208cc44cbbdd4e49d6146eea29cde5cd42a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-16 10:09:13 +0900

    Update the NEWS entry for Bundler 2.1.0

commit 2344d8ac9aefae6258b1967014d17564cf2d2e43
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-16 10:05:44 +0900

    * 2019-12-16 [ci skip]

commit f47c38245ff6976c5d1fc27a79f239bba00fc333
  Author: Breno Leitao <breno.leitao@gmail.com>
  Date:   2019-12-16 10:05:21 +0900

    gc.h: Add SET_MACHINE_STACK_END specific for Powerpc64 (#1767)

    Currently we are not able to grab the correct end/top of the stack on
    powerpc64 due to the fact that it uses the fallback function.

    The fallback function does not return the correct top of the stack
    because it adds a new frame and the returned top of the stack contains
    this frame overhead that could be something around 112 bytes on
    Powerpc64.

    This patch simply gets the correct top of the stack pointer, which is
    always on r1 register according to both ABI v1 and ABI v2 (Little
    endian).

    Signed-off-by: Breno Leitao <leitao@debian.org>

commit e8c62836a6292bf2f691de458b24ea50c51b452a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-15 23:13:16 +0900

    IO#set_encoding_by_bom should err when encoding is already set

    Except for ASCII-8BIT.  [Bug #16422]

commit eeb99fb52500b571b1239442a7d17d335cfde060
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-15 22:19:45 +0900

    tool/gen-mailmap.rb: odaira is removed as he is added in upstream

    https://github.com/ruby/ruby-commit-hook/commit/ddc83bea6fe6f4696e140b605db10ef0c922bba6

commit 48bab6fe1eb77b481bffbc97fdbf5ba74c45a07a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-15 21:59:30 +0900

    tool/gen-mailmap.rb: Added for generating git `.mailmap` file

    `.mailmap` can be used To show canonical names and email addresses.
    It is helpful for statistics of committers.

commit a83c46e3fd1e3480404c6dda4c4cda73533a6a1d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-15 20:03:47 +0900

    Add more debug info

    closed server doesn't have useful info.
    So call inspect before close.
    And add local debug code in comment.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-master/log/20191215T092405Z.fail.html.gz
    ```
      1) Failure:
    IMAPTest#test_connection_closed_without_greeting [/export/home/rubyci/chkbuild-tmp/tmp/build/20191215T092405Z/ruby/test/net/imap/test_imap.rb:483]:
    [Net::IMAP::Error] exception expected, not #<RuntimeError: {:e=>#<Errno::EINVAL: Invalid argument - connect(2) for [::1]:41748>, :server=>#<TCPServer:(closed)>, :port=>41748, :server_addr=>"::1"}>.
    ```

commit 980ddca47e892535c1da897b33ac7bc727efd52d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-15 16:48:40 +0900

    Prepare to release rubygems-3.1.0

commit 9f43160014905db159ec67e3ee2b485d870de05d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-12-14 22:15:43 +0900

    Delegate should be supported now

    Since `did_you_mean` dropped its dependency on it.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2753

commit 286cb3395f8be493b21d0bdf13bcf40fe5c3ab50
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-14 21:19:28 +0900

    Fixed test failures with gem command path on ruby core repo.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2753

commit 0fab9005387549d5c5b13cf330012d02e5312bc2
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-12-14 04:41:13 +0900

    Vendor thor 1.0.0

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2753

commit 38002a8adbd98266426940d829429a30af0622a4
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-14 19:49:16 +0900

    Prepare to release bundler-2.1.0

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2753

commit e2b192f7d5b4f0e2133bb6cf03cfc609258826be
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-15 14:47:36 +0900

    rand(beginless_range) raise Errno::EDOM instead of TypeError

    same as `rand(endless_range)`

    Before:
    ```
    $ ruby -e 'rand(..1)'
    Traceback (most recent call last):
            2: from -e:1:in `<main>'
            1: from -e:1:in `rand'
    -e:1:in `-': nil can't be coerced into Integer (TypeError)
    ```

    After:
    ```
    $ ruby -e 'rand(..1)'
    Traceback (most recent call last):
            1: from -e:1:in `<main>'
    -e:1:in `rand': Numerical argument out of domain (Errno::EDOM)
    ```

commit db2ea9b0c5fb49a04af1b299a37e92f81d7cccd2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-15 00:21:19 +0900

    [DOC] Fixed the class name in FrozenError#receiver

commit 38b9d213f1fc474549d7ca6858ed4f1d1436d1ee
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-15 00:18:09 +0900

    Revert "[DOC] Fixed the class name in FrozenError#receiver"

    This reverts commit 5f56a5fc9be9ea7b088795c2d3871c2352a020c2.
    `FrozenError.new(mesg, nil).receiver` should not raise an
    ArgumentError.

commit 52b1ba0b0242dc8b10b24df716ec439cd4b2bd88
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-15 00:15:23 +0900

    * 2019-12-15 [ci skip]

commit 5f56a5fc9be9ea7b088795c2d3871c2352a020c2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-14 23:57:44 +0900

    [DOC] Fixed the class name in FrozenError#receiver

commit 33f0ef44fde7b042d15056cea9af49d160268537
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-14 23:56:28 +0900

    [DOC] Fixed the FrozenError.new result [ci skip]

commit 9e0256836370d6294114320f1b5fa9b3b16b8ae2
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-12-14 20:26:30 +0900

    Improve highlighting in RubyVM::AbstractSyntaxTree docs when using `ri`

commit b4b22b9278007b106fe40c0191f8dcf5e7e8c0f2
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-12-14 20:16:58 +0900

    Clarify in the documentation that RubyVM::AbstractSyntaxTree is not stable API

    * See [Feature #14844].

commit 4cc83f9ac60d18ba330dc7f8e92eae1ffce67322
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-14 16:05:49 +0900

    [Feature #13083] is already reverted

commit 90cdcefa78ee9f3c7c78db2c5f3df0fdba25d83f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-14 16:05:15 +0900

    Update warnings in NEWS

commit e2708068ad65f7f9986adf4fb3a4fa660f430a5a
  Author: Yuki Nishijima <yk.nishijima@gmail.com>
  Date:   2019-12-14 11:39:58 +0900

    Drop delegate dependency

    Original comment:
      https://github.com/ruby/did_you_mean/commit/2f26c9ee770f28da0942c42cbc9e5800535b75e1

commit f3240eb67dc4c807f6489a8a5ccb6eeec239efe5
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-12-14 06:07:59 +0900

    NEWS: fix pattern matching example

commit 835703c69f2b1b770b1e3c8c9dd73aca4ed734e6
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-14 00:40:25 +0900

    * 2019-12-14 [ci skip]

commit 84b873e381c6928965e36d0a83c899a01b65e646
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-13 14:35:11 +0900

    [ruby/irb] Restore environment variables

    https://github.com/ruby/irb/commit/236590882c

commit ab1f3d63b0b08fcb8e90557a0d8d72e624221557
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-13 22:10:28 +0900

    Fixed a typo

commit 2ef5f012c1d1dcef18d3c4c56d0d07fc72362be7
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-13 22:00:28 +0900

    Added explicitly loading `Gem::Command` class

commit eb512c5a9530322280991441954b0405cadeebf1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-13 21:38:50 +0900

    warn should be a global function

commit a2e87123499f6eef9c03089f61f174dd4b3cc673
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-13 20:51:58 +0900

    Fix visibility as module_function

commit 6183addf6a4b94db7fe5b9187ac66fa11c8d2825
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 18:34:49 +0900

    Add `Warning.[]` and `Warning.[]=`

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2739

commit f3b1b645edfc5a8c938da74a5ed44564b9e2fc08
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 20:54:01 +0900

    Create backtrace location array directly

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2739

commit 0b5268afbcf11c299e11102c366e836ae55cc39f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 20:22:42 +0900

    Moved Kernel#warn to warning.rb

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2739

commit 82cc2843a92b286cc13afd0860a4e111d4ea2a0b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-13 20:19:08 +0900

    Prepare to release RubyGems 3.1.0 final version.

commit 26774351dc5f494253ba031e4bc453dc4dddb2cf
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-13 18:06:36 +0900

    Ignore error of `apt-get update` in MJIT workflow too

commit d5c73681f8fd9e17b5378cb029fc88e98d7b6abb
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-13 18:04:21 +0900

    Ignore error of `apt-get update` on GitHub Actions

commit 97a17a51b8e6eca31fd6421511f1907e6e95b415
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-13 17:26:12 +0900

    readable function names for inline functions.

    Now, C functions written by __builtin_cexpr!(code) and others are
    named as "__builtin_inline#{n}". However, it is difficult to know
    what the function is. This patch rename them into
    "__builtin_foo_#{lineno}" when cexpr! is in 'foo' method.

commit 1140625cd31f7ad74c42dc625b9dab389b12653c
  Author: Matt Valentine-House <matt@eightbitraptor.com>
  Date:   2019-12-12 22:37:31 +0900

    Allow more than one major version number in target_os

commit c2dfc6d869979124a46fb0c5404956891c27575f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-13 03:57:32 +0900

    Show a menu before a document

    IRB should show a menu first if a completed list has plural items. But just
    shows document without menu if a completed list with plural items includes a
    perfect matched item. The behavior is a bug. This commit fixes it.

commit b8d6c883b3f49e6339da4fa5111dbdbe7d3c6df5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-13 08:52:07 +0900

    Improved the test for Thread#inspect [Feature #16412]

commit fa5f7a8f7ef0d03b8ac97d25a0460c0dc6bb33f3
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-13 00:05:20 +0900

    * 2019-12-13 [ci skip]

commit 69b6f8fd047c5c9e0fa6f65656fda762f8ecfc5e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-13 00:04:01 +0900

    Check whether TestReadline is defined

commit 93b27c69cc65b5019df061bb8fefaa097bf8a33d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-12 23:26:29 +0900

    Show the failed message too

commit 68321dd1fa6f55e578bc9776f906ee1f948c7095
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-12 22:04:07 +0900

    Move `rescue` for debug into block of assert_raise

commit dd60856f8ddaa0652bf019589f05705e00279b8c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-12 20:53:59 +0900

    [cygwin] fix File.absolute_path? test

    Paths start with the root are absolute on cygwin, regardless the
    drive letter.

commit b6f25318c5a1efca0ab963b49ae69db82787e783
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-12 20:50:01 +0900

    Cygwin path cannot be mapped to a UNC as-is

commit c20dd2f75491fc6e78dab55b492c507ee3bb670d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-12 17:38:27 +0900

    Add more debug info when Errno::EINVAL

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-master/log/20191212T072406Z.fail.html.gz

commit 54e089df9e37d438687effd092feda2442116c62
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-12 17:02:36 +0900

    show self on control frame dump.

    control frame detailed info on RUBY_DEBUG=ci should also show
    self information.

commit 55b7ba368696033f2e89b77cbcd4a05dec97b139
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-22 05:59:36 +0900

    Make super in instance_eval in method in module raise TypeError

    This makes behavior the same as super in instance_eval in method
    in class.  The reason this wasn't implemented before is that
    there is a check to determine if the self in the current context
    is of the expected class, and a module itself can be included
    in multiple classes, so it doesn't have an expected class.

    Implementing this requires giving iclasses knowledge of which
    class created them, so that super call in the module method
    knows the expected class for super calls.  This reference
    is called includer, and should only be set for iclasses.

    Note that the approach Ruby uses in this check is not robust. If
    you instance_eval another object of the same class and call super,
    instead of an TypeError, you get super called with the
    instance_eval receiver instead of the method receiver.  Truly
    fixing super would require keeping a reference to the super object
    (method receiver) in each frame where scope has changed, and using
    that instead of current self when calling super.

    Fixes [Bug #11636]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2717

commit 1a4a9bdb5da973f8a89e699ce6d0fb1ca21090bd
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-12 13:59:52 +0900

    proper initialization of struct RVALUE

    This changeset makes no difference unless GC_DEBUG is on.  When that flag is
    set, struct RVALUE is bigger than struct RObject.  We have to take care of the
    additional fields.  Otherwise we get a SIGSEGV like shown below.

    The way obj is initialized in this patch works for both GC_DEBUG is on and off.
    See also ISO/IEC 9899:1999 section 6.7.8 paragraph #21.

    ```
    Program received signal SIGSEGV, Segmentation fault.
    __strlen_avx2 () at ../sysdeps/x86_64/multiarch/strlen-avx2.S:62
    62      ../sysdeps/x86_64/multiarch/strlen-avx2.S: No such file or directory
    (gdb) bt
    #0  __strlen_avx2 () at ../sysdeps/x86_64/multiarch/strlen-avx2.S:62
    #1  0x00005555557dd9a7 in BSD_vfprintf (fp=0x7fffffff6be0, fmt0=0x5555558f3059 "@%s:%d", ap=0x7fffffff6dd0) at vsnprintf.c:1027
    #2  0x00005555557db6f5 in ruby_do_vsnprintf (str=0x555555bfc58d <obj_info_buffers+1325> "", n=211, fmt=0x5555558f3059 "@%s:%d", ap=0x7fffffff6dd0) at sprintf.c:1022
    #3  0x00005555557db909 in ruby_snprintf (str=0x555555bfc58d <obj_info_buffers+1325> "", n=211, fmt=0x5555558f3059 "@%s:%d") at sprintf.c:1040
    #4  0x0000555555661ef4 in rb_raw_obj_info (buff=0x555555bfc560 <obj_info_buffers+1280> "0x0000555555d2bfa0 [0     ] T_STRING (String)", buff_size=256, obj=93825000456096) at gc.c:11449
    #5  0x000055555565baaf in obj_info (obj=93825000456096) at gc.c:11612
    #6  0x000055555565bae1 in rgengc_remembered (objspace=0x555555c0a1c0, obj=93825000456096) at gc.c:6618
    #7  0x0000555555666987 in newobj_init (klass=93824999964192, flags=5, v1=0, v2=0, v3=0, wb_protected=1, objspace=0x555555c0a1c0, obj=93825000456096) at gc.c:2134
    #8  0x0000555555666e49 in newobj_slowpath (klass=93824999964192, flags=5, v1=0, v2=0, v3=0, objspace=0x555555c0a1c0, wb_protected=1) at gc.c:2209
    #9  0x0000555555666b94 in newobj_slowpath_wb_protected (klass=93824999964192, flags=5, v1=0, v2=0, v3=0, objspace=0x555555c0a1c0) at gc.c:2220
    #10 0x000055555565751b in newobj_of (klass=93824999964192, flags=5, v1=0, v2=0, v3=0, wb_protected=1) at gc.c:2256
    #11 0x00005555556575ca in rb_wb_protected_newobj_of (klass=93824999964192, flags=5) at gc.c:2272
    #12 0x00005555557f36ea in str_alloc (klass=93824999964192) at string.c:728
    #13 0x00005555557f2128 in rb_str_buf_new (capa=0) at string.c:1317
    #14 0x000055555578c66d in rb_reg_preprocess (p=0x555555cc8148 "^-(.)(.+)?", end=0x555555cc8152 "", enc=0x555555cc7c80, fixed_enc=0x7fffffff74e8, err=0x7fffffff75f0 "") at re.c:2682
    #15 0x000055555578ea13 in rb_reg_initialize (obj=93825000046736, s=0x555555cc8148 "^-(.)(.+)?", len=10, enc=0x555555cc7c80, options=0, err=0x7fffffff75f0 "", sourcefile=0x555555d1a5c0 "lib/optparse.rb", sourceline=1460) at re.c:2808
    #16 0x000055555578e285 in rb_reg_initialize_str (obj=93825000046736, str=93825000046904, options=0, err=0x7fffffff75f0 "", sourcefile=0x555555d1a5c0 "lib/optparse.rb", sourceline=1460) at re.c:2869
    #17 0x000055555578ee02 in rb_reg_compile (str=93825000046904, options=0, sourcefile=0x555555d1a5c0 "lib/optparse.rb", sourceline=1460) at re.c:2958
    #18 0x0000555555748dfb in rb_parser_reg_compile (p=0x555555d1f760, str=93825000046904, options=0) at parse.y:12157
    #19 0x00005555557581c3 in parser_reg_compile (p=0x555555d1f760, str=93825000046904, options=0) at parse.y:12151
    #20 0x00005555557580ac in reg_compile (p=0x555555d1f760, str=93825000046904, options=0) at parse.y:12167
    #21 0x0000555555746ebb in new_regexp (p=0x555555d1f760, node=0x555555dece68, options=0, loc=0x7fffffff89e8) at parse.y:10072
    #22 0x000055555573d1f5 in ruby_yyparse (p=0x555555d1f760) at parse.y:4395
    #23 0x000055555574a582 in yycompile0 (arg=93825000404832) at parse.y:5945
    #24 0x00005555558c6898 in rb_suppress_tracing (func=0x55555574a470 <yycompile0>, arg=93825000404832) at vm_trace.c:427
    #25 0x0000555555748290 in yycompile (vparser=93824999283456, p=0x555555d1f760, fname=93824999283624, line=1) at parse.y:5994
    #26 0x00005555557481ae in rb_parser_compile_file_path (vparser=93824999283456, fname=93824999283624, file=93824999283400, start=1) at parse.y:6098
    #27 0x00005555557cdd35 in load_file_internal (argp_v=140737488331760) at ruby.c:2023
    #28 0x00005555556438c5 in rb_ensure (b_proc=0x5555557cd610 <load_file_internal>, data1=140737488331760, e_proc=0x5555557cddd0 <restore_load_file>, data2=140737488331760) at eval.c:1128
    #29 0x00005555557cb68b in load_file (parser=93824999283456, fname=93824999283624, f=93824999283400, script=0, opt=0x7fffffffa468) at ruby.c:2142
    #30 0x00005555557cb339 in rb_parser_load_file (parser=93824999283456, fname_v=93824999283624) at ruby.c:2164
    #31 0x00005555556ba3e1 in load_iseq_eval (ec=0x555555c0a650, fname=93824999283624) at load.c:579
    #32 0x00005555556b857a in require_internal (ec=0x555555c0a650, fname=93824999284352, exception=1) at load.c:1016
    #33 0x00005555556b7967 in rb_require_string (fname=93824999284464) at load.c:1105
    #34 0x00005555556b7939 in rb_f_require (obj=93824999994824, fname=93824999284464) at load.c:811
    #35 0x00005555558b7ae0 in call_cfunc_1 (recv=93824999994824, argc=1, argv=0x7ffff7ecd0a8, func=0x5555556b7920 <rb_f_require>) at vm_insnhelper.c:2348
    #36 0x00005555558a8889 in vm_call_cfunc_with_frame (ec=0x555555c0a650, reg_cfp=0x7ffff7fccfa0, calling=0x7fffffffaab0, cd=0x555555d76a10, empty_kw_splat=0) at vm_insnhelper.c:2513
    #37 0x000055555589fb5c in vm_call_cfunc (ec=0x555555c0a650, reg_cfp=0x7ffff7fccfa0, calling=0x7fffffffaab0, cd=0x555555d76a10) at vm_insnhelper.c:2538
    #38 0x000055555589f22e in vm_call_method_each_type (ec=0x555555c0a650, cfp=0x7ffff7fccfa0, calling=0x7fffffffaab0, cd=0x555555d76a10) at vm_insnhelper.c:2924
    #39 0x000055555589ef47 in vm_call_method (ec=0x555555c0a650, cfp=0x7ffff7fccfa0, calling=0x7fffffffaab0, cd=0x555555d76a10) at vm_insnhelper.c:3038
    #40 0x0000555555866dbd in vm_call_general (ec=0x555555c0a650, reg_cfp=0x7ffff7fccfa0, calling=0x7fffffffaab0, cd=0x555555d76a10) at vm_insnhelper.c:3075
    #41 0x00005555558ae557 in vm_sendish (ec=0x555555c0a650, reg_cfp=0x7ffff7fccfa0, cd=0x555555d76a10, block_handler=0, method_explorer=0x5555558ae5d0 <vm_search_method_wrap>) at vm_insnhelper.c:4021
    #42 0x000055555587745b in vm_exec_core (ec=0x555555c0a650, initial=0) at insns.def:801
    #43 0x0000555555899b9c in rb_vm_exec (ec=0x555555c0a650, mjit_enable_p=1) at vm.c:1907
    #44 0x000055555589aaf0 in rb_iseq_eval_main (iseq=0x555555c1da80) at vm.c:2166
    #45 0x0000555555641f0b in rb_ec_exec_node (ec=0x555555c0a650, n=0x555555c1da80) at eval.c:277
    #46 0x0000555555641d62 in ruby_run_node (n=0x555555c1da80) at eval.c:335
    #47 0x000055555557a188 in main (argc=11, argv=0x7fffffffc848) at main.c:50
    (gdb) fr 7
    #7  0x0000555555666987 in newobj_init (klass=93824999964192, flags=5, v1=0, v2=0, v3=0, wb_protected=1, objspace=0x555555c0a1c0, obj=93825000456096) at gc.c:2134
    2134        if (rgengc_remembered(objspace, (VALUE)obj)) rb_bug("newobj: %s is remembered.", obj_info(obj));
    (gdb) p ((struct RVALUE*)obj)->file
    $1 = 0x65a5992b0fb25ce7 <error: Cannot access memory at address 0x65a5992b0fb25ce7>
    (gdb)
    ```

commit 35eb12c06397e770392a41343cbffc4b204e15c9
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-12 12:39:24 +0900

    add casts

    %p is for void *.  Because fprintf is a function with variadic arguments
    automatic cast from any pointer to void * does not work.  We have to be
    explicit.

commit f40143fe7c55e3b2209f57e7ec4b3ad1d9468a1e
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-12 12:37:58 +0900

    fix arity mismatch

    I missed this in bc3e7924bc66d3ef77b219c72f3e59cc154550a3 because the
    function is inside of a #ifdef.

commit 12de92a3682f7a54941c511e6394068df2adefb3
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-12 11:11:39 +0900

    implement make test-all TESTS=--gc-compact

    79eb5e1acac2339c6ec71db723298bdfcd92b233 implemented
    RUBY_TEST_GC_COMPACT=1 so why not make it also possible via the command
    line argument.

commit 53e8589c69d1345235d9f02ecbcf6aa32fa9d39c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-12 09:14:09 +0900

    Import json-2.3.0 from flori/json

commit 7d991a0571ab33f44c00fdc227f076d1eaf5fb2b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-12 08:40:44 +0900

    Suppress to crash IRB if completed list has nil

commit 50ae8895f32f5fc620f0a0f288dae62815cb2a6f
  Author: Rei Odaira <rodaira@us.ibm.com>
  Date:   2019-12-12 04:31:38 +0900

    debug_counter.c: include ruby/config.h before stdio.h
    to define _LARGE_FILES

commit 27ac034f196967f54edf00474880886624d30245
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-12 04:26:03 +0900

    support gc_compact_checker on parallel test.

commit 7dbbba38a0a6acd41a43eb0c4fc416fe35e2345a
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-12 09:13:02 +0900

    Make sure we don't push MOVED or NONE on the stack

commit 79eb5e1acac2339c6ec71db723298bdfcd92b233
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-12 03:31:13 +0900

    call GC.compact after each test.

    RUBY_TEST_GC_COMPACT=1 enables GC.compact checker which calls
    GC.compact after each test.

commit 51cc5a26df5f47ecdd88398ba1a50a8e62182649
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-12 03:18:44 +0900

    Some tests failed with before GNU Readline 6.0 on Windows

commit fe4502336680270d886b502e4b35ecb3de2f2164
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-12 03:13:32 +0900

    * 2019-12-12 [ci skip]

commit 0f90630983db3257c544c698761a00456af81d85
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-12-12 03:12:14 +0900

    Update method tables only if there is a class ext pointer

    This makes reference updating look similar to marking, and may avoid
    dereferencing a wrong pointer.

commit cae657c32492a9b4e72b5e290c143e2c84d4c42d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-11 21:54:18 +0900

    Fix .travis.yml to keep s390x-linux as allow_features

    [Misc #16360]

commit 47a365dd580f2dfe0f0d56155587dfdf2fc7afb7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-11 20:44:39 +0900

    Move s390x-linux to allow_failures matrix

    ref [Misc #16360]

commit 49ffae7ca66f3e0bc3e2d87092197d3514d5925e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-12-02 12:59:07 +0900

    [ruby/forwardable] Bump version to 1.3.1

    https://github.com/ruby/forwardable/commit/aa07c55f3f

commit 0dcd3340fb5f91112ce66c53315eff92b9f10fb7
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-12-02 12:57:06 +0900

    [ruby/forwardable] Make def_*_delegator return name of method defined (Fixes #10)

    This restores compatibility with previous versions.  This behavior
    was previously undefined, but it makes sense for the name of the
    defined method to be returned.

    https://github.com/ruby/forwardable/commit/a52ef3451e

commit c2f6aa4e4810f8f2aabc35bf4c98ee030ff504b9
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-11 19:39:37 +0900

    The result of Readline.completion_proc should have the same encoding of Encoding.default_external

commit 3098798044ada5a81862aa4668aaf7548f9b1c99
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-11 16:41:37 +0900

    Test `Thread#to_s` when used from to_s_spec.rb

commit d2d42081ce76954ff55392a6e07e3eb4f26c696c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-11 16:19:49 +0900

    `Thread#to_s` has been added at ruby 2.5

commit eb9c0070535bc088ab2921613830ba983bfe07a1
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-11 16:48:19 +0900

    skip continuous failure test.

    On mingw this test fails and not solved long time, so skip it.
    Please revert it when it solved.

    https://ci.appveyor.com/project/ruby/ruby/builds/29458671/job/9nbcjnfe6p0xnxoe

commit 1269157a6e46895c0eda2ea202d44790bbe815c8
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-11 16:10:26 +0900

    Thread#to_s is not same as #inspect on old version.

    Thread#to_s returns simple Object#to_s until Ruby 2.4.

commit 7f5014e6e884d7fa091e3e6462827b910417267c
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-11 15:45:23 +0900

    rely on sorted compiled binary array.

    `builtin_binary` is sorted by miniruby loading order and this
    loading order should be same on ruby. So we can believe sorted
    order of `builtin_binary` on boot time.

commit 0afee4d80355dd03f0dfefe6120e2e1808d9cb50
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-11 14:27:21 +0900

    Show the failed message

commit 7fa821a80d60992f019c98ac813e2fc6e9775031
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-11 14:01:23 +0900

    Try to use `set-output`

    because commit info are not necessary in env.

commit 6025783a3b0b37517728c635250669449bb21a53
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-11 14:00:32 +0900

    fix for old MRI versions

commit fe8caf0ab93e69b743470d16f6cf7416fe9c98da
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-11 13:37:00 +0900

    add dependency pointed by update-deps

commit 35adc47e7eb1640d35e4d294af7e9651d918608d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-11 13:08:21 +0900

    Create dummy files when check only

    because foo.rb in build directory breaks test-bundler
    https://github.com/ruby/ruby/runs/343168046#step:20:125

commit cf948a3d3f37c4a786611f5b48c9c020f6020161
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-10 23:01:23 +0900

    Do not load q.rb in build directory

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2736

commit 4f5dc15b049eacb9070e2c941183fed68c41f81e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-10 21:44:34 +0900

    Create more dummy files in build directory

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2736

commit 1ed0212bcf76ec244ca5b75c65f09e5b04158377
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-10 18:31:01 +0900

    Do not load files in build directory

    related https://bugs.ruby-lang.org/issues/16177

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2736

commit 85e43e1dfecef69b935c48c235cc20f21bd4f0d4
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-12-11 06:38:12 +0900

    Fix Enumerator::Lazy#with_index

    * Make it correctly handle lambdas
    * Make it iterate over the block if block is given

    The original implementation was flawed, based on lazy_set_method
    instead of lazy_add_method.

    Note that there is no implicit map when passing a block, the return
    value of the block passed to with_index is ignored, just as it
    is for Enumerator#with_index. Also like Enumerator#with_index,
    when called with a block, the return value is an enumerator without
    the index.

    Fixes [Bug #16414]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2742

commit 8a80bfcfd4d510a20a62e21d8d2f4119cb823d4f
  Author: Jean byroot Boussier <jean.boussier+github@shopify.com>
  Date:   2019-12-10 19:49:39 +0900

    Make Thread#to_s consistent with Method and Proc to_s

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2738

commit 6a7af800dbd45946caaadfc4a1212fc523afe58b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-11 11:36:21 +0900

    Add a message for CompatibilityError

commit 7e9b1609dae0998a4418179f40dc488842c56e5d
  Author: Eli Sadoff <9064062+snood1205@users.noreply.github.com>
  Date:   2019-12-11 11:25:54 +0900

    Added documentation for integer range sums (#1593)

commit 86e2c013d7ade7c93077d599e155aae0f3b632e8
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-11 11:25:00 +0900

    * remove trailing spaces. [ci skip]

commit bbbf451bffbc5605b53726c5977d96bffc10d162
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-11 11:22:27 +0900

    Update tool/mk_builtin_binary.rb

    Co-Authored-By: Sutou Kouhei <kou@cozmixng.org>

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2735

commit 40026a408df5e3576380f6c1d8bf6c119fa2e32b
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-10 17:39:04 +0900

    support cross-compilation.

    On cross-compilation, compiled binary can no be created because
    compiled binary should be created by same interpreter (on cross-
    compilation, host ruby is used to build ruby (BASERUBY)).
    So that cross-compilation system loads required scripts in text.
    It is same as miniruby.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2735

commit 9c2807b2df14984e3c81d72a381d9a4d288b3fbe
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-10 17:13:42 +0900

    remove prelude.c

    prelude.c is an automatically generated file by template/prelude.c.tmpl.
    However it does not contain any required functions. So remove it from
    dependency.

    Also miniprelude.c is included by mini_builtin.c and does not need
    to make miniprelude.o.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2735

commit 2c5c60754cafe9895b7a7421cd0552eaa2ae8b09
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-10 16:19:13 +0900

    use compiled binary for gem_prelude.rb.

    `gem_prelude.rb` is not compiled yet. This patch compile it to
    compiled binary.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2735

commit 943f3e5fd463bf2a4a3a4e92b5134e238b9c931d
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-09 16:20:35 +0900

    add include guard

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2735

commit 69aa927a40618591082085fe04c010d516dd50d3
  Author: Corey Farwell <coreyf@rwell.org>
  Date:   2017-04-18 06:58:51 +0900

    Indicate `find_all` and `select` methods are aliases.

    This matches the documentation for `Enumerable::inject` and `Enumerable::reduce` which are also aliases.

commit 0fafb83b3878b11de18de7a2d09927842eaf5fb7
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-11 11:13:28 +0900

    * 2019-12-11 [ci skip]

commit ec54ac938104517dd61887006ef8cc324b3b1b35
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-11 11:12:54 +0900

    Support Readline.completion_quote_character by Reline

commit 8e49ef5a691cc9a249acae8c7335ec53bf445dc3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 23:13:40 +0900

    [ruby/io-console] update depend for f9c0fe77c0e

commit 2a2a707829168b898508ae27a0458719a36bd316
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-10 21:21:19 +0900

    Followed up 38722fa179fcec549300b2f35206f4eb168f202e

commit 95f570d0d349a7fd86c6425c9c5d7d87cc5ecd46
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-10 20:56:09 +0900

    [ruby/logger] bump version to 1.4.2

    https://github.com/ruby/logger/commit/d6c01cc652

commit 0b10d46a577bb6b0e8e177f5c3f17f8d61007d6c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-21 13:28:14 +0900

    [ruby/logger] Enable more timezone tests on OpenBSD

    https://github.com/ruby/logger/commit/bcd7e227e8

commit 7a1c56f978907d03876772d942619ec90cbbfa6b
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-18 10:34:56 +0900

    [ruby/logger] Document that shift_age of 0 disables log file rotation

    Fixes Ruby Bug 16349.

    https://github.com/ruby/logger/commit/b1b6d06f2d

commit 38722fa179fcec549300b2f35206f4eb168f202e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-15 10:08:10 +0900

    [ruby/logger] Raise ArgumentError for invalid shift_age

    Consider 'now' and 'everytime' as valid values for the previous
    behavior of rotating every time.

    Fixes Ruby Bug 15977

    https://github.com/ruby/logger/commit/f92979a376

commit eb18cb3e476db3bc44d489e090e1535237c4c6c9
  Author: George Claghorn <george@basecamp.com>
  Date:   2019-09-07 07:28:05 +0900

    [ruby/logger] Honor Logger#level overrides

    https://github.com/ruby/logger/commit/7365c995bf

commit af11efd377965b6601bb54aa79072ef0789dc525
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-10 19:06:13 +0900

    fix ipaddr parameter of Net::HTTP.start to support proxy

    54072e329cab7207fba133caba4fc12b45add8f9

commit aedbee52c0e21358c33e775eab41c634905f63c3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 18:49:53 +0900

    Prefer $(CHDIR) for the case srcdir contains symlinks

commit 79d2a1b004b06692279bb647e0eee712e55d14c4
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-10 18:41:05 +0900

    Update regression tests for 1.4.16

commit 8299bcd9465b98bd40711bb9c0d4488aba0b72e1
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-10 18:18:04 +0900

    .indent.pro: Removed because it is no longer used

commit c596e01a49d8c77b6dacc931a24eb4b7876617b7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-10 18:05:51 +0900

    Move SECURITY.md into .github/ to reduce the files on the top directory

commit fe0df7dcfc92b81d3508473a08584f8372418323
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-10 17:27:43 +0900

    Change encoding of completion strings

commit 60c53ff6ee1eed054fc3d78ad6c06cbfc56900d6
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-10 17:10:23 +0900

    vm_core.h (iseq_unique_id): prefer uintptr_t instead of unsigned long

    It produced a warning about type cast in LLP64 (i.e., windows).

commit e27d2013db18d124d1362b6cc81ecec806ef1a0d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-10 17:03:46 +0900

    Import racc-1.4.1 from ruby/racc.

commit 43544f8617a81fbaef03d926777df4a5311cdb74
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-10 17:03:13 +0900

    Added the missing gemspec of racc

commit 58e5ab78d0a88d9153770a82cff9b553f53dd5d5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 15:26:14 +0900

    [ruby/io-console] bump up to 0.5.1

commit 2419b3dba6d86ea40a148f7547ff87b2074ca582
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 10:44:21 +0900

    [ruby/io-console] Suppress an unused-variable warning

    https://github.com/ruby/io-console/commit/ae5c72e481

commit f9c0fe77c0ef6c5da1d8454bf6be6841c984d606
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 10:09:33 +0900

    [ruby/io-console] Use rb_thread_call_without_gvl instead of the deprecated function

    https://github.com/ruby/io-console/commit/21338ab287

commit 09723b98f7a8db4ce6d22cd282525275154736fe
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 10:08:43 +0900

    [ruby/io-console] Warn vtime option without intr flag

    https://github.com/ruby/io-console/commit/499ff3de48

commit 0c2787b9b29d839876ac68afbd6209a8407fcb30
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 10:05:25 +0900

    [ruby/io-console] bump up to 0.5.0

commit 1bdabaa6b13344c195698ca5b0ced323cb93e2e1
  Author: Konstantin Papkovskiy <konstantin@papkovskiy.com>
  Date:   2017-08-15 23:35:58 +0900

    base64.rb: improve performance of Base64.urlsafe_encode64

    * lib/base64.rb: avoid unnecessary memory allocations

commit 3ca3c8d768f6d81da72df4798736c2e0059d19f9
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-10 14:15:35 +0900

    lib/net/http.rb: align the indentation

commit 7be550d046c726c2a3aa625ceb260d9b2268fb5a
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-10 12:41:09 +0900

    Stop Thread.new in `DRb::TimerIdConv::TimerHolder2#on_gc`

    and add more stop_pool after stop_service

commit 129c3216d966fc25209a7e50418413ffecd25281
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 12:11:56 +0900

    [cygwin] Removed unnecessary packages

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2734

commit cd35c0954085758ec1fb5a5fcfb7d6d9d5e71a90
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-10 12:11:37 +0900

    [cygwin] Removed unnecessary `-c` options

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2734

commit ec931ee9e13b939f6693032564ee9beeec5a4a1f
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-10 11:42:29 +0900

    forward declare struct timespec

    ... like we do so for struct timeval at several hundreds of lines above.
    Depending on OS/Compiler, this can be the first place for the struct to
    appear.  To make sure the struct is global, we need a forward
    declaration at this point.

commit c50d9dc67d350ad4e21ff1af39635bb5a6114282
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-10 11:26:22 +0900

    test/ruby/test_keywords.rb: suppress a warning

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/ubuntu1604/ruby-master/log/20191210T003005Z.log.html.gz
    ```
    .../test/ruby/test_keyword.rb:2711: warning: `*' interpreted as argument prefix
    ```

commit 660388f6c5b148ea6f84d589482391bf78f35c6b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-10 09:41:33 +0900

    test/net/http/test_https.rb (test_get_SNI_failure): stop proxy settings

    Because the test fails under HTTP proxy settings.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/solaris10-gcc/ruby-master/log/20191210T000004Z.fail.html.gz
    ```
      1) Failure:
    TestNetHTTPS#test_get_SNI_failure [/export/home/users/chkbuild/cb-gcc/tmp/build/20191210T000004Z/ruby/test/net/http/test_https.rb:81]:
    [OpenSSL::SSL::SSLError] exception expected, not #<Net::HTTPServerException: 403 "Forbidden">.
    ```

    The new SNI feature introduced at 54072e329c may need to be improved for
    HTTP proxy environment.

commit 6a22b2a091eda81a473eb1b0cc69fe0792560e27
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-10 07:01:26 +0900

    Support completion with case-insensitive fashion

    Reline performs completion in a case-insensitive fashon if
    Readline.completion_case_fold or completion-ignore-case of .inputrc are set
    "on".

commit 562fd754b55aaaf794fa8eb5461eb0ee87725464
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-10 00:10:44 +0900

    * 2019-12-10 [ci skip]

commit f45c0dc23980d7fd8167d290ea7c354cf2cdb500
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-12-06 04:01:20 +0900

    Add Proc#ruby2_keywords

    This allows passing keywords through a normal argument splat in a
    Proc.  While needing ruby2_keywords support for methods is more
    common, there is code that delegates keywords through normal
    argument splats in procs, including code in Rails.  For that
    reason, it makes sense to expose this for procs as well.

    Internally, ruby2_keywords is not tied to methods, but iseqs,
    so this just allows for setting the ruby2_keywords for the iseq
    related to the proc.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2728

commit c2dc27d6435f40ff24f553cf47816a1c696bbbba
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-09 20:48:35 +0900

    fix typo of 54072e329cab7207fba133caba4fc12b45add8f9

commit 54072e329cab7207fba133caba4fc12b45add8f9
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-09 20:19:11 +0900

    Add ipaddr optional parameter to Net::HTTP#start

    to replace the address for TCP/IP connection [Feature #5180]

    There're 3 layers of hostname:
    * host address for TCP/IP
    * TLS server name
    * HTTP Host header value
    To test DNS round robin or check server certificate from server local,
    people sometimes want to connect server with given IP address but keep
    TLS server name and HTTP Host header value.

    closes [Feature #15215]
    closes https://github.com/ruby/ruby/pull/1893
    closes https://github.com/ruby/ruby/pull/1977

commit 194327942690a7997c7b48d34cc105c6ec8b8d40
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-09 19:16:51 +0900

    Added workaround for CoreAssertions used by ruby/logger.

commit 4b36832ba64a8879a4b0702d6d5079ddd9d3078e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-12-09 19:11:18 +0900

    Merge the upstream changes for test-unit on ruby/logger.

      This commits are based with:
        https://github.com/ruby/logger/commit/f067f7d1aa743b467d633ec6d1790bd93ed9e25b
        https://github.com/ruby/logger/commit/86058f420d8f6909500cccceb24f58bef0597b4d
        https://github.com/ruby/logger/commit/02db6e8ed85d1f4ba974f08fee292bad400d9fc2

commit ff7cc0dc34832a074ce42e383439b87ea63b42f7
  Author: sonots <sonots@gmail.com>
  Date:   2019-08-20 21:10:08 +0900

    [ruby/logger] 1.4.1

    https://github.com/ruby/logger/commit/5987f518d1

commit 895f86c81b95143ecdcca6a8cd4e9367a33b0aaa
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-20 16:39:38 +0900

    [ruby/logger] Fixes #38

    https://github.com/ruby/logger/commit/31efbb29ff

commit 0fe1b0508249bc6d64a67c17307a0037f29add74
  Author: sonots <sonots@gmail.com>
  Date:   2019-08-20 03:02:21 +0900

    [ruby/logger] 1.4.0

    https://github.com/ruby/logger/commit/8127ce0b56

commit 6158e28f8d02026e21317d8a0c2cb2115b3a0660
  Author: Akira Matsuda <ronnie@dio.jp>
  Date:   2019-07-31 14:38:38 +0900

    [ruby/logger] Avoid creating [] and "" when logging an Exception that has no backtrace

    https://github.com/ruby/logger/commit/75fd308053

commit 0aafc32995b935b6c46c8439a3e2da008cd683fc
  Author: sonots <sonots@gmail.com>
  Date:   2019-03-22 01:14:14 +0900

    [ruby/logger] frozen_string_literal: true

    https://github.com/ruby/logger/commit/a057eede7b

commit 22548195d59d8b5e421c586bec81615a0a1091bc
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-07-15 14:52:06 +0900

    [ruby/logger] Fix typo

    https://github.com/ruby/logger/commit/5f70168ac5

commit 8395a6a9a0696d1a0a6aa6a019a1a919ee2c854f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-09 15:05:17 +0900

    Add badge of Cygwin

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2733

commit a5e6a50cb8e4acd4feee2ad3a61eac568f2c62b6
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-09 15:04:59 +0900

    Add cache of cygwin packages

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2733

commit ea8f03e86c57ff28154345865a2560b8895f3e68
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-09 15:03:10 +0900

    Remove unused branch name

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2733

commit 801eafcc146808399f9ca53b3f3b730b81235abb
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-09 14:29:38 +0900

    Split cygwin-chocolatey cache

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2733

commit c19e62ddc9d7160d470f76dae823e9546d0a7bf3
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-09 14:06:06 +0900

    Remove debug print

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2733

commit 156fb72d7015b420c57b0bd230693f52d8d75b32
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-09 15:22:48 +0900

    vm_args.c (rb_warn_check): Use iseq_unique_id instead of its pointer

    (This is the second try of 036bc1da6c6c9b0fa9b7f5968d897a9554dd770e.)

    If iseq is GC'ed, the pointer of iseq may be reused, which may hide a
    deprecation warning of keyword argument change.

    http://ci.rvm.jp/results/trunk-test1@phosphorus-docker/2474221

    ```
    1) Failure:
    TestKeywordArguments#test_explicit_super_kwsplat [/tmp/ruby/v2/src/trunk-test1/test/ruby/test_keyword.rb:549]:
    --- expected
    +++ actual
    @@ -1 +1 @@
    -/The keyword argument is passed as the last hash parameter.* for `m'/m
    +""
    ```

    This change ad-hocly adds iseq_unique_id for each iseq, and use it
    instead of iseq pointer.  This covers the case where caller is GC'ed.
    Still, the case where callee is GC'ed, is not covered.

    But anyway, it is very rare that iseq is GC'ed.  Even when it occurs, it
    just hides some warnings.  It's no big deal.

commit 07664f3aec1b80f6ffe3929258c9a246f0bdcc48
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-09 14:21:05 +0900

    Remove workaround encoding modification

commit a14c01441b12552386c69233b0bcc53d06ed0b92
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-09 14:20:25 +0900

    Fix encoding compatibility checking of completion correctly

commit 3cdb37d9db9b7776f6adf96c70eacc39773718b4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-09 13:49:24 +0900

    Revert "vm_args.c (rb_warn_check): Use iseq_unique_id instead of its pointer"

    This reverts commit 036bc1da6c6c9b0fa9b7f5968d897a9554dd770e.

    This caused a failure on iseq_binary mode.
    http://ci.rvm.jp/results/trunk-iseq_binary@silicon-docker/2474587

    Numbering iseqs is not trivial due to dump/load.

commit 39c7230a7a7a039639d2cb3587c054554a1beb18
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-09 13:49:17 +0900

    Revert "vm_args.c (rb_warn_check): Use unique_id * 2 instead of unique_id"

    This reverts commit 751a9b32e5a53336768eb878de1827245a3292bf.

commit 8b07c122b7785fde6b06dd31b09f59a7cbdac2cd
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-09 13:46:23 +0900

    Stop pool threads in test/rinda too

commit 751a9b32e5a53336768eb878de1827245a3292bf
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-09 12:30:00 +0900

    vm_args.c (rb_warn_check): Use unique_id * 2 instead of unique_id

    The function assumed that the LSB of `callee` was 0.

commit 036bc1da6c6c9b0fa9b7f5968d897a9554dd770e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-09 12:04:58 +0900

    vm_args.c (rb_warn_check): Use iseq_unique_id instead of its pointer

    If iseq is GC'ed, the pointer of iseq may be reused, which may hide a
    deprecation warning of keyword argument change.

    http://ci.rvm.jp/results/trunk-test1@phosphorus-docker/2474221

    ```
      1) Failure:
    TestKeywordArguments#test_explicit_super_kwsplat [/tmp/ruby/v2/src/trunk-test1/test/ruby/test_keyword.rb:549]:
    --- expected
    +++ actual
    @@ -1 +1 @@
    -/The keyword argument is passed as the last hash parameter.* for `m'/m
    +""
    ```

    This change ad-hocly adds iseq_unique_id for each iseq, and use it
    instead of iseq pointer.  This covers the case where caller is GC'ed.
    Still, the case where callee is GC'ed, is not covered.

    But anyway, it is very rare that iseq is GC'ed.  Even when it occurs, it
    just hides some warnings.  It's no big deal.

commit 0e71fbc18e97007ac9a9b242b800f34057f5f287
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-09 00:13:07 +0900

    * 2019-12-09 [ci skip]

commit 963b84a51bf0b80da44ab775d788a911b676a6a9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-08 23:37:04 +0900

    Separate steps

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2731

commit 5e65e65bd935954190a5d481def788524c4ae169
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-08 23:00:46 +0900

    Set PATH at once

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2731

commit d00349f99470cfddd522ee1e7fa9a5f6dc126771
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-08 23:09:39 +0900

    Fixed the checking out source

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2731

commit 689e74485598d2c023fc2a00fac80b717b6f29b7
  Author: Daisuke Fujimura (fd0) <booleanlabel@gmail.com>
  Date:   2019-12-06 23:53:25 +0900

    Add .github/workflows/cygwin.yml

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2731

commit 0d63a2104777e467568a31037a6573e1879870c7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-08 18:29:39 +0900

    Skip completion tests for Editline

commit c38bc172bee99ff71440a1ebb4c38e6d092e0807
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-08 08:35:31 +0900

    Fix encoding of completed list

commit 2eb674377371d276b9de5ce06a591419f00f7c42
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-08 08:10:50 +0900

    * 2019-12-08 [ci skip]

commit c9b06d4a4e52b6ae705ebb16cafe455671780770
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-08 08:01:27 +0900

    Add test_simple_completion for Readline

commit be13b897ead62debd6d2e7696e5d28a8e8781620
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-07 22:02:24 +0900

    Show failed commits only when exists

commit 0ff84eda4e130ae17abccbb8aa92ad47e83d151d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-07 20:28:23 +0900

    [ruby/irb] Version 1.2.0

    https://github.com/ruby/irb/commit/da6577a88c

commit 2e595c2d780814cc4d1357c687b44fd7208ff313
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-07 20:26:01 +0900

    [ruby/irb] New IRB needs Ruby 2.5 or later

    https://github.com/ruby/irb/commit/4be3158358

commit ad6837dd609654b02885199b25f7d79b1122b64a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-07 20:21:08 +0900

    [ruby/irb] Revert "Reidline mode needs Reline what needs String#grapheme_clusters"

    This reverts commit 2b0b19b87c60d2cdb329979acbb96e12a1f940e7.

    New IRB parser needs new Ripper what has lex_state too. The new Ripper is
    adopted by Ruby 2.5 or later.

    https://github.com/ruby/irb/commit/9ab6e35a2c

commit c2afddccb36c10ac0eb530bfc3b38765882126d8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-07 19:51:03 +0900

    [ruby/irb] Reidline mode needs Reline what needs String#grapheme_clusters

    https://github.com/ruby/irb/commit/2b0b19b87c

commit e72ffc55ba3cc9bf20c892d2d090a77f40c49ada
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-07 12:11:55 +0900

    [ruby/reline] Support Ruby 2.5 or later for String#grapheme_clusters

    https://github.com/ruby/reline/commit/33e8c8f15b

commit ebbc77836b74a74d7c07a9b91fff886219956e3c
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-07 13:15:47 +0900

    test/ruby/test_file_exhaustive.rb: shorten the name of temporary dir

    ```
      1) Error:
    TestFileExhaustive#test_socket_p:
    ArgumentError: too long unix socket path (109bytes given but 108bytes max)
        /export/home/users/chkbuild/cb-sunc/tmp/build/20191207T024036Z/ruby/test/ruby/test_file_exhaustive.rb:155:in `initialize'
    ```

commit dcf89b20d7b79b51e268ea3ffcfdc0829edf7643
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-07 01:28:20 +0900

    * 2019-12-07 [ci skip]

commit 544431e028e9d678f2989c35876a05c53f07e0ec
  Author: Namrata Bhave <Namrata.Bhave@ibm.com>
  Date:   2019-12-07 01:27:58 +0900

    Adding s390x support (#2727)

commit 2f6a8baac6a84935cef1f10adbba2f47df4a2346
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-06 15:56:14 +0900

    Test interfaces include localhost

    When interfaces do not include localhost,
    some other tests may fail.

commit 2c8d186c6e4fd03ea57466fa6dce6bad40d09401
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-12 09:06:41 +0900

    Introduce an "Inline IVAR cache" struct

    This commit introduces an "inline ivar cache" struct.  The reason we
    need this is so compaction can differentiate from an ivar cache and a
    regular inline cache.  Regular inline caches contain references to
    `VALUE` and ivar caches just contain references to the ivar index.  With
    this new struct we can easily update references for inline caches (but
    not inline var caches as they just contain an int)

commit 38b7f947a2c76aad29a2e42f3bd0848854d96519
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-06 00:13:22 +0900

    * 2019-12-06 [ci skip]

commit 693cba1a136aafb0faa25f93434a2e8dbad320de
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-06 00:11:11 +0900

    Detect started threads when require only

commit 173b864668777ef157a0c82b6e6f1a6aa0f06ac9
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-05 23:56:14 +0900

    Do not start thread when `require 'drb/drb'` only

commit 6477d98e49dbe04deb03caee1a58a34c3b79d4e4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-05 23:46:42 +0900

    test/lib/jit_support.rb: Update the regexp for icc

    MJIT_CC is always an absolute path.

commit d43b9eb22de1b1cd8de09a161cc836413cc158a1
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-05 22:37:08 +0900

    lib/drb/drb.rb: suppress warning: instance variable @pool_proxy not initialized

commit f4d9daf2b6f23af08296c7ccb770e1de1bc723bd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-05 22:24:58 +0900

    coroutine/ucontext/Context.c: define __EXTENSIONS__ explicitly

    instead of ruby/config.h, per samuel's request.

    https://github.com/ruby/ruby/commit/dbfd4b780e3914a3f27e92c2248254452bf0fd6b#diff-7fd78c3cc8a19b7e0637502983ec26ff

commit c3abbc1b2f52015dc839fd96545380dbc11c77a9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-05 16:18:22 +0900

    ext/openssl/extconf.rb: check with -Werror=deprecated-declarations

    This reverts commit 0d7d8b2989e1738dd902d354cc41186899e6b71e,
    but restore `$warnflags` without the flag, to get rid of using
    deprecated functions.

commit 4c88107c54b06c1a3e89970eb243c8ac887d84e1
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-05 18:14:31 +0900

    Fix `warning: already initialized constant DidYouMean::VERSION`

    ```
    .../gems/did_you_mean-1.3.1/lib/did_you_mean/version.rb:2: warning: already initialized constant DidYouMean::VERSION
    .../lib/did_you_mean/version.rb:2: warning: previous definition of VERSION was here
    ```

commit 75b644350a80bc31449b7cee741d309643dc27e1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-05 17:57:05 +0900

    ext/psych/extconf.rb: braced VPATH is for nmake only

commit 0bca34ddaaf15caa852007f401707c1785aa8ed6
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-05 16:55:31 +0900

    test/io/console/test_io_console.rb: add a memo for the mysterious hack

commit 264d5aff5afecb08b0a2ccafedc0a43de4f8d16a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-05 16:28:54 +0900

    Change encoding of completion list...for more tests

commit ee579200082329db66e153c465cb8332e55bacb2
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-05 15:01:37 +0900

    move an interrupt point.

    `args_ptr` can be corrupted by interrupt handlers.
    Pointed by nagachika <https://ruby-trunk-changes.hatenablog.com/entry/ruby_trunk_changes_20191204>.

commit b40bb27e3594bbc2e9c9ac00dfa5612ebae3151b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-05 15:38:29 +0900

    test/io/console/test_io_console.rb: Try the hack for Solaris

    I'm not entirely sure why, but test_set_winsize_console gets stuck on
    Solaris (and if I recall, macOS).  I found a hack for FreeBSD, so I want
    to give it a try on Solaris too.

commit fa1db8f938c083ce1416f999fe8b3cf33f9f18f1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-05 15:25:11 +0900

    Add missing dependency

    https://travis-ci.org/ruby/ruby/jobs/620972117

commit 72cff5f3af47ec8d694feef97516089e86d89673
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-05 15:18:42 +0900

    MJIT_CC and MJIT_SUPPORT are not a prefix

    0b19e15a1239bff9ae854f522f954206ec910cf8 was also for "MJIT_SUPPORT"
    too.

commit 5fbb4555b427909aed4fe2376c4c583849c1d51c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-05 15:16:07 +0900

    Prefer using MJIT_CC for JIT support check

    because Solaris might have CC=cc and we'd like to check full path
    MJIT_CC=/opt/developerstudio12.5/bin/cc instead.

commit 199bd851e40438380b2e0f57662a212200e3ba1a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-05 14:51:07 +0900

    parse.y: suppress "set but not used" warnings on ripper.y

commit edb80dfe3e6086fb9d5d905a40cdd6ec61a2e1ee
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-05 14:39:03 +0900

    add additional CF info for CI env

    Introduce new RUBY_DEBUG option 'ci' to inform Ruby interpreter
    that an interpreter is running on CI environment.

    With this option, `rb_bug()` shows more information includes
    method entry information, local variables information for each
    control frame.

commit c88afd532895a8527f7c9fffb2c635805d01f626
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-05 14:38:46 +0900

    fix parameter

commit 0d7d8b2989e1738dd902d354cc41186899e6b71e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-05 14:41:38 +0900

    ext/openssl/extconf.rb: do not use -Werror=deprecated-declarations

    It fails to build on Solaris:

    ```
    ossl_cipher.c:  ossl_cipher_init :
    ossl_cipher.c:228:2: : EVP_md5 is deprecated [-Werror=deprecated-declarations]
      228 |  EVP_BytesToKey(EVP_CIPHER_CTX_cipher(ctx), EVP_md5(), iv,
          |  ^~~~~~~~~~~~~~
    In file included from /usr/include/openssl/x509.h:73,
                     from /usr/include/openssl/x509v3.h:63,
                     from ossl.h:23,
                     from ossl_cipher.c:10:
    /usr/include/openssl/evp.h:732:26: : 
      732 | DEPRECATED const EVP_MD *EVP_md5(void);
          |                          ^~~~~~~
    ```

    I agree that `-Werror=` is a good habit, but adding it by default is too
    aggressive.

commit c0d118f41a3a66ab76a553f184efe431524b952d
  Author: Jun Aruga <junaruga@users.noreply.github.com>
  Date:   2019-12-05 14:17:16 +0900

    Fix "cannot find the function: strcpy()" error on arm32 on Travis CI. (#2686)

    This issue happened when `libc.so` and `libm.so` path were not found
    and `ldd ruby` command also failed to print the shared dependencies
    in `test/fiddle/helper.rb`.

    See https://travis-ci.org/ruby/ruby/jobs/611483288#L3018
    /home/travis/build/ruby/ruby/build/.ext/common/fiddle/import.rb:299:in `import_function': cannot find the function: strcpy() (Fiddle::DLError)

    * Set libc6:armhf as a installing dependency explicitly.
    * Remove arm32 from allow_failures.

commit ed5d032ea33a465fd7152a236a4aca0ff5653bf3
  Author: Antonio Terceiro <asa@terceiro.xyz>
  Date:   2019-11-26 09:25:53 +0900

    debug.rb: expand filenames in breakpoints

    When debugging some local code, specifying a breakpoint to a local
    filename does not work, i.e.

        break lib/foo.rb:10

    Expanding the filename makes it work. FWIW byebug has the same behavior.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2694

commit 20031f8b74a224bed88bfd149d59d6176c4f58e2
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-05 13:06:08 +0900

    Change encoding of completion list

commit df76f2c577b6567b617be2df9451123cc450d1cc
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-12-05 11:02:21 +0900

    Make TracePoint.stat a singleton method again (#2726)

    [Bug #16399]

  Notes:
    Merged-By: XrXr

commit e4db0443bcfc94f9183e8ea72fb4ab560aa005bf
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-23 11:56:02 +0900

    Make rb_eval_string_wrap specify a cref so constant setting works correctly

    Fixes [Bug #10466]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2722

commit 18d3b5a93a2d52412f8f563d58db682b41d5c98c
  Author: Yuki Nishijima <yk.nishijima@gmail.com>
  Date:   2019-12-05 09:55:01 +0900

    Do not attempt to call methods on the receiver if it is a basic object

commit 88ee375dd6c93523bd5d8f9517e49215b9d8cf67
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-05 09:43:45 +0900

    Revert "Add debug option to check ci failures on solaris"

    This reverts commit f289e3994bbc6560e2e4e5905b52c35c829c972d.

commit fbf10ed5b3f37b7cd9950ac8d1f1c81255525d36
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-05 09:03:49 +0900

    * 2019-12-05 [ci skip]

commit e3587ed8498dcf7a3a8178030f7ae66cd0719c57
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-04 22:32:12 +0900

    Support disable-completion

commit ad8fbf444abdf1480d87c95b2868741f98eb953f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-04 22:26:40 +0900

    Fix variable catch

commit fb11e6089dbe9d995510977def038a21882bcffe
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-04 21:52:29 +0900

    [DOC] Added File::FNM_SYSCASE example [Bug #16391] [ci skip]

commit dbfd4b780e3914a3f27e92c2248254452bf0fd6b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-04 20:59:39 +0900

    coroutine/ucontext/Context.c: Include "ruby/config.h" for Solaris

    getcontext, makecontext, and swapcontext seem to be available only when
    `__EXTENSION__` is defined on Solaris.

commit a0bc0e1ba15e83c72426ac243ea96e6497c49859
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-04 18:43:19 +0900

    Fix thread leak in drb

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2724

commit 00bbdf4451d0e66f0f7823e77c47ac310614c1c3
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-12-04 15:31:51 +0900

    implement Range#count

    As matz requested in [Bug #16366].

commit c6e3db0c66312af1e932c21006437419efa9ac75
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-04 13:36:41 +0900

    new_cond before mon_initialize

    MonitorMixin#new_cond can be called before mon_initialize, so we
    need to initialize `@monitor` before it.

    https://bugs.ruby-lang.org/issues/16255#note-4

commit f9e5c74cd24025a5aa19e318e8fecabf207f1b7b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-04 10:33:35 +0900

    compile.c: stop wrong peephole optimization when covearge is enabled

    jump-jump optimization ignores the event flags of the jump instruction
    being skipped, which leads to overlook of line events.

    This changeset stops the wrong optimization when coverage measurement is
    neabled and when the jump instruction has any event flag.

    Note that this issue is not only for coverage but also for TracePoint,
    and this change does not fix TracePoint.
    However, fixing it fundamentally is tough (which requires revamp of
    the compiler).  This issue is critical in terms of coverage measurement,
    but minor for TracePoint (ko1 said), so we here choose a stopgap
    measurement.

    [Bug #15980] [Bug #16397]

    Note for backporters: this changeset can be viewed by `git diff -w`.

commit 5a404efd29d255402e30f4f23a09d4e5398600b8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-04 10:06:54 +0900

    [ruby/io-console] Fixed `intr: false` mode on Windows

    https://github.com/ruby/io-console/commit/4c172c01aa

commit 447d583536274a2489efc8792653ad35d6f7128a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-28 03:48:50 +0900

    Silence incorrect assigned but unused variable warnings in ripper

    To only emit the warnings in correct cases would require tracking
    local variable usage in ripper, which ripper currently does not do.

    Fixes [Bug #15188]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2719

commit a91637c516779d9ecee5f323e211f0ed71eb06ad
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-03 07:20:10 +0900

    Make {Method,UnboundMethod}#super_method handle clone/bind/unbind

    This wasn't working previously because the iclass entry wasn't
    being copied, and without an iclass entry, super_method returns
    nil.

    Fixes [Bug #15629]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2723

commit f9754f0ea08e0d4fb28681a86cbc6ec2d884dba5
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-04 08:22:48 +0900

    compile.c: trivial refactoring

    Use `for` instead of `while` to make it explicit that it is a traverse
    of bytecode.

commit 8852fa876039ed177fd5e867f36177d8a9ff411c
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-04 01:26:29 +0900

    Revert "Regexp#match{?} with nil raises TypeError as String, Symbol (#1506)"

    This reverts commit 2a22a6b2d8465934e75520a7fdcf522d50890caf.
    Revert [Feature #13083]

commit 08074eb71229b4c9f669f7bfb215bbb43525bfc0
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-04 01:26:28 +0900

    Revert "Revert nil error and adding deprecation message"

    This reverts commit 452bee3ee8d68059fabd9b1c7a75661b14e3933e.

commit a705f6472c3e34422776d886bbc9f98676d8c0eb
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-04 01:26:27 +0900

    Revert "Improve warning message"

    This reverts commit 31110d820cc1258cbc84b46ecc65b254c7d5529a.

commit 34a66b1f36e9a065cf8433598b3fce03ce2c711e
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-12-04 01:26:24 +0900

    Revert "Fix warnings in Regexp#{match,match?} specs"

    This reverts commit 782d1b8fb0a039cedef9ad9c94f432dad51901e6.

commit a029b54ec716812ade37fef1f857c49f821a8cc8
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-29 08:41:39 +0900

    Make Enumerator::Chain#each treat lambdas as lambda

    Previously, lambdas were converted to procs because of how
    rb_block_call works.  Switch to rb_funcall_with_block, which
    handles procs as procs and lambdas as lambdas.

    Fixes [Bug #15613]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2720

commit 47c97e1e843159c3c4d57f8c5e22daea57c3ffe1
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-12 12:53:37 +0900

    Do not lose existing constant visibility when autoloading

    This copies the private/deprecate constant visibility across the
    autoload.  It still is backwards compatible with setting the
    private/deprecate constant visibility in the autoloaded file.
    However, if you explicitly set public constant in the autoloaded
    file, that will be reset after the autoload.

    Fixes [Bug #11055]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2716

commit b96d559c696c5141bdb6717442818f1206ff9d2e
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-04 00:27:58 +0900

    * 2019-12-04 [ci skip]

commit 5c2c3966851ed074eb468ad36d8d75e53b8eab6c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-26 04:09:19 +0900

    Check interrupts before starting thread

    Fixes a hang when Thread.new calls Thread.new in a loop.

    Fixes [Bug #13688]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2715

commit 7f2cd2ae6fea76ff3a2b95b69e6e2f749e8a249f
  Author: KOSAKI Motohiro <kosaki.motohiro@gmail.com>
  Date:   2019-12-03 19:50:16 +0900

    fix typo

commit a1f98cd4c1d55efe4998ecd3d94508634baefc23
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-03 17:56:50 +0900

    vm_args.c: make the keyword deprecation message helpful

    ```
    $ ./miniruby -e 'def foo(kw: 1); end; h = {kw: 1}; foo(h)'
    -e:1: warning: The last argument is used as the keyword parameter
    -e:1: warning: for `foo' defined here; maybe ** should be added to the call?
    ```

commit 409e4ab740de3852c3667217bcf41b55040f638f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-03 17:05:07 +0900

    tool/lib/test/unit/parallel.rb: fail explicitly when failing to get io

    `(ulimit -n 30; make test-tool)` fails with unexplicit message:
    "undefined method `write' for nil:NilClass" due to lack of stdout.

    This change makes it explicit.  [Bug #5577]

commit e42d9d8df87f58b9bfa65647249822df25851375
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-03 14:51:14 +0900

    Fixed the inverted condition

commit 9165fcdfa309052a2adc3c6100ab24204de6c2d1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-03 14:46:49 +0900

    Wrap statements in AS_IF properly

commit 027e847cd2540553c9ddcf1b39028c43258a3fb4
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-03 13:02:01 +0900

    Fix auto-indent behavior correctly

commit 14a17063a11a01d518b4bbaf0eb967330aec3984
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-03 08:12:57 +0900

    Fixed stack overflow [Bug #16382]

    Get rid of infinite recursion in expanding a load path to the real
    path while loading a transcoder.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2714

commit 8bddf1bc9bdd1db7ce2e3fec15f2f06ff355b0a7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-12-03 08:02:38 +0900

    mjit.c: fix a mismatch of malloc'ed type

    Coverity Scan found this issue.

commit 424ad9a49360be56244609c02678e8f055d92073
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-12-03 05:23:10 +0900

    Make more attempts to check for the precision of Process.times

    * Process.clock_getres specs use 10_000 but that's quite slow for
      the Process.times spec.

commit c688487fae22e0f73b4e2a9ea5749cb224c25e48
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-03 01:41:22 +0900

    * 2019-12-03 [ci skip]

commit a92560132b1bff6a01782cfeacd62756b4b34d21
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-03 01:17:07 +0900

    Support incremental search by last determined word

    In the incremental search by C-r, search word is saved when it's determined. In
    the next incremental search by C-r, if a user presses C-r again with the empty
    search word, the determined previous search word is used to search.

commit bce38f706e9c434d8fd7c0e2e14bb4acdd085777
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-02 09:15:07 +0900

    The C-r in vi command mode is also incremental search

commit a47d6c256ff684392f00516a917735a14aec64b0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-02 17:12:29 +0900

    Fix random failure on getusage-missing environments

    `* 1e6` makes a spurious result about floating point number's precision.

    ```
    irb(main)[01:0]> 16.028
    => 16.028
    irb(main)[02:0]> (16.028 * 1e6)
    => 16027999.999999998
    ```

commit 1a88adcd75d92cb36ef5b1d5f4aeb40e6fe4dcb7
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-12-02 15:21:15 +0900

    Fix Leaked file descriptor in test/did_you_mean

    https://github.com/ruby/ruby/commit/de74d2c3b0005048a2c4433bde68b9be10c86f01/checks?check_suite_id=336910877#step:19:131
    ```
    Leaked file descriptor: NameErrorExtensionTest#test_correctable_error_objects_are_dumpable: 7 : #<File:test_name_error_extension.rb>
    ```

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2712

commit 185f7608737a550a0891a7fc5a6a4ee32721bce3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-02 16:23:40 +0900

    Debug random failure of ruby-spec on ci.rvm.jp

commit 9afaf139f232e8b2c697d33e984945464744def1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-02 14:15:42 +0900

    Revert "builtin_binary.inc needs miniruby itself for RubyVM.each_builtin"

    This reverts commit 2615030c521afc822c66a7e139ccba3d2365ab56,
    which doesn't work when cross compiling, except for mingw.

commit 2615030c521afc822c66a7e139ccba3d2365ab56
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-02 14:03:46 +0900

    builtin_binary.inc needs miniruby itself for RubyVM.each_builtin

commit a7b9f085ff952fcb18f82de39b3bf9ab7e5ba3e7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-02 13:20:00 +0900

    Disable _FORTIFY_SOURCE on mingw for now

    It causes a link error due to some `__*_chk` functions on mingw.

commit b1c92363a74b0e649a685ae47ae400fbaab7b29d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-02 13:16:55 +0900

    Wait for the main thread to start reading by Queue

    Otherwise, the written data to pty before the reading started may
    be just lost.

commit de74d2c3b0005048a2c4433bde68b9be10c86f01
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-02 10:32:50 +0900

    Simplify variable declaration by C99

commit 103b04128f4e40b87bb9c7fb2916d2a800bfd94f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-02 04:17:47 +0900

    Support incremental search again by C-r in incremental search

commit b3ea0980db87404c2b7763a3fdbe898c3812843d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-02 03:53:58 +0900

    Check MJIT support in one place

    to fix test failure on trunk-no-mjit
    https://gist.github.com/ko1/32ab982ffd7555988818773c08f97123

commit 6bc8b4d8ea6cb8865225c0afcf1abd9e4b725376
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-02 03:51:04 +0900

    Skip --jit-debug= test on mswin

    it fails like
    https://ci.appveyor.com/project/ruby/ruby/builds/29235837/job/v0apdjj4qx8afars

commit c7f05310a248e44ef9747a159a0e9bc289bb7090
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-02 03:30:38 +0900

    Process Backspace key in incremental search correctly

commit e15b0313a78a6f381720cf362a1a94bda49f62ff
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-02 03:05:10 +0900

    Search history to back in the middle of histories

commit 4d7a6d04b2c71aabb9d6e619f4405887806a5be8
  Author: KOSAKI Motohiro <kosaki.motohiro@gmail.com>
  Date:   2019-12-02 01:21:05 +0900

    Avoid unnecessary tzset() call

    Akatsuki reported ENV['TZ'] = 'UTC' improved 7x-8x faster on following code.
    t = Time.now; 100000.times { Time.new(2019) }; Time.now - t
    https://hackerslab.aktsk.jp/2019/12/01/141551

    commit 4bc1669127(reduce tzset) dramatically improved this situation. But still,
    TZ=UTC is faster than default.

    This patch removs unnecessary tzset() call completely.

    Performance check
      ----------------------
    test program: t = Time.now; 100000.times { Time.new(2019) }; Time.now - t
    before:         0.387sec
    before(w/ TZ):  0.197sec
    after:          0.162sec
    after(w/ TZ):   0.165sec

    OK. Now, Time creation 2x faster *and* TZ=UTC doesn't improve anything.
    We can forget this hack completely. :)

    Side note:
    This patch slightly changes Time.new(t) behavior implicitly. Before this patch, it might changes
    default timezone implicitly. But after this patch, it doesn't. You need to reset TZ
    (I mean ENV['TZ'] = nil) explicitly.
    But I don't think this is big impact. Don't try to change /etc/localtime on runtime.

    Side note2: following test might be useful for testing "ENV['TZ'] = nil".
      -----------------------------------------
    % cat <<'End' | sudo sh -s
    rm -f /etc/localtime-; cp -a /etc/localtime /etc/localtime-
    rm /etc/localtime; ln -s /usr/share/zoneinfo/Asia/Tokyo /etc/localtime
    ./ruby -e '
    p Time.new(2000).zone # JST
    File.unlink("/etc/localtime"); File.symlink("/usr/share/zoneinfo/America/Los_Angeles", "/etc/localtime")
    p Time.new(2000).zone # JST (ruby does not follow /etc/localtime modification automatically)
    ENV["TZ"] = nil
    p Time.new(2000).zone # PST (ruby detect /etc/localtime modification)
    '
    rm /etc/localtime; cp -a /etc/localtime- /etc/localtime; rm /etc/localtime-
    End

commit 43811cc3b36739816788cbbac7a49b9bbf756293
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-02 00:05:20 +0900

    * 2019-12-02 [ci skip]

commit 7f0d51704a5cb789c16a6c05db455469f0b2601d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-02 00:03:59 +0900

    Remove obsolete code

commit 8cb3f29abf9290838bdc3b9904868c78752427e8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-01 23:53:59 +0900

    The ed_search_prev_history should always search to backward

commit f1cfc7da180a8cf26f758fbe553e6653e4a4dc53
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-12-01 22:11:59 +0900

    Reline::HISTORY can take Range object

commit 617a3735aedc12fe82b6806d6d3a37c3f977fef1
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-12-01 22:11:42 +0900

    Update to ruby/spec@dcf4955

commit 60d362b0bb0fb56bd3ef61c93f71bff997ccb824
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-12-01 22:11:40 +0900

    Update to ruby/mspec@aa28e95

commit ab516e263c06fbd755d4805ad529c32b1b8292b5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-01 21:14:58 +0900

    [ruby/spec] Fix failures with LC_ALL=C

    https://github.com/ruby/spec/commit/51047687c0
    https://github.com/ruby/spec/commit/2b87b467cc

commit 4e03a7298b3a99de9c57f9a4934d38445cad1b10
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-01 20:26:28 +0900

    Constified mjit_init

commit cb760f36aae42a63738394f170444b6ae4405b82
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-01 19:29:04 +0900

    Constified

commit 91af5542b503054ea059b6c4faa5cd821784774a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-01 19:00:08 +0900

    Fix a mistake excluding NULL in the end

commit 8a677a6e80b3b7e1f52073b362083a78eb87397f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-01 18:35:30 +0900

    Workaround missing strndup on Windows

    https://ci.appveyor.com/project/ruby/ruby/builds/29230976/job/c910t37313edb97k

commit 3e2753ad2e0b643f5c731fb162f5805d82435032
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-01 18:25:54 +0900

    Use build dir for testing --jit-debug

    to fix failure like https://github.com/ruby/ruby/runs/327745536

commit a19d625e667024fe27dcee04dd748e914bc24762
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-01 17:56:27 +0900

    Allow specifying arbitrary MJIT flags by --jit-debug

    This is a secret feature for me. It's only for testing and any behavior
    with this flag override is unsupported.

    I needed this because I sometimes want to add debug options but do not
    want to disable optimizations, for using Linux perf.

commit bdc62dfc8ecffd27dd5ad6756cce88eac5c993f5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-12-01 14:38:33 +0900

    Fixed type of an index variable

commit 9914d6e992a69587e6d43ba7eaa6cdda9f178f8e
  Author: Yuki Nishijima <yk.nishijima@gmail.com>
  Date:   2019-12-01 13:26:09 +0900

    Relax test strictness for error message from KeyError

commit cc7455dd1e98e297dbea2fd92e491bd36f1b473e
  Author: Yuki Nishijima <yk.nishijima@gmail.com>
  Date:   2019-12-01 12:29:02 +0900

    Relax test requirements for DYM's verbose formatter

commit 56faa13a1c5261a0d046a4c0203e88fccfafae17
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-12-01 12:24:50 +0900

    remove spaces to pass a test.

    23d7f4c5e1ce164e78d77de694dccc0c41f6de3d breaks a test which expect
    to match error message. To avoid this failure, use #strip for expect
    and actual results.

commit 23d7f4c5e1ce164e78d77de694dccc0c41f6de3d
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-01 11:08:39 +0900

    * remove trailing spaces. [ci skip]

commit 0fef526606c72e7d2a3c83aebd9204da34016d96
  Author: Yuki Nishijima <yk.nishijima@gmail.com>
  Date:   2019-11-30 11:40:07 +0900

    Do not call 'gem "did_you_mean"' for now

    This will slow down the time that the +require+ method takes to load DYM,
    but this has caused a build failure in a certain situation:

      https://ci.appveyor.com/project/ruby/ruby/builds/29214253/job/r9u9c8p95tnlftt3#L24965

    which is reported as a separate bug:

      https://bugs.ruby-lang.org/issues/16382?next_issue_id=16381

    For now this commit should fix the builds, but we should come back and
    add back the 'gem' call.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2689

commit 171803d5d34feb1b4244ca81b9db0a7bc2171c85
  Author: Kevin Deisz <kevin.deisz@gmail.com>
  Date:   2019-10-29 23:08:37 +0900

    Promote did_you_mean to default gem

    At the moment, there are some problems with regard to bundler + did_you_mean because of did_you_mean being a bundled gem. Since the vendored version of thor inside bundler and ruby itself explicitly requires did_you_mean, it can become difficult to load it when using Bundler.setup. See this issue: https://github.com/yuki24/did_you_mean/issues/117#issuecomment-482733159 for more details.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2689

commit a2fc6a51dd2e1a153559038795e1e2509f9c6a94
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-11-30 22:03:12 +0900

    [ruby/fileutils] Fix test failure under ruby 2.4

    `Exception#full_message` is only defined on ruby 2.5.0 and above.

    https://github.com/ruby/fileutils/commit/a8968f41ed

commit fa0f3eff228bb26de6d5b0e1238b1f358165dbd0
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-11-30 22:01:18 +0900

    [ruby/fileutils] Fix error printing test failure

    `exception_details` is not defined anywhere.

    This commit fixes the following test crash in ruby 2.4

    ```
    Error: test_assert_output_lines(TestFileUtils): NoMethodError: undefined method `exception_details' for #<TestFileUtils:0x00005556ef699178>
    ```

    And replaces it with an actual test failure:

    ```
    [Test::Unit::CoreAssertions::MiniTest::Assertion] exception expected, not #<NoMethodError: undefined method `full_message' for #<RuntimeError: ok>
    Did you mean?  message>.
    ```

    https://github.com/ruby/fileutils/commit/2f38ba6e82

commit 5b1f7f26b4ff3b05e1c184ae87154a323b1be915
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-12-01 06:29:00 +0900

    Skip if getrusage is not supported

    1243255c3a36433041012b6107a5ac48658a0895 broke ci.rvm.jp tests like
    http://ci.rvm.jp/results/trunk_clang_39@silicon-docker/2445098.

    253232c028a5565dbeecc05fab5e81b35ab58bcc works only if getrusage is supported.

commit 1243255c3a36433041012b6107a5ac48658a0895
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-12-01 05:26:52 +0900

    Update to ruby/spec@4eec3dc

commit ab8345271eb87ff155d8bd5f22f53a4cf2902c26
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-12-01 05:26:49 +0900

    Update to ruby/mspec@a401f63

commit 93a512414cbe3713f478038f6d4f5fe81c4eb62a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-12-01 02:18:45 +0900

    * 2019-12-01 [ci skip]

commit 5e0479f26afe1505afd9014ea96a206a88845828
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-01 12:23:25 +0900

    ENV.update should not call block on existing keys

    [Bug #16192]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2512

commit b94d06096b8f2a375719ce09370e004fcb277b25
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 18:20:02 +0900

    [ruby/zlib] Bump version to 1.1.0

    https://github.com/ruby/zlib/commit/5af77c1ee8

commit 7ebcee6b7634889f0bd92aaedf079845065ac797
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 18:13:16 +0900

    [ruby/gdbm] Bump version to 2.1.0

    https://github.com/ruby/gdbm/commit/ffb2b063a3

commit 56567c76487d42f12283ecf074d45adae96ca5f0
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 18:03:57 +0900

    [ruby/etc] Bump version to 1.1.0

    https://github.com/ruby/etc/commit/78987ce56a

commit 08c866d5281777e1f8f8503f7ebdec9aee62ed63
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 18:05:51 +0900

    [ruby/fileutils] Bump version to 1.4.1

    https://github.com/ruby/fileutils/commit/da15e3ce06

commit 06b9b78e21f5da5f348a932c3e7f21468674e4f1
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 17:54:44 +0900

    [ruby/dbm] Bump version to 1.1.0

    https://github.com/ruby/dbm/commit/163078359d

commit 32e547954fbbcbdd6f4468bf3be9e7eaa5d32f0f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 17:58:39 +0900

    Revert "[ruby/fileutils] Fix #install with "X" mode option"

      This reverts commit eab88d20eaa925d5e61a2a65820a099b46ccf3f8.

      The some CI was broken with this.

commit 5e9f08647cead8b7fa303a5da88c5e96035f3497
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-28 21:58:25 +0900

    [ruby/webrick] Check the feature by itself, instead of the version number

    https://github.com/ruby/webrick/commit/79d7922de9

commit a98632d5c20e41e05074384b8f760af407e6d52a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-12 04:57:11 +0900

    [ruby/webrick] Enabled chunked encoding if Transfer-Encoding: chunked header is set

    Patch from Leonard Garvey.

    Fixes Ruby Bug 9986.

    https://github.com/ruby/webrick/commit/8cff7f3995

commit edfbffb241a894eece57155a22a89637b33cfe58
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 17:39:58 +0900

    [ruby/webrick] Bump version to 1.6.0

    https://github.com/ruby/webrick/commit/c5635fa5e2

commit c75100d00401c32b3245ce8da5b8a045976216ca
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-27 13:41:27 +0900

    [ruby/webrick] Allow WEBrick::HTTPServlet::CGIHandler :CGIInterpreter option to be array

    This way you don't need to escape each entry.

    Implements Ruby Feature 15170.

    https://github.com/ruby/webrick/commit/d8086e600c

commit f7cf5416e471cd34153058952063da3457468e58
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-26 19:27:17 +0900

    [ruby/webrick] Document HTTPResponse#body callable option

    https://github.com/ruby/webrick/commit/d51836d03d

commit ea4272d02b02719e266c7cf30141e6275e38f9a7
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 17:23:13 +0900

    [ruby/fileutils] Bump version to 1.4.0

    https://github.com/ruby/fileutils/commit/f92145b10b

commit 3b9e1c0b2e5b3c507c94fd36c87288e789ee9c2a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 17:32:38 +0900

    Move gemspec of fileutils under the toplevel of lib directory.

commit eab88d20eaa925d5e61a2a65820a099b46ccf3f8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-03 01:39:02 +0900

    [ruby/fileutils] Fix #install with "X" mode option

    `FileUtils#install` methed raises an unexpected `TypeError`, when
    called with `mode:` option which has `"X"`.

    ```
    $ ruby -rfileutils -e 'FileUtils.install("tmp/a", "tmp/b", mode: "o+X")'
    /opt/local/lib/ruby/2.7.0/fileutils.rb:942:in `directory?': no implicit conversion of File::Stat into String (TypeError)
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:942:in `block (3 levels) in symbolic_modes_to_i'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:933:in `each_char'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:933:in `each'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:933:in `inject'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:933:in `block (2 levels) in symbolic_modes_to_i'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:931:in `each'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:931:in `each_slice'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:931:in `block in symbolic_modes_to_i'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:926:in `each'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:926:in `inject'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:926:in `symbolic_modes_to_i'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:973:in `fu_mode'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:883:in `block in install'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:1588:in `block in fu_each_src_dest'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:1604:in `fu_each_src_dest0'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:1586:in `fu_each_src_dest'
            from /opt/local/lib/ruby/2.7.0/fileutils.rb:877:in `install'
            from -e:1:in `<main>'
    ```

    In spite of that `symbolic_modes_to_i` considers the `File::Stat`
    `path` case at the beginning, in `"X"` case, `path` is passed to
    `FileTest.directory?` method which requires a `String`.  In such
    case, the mode in `path` should be examined instead.

    https://github.com/ruby/fileutils/commit/2ea54ade2f

commit aab74fc938453233a5f11a093ad6129a0be230d1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-03 01:17:26 +0900

    [ruby/fileutils] Added `test_install_mode_option`

    https://github.com/ruby/fileutils/commit/bb10efe104

commit 0a7d26bea1b2d7ab4c36e471d387d1a9907a486d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-03 00:55:19 +0900

    [ruby/fileutils] Remove version.rb

    Loading separate version.rb unnecessary increases every start-up
    time.  In the other hand, the gemspec file is parsed only when
    building the gem file.

    https://github.com/ruby/fileutils/commit/8359cf7cce

commit c064018a7584fe03403a3b175ac25dbbb1162c8c
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-19 15:13:35 +0900

    Make extract-gems only if test_task is check

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2678

commit bb3542cc6b3db5477c2a9efd76905a4133545da1
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 21:28:53 +0900

    Add update-gems before extract-gems

    (windows.yml used `nmake up`)

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2678

commit 2eb4afb10bd9a3849eb34292f33240ac3ef19905
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 19:45:14 +0900

    Add extract-gems to GitHub Actions CI

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2678

commit cf14592872684956df7c014de0f9808c8aaf0e22
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 16:01:23 +0900

    [ruby/readline-ext] Prepare to gem release

    https://github.com/ruby/readline-ext/commit/e5b969215a

commit 856f9990a90e601ec5245a934d1da153591fcf3b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 15:50:57 +0900

    [ruby/forwardable] Bump version to 1.3.0

    https://github.com/ruby/forwardable/commit/e56f0f83c6

commit 9fa0166a580e72adf02562b7d60672c6c362d4b7
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-08 04:41:16 +0900

    [ruby/forwardable] Fix keyword argument separation warnings on Ruby 2.7+

    Do so in a way that is also compatible with previous versions.

    https://github.com/ruby/forwardable/commit/b2dd340988

commit af4b3f16ceed36f8b18856120940c9de6e6a0eee
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 15:26:01 +0900

    [ruby/stringio] Bump version to 0.1.0

    https://github.com/ruby/stringio/commit/4c1e267e1a

commit 990025cf60eb6586c13f5f055880ac60afbac646
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 15:16:13 +0900

    [ruby/stringio] RbConfig::LIMITS only provide after Ruby 2.5

    https://github.com/ruby/stringio/commit/1fed3aacd3

commit e764dff3641fd66fda1b9cf33cb7ddeb30e0b38a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 14:31:00 +0900

    [ruby/date] Bump version to 3.0.0

    https://github.com/ruby/date/commit/202b2dad93

commit 80705e2c4fe7c1e968830880ea4408990e3f3c39
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-30 14:48:26 +0900

    Add to support the single commit for sync_default_gems.rb

commit f8cc05dec37f78b15814d0b936786d4e84d7d448
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-30 11:14:35 +0900

    Use @eof variable for ReidlineInputMethod#eof?

    "IRB::InputMethod#eof?" requires eof status each user input but
    "ReidlineInputMethod#eof?" used "Reline.eof?" what is singleton data.
    "ReidlineInputMethod#eof?" is changed to use the result of user input.

commit 0b1b2f2442744f0add4dec47e475e25cde602dcf
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-29 21:31:55 +0900

    Remove e2mmap from sync_default_gems.rb

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit c50d30f659ff22981444b3e4684fe9e6f2809055
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-29 17:48:43 +0900

    Simplified ErrDimensionMismatch class

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit 2f66c443d79bb3a2d5518dbe58ca86885bc23d5c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-29 17:46:13 +0900

    Support argument for ErrNotRegular

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit 0c59bfae0a3a9f5a3420a1eac42753480d8d95f7
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-29 17:29:21 +0900

    Also replace E2MM to standard exception class

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit 0950ef9a9a8e14dce44c36cf1ecaad187716a059
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-29 17:15:56 +0900

    Remove e2mmap entries from docs

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit c1059e99d3f74fdd5d9a9792544a9ebc8a10edf7
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-29 17:11:11 +0900

    Support existence usecase for the custom exception classes

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit 5044260dcd1d1b51f2e217ca519431ab5a1cf8c2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-29 16:50:54 +0900

    replace raise method from e2mmap on Scalar class

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit 9b950310be874753935a6ef4e8f94b3686f70540
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-29 16:35:51 +0900

    raise method accepts 3 argument with exception class

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit f47f2076fed1546d993a376ce3c35ca81b1f0c6a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-27 12:17:03 +0900

    Retire to maintain e2mmap on ruby core

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit 04511b994e19de65fff84dd55a246842a2f9ad29
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-27 12:11:34 +0900

    Remove re-define embedded error classes and extract argument on custom error classes

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit d82c541ae439b3c28ec71e9d6b839c2f304df273
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-27 11:48:04 +0900

    Use simple exception classes instead of e2mmap

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2699

commit 0c273b2279e65c57161e0859f2d4e9f6e649b751
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-29 10:28:13 +0900

    Suppress class variable overtaken warning when original modules are the same

    This issue was exposed by recent commits to better support including
    refined modules.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2709

commit 8a1f313e2e6ecf43a1ccad6cca35f738c6052b3c
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-30 00:21:48 +0900

    * 2019-11-30 [ci skip]

commit d1ef4fd08e60adcbcb4feeb55f767ff3d80b65a0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-30 00:15:29 +0900

    Make single line pattern matching void expression

    Instead of returning `nil`, raise a syntax error if its value is
    used.  [Feature #16355]

commit 36da0b3da1aed77e0dffb3f54038f01ff574972b
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-29 17:39:06 +0900

    check interrupts at each frame pop timing.

    Asynchronous events such as signal trap, finalization timing,
    thread switching and so on are managed by "interrupt_flag".
    Ruby's threads check this flag periodically and if a thread
    does not check this flag, above events doesn't happen.

    This checking is CHECK_INTS() (related) macro and it is placed
    at some places (laeve instruction and so on). However, at the end
    of C methods, C blocks (IMEMO_IFUNC) etc there are no checking
    and it can introduce uninterruptible thread.

    To modify this situation, we decide to place CHECK_INTS() at
    vm_pop_frame(). It increases interrupt checking points.
    [Bug #16366]

    This patch can introduce unexpected events...

commit c4686b92359d298f281f3943ba205858e183e7af
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-29 17:36:54 +0900

    Revert "Treat :@1, :@@1, @1, and @@1 correctly to check termination"

    This reverts commit 5e275dd2af4d9d24cdb1cfc0f232f348dae9c2cd.

    ...The @1 type numberd parameter is reverted from Ruby syntax.

commit bbbe481dc36b2bbd33f2d1062e149d5db7602bc1
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-29 17:32:52 +0900

    Add SECURITY.md [ci skip]

    for https://github.com/ruby/ruby/security/policy

commit 191ce5344ec42c91571f8f47c85be9138262b1c7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-13 17:02:08 +0900

    Reduce duplicated warnings for the change of Ruby 3 keyword arguments

    By this change, the following code prints only one warning.

    ```
    def foo(**opt); end
    100.times { foo({kw:1}) }
    ```

    A global variable `st_table *caller_to_callees` is a map from caller to
    a set of callee methods.  It remembers that a warning is already printed
    for each pair of caller and callee.

    [Feature #16289]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2458

commit 3a87826d0c3dd4c42e327e0cd4fb0806d898497f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-29 16:51:13 +0900

    vm_method.c: add top-level ruby2_keywords

    This is a top-level version of Module#ruby2_keywords.
    It can be used for functions (top-level methods) that delegates
    arguments.  [Feature #16364]

commit 5ad32d5504499f1a915d5d30e59dfd98da6759c6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-29 11:25:23 +0900

    `LoadError` is not a subclass of `StandardError`

commit f83bebdf7a76e1ade3c5dc9d54cbffb9f761b453
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-29 11:19:09 +0900

    Skip useless test

    `JSONGeneratorTest#test_remove_const_seg` is meaningful only for
    the extension library version, but nonsense for pure ruby version.

commit ba1cb388a9b29856ff1e1127a10c2ac727dabfc4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-29 11:17:27 +0900

    Fixed the position in NEWS [Feature #16348]

    [ci skip]

commit a593186a02714cb92ae2748c2b7c46a6c50b0977
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-29 11:09:08 +0900

    Nmake needs `VPATH`

commit 98006cea4fd517671dae508fade13203bc18301a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-29 10:16:33 +0900

    Add dependency on bundled yaml.h when using

commit 6b460a79489bf65dee0a4c9f42324d3836888dd3
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-29 03:24:30 +0900

    export func for MJIT

commit f38b6d197f84ba8890daf4d708c0d17c1d339700
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-29 03:22:24 +0900

    Revert "export for MJIT"

    This reverts commit 2e6f1cf8b264f4c8499c4e5f18bf662fdade04ff.

commit e4e41840ad378ccd3144fe84ffd3aa55f6610ca5
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-29 03:22:13 +0900

    Revert "* remove trailing spaces. [ci skip]"

    This reverts commit 27d0d7c0d39076d4bbacd3c3f3864322699db7b4.

commit 27d0d7c0d39076d4bbacd3c3f3864322699db7b4
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-29 03:18:19 +0900

    * remove trailing spaces. [ci skip]

commit 2e6f1cf8b264f4c8499c4e5f18bf662fdade04ff
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-29 03:17:34 +0900

    export for MJIT

commit e5705c351c82f43bfa0c45903c72a69f307cce60
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-29 03:11:40 +0900

    * 2019-11-29 [ci skip]

commit d104ebf2c4fef4751e067ea7a2c7e664a843e088
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-29 03:11:28 +0900

    * remove trailing spaces. [ci skip]

commit dd723771c118da71aa58bb74537cacaec425542a
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-29 03:02:44 +0900

    fastpath for ivar read of FL_EXIVAR objects.

    vm_getivar() provides fastpath for T_OBJECT by caching an index
    of ivar. This patch also provides fastpath for FL_EXIVAR objects.
    FL_EXIVAR objects have an each ivar array and index can be cached
    as T_OBJECT. To access this ivar array, generic_iv_tbl is exposed
    by rb_ivar_generic_ivtbl() (declared in variable.h which is newly
    introduced).

    Benchmark script:

    Benchmark.driver(repeat_count: 3){|x|
      x.executable name: 'clean', command: %w'../clean/miniruby'
      x.executable name: 'trunk', command: %w'./miniruby'

      objs = [Object.new, 'str', {a: 1, b: 2}, [1, 2]]

      objs.each.with_index{|obj, i|
        rep = obj.inspect
        rep = 'Object.new' if /\#/ =~ rep
        x.prelude str = %Q{
          v#{i} = #{rep}
          def v#{i}.foo
            @iv # ivar access method (attr_reader)
          end
          v#{i}.instance_variable_set(:@iv, :iv)
        }
        puts str
        x.report %Q{
          v#{i}.foo
        }
      }
    }

    Result:

          v0.foo # T_OBJECT

                   clean:  85387141.8 i/s
                   trunk:  85249373.6 i/s - 1.00x  slower

          v1.foo # T_STRING

                   trunk:  57894407.5 i/s
                   clean:  39957178.6 i/s - 1.45x  slower

          v2.foo # T_HASH

                   trunk:  56629413.2 i/s
                   clean:  39227088.9 i/s - 1.44x  slower

          v3.foo # T_ARRAY

                   trunk:  55797530.2 i/s
                   clean:  38263572.9 i/s - 1.46x  slower

commit b5fbefbf2c14742f6d46ecdf3ce712062dfb1d0a
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-17 23:24:59 +0900

    Added Symbol#start_with? and Symbol#end_with? method. [Feature #16348]

commit 76871dea6b05ee441f25c6f694ac21525ed25f93
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-28 23:31:01 +0900

    Use more template feature of w.r-l.o

commit 0b453e2a55eefbe1bbb0b76faf61b9b6ab121d48
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-28 21:45:43 +0900

    Get rid of inadvertent label [ci skip]

commit 2fa3b4565ad904b09419dc77f4fff03aee1a8358
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-28 21:31:53 +0900

    Merged common statements [Bug #16242]

commit f0a5a07fa5b98a2e7fcd028cebd7770c6d8916a7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-28 18:12:38 +0900

    Removed unused variable [Bug #16242]

commit a0579f3606561a74e323f6193b9504c06845236c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-12 17:02:51 +0900

    Make prepending a refined module after inclusion not break refinements

    After the previous commit, this was still broken. The reason it
    was broken is that a refined module that hasn't been prepended to
    yet keeps the refined methods in the module's method table. When
    prepending, the module's method table is moved to the origin
    iclass, and then the refined methods are moved from the method
    table to a new method table in the module itself.

    Unfortunately, that means that if a class has included the module,
    prepending breaks the refinements, because when the methods are
    moved from the origin iclass method table to the module method
    table, they are removed from the method table from the iclass
    created when the module was included earlier.

    Fix this by always creating an origin class when including a
    module that has any refinements, even if the refinements are
    not currently used.  I wasn't sure the best way to do that.
    The approach I choose was to use an object flag. The flag is
    set on the module when Module#refine is called, and if the
    flag is present when the module is included in another module
    or class, an origin iclass is created for the module.

    Fixes [Bug #13446]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2550

commit 5069c5f5214ce68df8b3954321ad9114c5368dc3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-12 16:01:37 +0900

    Honor refinements for modules that prepend other modules

    This previously did not work, and the reason it did not work is
    that:

    1) Refining a module or class that prepends other modules places
       the refinements in the class itself and not the origin iclass.

    2) Inclusion of a module that prepends other modules skips the
       module itself, including only iclasses for the prepended modules
       and the origin iclass.

    Those two behaviors combined meant that the method table for the
    refined methods for the included module never ends up in the
    method lookup chain for the class including the module.

    Fix this by not skipping the module itself when the module is
    included.  This requires some code rearranging in
    rb_include_class_new to make sure the correct method tables and
    origin settings are used for the created iclass.

    As origin iclasses shouldn't be exposed to Ruby, this also
    requires skipping modules that have origin iclasses in
    Module#ancestors (classes that have origin iclasses were already
    skipped).

    Fixes [Bug #16242]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2550

commit 4325f080862b36a3e3ddee472169f65758612ad3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-28 15:32:21 +0900

    Add require "irb" to test/irb/test_completion.rb

commit 7d75e94ea967a47e1ca1083f6d1090eaac7ca58e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-28 15:15:41 +0900

    Fix regexp to complete complex literal

    IRB completion logic always needed exponential notation for complex literal
    such as 3e6i but it's bug. I fixed to support complex literal without
    exponential notation such as 3i.

commit 8b4ee5d6ba92a385eedc9235ce0a2d5618deecf0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-28 13:44:25 +0900

    Raise `NoMatchingPatternError` when expr `in` pat doesn't match

    * `expr in pattern` should raise `NoMatchingError` when unmatched
    * `expr in pattern` should return `nil`. (this is unspecified, but
      this feature is experimental, at all)

    [Feature #16355]

commit 18953416def52824c46a68370c4b34f5b720ee3f
  Author: y-yagi <yuuji.yaginuma@gmail.com>
  Date:   2019-11-28 13:24:01 +0900

    Fix documentation of `MonitorMixin#new_cond` [ci skip] (#2707)

    Since https://github.com/ruby/ruby/pull/2576,
    `new_cond` uses the Monitor object, not the receiver.

commit c688026455a3a37b233333aa90bdd4633b3e6a91
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-28 10:52:33 +0900

    Suppress strict-aliasing warning by x86_64-w64-mingw32-gcc 7.4.0

commit abe8fb49f0365c23df06857549b7a3a32d212ed5
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-28 09:32:51 +0900

    Delete newline when C-k on emacs mode at EOL

commit 7769975c3ccf1f08c15f4c6de8451783683e281d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-28 08:26:10 +0900

    Remove two removed constants

commit 2d0a1a1869e601dc0d50a86a89fe98edcbd24f09
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-27 11:58:38 +0900

    Fix ghost method line no

commit f9debf343788a6460e1e67bd7efc470d73e69f21
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-28 08:13:35 +0900

    Update documentation for ruby2_keywords [ci skip]

commit 416cccc6ec4fde7220edbf848424514f5d5b5743
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-27 19:09:47 +0900

    Drop windows-2016 on GitHub Actions

    https://help.github.com/en/actions/automating-your-workflow-with-github-actions/software-installed-on-github-hosted-runners#windows-server-2016
    > Note: The Windows Server 2016 virtual environment will be removed on December 3, 2019.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2704

commit cdcaf041127430b30ee4b32452762666495a732a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-28 03:03:51 +0900

    * 2019-11-28 [ci skip]

commit 299a13612e54accd9d3661bafde8f67142a78d54
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-28 02:03:00 +0900

    Don't modify rest array when using ruby2_keywords

    Previously, the rest array was modified, but it turns out that is
    not necessary.  Not modifying the rest array fixes cases when the
    rest array is used more than once.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2706

commit 6f27fa4f7d52bfaea4fd1bd7605bda28e302e74c
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-27 14:42:30 +0900

    prefer class_serial over m_tbl

    Decades ago, among all the data that a class has, its method
    table was no doubt the most frequently accessed data.  Previous
    data structures were based on that assumption.

    Today that is no longer true.  The most frequently accessed field
    moved to class_serial.  That field is not always as wide as VALUE
    but if it is, let us swap m_tbl and class_serial.

    Calculating -------------------------------------
                                   ours       trunk
    Optcarrot Lan_Master.nes     47.363      46.630 fps

    Comparison:
                 Optcarrot Lan_Master.nes
                        ours:        47.4 fps
                       trunk:        46.6 fps - 1.02x  slower

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2701

commit 177bc652a8110c1350c0e6df8cb17158e44e18dd
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-27 03:57:46 +0900

    * 2019-11-27 [ci skip]

commit a3e6f52c17061f012c4e638b3343b57752ed7603
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-26 12:20:53 +0900

    rename __builtin_inline!(code) and introduce others.

    rename __builtin_inline!(code) to __builtin_cstmt(code).
    Also this commit introduce the following inlining C code features.

    * __builtin_cstmt!(STMT)

    (renamed from __builtin_inline!)

    Define a function which run STMT implicitly and call this function at
    evatuation time. Note that you need to return some value in STMT.
    If there is a local variables (includes method parameters), you can
    read these values.

      static VALUE func(ec, self) {
        VALUE x = ...;
        STMT
      }

    Usage:
      def double a
        # a is readable from C code.
        __builtin_cstmt! 'return INT2FIX(FIX2INT(a) * 2);'
      end

    * __builtin_cexpr!(EXPR)

    Define a function which invoke EXPR implicitly like `__builtin_cstmt!`.
    Different from cstmt!, which compiled with `return EXPR;`.
    (`return` and `;` are added implicitly)

      static VALUE func(ec, self) {
        VALUE x = ...;
        return EXPPR;
      }

    Usage:
      def double a
        __builtin_cexpr! 'INT2FIX(FIX2INT(a) * 2)'
      end

    * __builtin_cconst!(EXPR)

    Define a function which invoke EXPR implicitly like cexpr!.
    However, the function is called once at compile time, not evaluated time.
    Any local variables are not accessible (because there is no local variable
    at compile time).

    Usage:
      GCC = __builtin_cconst! '__GNUC__'

    * __builtin_cinit!(STMT)

    STMT are writtein in auto-generated code.
    This code does not return any value.

    Usage:

      __builtin_cinit! '#include <zlib.h>'
      def no_compression?
        __builtin_cconst! 'Z_NO_COMPRESSION ? Qtrue : Qfalse'
      end

commit 9e01fcd0cb79a05daa50d99c888cc7eeb9c79426
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-26 22:54:35 +0900

    [ripper] Fixed unique key check in pattern matching

    Check keys
    * by an internal table, instead of unstable dispatched results
    * and by parsed key values, instead of escaped forms in the source

commit 22dfd14c179632d773b97e708255b6c183a740aa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-26 15:40:34 +0900

    Hoisted out `push_pvtbl`/`pop_pvtbl`

commit 497f13aea6bae0e2443f21b4eb35fee9df3424d7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-26 15:33:40 +0900

    Wrap `p_kw` in an array at `p_kwarg`

    Not in `p_kw` itself, which makes key and variable/expr pair only
    now.

commit 265b5382b21db28e52d0314ef47025f881dcbf0f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-26 14:00:08 +0900

    Allow `$10` and more in the Ripper DSL

commit 7db719c51652f0de6cae079c6ce0723dd00a9939
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-26 19:08:56 +0900

    Write rbinc files to the source directory

    Update the target file itself of the dependency on this script.
    Fall back to the current working directory if unwritable.

commit 8b208293963cafa1469947a9957b59ce68895af1
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-26 19:07:29 +0900

    Remove an unnecessary variable

commit 82525fcce192aa5582480164f5c109f9f2fe621b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-26 18:25:56 +0900

    Add sync task for ruby/openssl

commit 1fe31737d826bcc0a875419f5451679ae7ec04eb
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-26 18:20:19 +0900

    Slightly fix the warning message [ci skip]

    I'm not sure, but maybe it was grammatically incorrect?

commit 958641d9919f19a1e37c633e9dc44d2986904628
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-26 18:17:56 +0900

    Suggest an alternative to suppress the irb warning

commit 5a6e3e7552382a4863ef5a8833798edb22abb3c7
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-26 16:19:18 +0900

    Add `--with-openssl-dir` to windows on GitHub Actions

    https://github.com/ruby/ruby/commit/7bd7a013b14fb6c4403ff243ec5db13c5c71f552/checks?check_suite_id=328682567#step:10:1634
    ```
    *** Following extensions are not compiled:
    openssl:
            Could not be configured. It will not be installed.
    "       d:/a/ruby/ruby/src/ext/openssl/extconf.rb:97: OpenSSL library could not be found. You might want to use --with-openssl-dir=<dir> option to specify the prefix where OpenSSL is installed."
    ```

commit 307e899d78057f7b5b504034eea103f4a8a89ba3
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-26 11:46:22 +0900

    * 2019-11-26 [ci skip]

commit 7bd7a013b14fb6c4403ff243ec5db13c5c71f552
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-11-26 11:44:11 +0900

    Fix `$(RMALL) -r` on Windows

    `set recursive=1 &` sets `1 ` to `recursive`, not `1`.

commit 26625bc33c32e0945bf727234a3ce6da1eb0ddc4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-19 17:17:00 +0900

    [ripper] Quoted label without expression must be a local variable

    The difference from 0b8c73aa65add5c57b46b0cfdf4e661508802172 is to
    add the result of `string_add` event to marking objects.

    ```C
                                RNODE($1)->nd_rval = add_mark_object(p, $$);
    ```

commit 86461fc28cd9c05670ece440d337f255b33e6def
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-25 16:52:50 +0900

    lldb_cruby.py: improved dump of Symbol

    [ci skip]

commit 09e76e982801a838688ea80be29844ed91c23f46
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-25 15:05:53 +0900

    Improve consistency of bool/true/false

commit e27acb61485189fd7647741b6ca19920989dec03
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-25 14:02:15 +0900

    add fast path for argc==0.

    If calling builtin functions with no arguments, we don't need to
    calculate argv location.

commit 5c6235a83cc6a20c27f3e3a94381b4efcad4c3fc
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-25 12:10:05 +0900

    Set TRUE/FALSE to `bool ruby_tz_uptodate_p` instead of 1/FALSE

commit 714a0cefc10b8f0a2a89e6cfb06723d72f2a5b99
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-25 10:54:09 +0900

    Fix a typo [ci skip]

commit a5f0d1d71598451dd8461ba52a3a143cb33afdd3
  Author: Junichi Ito <jit@sonicgarden.jp>
  Date:   2019-11-25 10:16:59 +0900

    Remove duplicated line in NEWS [ci skip]

    [ruby-core:95935] [Misc #16365]

commit 9af52c0d099083fb6b56f39584a0909baa9e7a10
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-25 09:19:42 +0900

    lldb_cruby.py: fixed dump of embedded RArray

    [ci skip]

commit ce50af21af3d23e292b73f955a8b12ea9c2038e3
  Author: Pawe Przeniczny <pawel.przeniczny@airhelp.com>
  Date:   2019-11-25 07:08:16 +0900

    Fix the docs for Proc#>>.

    The docs are wrong about the behaviour of `#>>` (looks like it was copied from `#<<`)
    In `(prc >> g).call(n)` _prc_ is called first (with _n_), *then* _g_ is called with the result.

    Code examples are OK.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2691

commit fd956c72eaeb07d26d61310a9e4b55b500237c02
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-25 07:27:15 +0900

    Cache loaded module to suppress method redefined warnings

commit 90872520674dcc070d693430ee139042ba514591
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-25 06:50:27 +0900

    * 2019-11-25 [ci skip]

commit 51ea1abb5f2ed70387dda28a5d0d9ee817367d61
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-25 05:38:09 +0900

    Remove e2mmap dependency

commit efbca15116d4aea1588c6ba4ef0eb72c3c55c1db
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-25 03:10:35 +0900

    Remove lib/irb/slex.rb

commit 1aeb201d28ae2a10f7856be72ac6d705982b67ab
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-24 23:29:09 +0900

    Remove debug code...

commit 411644186b3bc9515fe7f60627bc1dea5d89cc36
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-24 23:15:25 +0900

    * 2019-11-24 [ci skip]

commit 745ab168185fc8f3c9d9dbd3a2355738776aee6d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-24 22:42:08 +0900

    Disable tracer ext of IRB when tracer doesn't found

commit b563439274a402e33541f5695b1bfd4ac1085638
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-23 16:00:39 +0900

    Show include directive differences only when under git

    When building from tarballs, the source directory is not a git
    repository.

commit 9318e1ff3e700250dba277924672634c6ecf2940
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-23 11:41:27 +0900

    Use realpath to try to fix failures with symlinks

commit 818708edab6e950a8c1828816b73d36f05585f9f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-23 07:22:33 +0900

    Stop using undefined matrix.os for macOS

    and use github.workflow instead. Applied a similar change to MJIT too.

commit b0614a0f968d40fb1bad31592fc9a607dbac447d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-23 05:44:35 +0900

    Tracer.set_get_line_procs should support block and Proc object

    Original Tracer.set_get_line_procs is implemented by
    "def set_get_line_procs(p = proc)". It means that original
    Tracer.set_get_line_procs supports block and Proc object.

commit 1ee010a3171978007a4550e8077f1e4b646bd80a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-23 05:20:23 +0900

    Tracer.add_filter should support block and Proc object

    Original Tracer.add_filter is implemented by "def add_filter(p = proc)". It
    means that original Tracer.add_filter supports block and Proc object.

commit 8e743fad4e9124bd59bb5f14473cb188db9d3c34
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-11-22 04:05:48 +0900

    Count pinned slots using only bitmap

    This is significantly faster than checking BUILTIN_TYPEs because we
    access significantly less memory. We also use popcount to count entire
    words at a time.

    The only functional difference from the previous implementation is that
    T_ZOMBIE objects will no longer be counted. However those are temporary
    objects which should be small in number, and this method has always been
    an estimate.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2688

commit 26fd8d962ce42b7eb8d1c1eb43ddfa1ff24dc3aa
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-11-21 07:18:40 +0900

    Optimize pinned page sorting

    Previously we would count the pinned objects on each comparison. Since
    sorting is O(N log N) and we calculated this on both left and right
    pages on each comparison this resulted in a extra iterations over the
    slots.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2688

commit 3f4199b0af791572b7abf63f33bb3b0b9b53d08f
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-11-21 07:07:20 +0900

    Use value of use_verifier in gc_compact

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2688

commit 144bff43fc0b69361f6aa29448d24dd161b7d359
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-23 01:58:08 +0900

    * 2019-11-23 [ci skip]

commit 271cb9acd268c6074b86426e25ee61b5987e5fb3
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-23 01:55:29 +0900

    Suppress git error message

    `fatal: not a git repository (or any of the parent directories): .git`

commit d7f100226d41df364b048c7956b5140922970e9a
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-23 01:29:53 +0900

    Skip test_validate_gemspec when tarball and git installed too

    `git --version` failed as expected when git is not installed,
    but unexpectedly pass when git installed and pwd is not in git working directory.
    So use `git rev-parse` instead, and it failed when git installed too.

commit 053f78e13988e9253d1f207bf5e23d9505112b32
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-22 23:56:18 +0900

    internal.h: Add a prototype declaration for rb_gvar_readonly_setter

    emscripten fails to compile ruby due to lack of this.

commit 994435d0efa9931d0475de923c4e6c227d03e398
  Author: Vt Ondruch <vondruch@redhat.com>
  Date:   2019-11-22 17:47:30 +0900

    Revert "Update dependencies"

    This reverts commit e1b234148829f65bea9f5ecc7018beb782ea6023.

    This allows to build Psych against system libyaml again on Fedora.

    [Bug #16359]

commit 35608760ffae00e0daebecd260191019a9b32648
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-22 19:05:58 +0900

    Add github repo to remove_tag

commit a93d0a4e62c50a53ccdc3b2bc114f75a25bfc40f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-22 18:39:39 +0900

    Check -1 arity for C++

commit f9d20a1bf157885975aacffdcb22f2b210f1258d
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-22 13:58:32 +0900

    * 2019-11-22 [ci skip]

commit 8eb0a9e5668032e750b91739cc40f3180278728d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-22 13:55:59 +0900

    Use jsDelivr instead of raw.githubusercontent.com

    Try to fix download error on Solaris CI

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-master/log/20191121T162422Z.fail.html.gz
    ```
    tool/downloader.rb:243:in `rescue in download': failed to download config.guess (RuntimeError)
    Net::HTTPFatalError: 503 "Service Unavailable": https://raw.githubusercontent.com/gcc-mirror/gcc/master/config.guess
    ```

commit 88d6009d91c197049da9d6efeb406aec5eb5d551
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-21 23:10:30 +0900

    Use more strict regexp to avoid to match naninanirb.rb

commit ffab1bfdfcb9f1448c063e93f04209c90327ad9c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-21 15:17:34 +0900

    Fixed for old git

commit 97a5af62a318fcd93a4e5e4428d576c0280ddbae
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-21 10:57:36 +0900

    Skip updating revision.h when the revision is unchanged

    note: GNU make only.

commit a9d4f2d03c847ec1c89dc03a5076a9fa29ffa61f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-22 02:33:06 +0900

    Support %U/%u/%W/%w/%V/%g/%G formats in Time.strptime

    Most of these formats were documented as supported, but were not
    actually supported. Document that %g and %G are supported.

    If %U/%W is specified without yday and mon/mday are not specified,
    then Date.strptime is used to get the appropriate yday.

    If cwyear is specifier without the year, or cwday and cweek are
    specified without mday and mon, then use Date.strptime and convert
    the resulting value to Time, since Time.make_time cannot handle
    those conversions

    Fixes [Bug #9836]
    Fixes [Bug #14241]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2685

commit 8f1062127e40767240aa0a0fe18fd48687bc04e9
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-21 07:28:18 +0900

    Add test/reline/test_string_processing.rb

commit 9131e62f1862a1736d37d934cda603dc91b2c831
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-21 07:05:27 +0900

    [ruby/reline] Version 0.0.7

    https://github.com/ruby/reline/commit/09d370bdc19e62f0a27c2240e19b07963afd922f

commit f30f78e2e054d72d4997db8c14eda81479270ee8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-21 05:21:31 +0900

    Version 0.0.6

commit e4127cdd3e2597d1814c59cb842d4dff0ba73921
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-21 05:25:01 +0900

    Version 1.1.0

commit 95f20f463aa07fbb2e5efbdb89a93d94861cdc49
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-21 07:00:01 +0900

    Consider escape sequence to calculate prompt width

commit 1197a036ae1c48ac0842bb2a0dc8af213def47d7
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-21 04:37:29 +0900

    Add a proper cast to pass JIT tests on mswin.

    https://ci.appveyor.com/project/ruby/ruby/builds/29001248/job/ye80bsrmewdgw294

commit eee70b41d4c04caa06a68cc4847a600eb7322cb8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-21 02:44:15 +0900

    Add a warning message and --legacy of an alias of --singleline

commit 9d6f78822c61348989802848150f103f0a4ef7d0
  Author: Y. Ushiki <citrus.yubeshi@gmail.com>
  Date:   2019-10-30 08:49:03 +0900

    Refactor filter_backtrace

commit 04d0d93ebf8692170218fa9d55216aaca74be30b
  Author: Y. Ushiki <citrus.yubeshi@gmail.com>
  Date:   2019-10-30 08:43:19 +0900

    Fix filter_backtrace for context-mode 0

commit 91bf3b7a77e187794cc84549f330e5675fb5d367
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-30 09:32:16 +0900

    Use singleline/multiline instead of readline/reidline

commit 9b52bacc62c3db13ea18fa5ea4d9b9a92b5fcb86
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-21 02:14:20 +0900

    Refined inspection of argument forwarding

commit f835a74da45f95073d12f84c3b8de9fb2f1e9ff6
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-21 00:48:59 +0900

    * 2019-11-21 [ci skip]

commit 6723aa07e591a13996b5af205c589200d44c5249
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-11-20 09:13:42 +0900

    Change argument `Proc` to `#call` defined object.
    This is the same as the behavior of Readline.

commit 81586a4d9fd6afe1c39f737a704c5010faf22192
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-11-16 11:13:19 +0900

    Add <Home> <End> keys.

commit 777973084e599cf9efa490173709b187fb507f90
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-20 17:56:59 +0900

    Add tests of argument forwarding's parameters and inspect

commit 633625a083c5f02e78355cb12818056e54330e88
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-20 17:55:03 +0900

    Mintty on Cygwin isn't a kind of command prompt, can process ANSI escape code

commit ae818b589efcb5dca47d9ceb888cb658ef56e286
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-20 17:21:38 +0900

    add a NEWS entry for Method#inspect

commit fc22b0eaa3fa073f622917364cbb573cd6ba2bfc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-20 16:27:57 +0900

    Always forward declaration is needed

    `rb_resolve_refined_method_callable` is referenced in
    `refine_sym_proc_call`, even when pre-compiling mjit header on
    mswin.

commit 83900528ad6a2cf37360abe2bcebb16787177838
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-20 16:23:59 +0900

    Turn C4047 warning into error

    Warned at making precompiled header on mswin.

    ```
    building rb_mjit_header-2.7.0.pch
    vm.c
    d:\a\ruby\ruby\src\vm_args.c(1117): warning C4047: '=': 'const rb_callable_method_entry_t *' differs in levels of indirection from 'int'
    rb_mjit_header-2.7.0.pch updated
    ```

commit 7608baf92ae2f3b29786e7fca021c8c8d24016f8
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-20 15:51:10 +0900

    re-add function prototypes

    This commit reverts a part of 0e8219f591f3f17cb7ee361e8a60dbef08145883
    which broke icc.  See also https://rubyci.org/logs/rubyci.s3.amazonaws.com/icc-x64/ruby-master/log/20191120T010006Z.fail.html.gz

commit f90b22e3dc99fd8eff2235e847e52266d20e8488
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-20 15:37:05 +0900

    Revert the line for nextafter.c for FreeBSD make

commit 50cc9341450cfbdf9a40df3d38600d8d2854a0a3
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-11-20 09:33:20 +0900

    Update representation (discussed on ruby tracker)

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2618

commit baf482bab4776f781c3569d9f581e38bbf0548e1
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-27 20:32:17 +0900

    Fix test_module.rb

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2618

commit 4b583cff97025394fab4a014a2a8606dfb557475
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-27 19:39:33 +0900

    Method parameters inspect

    Example:

        def m(a, b=nil, *c, d:, e: nil, **rest, &block)
        end
        p method(:m)
        #=> #<Method: m(a, b=<default>, *c, d:, e: <default>, **rest, &block) ...>

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2618

commit da0d7211aa85b90f2246e2d9abfe08105f7ddedb
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-20 10:04:41 +0900

    Fix indent of a line when a newline is inserted to the next

commit 9306602f24e5c9be4cdae5ed7e69e746ae9e175e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-20 09:58:33 +0900

    Replace typo "bock" with "block"

commit 19a310b0ac6bfc78340d37963ea2655783760bee
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-20 09:56:13 +0900

    A preceding token of "do" of block has EXPR_CMDARG or EXPR_ENDFN

      meth do # the preceding token of "do" has EXPR_CMDARG
      end

      meth() do # the preceding token of "do" has EXPR_ENDFN
      end

commit 49b4507fd3caed356e4039da5820a7c843c6b05a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-20 08:39:43 +0900

    Number sign comment (# bla bla) is a kind of newline character

commit bc0da8e3ff409f09888ffe98e6e66b503ebc8083
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-19 20:58:11 +0900

    Generate history file path correctly when $HOME/.irbrc doesn't exist

commit ff41663403d3eb76d95f465cb94e14d2faaa04d1
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-11-20 00:35:47 +0900

    Fix memory corruption in Enumerable#reverse_each [ruby-dev:50867] [Bug #16354]

commit 61131edba7c885a6d12c4d6f0e502fb40381f184
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-20 00:55:14 +0900

    Revert "[ripper] Quoted label without expression must be a local variable"

    This reverts commit 0b8c73aa65add5c57b46b0cfdf4e661508802172, which
    seems breaking RVALUE consistency check.

commit f3c9803528d429a7b5e47f400caa33dfadd94da7
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-20 00:07:26 +0900

    * 2019-11-20 [ci skip]

commit 2439948bcc0ec9daf91cf79301195e59bad49aff
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-11-19 23:53:01 +0900

    Avoid needless object allocation

commit 822d7ae31659e4ab60c4d1aa6d088577d6bc74b0
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-19 17:34:43 +0900

    Add a test

    and rename from b.rb

    [ruby-core:95055] [Bug #16177]

commit 0b8c73aa65add5c57b46b0cfdf4e661508802172
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-19 17:17:00 +0900

    [ripper] Quoted label without expression must be a local variable

commit a5fe08fdd9d11f12a6837291ee588ab933a823b6
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-19 16:56:56 +0900

    care about TAG_FATAL.

    TAG_FATAL represents interpreter closing state and ec->errinfo
    contains FIXNUM (eTerminateSignal, etc). If we need to change the
    state, then errinfo is also changed because TAG_RAISE assumes that
    ec->errinfo contains a Exception object.

    Without this patch, TAG_FATAL is ignored and no ec->errinfo change
    so that it causes critical issue.
    [Bug #16177]

commit c53aec73ddf94bb9a06bead62c3bf58c5ba49bd3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-19 15:06:11 +0900

    Configure static extensions only if in charge

    Get rid of races in parallel configuration when using the
    ext/Setup file.

commit f6239ce0fc906c9d407e7da33f447575670a79bd
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-19 13:16:04 +0900

    peep-hole optimize VM instructions

    Some minor optimizations.

    Calculating -------------------------------------
                               ours       trunk
              vm2_regexp     8.479M      8.346M i/s -      6.000M times in 0.707612s 0.718916s
       vm2_regexp_invert     8.605M      8.350M i/s -      6.000M times in 0.697298s 0.718576s

    Comparison:
                           vm2_regexp
                    ours:   8479223.3 i/s
                   trunk:   8345893.8 i/s - 1.02x  slower

                    vm2_regexp_invert
                    ours:   8604647.4 i/s
                   trunk:   8349852.8 i/s - 1.03x  slower

    Calculating -------------------------------------
                               ours+jit   trunk+jit
    Optcarrot Lan_Master.nes     68.603      64.167 fps

    Comparison:
                 Optcarrot Lan_Master.nes
                    ours+jit:        68.6 fps
                   trunk+jit:        64.2 fps - 1.07x  slower

commit 75e8dd58f69c190c9698d0133942032903fb2f07
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-19 13:06:00 +0900

    Remove TEST_BUNDLED_GEMS_ALLOW_FAILURES

    https://github.com/seattlerb/minitest/pull/798 is closed

commit 0e8219f591f3f17cb7ee361e8a60dbef08145883
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-18 12:13:08 +0900

    make functions static

    These functions are used from within a compilation unit so we can
    make them static, for better binary size.  This changeset reduces
    the size of generated ruby binary from 26,590,128 bytes to
    26,584,472 bytes on my macihne.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2682

commit 78e266da1dede1c81e634982e76a129c5720d80e
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-11-19 11:40:00 +0900

    Clarify documentation for `InstructionSequence#compile`.

    We incorrectly assumed that the `file` argument should be the file name and
    caused https://github.com/scoutapp/scout_apm_ruby/issues/307 because
    exception backtrace did not contain correct path. This documentation
    clarifies the role of the different arguments and provides extra
    examples.

commit cef9ebfbd3565f9feb25d0140da3176ea26bf4a9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-13 15:28:12 +0900

    Suppress `stty` error on Apple Terminal

    `stty` called in `Reline::ANSI.deprep` command shows the following
    error message on macOS Apple Terminal, with some settings.

    ```
    $ LANG=C irb
    irb(main):001:0>
    stty: 'standard input': unable to perform all requested operations
    stty: 'standard input': unable to perform all requested operations
    ```

commit 473e314791964019e017410fb761b873d61e591c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-13 15:22:39 +0900

    Prefer dedecated assertions

commit 0be0d90ab0566df186ad7dc3b9e5ec9e06e296a3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-19 02:31:36 +0900

    pack is not using invokebuiltin anymore

commit fea24bbfdbe17da1038355fe7e0f7063f8c26c87
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-18 23:41:26 +0900

    Fix glob base in bundler.gemspec

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2683

commit 9aa75795f9f438d5c874d8e418c3c7cdd63024fa
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-18 23:39:57 +0900

    Skip some tests if extracted from tarball

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2683

commit e9992bcab03b1646d18b4a417643273a7bbb6158
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-18 23:36:51 +0900

    Allow unknown if ruby core

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2683

commit 9067f43c0ae6d42222a0dd2cd55380b11343ddd1
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-19 00:27:05 +0900

    * 2019-11-19 [ci skip]

commit 0c0278b90a6fe1e71e0e5c27069b8b2976e2a7cf
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-19 00:25:49 +0900

    test/-ext-/string/test_fstring.rb: suppress a warning for taint

commit 373769c93995abeeb546bdcd9e6527c77aefa1d4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-19 00:12:50 +0900

    NEWS: Add an example for the warning of "yield in singleton class"

commit f09fc1b0344e65aeb9c11aaeb23c99954265fe4d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-18 23:14:13 +0900

    Dependents on probes.h need the dummy header too

commit e1b234148829f65bea9f5ecc7018beb782ea6023
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-07 23:22:06 +0900

    Update dependencies

commit 39492d6ce6ee11cbb275dc6f48c73de93f8549ce
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 00:02:17 +0900

    Build ruby-runner

commit 227220b25aad9841eb979c18a0251b71de824e88
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 00:02:17 +0900

    Skip dependencies on timestamp files

commit 209164e44f0bd0bbd938bf726e88d0dd29f84d55
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-18 18:42:22 +0900

    Renamed assembly file like as e64f71f812324d098bed12ed68c2bc1d6e780c90

commit 7a9b2039b7b82f081f2cab40a4fbbc8b01231ca4
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-18 12:00:19 +0900

    delete unused codes

    Suppress compiler warnings.

commit 57cd4623cfb56d12eb308eaf5fb09612e4572c19
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-18 13:36:34 +0900

    should not use __func__

commit 22c9504905114cfb58ebc0aa631200f0caafd4e0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-18 11:05:08 +0900

    rb_tainted_str_new_with_enc is no longer used

commit 5e34ab5406942d43b4c0fbccfc153409d0386d1e
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-18 10:36:48 +0900

    add casts.

    add casts to avoid compile error.
    http://ci.rvm.jp/results/trunk_clang_39@silicon-docker/2402215

commit c3693bbaaa39d36210060fb4478751d66c0052ad
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-18 10:24:38 +0900

    catch up last commit.

    Array#pack uses `opt_invokebuiltin_delegate_leave` now.

commit 71fee9bc720ba7a117062bf3f78b6086527b656c
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-15 17:49:49 +0900

    vm_invoke_builtin_delegate with start index.

    opt_invokebuiltin_delegate and opt_invokebuiltin_delegate_leave
    invokes builtin functions with same parameters of the method.
    This technique eliminate stack push operations. However, delegation
    parameters should be completely same as given parameters.
    (e.g. `def foo(a, b, c) __builtin_foo(a, b, c)` is okay, but
    __builtin_foo(b, c) is not allowed)

    This patch relaxes this restriction. ISeq has a local variables
    table which includes parameters. For example, the method defined
    as `def foo(a, b, c) x=y=nil`, then local variables table contains
    [a, b, c, x, y]. If calling builtin-function with arguments which
    are sub-array of the lvar table, use opt_invokebuiltin_delegate
    instruction with start index. For example, `__builtin_foo(b, c)`,
    `__builtin_bar(c, x, y)` is okay, and so on.

commit 93ce4f1cd7c96f0fdbeebc87a9fa64d07cede729
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-18 10:14:56 +0900

    update deps.

    https://travis-ci.org/ruby/ruby/jobs/613242256#L2205

commit b753929806d0e42cdfde3f1a8dcdbf678f937e44
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-18 08:00:52 +0900

    * remove trailing spaces. [ci skip]

commit 4c7dc9fbe604cc0c8343b1225c96d4e5219b8147
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-15 05:15:01 +0900

    Update NEWS for $SAFE/taint changes

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit 3a0de05beeb997ec77d35755d9d303e1ca858cb7
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-05 00:44:33 +0900

    Remove mention of $SAFE and taint from doc [ci skip]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit c257303ae78d0e307a80dbe5ccd405abc6e8d44d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-26 07:49:21 +0900

    Deprecate rb_eval_cmd, add rb_eval_cmd_kw

    rb_eval_cmd takes a safe level, and now that $SAFE is deprecated,
    it should be deprecated as well.

    Replace with rb_eval_cmd_kw, which takes a keyword flag.  Switch
    the two callers to this function.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit d03da13b17484cb3f8697e9125e028eb65ef7a39
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-15 09:56:02 +0900

    [ruby/strscan] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit afbd8f384a54b934debe6e48cfc299fb2c7669e9
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 04:28:44 +0900

    [ruby/openssl] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit 17e8a6eff4954a37966c10f35db6551fce1d80a7
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 04:25:15 +0900

    [ruby/io-console] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit 398cd3cc7dda375c2d21355057c11ecb4abeda70
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 04:10:03 +0900

    [ruby/etc] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.

    Still untaint the tmpdir object on Ruby <2.7, as returning
    a tainted string there could cause problems.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit 23f1fb066303838a0d045b5981fe3c4ad077399e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-15 05:30:56 +0900

    [ruby/rss] Only check taint on Ruby <2.7

    Ruby 2.7 deprecates taint and it no longer has an effect.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit 50013f7ebcafeea7f5163dc6ed1b1bf58c465ac7
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 03:33:09 +0900

    [ruby/rexml] Only taint on Ruby <2.7

    Ruby 2.7 deprecates taint and it no longer has an effect.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit ab42e5a486a5b27107296fa34056f03ac878e306
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-15 11:54:13 +0900

    More fixes for $SAFE/taint post merging

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit ffd0820ab317542f8780aac475da590a4bdbc7a8
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-25 12:59:12 +0900

    Deprecate taint/trust and related methods, and make the methods no-ops

    This removes the related tests, and puts the related specs behind
    version guards.  This affects all code in lib, including some
    libraries that may want to support older versions of Ruby.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit c5c05460ac20abcbc0ed686eb4acf06da7a39a79
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-21 11:06:22 +0900

    Warn on access/modify of $SAFE, and remove effects of modifying $SAFE

    This removes the security features added by $SAFE = 1, and warns for access
    or modification of $SAFE from Ruby-level, as well as warning when calling
    all public C functions related to $SAFE.

    This modifies some internal functions that took a safe level argument
    to no longer take the argument.

    rb_require_safe now warns, rb_require_string has been added as a
    version that takes a VALUE and does not warn.

    One public C function that still takes a safe level argument and that
    this doesn't warn for is rb_eval_cmd.  We may want to consider
    adding an alternative method that does not take a safe level argument,
    and warn for rb_eval_cmd.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2476

commit 7b6a8b5b54448235e17ed187d9d73f56893e1b6f
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-18 03:25:17 +0900

    * 2019-11-18 [ci skip]

commit 7c6bedfe5c8a3a36d79bdc63f04d7ccb0a82234e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-18 03:23:45 +0900

    Remove unnecessary check

commit e7c5c60095537dabda7be5102ae66bd39a1ad133
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-17 23:25:37 +0900

    [ruby/irb] Remove ruby-token.rb from spec.files

    https://github.com/ruby/irb/commit/0180dc74bc

commit be95d591609ffea7727628a8af6f4c0a6b75d849
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-17 23:11:58 +0900

    [ruby/irb] Version 1.1.0.pre.4

    https://github.com/ruby/irb/commit/4945d0e676

commit 910f9b833855089802ff86a2ca00d43c9a0b618c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-17 23:12:18 +0900

    [ruby/reline] Version 0.0.5

    https://github.com/ruby/reline/commit/d57c7ea252

commit a8e4a9f03ade7fd67fbd8ab1271750dd45eca282
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-17 13:12:06 +0900

    * 2019-11-17 [ci skip]

commit 449b2b9214256b059ed883770222382d3bc90578
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-17 13:11:25 +0900

    Fix typos

commit 11ae47c2669b64b64e2b34dd6dff02e72fd60881
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-15 16:50:11 +0900

    [ruby/reline] Restore left cursor key support on Unix like OSes...

    https://github.com/ruby/reline/commit/98b72af751

commit fa7618e4c1b382cb5863161017ef89116af3e24f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-15 16:50:11 +0900

    Implement em_set_mark and em_exchange_mark

commit 6744593b8cd836967b40a4d76a9ac301b9e0f973
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-15 11:01:06 +0900

    Fix a typo [ci skip]

commit 018be445e9e9061364e8ba20dee9d25cb6f20e55
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-15 03:56:58 +0900

    * 2019-11-15 [ci skip]

commit 9c1abe2a6c5e6288ed208000fbf811d145af9355
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-15 03:51:06 +0900

    load prelude.rb by builtin features.

    The script in prelude.rb was embed in MRI to load it (eval this
    script at everyboot).
    This commit change the loading process of prelude.rb. MRI doesn't
    eval a script, but load from compiled binary with builtin feature.

    So that Init_prelude() does not load `prelude.rb` now.

commit c9ffe751d126a302d0e7e53e645e44084e339dde
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-13 12:41:39 +0900

    delete unused functions

    Looking at the list of symbols inside of libruby-static.a, I found
    hundreds of functions that are defined, but used from nowhere.

    There can be reasons for each of them (e.g. some functions are
    specific to some platform, some are useful when debugging, etc).
    However it seems the functions deleted here exist for no reason.

    This changeset reduces the size of ruby binary from 26,671,456
    bytes to 26,592,864 bytes on my machine.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2677

commit 4d615a0c8f4759ce4f6b96b643ef957837bdf20e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-14 16:37:25 +0900

    `#@1` is no longer an embedded variable

commit 703e05b0eee3017a63690155e55a97d678f073cb
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-14 16:09:36 +0900

    Added default gems entry to NEWS

commit 3b614ec48a283e61334c70806f076cea3b2192ca
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-14 16:07:48 +0900

    Update RubyGems and Bundler entries on NEWS

commit 48edaf8b8a03ef7a1c4f936c8c92e9dcf4271872
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-14 13:00:25 +0900

    test/ruby/test_proc.rb: suppress "method redefined" warnings

commit 179062dd808c0a48e16269a2c42b10235cbbacd8
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-14 04:18:41 +0900

    move rb_vm_lvar_exposed() correctly.

    rb_vm_lvar_exposed() is prepared for __builtin_inline!(), needed for
    mini_builtin.c and builtin.c. However, it's only on builtin.c.
    So move it to make it as a part of VM.

commit a8f9e25ca8cc160683711baed00008461db2ad16
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-14 02:37:25 +0900

    Suspend many fibers test on JIT for now

    https://github.com/ruby/ruby/runs/301411717

    No C backtrace information and this is hard to fix immediately.
    As CI doesn't provide helpful information, this should be debugged
    locally or at least have more logs there.

commit afc93e96ffa93aa02b3e432037b3f88d002f5eea
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-14 02:30:53 +0900

    Make GitHub Actions notification more like Travis

    Build's sequential number is a link in Travis, and also YYYY-MM-DD-XX is
    a little hard to parse.

commit a102bcab418dc61ccfe6a49870393c42305d2895
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-14 01:48:41 +0900

    * 2019-11-14 [ci skip]

commit 3a408aff578bcde428ebdd4560d819c1ba792f2c
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-14 01:48:08 +0900

    try to remove vm_core.h

commit 7f2c98b11d9eedd7028a1ccb2c1f88db71db28ca
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 19:56:33 +0900

    Use shallow-since instead of depth

    commit number of today requires log since 0:00 UTC.
    So commits of 24 hours are enough.

    https://www.git-scm.com/docs/git-clone#Documentation/git-clone.txt---depthltdepthgt
    > Implies --single-branch unless --no-single-branch is given to fetch the histories near the tips of all branches.

    So I add `--single-branch` too.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2680

commit 990728170c5e4d6b763fa42c48ce82473d753aad
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 19:49:07 +0900

    Add commit number of today to notification of mjit CI too

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2679

commit e7ea6e078fecb70fbc91b04878b69f696749afac
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-13 16:53:12 +0900

    Check more likely condition first [Feature #16335]

commit 3324bc9d172e52114add3a0cdd426b5648cdc33b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 16:09:59 +0900

    Skip tailcall test for MJIT

    failing in https://github.com/ruby/ruby/runs/300579218

commit bdf71a3ef032ed4675a6f3217cf5c9efb062c0b1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 16:04:25 +0900

    Fix MJIT test's Slack notification

commit 57dc3ff73dcc5ef5ca080e841db58862c89b03d8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-13 13:34:06 +0900

    Removed sync library from sync tool

commit 7913daf36c25cefd66887993e0946c54b7d7d294
  Author: Dylan Thacker-Smith <Dylan.Smith@shopify.com>
  Date:   2019-11-08 01:14:47 +0900

    Add missing Makefile dependencies for the tool/insns2vm.rb script

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2657

commit ac112f2b5dc7e16ccde8f048be80946187a033b0
  Author: Dylan Thacker-Smith <Dylan.Smith@shopify.com>
  Date:   2019-11-06 15:47:32 +0900

    Avoid top-level search for nested constant reference from nil in defined?

    Fixes [Bug #16332]

    Constant access was changed to no longer allow top-level constant access
    through `nil`, but `defined?` wasn't changed at the same time to stay
    consistent.

    Use a separate defined type to distinguish between a constant
    referenced from the current lexical scope and one referenced from
    another namespace.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2657

commit a5b6d7bca84fce6e13c68e8753893c4697960e3a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-13 15:10:05 +0900

    Suppress warnings except for when last evaluation

    Co-authored-by: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>

commit c33d29fba5a04bd31242eb51e54d2ec198c34ba3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 15:13:49 +0900

    We're not using Azure Pipelines anymore

commit dca2eb350c13de4446df92b958a40f14d67c97b8
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 15:11:34 +0900

    Update badges of GitHub Actions

commit d336db6568cc96dfee503c053e8f444dc7243858
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 15:04:49 +0900

    Fix a typo

commit 68ea892daf6e4073919d58ae83c7ff7389fbf184
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 14:55:03 +0900

    Remove obsoleted Wercker status badge

commit 331655cbe7139a287267c90b3ab46ed856aebb5b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 14:48:05 +0900

    Migrate Wercker MJIT tests to Actions (#2676)

    * Migrate Wercker MJIT tests to Actions

    * Support pull request for testing

    * Capitalize other jobs too

    * Make it a command name for consistency [ci skip]

    * Remove wercker.yml

    * Add --jit-verbose=2 for debugging

    * Install MJIT headers

    * Separate install for sudo

    * Trigger build

  Notes:
    Merged-By: k0kubun <takashikkbn@gmail.com>

commit c4064aef7f48c51add6c24467da64528d5a2a2a5
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 13:22:46 +0900

    Add commit number of today to notification of GitHub Actions

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2675

commit 245977b2861f5fa6a7341333ca9b1897e959489b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 13:56:52 +0900

    Stop debugging the same thing twice

    See L25-28

commit 9ee88a070f797d5eb9516c6a17359463fb5c37b9
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 13:56:15 +0900

    Remove MSPECOPT formerly for debugging

    At least the comment looks obsoleted. Aren't we using $JOBS already?

commit 02b6451c17cf81d138cd653fa989080246a1a63a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 13:44:00 +0900

    Improve Actions job name shown on toolip

    Hoping to make it like `make (check, ...)`, `make (test-bundler, ...)`
    instead of `latest (...)` because some of the jobs are already not
    running on a latest platform.

commit 3118c7a2d20c6894a53480501d53daa4e6d3a743
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 13:38:05 +0900

    Run test-bundler / test-bundled-gems for Ubuntu

    only once. Doing it on multiple Ubuntu versions may not worth it.

commit 9980728ad61dc544d2ce5b981b54af36fa6e2a82
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-13 13:22:33 +0900

    Remove Drone CI in favor of Travis arm32

commit 3ad78264dc7e680a004a8ea1397d4ac9297134ba
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 13:13:52 +0900

    Use style of set-env

    https://help.github.com/en/actions/automating-your-workflow-with-github-actions/development-tools-for-github-actions#set-an-environment-variable-set-env

commit 546e50c2fb1fc749399b1a6cf3ce9e01c27b9398
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-13 10:35:52 +0900

    Merge released version of RubyGems 3.1.0.pre3

commit 63f363b70dc08efd6b2d3f59183d4de1e882ef81
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 10:31:02 +0900

    Update dependencies

    patch from https://travis-ci.org/ruby/ruby/jobs/611152175#L2204

commit bb9ecd026a6cadd5d0f85ac061649216806ed935
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-13 07:57:02 +0900

    Merge Bundler 2.1.0.pre3 released version

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2674

commit 00d56bdf66a3aeaadbc84196aacbd8d4e698cf79
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-13 09:55:54 +0900

    Try to fix error on solaris

    Add vm_core.h before builtin.h to pack.c for VM_CORE_H_EC_DEFINED.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-master/log/20191112T102505Z.fail.html.gz
    ```
    compiling dmyenc.c
    linking miniruby
    Undefined                       first referenced
     symbol                             in file
    rb_vm_lvar_exposed                  pack.o
    ld: fatal: symbol referencing errors
    gmake: *** [miniruby] Error 2
    ```

commit ae33f93836b556f36d5ffc4a7bca2c1b379c56d8
  Author: Yuichiro Kaneko <yui-knk@ruby-lang.org>
  Date:   2019-11-13 09:50:58 +0900

    Update comment of Ripper.lex

    This is follow up of 1f7cb4bee9.

commit 4bbfe1f7c42300e2212b8f6794d5254b4db8df1c
  Author: Jun Aruga <jaruga@redhat.com>
  Date:   2019-10-16 00:08:00 +0900

    Add arm32 case on Travis.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2673

commit a5448c46bdde27cb5ba8a800b29a84ced8047e94
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-13 02:29:13 +0900

    * 2019-11-13 [ci skip]

commit 4334c9315af972337fcad82c0056152c45808348
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-07 02:10:27 +0900

    Remove arm64 from allow_failures

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2672

commit bf34ade7ef32f89aa5ba238d0a780f23eacb0487
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 22:58:09 +0900

    Show the name `Kernel#proc` in the warning message

commit 3816622fbedd034d338fcb1bbdc80d163e302ae6
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-11-11 14:59:17 +0900

    Fixed `assert_equal` first argument to be expected.

commit fe45bee09312a233466171f40d6826e5e4f1f2f0
  Author: osyo-manga <manga.osyo@gmail.com>
  Date:   2019-11-10 16:00:41 +0900

    Reline#readline and Reline#readmultiline to private.

commit f36a53d03821624d30b3e91a7a75307b06e3a03c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-12 15:44:19 +0900

    Only enabled mon_owned condition with Ruby 2.5+

commit 3bf8ffad714efa98949e25095f1c5e2844318958
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 18:02:28 +0900

    Added assertions for realpath and realdirpath

    It is said that realpath(3) and realdirpath(3) on some platforms
    may return a relative path.

commit 0f2837847d5bfb65d20a89d196393212635fbe9e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-12 17:46:39 +0900

    Add ticket number of `FrozenError#receiver` [ci skip]

commit fb6a489af2765a3b56e301adf0019af6bbad6156
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-24 01:06:59 +0900

    Revert "Method reference operator"

    This reverts commit 67c574736912003c377218153f9d3b9c0c96a17b.
    [Feature #16275]

commit b41a19f92fdd9c8567e0650ceebb72386a96e395
  Author: Kazuhiro NISHIYAMA <znz@users.noreply.github.com>
  Date:   2019-11-12 17:22:19 +0900

    Add matrix.os to cache key (#2671)

    * Add matrix.os to cache key
    * Use multi-line string instead of array
      ref https://github.com/actions/cache/issues/44

  Notes:
    Merged-By: znz <zn@mbf.nifty.com>

commit a58b4eee25b79432d98a1c665edaf5ec0a054b2e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 17:14:10 +0900

    Warn on `...` at EOL

commit d1ae2bc27fd4183e6abb9e83691e192bfe1e5316
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-12 17:04:11 +0900

    NEWS: Make it clear that delegation syntax `(...)` requires parentheses

    Ref [Feature #16253]

commit fb02e3192cef96284501c82dfa024ea8a2b0ea80
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 16:35:01 +0900

    Create `RUBYCOMMONDIR` directory in advance

    As well as the directory per architecture.

    Closes https://github.com/ruby/ruby/pull/2669

commit 14db635097ef89a299531770ba8ed5800a58ab8f
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-12 16:15:58 +0900

    add NEWS about _1 as a local variable [ci skip]

commit b0fb9bda9ade532da9012c375c0026470484a346
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 00:09:34 +0900

    Strip the last line which become trailing spaces

commit dd0217a8696667960e834ba95534ac5731997f3d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 00:07:26 +0900

    Inline function should be static

commit 2de3feab44c928c30f35a4a3a445b4fdfc225024
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 00:08:39 +0900

    Get rid of `__` prefix which is presereved by C standard

commit 7c22898a3a5a10c8c71683918b53ec2d17fdc621
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 15:42:53 +0900

    Disable tOROP at EXPR_BEG

    Both cannot appear there anyway.

commit dbaf589fb84a5b42111c85f993430133d8cae32f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-12 12:49:05 +0900

    Update Rake 13.0.1

commit 593f0b88533c9d327b33d098bb6b3b51df871966
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-12 11:27:55 +0900

    Try to use actions/cache on windows

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2670

commit b38b26c62dc12da1d4fcee39de0c0cad598f5995
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 03:44:47 +0900

    [ruby/bigdecimal] Remove taint checking

    This removes the taint checking.  Taint support is deprecated in
    Ruby 2.7 and has no effect.  I don't think removing the taint
    checks in earlier ruby versions will cause any problems.

    https://github.com/ruby/bigdecimal/commit/1918d466f3

commit db33ab470cb4765f1b54384b51850e0db80f5aad
  Author: Aaron Patterson <aaron.patterson@gmail.com>
  Date:   2019-10-18 05:48:24 +0900

    [ruby/psych] Add a note about safe_load

    https://github.com/ruby/psych/commit/0910ae5575

commit 30fdee65d96924e0793ec702fcda909a2cac71ea
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 04:34:59 +0900

    [ruby/psych] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.

    I'm not sure if the untaint calls in deduplicate are still needed
    after the removal of tainting in the parser.  If they are not
    needed, they should be removed.

    https://github.com/ruby/psych/commit/73c1a2b4e0

commit 5ef41c91f0a1bca1617aaa4367ccf8e32c04b2d9
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-07-25 05:08:59 +0900

    [ruby/psych] Set required_ruby_version to 2.4.0

    https://github.com/ruby/psych/commit/4f1746a3c6

commit fd6445b7e8bab9d340be6f76688a8b96f1b52029
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-12 10:02:47 +0900

    Monitor#exit: check monitor ownership.

    Monitor#exit should be called by only onwer Thread. However, there
    is not check for it.

commit fef4370b409c990228cded2c425a6afb3bec2906
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-12 09:48:49 +0900

    check more.

commit ed90ec3e0d8ff7789569b40ba36d3b3ce0e706e6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-12 09:11:16 +0900

    Clear current argument name at empty block argument [Bug #16343]

commit 4a30fabfcfd72bd61bf1dad61f168eaba6100f12
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-12 09:35:26 +0900

    Monitor owner state check correctly.

    Monitor can be owned at the beginning of this method.

commit 2407e8972561143b34970fb5d9095be32676c685
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-12 08:39:38 +0900

    Revert "Use untaint for File.symlink in kernel_require.rb"

    This reverts commit d9978ce5d397866afae536db2aa708af3b7a4b2f.

    Untaint was tentatively restored due to test failures.  But now, the
    failed tests have been removed, so we can revert the tentative fix.

commit 9594f57f3df6c2538f96f018fa5f9a775ac7dde1
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-12 08:31:13 +0900

    test/ruby/test_require.rb: Remove the tests of require with $SAFE

    The taint mechanism is decided to be removed at 2.7.  [Feature #16131]
    So, this change removes the tests that expects a SecurityError when
    requiring a file under $SAFE >= 1.

    The reason why they should be removed in advance is because the upstream
    of rubygems has already removed a call to "untaint" method, which makes
    the tests fail.

commit d9978ce5d397866afae536db2aa708af3b7a4b2f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-12 08:03:26 +0900

    Use untaint for File.symlink in kernel_require.rb

      Partly reverted 7d463e360b9c4718b17378eb52783116a01b884b

commit b8d242d221641752a495ca43f8f211a3ad73d467
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-12 04:33:28 +0900

    release RUBYGEMS_ACTIVATION_MONITOR correctly.

    `File.symlink? safe_lp` can raise SecurityError and raising an
    exception can leave RUBYGEMS_ACTIVATION_MONITOR locking. This
    patch release it correctly.

commit 4be1e84d7894751799cc9d8ae2dec720952a02a3
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-12 04:13:54 +0900

    more messages

commit a815053a3ea16382bea8b420a3070b4da3c3bb94
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-12 04:03:33 +0900

    check monitor is owning for debug

commit 99be207c2acabe0030c376fd731608d9cd7c69b6
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-11 17:17:26 +0900

    add a NEWS entry about builtin features.

commit c02de30efbca2a2d89cdf188a27991f7ae15b9da
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-12 01:30:42 +0900

    tool/lib/leakchecker.rb: show the code location that allocated leaked fd

    by using ObjectSpace.trace_object_allocations.

    `make test-all LEAK_CHECKER_TRACE_OBJECT_ALLOCATION=true` will print not
    only leaked fds but also where it was created.

commit b72eda3c59cd0a15ed3536a3c0cd8aebd225f16b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-12 01:25:42 +0900

    lib/rubygems.rb: Suppress "Resolving dependencies..."

    And suppress "Leaked file descriptor" again.

commit 14b5c4cb66175553bda1cab70715d54fe46bffc7
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-12 01:23:23 +0900

    * 2019-11-12 [ci skip]

commit b2b12792720fe83afc1a64b41ca76fde6b7d74c5
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-12 01:22:09 +0900

    format-release uses the result of GitHub Actions

commit 0ba1ea7fbfc059e0e0114b4fc0bd66f3058d8b48
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-12 01:00:22 +0900

    Always use git.ruby-lang.org as origin

    naruse sets remote.origin.pushUrl = nonexistent as fail-safe
    configuration to avoid accidentally push a new branch to origin.

commit 45bb6f28db04a1f267f5b8d79392cb35087510d8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-11 22:55:32 +0900

    Remove ruby-token.rb

commit bcfe94b7f20fa3a581fc5d6f2aef837327bfb770
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-11 22:17:50 +0900

    Revert "Revert "Promote uri to default gems""

    This reverts commit fdfad905227a0e2e4c224d87181041fb75d5082e.

      f1f27da6c457684fdbfc0352297e6847f675ce4c resolved this.

commit f1f27da6c457684fdbfc0352297e6847f675ce4c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-11 21:49:21 +0900

    Revert "Try to revert the test failure with Ruby CI"

    This reverts commit 8b27c23b5d55bd707a89bb5d95d2bdba9e132c1a.

commit 8b27c23b5d55bd707a89bb5d95d2bdba9e132c1a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-11 20:19:29 +0900

    Try to revert the test failure with Ruby CI

      https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian9/ruby-master/log/20191111T093005Z.fail.html.gz

commit 9d3213ac856e1f5930bda555d4d65b173c6cdf83
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-11 19:03:43 +0900

    Skip test_validate_gemspec unless git installed

commit 7585bc31877d4f9725f8de51b4a2faf47acb6f34
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-11 17:57:45 +0900

    Merge Bundler 2.1.0.pre.3

      Features:
        - Add caller information to some deprecation messages to make them easier to fix [#7361](https://github.com/bundler/bundler/pull/7361)
        - Reconcile `bundle cache` vs `bundle package` everywhere. Now in docs, CLI help and everywhere else `bundle cache` is the preferred version and `bundle package` remains as an alias [#7389](https://github.com/bundler/bundler/pull/7389)
        - Display some basic `bundler` documentation together with ruby's RDoc based documentation [#7394](https://github.com/bundler/bundler/pull/7394)

      Bugfixes:
        - Fix typos deprecation message and upgrading docs [#7374](https://github.com/bundler/bundler/pull/7374)
        - Deprecation warnings about `taint` usage on ruby 2.7 [#7385](https://github.com/bundler/bundler/pull/7385)
        - Fix `--help` flag not correctly delegating to `man` when used with command aliases [#7388](https://github.com/bundler/bundler/pull/7388)
        - `bundle add` should cache newly added gems if an application cache exists [#7393](https://github.com/bundler/bundler/pull/7393)
        - Stop using an insecure folder as a "fallback home" when user home is not defined [#7416](https://github.com/bundler/bundler/pull/7416)
        - Fix `bundler/inline` warning about `Bundler.root` redefinition [#7417](https://github.com/bundler/bundler/pull/7417)

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2668

commit fd69f82675bf93a848e5aa58d117bf8bbf604188
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-11 17:37:21 +0900

    Revert "Warn EOF char in comment"

    This reverts commit 69ec3f70fab0c1c537c68fb135cc315181b1d750.

commit ba5b51ca5968314f5ca92fee0afaea44a78eb0b1
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-11 17:37:14 +0900

    Revert "Elaborated EOF char message a little"

    This reverts commit 6eaac7cfac668d6669be694fd7b723c4982ed218.

commit 7d463e360b9c4718b17378eb52783116a01b884b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-11 15:03:57 +0900

    Merge RubyGems 3.1.0.pre3

      * Fix gem pristine not accounting for user installed gems. Pull request
        #2914 by Luis Sagastume.
      * Refactor keyword argument test for Ruby 2.7. Pull request #2947 by
        SHIBATA Hiroshi.
      * Fix errors at frozen Gem::Version. Pull request #2949 by Nobuyoshi
        Nakada.
      * Remove taint usage on Ruby 2.7+. Pull request #2951 by Jeremy Evans.
      * Check Manifest.txt is up to date. Pull request #2953 by David Rodrguez.
      * Clarify symlink conditionals in tests. Pull request #2962 by David
        Rodrguez.
      * Update command line parsing to work under ps. Pull request #2966 by
        David Rodrguez.
      * Properly test `Gem::Specifications.stub_for`. Pull request #2970 by
        David Rodrguez.
      * Fix Gem::LOADED_SPECS_MUTEX handling for recursive locking. Pull request
        #2985 by MSP-Greg.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2666

commit 31416423809f64d4b5ea6b9651cced3179cc5ced
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-11 16:38:46 +0900

    __builtin_inline!

    Add an experimental `__builtin_inline!(c_expression)` special intrinsic
    which run a C code snippet.
    In `c_expression`, you can access the following variables:
      * ec (rb_execution_context_t *)
      * self (const VALUE)
      * local variables (const VALUE)
    Not that you can read these variables, but you can not write them.
    You need to return from this expression and return value will be a
    result of __builtin_inline!().

    Examples:
      `def foo(x) __builtin_inline!('return rb_p(x);'); end` calls `p(x)`.
      `def double(x) __builtin_inline!('return INT2NUM(NUM2INT(x) * 2);')`
      returns x*2.

commit 05a5c69e1a06a3853afb3744fa9925910b78904f
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-10 07:16:56 +0900

    add deps for miniprelude.c

commit 9142f802f1126d65abb1aad5e2bc91b5b833fe7e
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-10 02:25:57 +0900

    rewrite comment.

    Pointed by nagachika-san.
    https://ruby-trunk-changes.hatenablog.com/entry/ruby_trunk_changes_20191109

commit 65f7e3156f66bb4eba944c8ad2a463b9452b1a29
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-11 15:56:59 +0900

    Removed duplicate file

    "./tests/test_helper.rb" and "tests/test_helper.rb" in `s.files`
    are same.

commit 31ee6f6f5d7f562f065dfe364bb9afb09274948c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-11 13:10:55 +0900

    Extract gem files after update

    So that test/optparse/test_did_you_mean.rb can find did_you_mean.rb.

commit 6eaac7cfac668d6669be694fd7b723c4982ed218
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-11 12:57:40 +0900

    Elaborated EOF char message a little

commit 390293525a8c8564c62f7691414194705a193b40
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-11 12:19:40 +0900

    Remove binary data at installation

    And revert "Relaxed warning assertions",
    6f9be8505d172b110ec449478a791d70b9b74afb.

commit 6f9be8505d172b110ec449478a791d70b9b74afb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-11 12:09:19 +0900

    Relaxed warning assertions

commit 69ec3f70fab0c1c537c68fb135cc315181b1d750
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-11 09:59:40 +0900

    Warn EOF char in comment

commit ade038889468e7755d7ebfe75975e0e77d1e1dec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-11 09:35:37 +0900

    Fixed embedded document with EOF char

commit b42656b9c403da1bac8e1dd7534f0a7a09df67b0
  Author: Yuichiro Kaneko <yui-knk@ruby-lang.org>
  Date:   2019-11-11 09:22:46 +0900

    Ignore *.rbinc files

commit b5dff926e710a4fb069596f1911c998a28e3262a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-11 09:16:00 +0900

    Prefer assert_syntax_error and assert_valid_syntax

commit a73389393906939ed9208562e6ec5eb3d21775e3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-11 07:12:13 +0900

    Fix uplevel of test_jit

commit fcd9bc28e3d7d301bcdf6eea8ffa25c0c3ec184f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-11 06:54:44 +0900

    qsymbols and symbols should be colored as Symbol

commit 25c53a8eec4f73f4d0d127144b24bf68218149e3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-11 06:41:34 +0900

    Colorize on_symbols_beg (%I)

commit 958d954a1909edc1e297c54db7bbab53a289a0b8
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-11 06:34:25 +0900

    * 2019-11-11 [ci skip]

commit b5996b25ae8ff7e7961fea245c5ea8476b029134
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-11 06:33:23 +0900

    Colorize string quotes as bold

    like pry

commit 6e70fa49b111e2a2839297b057a3df354cae265a
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-11-10 22:34:49 +0900

    Disallow omission of parentheses/brackets in single line pattern matching [Feature #16182]

commit ef03d48cb20aa7739a4ac8eb4e109525a47fcc9f
  Author: Yuichiro Kaneko <yui-knk@ruby-lang.org>
  Date:   2019-11-10 22:18:08 +0900

    Fix a typo

commit 4570284ce14c9f00114039e9b619584a8cad6a50
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-10 14:56:38 +0900

    Test opt_invokebuiltin_delegate_leave in test_jit

commit 5c168c7e7f73d400db45980115dedab4deefcda7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-10 14:40:38 +0900

    Support RB_BUILTIN in ISeq#to_a

commit 0483d01f6bdd3d16b31244a7aaadb4c31f6ecee7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-10 14:16:10 +0900

    Test invokebuiltin in test_jit

    ISeq#to_a is commented out because it's broken now

commit 11aa07c27071878d9f7748995febe7df96f0405d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-10 10:52:12 +0900

    Define NULLCMD as printing NUL [Bug #16331]

commit 2c55ba7191a69dd4db34572754162308f0a9acdd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-10 10:09:26 +0900

    Define NULLCMD as an empty label [Bug #16331]

commit faa4f4f23fbb6b48b158cc38d9b509fd00838976
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-10 09:15:12 +0900

    Get rid of FreeBSD make incompatibility [Bug #16331]

    FreeBSD make works differently with `-j` option.

    > -j    max_jobs
    >       Specify the maximum number of jobs that `make` may have running
    >       at any one time.  The value is saved in `.MAKE.JOBS.` Turns
    >       compatibility mode off, unless the `B` flag is also specified.
    >       When compatibility mode is off, all commands associated with a
    >       target are executed in a single shell invocation as opposed to
    >       the traditional one shell invocation per line.  This can break
    >       traditional scripts which change directories on each command
    >       invocation and then expect to start with a fresh environment on
    >       the next line.  It is more efficient to correct the scripts
    >       rather than turn backwards compatibility on.

    Stop using exit, cd, exec in middle of commands.

commit ff767dd914d0aa91e2c6ec29bba7ff3739225b0c
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-10 06:23:55 +0900

    * 2019-11-10 [ci skip]

commit e0094df29d2175b8163027687671bc638a993c72
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-10 06:22:51 +0900

    Extend sleep duration for Solaris

commit 03fdf02321d4ac3123fb6908e7be53e232a92b67
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 23:00:32 +0900

    Removed trial and errors

commit a68205c5c19277e9ece8409b1f6af7e226989dff
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 22:40:14 +0900

    Specify the permission

    To make the temporary directory non-writable by group and others.

commit 774cfb065567d07c4cf172cbb1708acda5e0fde4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 22:15:15 +0900

    Fixed the debug print

commit 20bc038ea31ee799103bb89068537ed4e4f699b4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 21:58:55 +0900

    Debug-print tmpdir info

commit f48655d04d463a89b7ac15bc3942ec6c574c6cd9
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-11-08 23:03:02 +0900

    Remove unneeded exec bits from some files

    I noticed that some files in rubygems were executable, and I could think
    of no reason why they should be.

    In general, I think ruby files should never have the executable bit set
    unless they include a shebang, so I run the following command over the
    whole repo:

    ```bash
    find . -name '*.rb' -type f -executable -exec bash -c 'grep -L "^#!" $1 || chmod -x $1' _ {} \;
    ```

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2662

commit fcf37ca2fef8248966dcd9143aaea569fc87953c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 20:02:28 +0900

    Fix builtin script paths

    Do not search builtin scripts by using VPATH, to get rid of weird
    nmake VPATH.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2665

commit 79f0e7aafd0532666a00a49ef8feb838b5e9e208
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-11-09 21:12:29 +0900

    Fix typos

commit fdfad905227a0e2e4c224d87181041fb75d5082e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-09 20:14:17 +0900

    Revert "Promote uri to default gems"

    This reverts commit c5b4d2a2592942766dc2789f46105b91eba7026a.

      This commit affects with activation feature of RubyGems.
      [Bug #16337][ruby-core:95768]

commit 4dd1caa12964c6932009a3548de121a861435b8e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 20:08:01 +0900

    Updated miniprelude.o dependency

commit e3c852441177caa4b251fa33c83a65e4263a4146
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 19:43:14 +0900

    Full-path of builtin scripts no longer needed

commit dfaac2b37253ff25ec873c2fbd93abfa7f789248
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 19:28:45 +0900

    Embed builtin ruby scripts in miniprelude.c

    Instead of reading from the files by the full-path at runtime.  As
    rbinc files need to be included in distributed tarballs, the
    full-paths at the packaging are unavailable at compilation times.

commit 4dc4b1890499d6a836655957e78908ee891a42ce
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 19:15:10 +0900

    Fixed commit miss

commit 95aed94d2aba5ff93425f26ae6181607996d8ca3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 18:44:06 +0900

    Fixed `#line` directives in miniprelude.c

commit 352096ef6047538bfedb974a7c1b1156f5a0e811
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-09 16:43:47 +0900

    Add debug print

commit 43ceedecc0b9990b5bac2e65de5e439c41a9996b
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-09 16:15:17 +0900

    use STACK_ADDR_FROM_TOP()

    vm_invoke_builtin() accesses VM stack via cfp->sp. However, MJIT
    can use their own stack. To access them appropriately, we need to
    use STACK_ADDR_FROM_TOP().

commit 50bc7e7e9f0da6b27db06ac063257de0b97ed9b3
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-09 15:20:52 +0900

    Add debug print

    http://ci.rvm.jp/results/trunk-mjit@silicon-docker/2380788
    ```
    test_all             #<Thread:0x000055b6c8e9fca8@/tmp/ruby/v2/src/trunk-mjit/tool/lib/test/unit/parallel.rb:42 run> terminated with exception (report_on_exception is true):
    <internal:pack>:134:in `pack': no implicit conversion of false into String (TypeError)
            from /tmp/ruby/v2/src/trunk-mjit/tool/lib/test/unit/parallel.rb:160:in `_report'
            from /tmp/ruby/v2/src/trunk-mjit/tool/lib/test/unit/parallel.rb:45:in `block in _run_suite'
    ```

commit 352887b731f02c42abf6b905cde1737cc2249290
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-09 11:08:24 +0900

    Remove YAML::VERSION because it conflicts with Psych::VERSION

commit 21f7cca2c6394aaaec9189a7cb08a9ad8a2196e3
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-09 09:59:32 +0900

    initialize kw special local var.

    A method which has keyword parameters has an implicit local variable
    to specify which keywords are (un)specified.

    vm_call_iseq_setup_kwparm_nokwarg() is special function to invoke
    a ISeq method without any keyword arguments. However, it should
    also initialize the special local var. Without this initialization,
    the implicit lvar can points a freed (T_NONE) object.

commit c5b4d2a2592942766dc2789f46105b91eba7026a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-08 20:26:33 +0900

    Promote uri to default gems

commit 8c9438d219885fb26ca2e7cfc6ca38dd0bcb3db6
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-08 20:18:08 +0900

    Promote yaml to default gems

commit 2a0ed5691efbc602a4403ec09e6f91e89baa5507
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-08 19:21:47 +0900

    Promote timeout to default gems

commit 9a90a4d953a4d1f8e5977cd8d2bab59637de5348
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-08 15:47:46 +0900

    Fixup 368ee984ed52f6abe1fdf8360ad72e6cf1cbfa66

commit 5f206cebb995ec3b0ff279c6a78c2a952b3c1be7
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-08 15:47:18 +0900

    Promote observer to default gems. But not yet released

commit 3d731c3694ac793ee525922fd902757d50b06702
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-08 15:39:39 +0900

    Promote readline to default gems named readline-ext

commit fc1d06b25d0ba3b1fb14b55cbff0218d8298bcf0
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-08 14:31:43 +0900

    Added gemspec for readline gem that is wrapper library for reline and readline extension

commit b5d884922053962c955df1ce54d9dabc98888272
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-09 07:09:01 +0900

    Revert "don't embed full-path."

    This reverts commit dfac2e9eb3d697e56d91151584f1d3cf9d2c79c9.

    It does not work if cwd is different from builddir...

commit dfac2e9eb3d697e56d91151584f1d3cf9d2c79c9
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-09 06:55:38 +0900

    don't embed full-path.

    miniruby load *.rb from srcdir. To specify file path,
    tool/mk_builtin_loader.rb embed full path of each *.rb file.
    However it prevent to pre-generation of required files for tarball.
    This patch generate srcdir/*.rb from __FILE__ information.

commit 3b6954f8b9189f599e1f17636f8667a95ee94193
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-11-08 07:50:05 +0900

    Fix passing actual object_id to finalizer

    Previously we were passing the memory_id. This was broken previously if
    compaction was run (which changes the memory_id) and now that object_id
    is a monotonically increasing number it was always broken.

    This commit fixes this by deferring removal from the object_id table
    until finalizers have run (for objects with finalizers) and also copying
    the SEEN_OBJ_ID flag onto the zombie objects.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2658

commit 9deca1a3b91271159e164188367f003978737f42
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-09 00:22:25 +0900

    Try to fix test-spec failure on macOS

    Not sure what is happening, but spec/ruby/security/cve_2018_6914_spec.rb
    fails on macOS.
    https://github.com/ruby/ruby/runs/294462511#step:10:134

    I suspect that the state of a directory is weird immediately after it is
    created (not writable or even world writable?).  This change tries to
    make sure that ENV["TMPDIR"] is actually used by Dir.tmpdir.

commit 88b9a0f7fe664098177f4d2f10aed08c4a42b03e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 00:20:42 +0900

    Prettify builtin_binary format

commit cd706c52168222e3badab82c24df22008d264ca9
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-09 00:04:07 +0900

    * 2019-11-09 [ci skip]

commit 579aa4dc52b87510190a8d4bd2aaaf36fd49f3b6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-09 00:03:29 +0900

    Fixed the dependency

commit 248d0008db6d3bfeadce0861a8902a4f8e45f07e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-08 23:59:22 +0900

    Added pack.rb to BUILTIN_RB_SRCS

commit a3141e3c76ef057080d5aab22130a326378094e2
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-08 11:54:39 +0900

    Rubified the APIs of pack.c

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2659

commit 882179a0ecc0dfb1f212334f3c92f90ffc817167
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-08 12:58:17 +0900

    tool/mk_builtin_loader.rb: check if op is an array or not

    The insn array includes not only an array but also some literal objects.

commit 11e21f1982cbe41860b3f6755505ce063b74fc33
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-08 23:00:36 +0900

    Make prefix static

commit ff2d99406db4cd8aa0164c86525eedf627acffbe
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-08 22:21:13 +0900

    Update builtin include files

commit 7acf7a4f9036a176f0b09cb23646e6bfb1af1c2f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-08 18:18:05 +0900

    Add VPATH to rbinc rule for nmake

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2660

commit e02b819482f4e78b47599a6ce7624d4d9a13eb09
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-08 13:56:10 +0900

    delete cc->aux.inc_sp

    Nobody uses it.

commit 2e29b651093d158c23f6553972769c8ccb7dbd94
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-08 16:37:42 +0900

    Add file mode to generated files [ci skip]

commit 99b1c19be44d229f9ad0a84fd5963b0a810865c9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-08 14:26:21 +0900

    builtin.h must be included *AFTER* vm_core.h

commit 20971799f26c6466f63ab179ce2d3384155b9760
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-08 16:24:24 +0900

    Renamed `load_*.inc` as `*.rbinc` to utilize a suffix rule

commit 6e72b72881b42e28d2f97ee023587e3d071fb64b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-08 16:17:53 +0900

    Suppress "shadowing outer local variable" warning in 2.5

commit 83c563cfa403af1141fc0080d2b6eec344db6726
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 16:16:25 +0900

    cstr -> bytes

    rb_iseq_ibf_load_cstr() accepts bytes, but not NUL-terminate
    C string. To make it clear, rename it to _bytes.

commit 0b29662606bb80762d58938e847441020301406f
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 15:32:01 +0900

    fix line break code (fix to LF)

commit 054cb6d389da6a260830e4bd262aab2ee8fe2cb2
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 15:29:59 +0900

    forget to add gc.rb

commit 8fa41971c204555b889c9722586b8baee55a0ca8
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 15:27:32 +0900

    use builtins for GC.

    Define a part of GC in gc.rb.

commit 2eb02dfd3b650b54d6f3f5a63541e8165c997edd
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 15:13:24 +0900

    Stop compiling if type mismatch was found.

    If there is a type mismatch between expected builtin function type
    and actual function type, C compiler shows warning.

    For example, `__builtin_func(1, 2)` expects
    `func(rb_ec_t*, VALUE self, VALUE p1, VALUE p2)` function definition.

    However, it is easy to overlook "warning" messages. So this patch
    changes to stop compiling as an error if there is a mismatch.

commit 0ad0a8ff580a298dedc73c6679dd74d98c845ba9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-08 14:26:21 +0900

    builtin.h must be included *AFTER* vm_core.h

commit 61cff5c51c63358148d33bf3b6be678d44b9df76
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-08 13:21:29 +0900

    Removed BOM [ci skip]

commit cfccd59cb1adfee7b1f402609a4ee32298a26d87
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-11-08 12:44:31 +0900

    Fix typo

commit 90fc5552580b8d6223a513dfa6ee5d0f8532b22a
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-08 12:07:03 +0900

    name the result of calccall

    This is a pure refactoring for better understanding of what is
    happening here.  Should change nothing but readability.

commit d4da74ea786da7906fdb85e593593a9c6c11fe96
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-11-08 11:37:07 +0900

    Define Struct#deconstruct_keys

commit 766115010932d977142097f60c76dd20af73196e
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-08 11:11:21 +0900

    revival of __func__

    dad2abc69fdd1af52df353b8604017bd6a5c6a99 deleted __func__ but ruby
    already use this feature under RUBY_FUNCTION_NAME_STRING macro.
    Use it.

commit a1a08ac9aabdde2cc8406f5210848a4885d14b52
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-08 10:24:57 +0900

    describe vm_cache_check_for_class_serial [ci skip]

    Added comments describing what it is.  Requested by ko1.

commit eaa011ffdb55a315a6b35a52c3636c673f9ea836
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 10:10:37 +0900

    Change requirements of BASERUBY.

    "BASERUBY: Ruby 1.9.3" test on Travis-CI checks builds on Ruby 1.9.3.
    However this version is too old and 46acd0075d requires Ruby 2.2 and
    later.

commit 365557f111b453289a5e2ce0cdda0899ae248c71
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 09:39:28 +0900

    Define IO#read/write_nonblock with builtins.

    IO#read/write_nonblock methods are defined in prelude.rb with
    special private method __read/write_nonblock to reduce keyword
    parameters overhead. We can move them into io.rb with builtin
    functions.

commit dad2abc69fdd1af52df353b8604017bd6a5c6a99
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 10:02:21 +0900

    do not use __func__.

    Microsoft Visual Studio 12.0 doesn't support it.

commit 08ff9edb533301cf1622d541832938577dbcd993
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 09:30:11 +0900

    fix line break code (fix to LF)

commit 46b9ca6c54ad7c4bb43df6a45854c5ffed980168
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-08 09:26:16 +0900

    fix type

commit 4c00b9e8eb0390c398eb67ba3762a26380d180c3
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-08 09:09:47 +0900

    * remove trailing spaces. [ci skip]

commit a47d058ebf6890f4ad81c9c3419e767b4f093815
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-07 18:29:20 +0900

    use builtin for RubyVM::AbstractSyntaxTree.

    Define RubyVM::AbstractSyntaxTree in ast.rb
    with __builtin functions.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2655

commit e2a45cb984ba75083a577b38ee9643800579a280
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-07 18:22:08 +0900

    use builtin for TracePoint.

    Define TracePoint in trace_point.rb and use __builtin_ syntax.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2655

commit 46acd0075d80c2f886498f089fde1e9d795d50c4
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-11-07 16:58:00 +0900

    support builtin features with Ruby and C.

    Support loading builtin features written in Ruby, which implement
    with C builtin functions.
    [Feature #16254]

    Several features:

    (1) Load .rb file at boottime with native binary.

    Now, prelude.rb is loaded at boottime. However, this file is contained
    into the interpreter as a text format and we need to compile it.
    This patch contains a feature to load from binary format.

    (2) __builtin_func() in Ruby call func() written in C.

    In Ruby file, we can write `__builtin_func()` like method call.
    However this is not a method call, but special syntax to call
    a function `func()` written in C. C functions should be defined
    in a file (same compile unit) which load this .rb file.

    Functions (`func` in above example) should be defined with
      (a) 1st parameter: rb_execution_context_t *ec
      (b) rest parameters (0 to 15).
      (c) VALUE return type.
    This is very similar requirements for functions used by
    rb_define_method(), however `rb_execution_context_t *ec`
    is new requirement.

    (3) automatic C code generation from .rb files.

    tool/mk_builtin_loader.rb creates a C code to load .rb files
    needed by miniruby and ruby command. This script is run by
    BASERUBY, so *.rb should be written in BASERUBY compatible
    syntax. This script load a .rb file and find all of __builtin_
    prefix method calls, and generate a part of C code to export
    functions.

    tool/mk_builtin_binary.rb creates a C code which contains
    binary compiled Ruby files needed by ruby command.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2655

commit dddf5afb7947f5aba1ff875e9f5eb163f8c3d6c7
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-11-08 05:46:14 +0900

    Add a counter for compaction

    Keep track of the number of times the compactor ran.  I would like to
    use this as a way to keep track of inline cache reference updates.

commit 597ec4354333573d69f57dad931cb8ef477d191a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-08 02:31:29 +0900

    * 2019-11-08 [ci skip]

commit b99833baec2e567e38758f4fd017c90c7ce57d75
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-11-01 09:21:01 +0900

    Use a monotonically increasing number for object_id

    This changes object_id from being based on the objects location in
    memory (or a nearby memory location in the case of a conflict) to be
    based on an always increasing number.

    This number is a Ruby Integer which allows it to overflow the size of a
    pointer without issue (very unlikely to happen in real programs
    especially on 64-bit, but a nice guarantee).

    This changes obj_to_id_tbl and id_to_obj_tbl to both be maps of Ruby
    objects to Ruby objects (previously they were Ruby object to C integer)
    which simplifies updating them after compaction as we can run them
    through gc_update_table_refs.

    Co-authored-by: Aaron Patterson <tenderlove@ruby-lang.org>

commit d62abc47c83a79687a41f375338564ece0f403ce
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-07 23:33:45 +0900

    Suppress unused variable warning

commit 6aa80d5583daf71a4d45400af7e23e9d6151b1a3
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-07 18:53:51 +0900

    Use FIX2LONG instead of FIX2INT like 26843cbcd0

commit 26843cbcd0b97489f98aa123e700c4e893b1da5e
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-07 18:48:51 +0900

    Use FIX2LONG to avoid unexpected exception

    Though it won't happen in the real world in this context, FIX2INT may
    raise an exception and it cause to generate extra code.

commit d45a013a1a3bcc860e6f7f303220b3297e2abdbc
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-07 12:59:57 +0900

    extend rb_call_cache

    Prior to this changeset, majority of inline cache mishits resulted
    into the same method entry when rb_callable_method_entry() resolves
    a method search.  Let's not call the function at the first place on
    such situations.

    In doing so we extend the struct rb_call_cache from 44 bytes (in
    case of 64 bit machine) to 64 bytes, and fill the gap with
    secondary class serial(s).  Call cache's class serials now behavies
    as a LRU cache.

    Calculating -------------------------------------
                               ours         2.7         2.6
    vm2_poly_same_method     2.339M      1.744M      1.369M i/s - 6.000M times in 2.565086s 3.441329s 4.381386s

    Comparison:
                 vm2_poly_same_method
                    ours:   2339103.0 i/s
                     2.7:   1743512.3 i/s - 1.34x  slower
                     2.6:   1369429.8 i/s - 1.71x  slower

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2583

commit 3c252651e1ee28d015dbe1648dfdf0140232b733
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 17:09:22 +0900

    Fixed test failure related Net::Protocol

commit c916f9600b39e9363af782cb4dddef36264bd82b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 16:44:38 +0900

    SMTP is not module

commit fc85bdeb77ae642348bb797ef9ffb65913dfc77c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 16:34:03 +0900

    Promote cgi to default gems

commit 223d3c460a25e47577b6414e3ed141e54864c8dd
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 15:38:40 +0900

    Promote net-smtp to default gems

commit eb0b13596d9130683937f11b207baf258b266edc
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 15:24:59 +0900

    Promote net-pop to default gems

commit 77c94e0dd80019fe78e299dd1981ba9992ad7a46
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 13:53:05 +0900

    Promote benchmark to default gems

commit 1159dbf305603b60a1e5d2b9ff77a9cf30775296
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 13:21:46 +0900

    Promote delegate to default gems

commit 3b0bd34001bbb7ba98e9594278a8fcbb7b734af9
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 11:17:12 +0900

    Promote pstore to default gems

commit 6797c3e371c3e91a2796f2ec1f3b4a3f24edf1d6
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 08:48:45 +0900

    Promote getoptlong to default gems

commit 478f6e2b34c985bd2305895b9eec6918338e8ee2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-07 08:43:10 +0900

    Fixed an Errno::ENOENT with non-test libraries

commit a396bef8d8b72328d411abe7a275736ad995fbcb
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-11-07 14:00:59 +0900

    Disallow duplicated pattern variable

commit 1e620c67af3d37b6f120765daf29e96a643325ab
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-11-07 13:20:11 +0900

    Add missing semicolon

commit d0d743ad4558a572769f0f11ece11fda068652b3
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-11-07 09:29:09 +0900

    Remove duplicate code

    These functions are the same, so remove one.

    Co-authored-by: John Hawthorn <john@hawthorn.email>

commit e58814d150b0652f5e11958b36b85d977fdd0426
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-11-07 08:12:28 +0900

    Revert "Use a monotonically increasing number for object_id"

    This reverts commit bd2b314a05ae9192b3143e1e678a37c370d8a9ce.

commit bd2b314a05ae9192b3143e1e678a37c370d8a9ce
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-11-01 09:21:01 +0900

    Use a monotonically increasing number for object_id

    This changes object_id from being based on the objects location in
    memory (or a nearby memory location in the case of a conflict) to be
    based on an always increasing number.

    This number is a Ruby Integer which allows it to overflow the size of a
    pointer without issue (very unlikely to happen in real programs
    especially on 64-bit, but a nice guarantee).

    This changes obj_to_id_tbl and id_to_obj_tbl to both be maps of Ruby
    objects to Ruby objects (previously they were Ruby object to C integer)
    which simplifies updating them after compaction as we can run them
    through gc_update_table_refs.

    Co-authored-by: Aaron Patterson <tenderlove@ruby-lang.org>

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2638

commit d1630d41adb13c646a9d76cf541d3c26b6bbb10f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-06 22:17:03 +0900

    Promote open3 to default gems

commit fb7fe7f16c53b0633ba9dcea11dd07da708e0275
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-06 22:05:24 +0900

    Added rubygems url for published gem

commit ec2603c353680762960d76129a21225e8f1434da
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-06 11:33:03 +0900

    fallback standard structure library to sync_lib_gem method

commit 91135f6d2900b1b8ae41998a921b6382ebba395c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-11-06 11:29:51 +0900

    Promote singleton to default gems

commit 40e161a61238625e1ef021311759b2159be5b50a
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-11-07 07:10:15 +0900

    Exclude some clocks on armv8 too

    * See https://bugs.ruby-lang.org/issues/16234#note-16

commit a1be11eb122cadc27ae597b9e0db66abfdca2c27
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-07 02:52:45 +0900

    Revert "Remove arm64 from allow_failures"

    This reverts commit 212f4d49bac844b3c0fa52f2185b3df30aa62e75.

    It worked on PR, but master branch builds have another build issue.
    https://travis-ci.org/ruby/ruby/jobs/608303393

commit 212f4d49bac844b3c0fa52f2185b3df30aa62e75
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-11-07 02:10:27 +0900

    Remove arm64 from allow_failures

commit 7750edd1e6822d4d5ee809d55691478af712ad95
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-07 02:09:00 +0900

    * 2019-11-07 [ci skip]

commit f5c7fc495a4b33db985f0d5286db2ec230e1ffb9
  Author: Jun Aruga <jaruga@redhat.com>
  Date:   2019-11-02 00:27:34 +0900

    Fix spawn_spec.rb for Travis arm64 environment.

    The process group id (/proc/[pid]/stat 5th field) is 0
    in the Travis arm64 environment.

    This is a case where it is available.

    $ cat /proc/4543/stat
    4543 (ruby) S 4525 4525 1384 34818 4525 4194304 37443 1754841 0 0 366 105 2291 391 20 0 3 0 1381328 1428127744 11475 18446744073709551615 94195983785984 94195986670225 140728933833312 0 0 0 0 0 1107394127 0 0 0 17 2 0 0 1 0 0 94195987686512 94195987708942 94196017770496 140728933835483 140728933835595 140728933835595 140728933842904 0

    This is a case where it is not available in Travis arm64 environment.

    $ cat /proc/19179/stat
    19179 (ruby) S 19160 0 0 0 -1 4194560 37618 1710547 313 163 770 665 5206 1439 20 0 2 0 17529566 1196347392 10319 18446744073709551615 187650811428864 187650815023116 281474602721280 0 0 0 0 4096 1107390031 0 0 0 17 22 0 0 0 0 0 187650815091456 187650815114064 187651414974464 281474602725080 281474602725211 281474602725211 281474602729420 0

    See "man proc" for detail.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2653

commit 2fd465540f6dacaf16a8b679b6da000e90845a00
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-06 12:45:11 +0900

    Numbered parameter is an ID_LOCAL now [Bug #16293]

commit 82e840ad15bba42b399a21de746967a731240ec2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-06 12:41:55 +0900

    Numbered parameter cannot appear outside block now [Bug #16293]

commit f72dc407f2f682063cf3d7683b879b430481b4ce
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-06 11:17:09 +0900

    Prohibit calling undefined allocator [Bug #16297]

commit 5251d189829abc405a5f0422b8874bab7cd79c46
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-06 09:45:27 +0900

    Time#strftime does not support `%Q`

    ```
    % ruby -r date -e 't=Time.utc(2001,2,3,4,5,6,7);p t; p [t, t.to_date, t.to_datetime].map{|d|d.strftime("%Q")}'
    2001-02-03 04:05:06.000007 UTC
    ["%Q", "981158400000", "981173106000"]
    ```

commit aa94245a09887f95bc0cd353b3462108d76d13ed
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-06 08:54:32 +0900

    Undefine MatchData.allocate [Feature #16294]

commit 7460c884fb06a2c50a4a771761003ed78c8b28ce
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-11-05 09:04:58 +0900

    Use an identity hash for pinning Ripper objects

    Ripper reuses parse.y for its implementation.  Ripper changes the
    grammar productions to sometimes return Ruby objects.  This Ruby objects
    are put in to the parser's stack, so they must be kept alive.  This is
    where the "mark_ary" comes in.  The mark array ensures that Ruby objects
    created and pushed on the stack during the course of parsing will stay
    alive for the life of the parsing functions.

    Unfortunately, Arrays do not prevent their contents from moving.  If the
    compactor runs, objects on the parser stack could move because the array
    won't prevent them from moving.  But the GC doesn't know about the
    parser stack, so it can't update references in that stack (it will
    update them in the array).

    This commit changes the mark array to be an identity hash.  Since the
    identity hash relies on memory addresses for the definition of identity,
    the GC will not allow keys in an identity hash to move.  We can prevent
    movement of objects in the parser stack by sticking them in an identity
    hash.

commit d47b643428a5c19d5a0c2f2213c95ab03d63a24c
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-06 00:39:55 +0900

    * 2019-11-06 [ci skip]

commit 07f2062c8ffecc774a4ebc1f39ff2c4940592be4
  Author: Mark Abraham <mark.j.abraham@gmail.com>
  Date:   2019-11-05 22:31:52 +0900

    Improve string literal concatenation for C++11

    Downstream C++ projects that compile with C++11 or newer and include
    the generated config.h file issue compiler warnings. Both C and C++
    compilers do string-literal token pasting regardless of whitespace
    between the tokens to paste. C++ compilers since C++11 require such
    spaces, to avoid ambiguity with the new style of string literals
    introduced then. This change fixes such projects without affecting
    core Ruby.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2650

commit 6aacef49483ed83697dc013a4b33606338dffd39
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-05 21:06:29 +0900

    Assert return value of Readline.readline only if Ruby is before 2.7

commit c4b627e2daf76e2f8922c62c8e0a6c2a10c8b435
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 01:53:59 +0900

    Only taint on Ruby <2.7

    Ruby 2.7 deprecates taint and it no longer has an effect.

commit 652800cc09788805368983730c6b25183ae60d92
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 01:50:07 +0900

    Only untaint line on Ruby <2.7

    Untaint is deprecated and has no effect on Ruby 2.7+.

commit c6a52cffd13a42b4c95ccbdf7e32a7da25e494b7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 17:08:51 +0900

    Separated `@counter` and `@tally` so that "-ft" works with "-j"

commit fa52a924aa418e363b191179b2ad3eba2506d559
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 16:14:03 +0900

    Enable "-f" option in multi_exec mode

    Make `MultiFormatter` a module and extend the formatter specified
    by "-f" option.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2649

commit 19f91f788016ef98e30ead047e53edeb7a5f2566
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 15:50:28 +0900

    `DottedFormatter#finish` consistency

    Removed optional parameter `printed_exceptions`, and clear
    `exceptions` just after printing each exception, instead.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2649

commit dfb3322d27aa05f506818209ab6a10a77221b86d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 15:47:25 +0900

    `DottedFormatter#state` consistency

    Let the method of `DottedFormatter` subclasses have the same
    arity.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2649

commit bea322a352d820007dd4e6cab88af5de01854736
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-11-05 17:30:54 +0900

    Revert "[EXPERIMENTAL] Make Symbol#to_s return a frozen String [Feature #16150]"

    This reverts commit 6ffc045a817fbdf04a6945d3c260b55b0fa1fd1e.

commit 853d91a04a4d133fc90b35c90570dc1c656a7922
  Author: Lars Kanis <kanis@comcard.de>
  Date:   2019-11-04 19:00:13 +0900

    Fix coroutine support on win32

    Ruby master branch currently fails on win32 MINGW at this spec:
    https://github.com/ruby/spec/blob/master/core/thread/element_set_spec.rb

    MINGW makes use of setjmp3() implemented in MSVCRT.DLL.
    This function traverses the SEH list up to a terminating pointer 0xFFFFFFFF.
    It therefore currently segfaults on NULL.
    The SEH linked list must be terminated by 0xFFFFFFFF instead of NULL.

    This fixes the issue mentioned here:
      https://github.com/ruby/ruby/pull/2279#issuecomment-509508810

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2645

commit 7c07300491de502cd94e07fcbf9b30f2df31a0d5
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-05 13:46:08 +0900

    let the .bss section initialize static variables

    ISO/IEC 9899:1999 section 6.7.8 specifies the values of static
    storage which are not explicitly initialized.  According to that
    these initializers can be omitted.  Doing so improvoes future
    compatibility against addition / deletion of the fields of this
    struct.

commit 6ff1250739c57ce7f234a2148d3f6214da01b7e5
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-29 11:37:25 +0900

    rb_method_basic_definition_p with CC

    Noticed that rb_method_basic_definition_p is frequently called.
    Its callers include vm_caller_setup_args_block(),
    rb_hash_default_value(), rb_num_neative_int_p(), and a lot more.

    It seems worth caching the method resolution part.  Majority of
    rb_method_basic_definion_p() usages take fixed class and fixed
    method id combinations.

    Calculating -------------------------------------
                               ours       trunk
               so_matrix      2.379       2.115 i/s -       1.000 times in 0.420409s 0.472879s

    Comparison:
                            so_matrix
                    ours:         2.4 i/s
                   trunk:         2.1 i/s - 1.12x  slower

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2629

commit 1390d56ecfac2e430df94c4d4a60d8fa80d11166
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 10:28:44 +0900

    Set $JOBS to Tests for parallel tests

commit 8869384367a1b5e856b2f4b7b7d56296c71a572c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 10:28:01 +0900

    Moved Init_encoding from wrong place [Bug #16292]

commit 30a74aaef00a99364f5423439ac44babf5066dc0
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-05 10:09:44 +0900

    Fix a typo in WARN_EOL

commit c7632fa80cd693be27b9bf85f1402b9c8812f325
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 08:26:10 +0900

    Do not occupy `ARGV` by XRUBY command

    Instead run test-bundled-gems.rb by `ENV['RUBY']`, which should be
    set by runruby.rb.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2646

commit ebbe396d3c89345a1c36c0b5154e314cc33e19b7
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-11-04 13:51:30 +0900

    Use ident hash for top-level recursion check

    We track recursion in order to not infinite loop in ==, inspect, and
    similar methods by keeping a thread-local 1 or 2 level hash. This allows
    us to track when we have seen the same object (ex. using inspect) or
    same pair of objects (ex. using ==) in this stack before and to treat
    that differently.

    Previously both levels of this Hash used the object's memory_id as a key
    (using object_id would be slow and wasteful). Unfortunately, prettyprint
    (pp.rb) uses this thread local variable to "pretend" to be inspect and
    inherit its same recursion behaviour.

    This commit changes the top-level hash to be an identity hash and to use
    objects as keys instead of their object_ids.

    I'd like to have also converted the 2nd level hash to an ident hash, but
    it would have prevented an optimization which avoids allocating a 2nd
    level hash for only a single element, which we want to keep because it's
    by far the most common case.

    So the new format of this hash is:

    { object => true } (not paired)
    { lhs_object => rhs_object_memory_id } (paired, single object)
    { lhs_object => { rhs_object_memory_id => true, ... } } (paired, many objects)

    We must also update pp.rb to match this (using identity hashes).

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2644

commit 7c3bc0aa13abf3d46382860f76abb609a60376d6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 08:07:59 +0900

    Put an empty line [ci skip]

commit 74bb8fb3480d0b0acaa6ef0bb93cc990cc7bf639
  Author: Burdette Lamar <BurdetteLamar@Yahoo.com>
  Date:   2019-11-05 08:03:01 +0900

    More rdoc for ENV

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2641

commit 9d04fa71fcd5352aadcdff43636ee915666bf749
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 02:14:31 +0900

    Updated minitest to 5.13.0

commit c0c9a00f8301e100e2e05ffd101e2b8ff2bfe2ec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 00:48:22 +0900

    Simplify test tasks

    Removed `if` conditions separating `test-bundled-gems`, and pass
    `TESTOPTS` and `TEST_BUNDLED_GEMS_ALLOW_FAILURES` via `env`.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2643

commit 929a4aa722524f4567eed0d8b27d644f912c22f7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 02:02:14 +0900

    Adjust a function signature

commit ec54261b01b1c744c22bacffd1e880f17db9df0b
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-31 08:28:21 +0900

    Fix zero free objects assertion

    This commit is to attempt fixing this error:

      http://ci.rvm.jp/results/trunk-gc-asserts@ruby-sky1/2353281

    Each non-full heap_page struct contains a reference to the next page
    that contains free slots.  Compaction could fill any page, including
    pages that happen to be linked to as "pages which contain free slots".

    To fix this, we'll iterate each page, and rebuild the "free page list"
    depending on the number of actual free slots on that page.  If there are
    no free slots on the page, we'll set the free_next pointer to NULL.

    Finally we'll pop one page off the "free page list" and set it as the
    "using page" for the next allocation.

commit a087e027bf7cf0fbb825f1d55668f85ab1f3c9e6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-05 01:32:26 +0900

    Fixed conditional expressions with only one void side

commit bd3463ee3591ab18dc06a4024ef6f78cc485d053
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-05 00:07:22 +0900

    * 2019-11-05 [ci skip]

commit 4e8336bae853e712eb884b87560621c2da4c4743
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-04 23:58:36 +0900

    Share test-bundled-gems-run in common.mk

commit e91e3274bebc803b97971ad0a6f4ee3a8c646a60
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-04 23:37:53 +0900

    Keep `lex.pcur` after `looking_at_eol_p`

commit 26316cc350109ba71d42f944f3b976985627c042
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-04 21:23:11 +0900

    Warn `if` and `elsif` at EOL [EXPERIMENTAL]

    It is unnatural and probably a typo.

commit c303854e134043d905baff2385add44cc2c28756
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-11-04 22:27:37 +0900

    Revert "Warn `if` and `elsif` at EOL [EXPERIMENTAL]"

    This reverts commit ba35c14325ebbf1da8f200df83c45ee9937ff8a1.
    This is because ripper fails symbol lookup error.

commit ba35c14325ebbf1da8f200df83c45ee9937ff8a1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-04 21:23:11 +0900

    Warn `if` and `elsif` at EOL [EXPERIMENTAL]

    It is unnatural and probably a typo.

commit cf377c5556cb03f180a8bbc200fab0f04a540edb
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-11-04 17:12:18 +0900

    Fix a typo [ci skip]

commit ffa9298076c4bfd1443b1231e1d7e7965ede5db9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-04 16:38:36 +0900

    Fixed a typo

commit 823f25bb969a19c6c7055dabc5b33cd1fa709ac8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-04 09:38:34 +0900

    sync_default_gems.rb: Show the progress at fetching

    It looks like hanging up when fetching from a remote first time.

commit cbbdb4e5a2eb46750d3c455def99486d23fc625b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-31 00:54:50 +0900

    [ruby/racc] Strip trailing whitespaces at the last line of actions

    https://github.com/ruby/racc/commit/a887ebe529

commit 046be65c08e10973fccc19a04b95a9422a2dae65
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-04 09:18:29 +0900

    * 2019-11-04 [ci skip]

commit df62d6522a6f679642e9b10dbf1edb1d9b646e91
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-04 09:14:18 +0900

    Use the dedicated function `rb_io_check_io`

commit 5a7487bdcd96ac7c66e773f1458691ff8fc41265
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-03 23:20:01 +0900

    Added assertions for linebreak

commit 7b2cd548aa52fa434006dccff62a6050ed5fd881
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-03 23:18:01 +0900

    [DOC] mentioned `\R` [ci skip]

commit f8b3d7d1599ecaa6760d947609f966a7a5b22e2c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-03 22:53:17 +0900

    [DOC] \s in regexp is not same as in string [ci skip]

commit 782d1b8fb0a039cedef9ad9c94f432dad51901e6
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-11-03 19:25:42 +0900

    Fix warnings in Regexp#{match,match?} specs

commit fbacfe6820cf4f7e115103057b6263cd038da175
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-11-03 19:11:20 +0900

    Update NEWS entry for Feature #13083

commit 4a166237074edeaf5b7c1a0fb3c0bb4489c0dbf4
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-11-03 19:08:58 +0900

    Remove incorrect NEWS entry, only Regexp#match and #match? changed

commit 985e6ced9945df943a595aafc0a12faec125e853
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-03 19:03:24 +0900

    * 2019-11-03 [ci skip]

commit 31110d820cc1258cbc84b46ecc65b254c7d5529a
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-11-03 09:24:55 +0900

    Improve warning message

    https://github.com/ruby/ruby/pull/2637#discussion_r341812475

commit 452bee3ee8d68059fabd9b1c7a75661b14e3933e
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-11-02 00:54:36 +0900

    Revert nil error and adding deprecation message

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2637

commit 772b0613c583773cd2eda23bce8275926a351e79
  Author: Burdette Lamar <BurdetteLamar@Yahoo.com>
  Date:   2019-11-02 15:32:49 +0900

    Correct documented return values for certain ENV methods (#2620)

commit e6f0fd8af4a326f97bf886c6c9911463ac12dc0c
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-02 00:15:05 +0900

    * 2019-11-02 [ci skip]

commit ea97933645ad507c3015c7b2ca17035cf3008f96
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-11-01 23:45:07 +0900

    Use prompt_list to calculate height by lines

commit 10c2a085480eb8694750e55a613dbbe3eb22a999
  Author: Justin McNally <justin@chowlyinc.com>
  Date:   2019-10-08 12:12:17 +0900

    Clean up implementation of SOCKSSocket, its confusing and undocumented

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2539

commit 68e0bfcd4a7add4140832f156a11f5aa3fbca41d
  Author: Justin McNally <justin@chowlyinc.com>
  Date:   2019-10-08 12:36:22 +0900

    Prefer libsocksd over libsocks

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2538

commit b8004103873f4e18bfaefea8e2f540f451c4ae68
  Author: Justin McNally <justin@chowlyinc.com>
  Date:   2019-10-08 12:04:27 +0900

    Support libsocksd socks library for SOCKSSocket

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2538

commit c56d8deaff7dede58e7017bee58f40b86dcda3f4
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-10-25 03:43:04 +0900

    Mention correct class name in uninitialized error

    I think this meant to mention `MatchData`? This is a breaking change, but
    should be a minor one.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2608

commit cc8116b03e89b9c5fca5ace90a8141cff58d549b
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-30 18:03:30 +0900

    Fix a typo [ci skip]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2510

commit 6abf4c4802c15c54742e3e8db9bfcab4207704b9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-11-01 17:24:52 +0900

    [ruby/date] Added update-zonetab target

    https://github.com/ruby/date/commit/9bc6e30a82

commit b2126d3fcfd2a946fe95947506620bb5e6c1f424
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-01 12:55:57 +0900

    [ruby/date] Remove unneeded line in update-abbr

    https://github.com/ruby/date/commit/ae14e5f293

commit 469545307f7b688d0b7a15a5cfd33bcecb775123
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-11-01 03:29:37 +0900

    [ruby/date] Add more timezone abbreviations

    This gets the time zone abbreviations from
    https://www.timeanddate.com/time/zones/, and adds unambiguous time
    zones not already present in zonetab.list.  See bin/update-abbr
    for the program used.

    This regenerates zonetab.h using prereq.mk (requires gperf).

    Only one test line is added, just to make sure a new time zone
    abbreviation is picked up.

    Fixes Ruby Bug 16286

    https://github.com/ruby/date/commit/702e8b3033

commit 51825c04db26c26ad43a76daaecf13a767ce34ea
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-11-01 16:59:02 +0900

    * 2019-11-01 [ci skip]

commit 72f997edf66cb766b97feac709888c57852be084
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-01 16:48:31 +0900

    mark functions that do not return NULL as such.

    Apply __attribute__((__returns_nonnull__)) when available.

commit f5e406327200672f95d61c4ca4ffc9de03e6a5a7
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-01 15:56:02 +0900

    ruby_mimmalloc can return NULL

    malloc can fail.  Should treat such situations.

commit fb495b2928545e44cc9859f7cc743032d92ca9ee
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-01 14:33:44 +0900

    rb_aligned_malloc can return NULL

    Looking at gc.c, rb_aligned_malloc contains `return NULL;` so it
    has to be taken care of.  Note however that posix_memalign(3posix)
    does _not_ set errno.

commit 2c889e9b05e2d2902096af02687cc6e3c7424c30
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-11-01 14:32:05 +0900

    RUBY_ATTR_ALOC_SIZE for clang

    clang also supports __attribute__((__alloc_size__)) so why not use
    it when the compiler says it does.

commit 63f70eb65160a53443ec76365e78a80948b54824
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-31 22:21:11 +0900

    [ruby/zlib] Removed no longer used variables

    https://github.com/ruby/zlib/commit/3e98e4cac3

commit 0aaa15f6362e307c9ef636e9625027b96e577dfb
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-10-26 08:15:24 +0900

    [ruby/zlib] Fix setting mtime to zero in GzipWriter

    Before this change, it was not possible to write out zero for the
    timestamp part of a Gzip file's header, as calling GzipWriter#mtime with
    zero was ignored.

    Judging from the docs for `GzipWriter#mtime=`, it should be possible to
    indicate that no timestamp is available by calling the method with zero.

    https://github.com/ruby/zlib/commit/310be39cac

commit d6ed7a984c8fd991ce2614d2f228239f8eb490b5
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-28 07:23:05 +0900

    Fix verbose warning being emitted

    Fixes Ruby Bug 16281.

commit 5f6fbf8725b6e4bc026480d7b95f7ac21198c591
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-31 17:11:23 +0900

    spec: Fix syntax errors

    Follow up of 473882e01f7e55753733e2607ace633b5041f11f

commit 473882e01f7e55753733e2607ace633b5041f11f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-31 16:50:00 +0900

    Skip tainted examples for stringio

commit ebc884461b0d8c3144c05abeb793e381903de6b2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 04:39:49 +0900

    [ruby/stringio] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.

    https://github.com/ruby/stringio/commit/60ee9ccd95

commit 3895e548bd2d75cdf47cd247e84d6071247dd3b3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-27 10:20:46 +0900

    [ruby/date] Revert "Simplify #inspect"

    This reverts commit af01edd7d8575f544f647dbe8cde5b6ae535d459.

    Revert requested by Yui Naruse.

    https://github.com/ruby/date/commit/875d563557

commit fce940aac722575a78cd4cbe5f86dd3f3b40d13c
  Author: glaszig <glaszig@gmail.com>
  Date:   2019-08-09 09:41:47 +0900

    [ruby/date] introduce Date::Error, raise Date::Error for every
    "invalid <anything>" type of exception

    https://github.com/ruby/date/commit/3e55c09ba4

commit e4cd0d72876bae43b9369c1305db52370db47215
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 01:36:11 +0900

    [ruby/fileutils] Remove use of untaint on Ruby 2.7 to avoid deprecation warnings

    https://github.com/ruby/fileutils/commit/5ac9a8a1f7

commit 39281d57743ebe5c1cdcc226399845dc7b17663a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-03 19:37:07 +0900

    [ruby/gdbm] Use Gemfile instead of Gem::Specification#add_development_dependency.

    https://github.com/ruby/gdbm/commit/bd2e7f6647

commit b93ab7d693f5a4bec5d0e7c7ea282a6e24fe5a93
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 04:22:03 +0900

    [ruby/gdbm] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.

    https://github.com/ruby/gdbm/commit/f9aaa1a08d

commit 290903dba01d97bc6869886eccef0378dcdd5e0c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 04:45:15 +0900

    [ruby/zlib] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.

    https://github.com/ruby/zlib/commit/21711ed0ce

commit bc7fbb6f02f47f2e1ac2bcb3175324bb96c08247
  Author: Martin Drst <duerst@it.aoyama.ac.jp>
  Date:   2019-10-31 15:19:59 +0900

    Mention update to Unicode Emoji version 12.1 in NEWS.

    Also fixed some grammatical errors. [ci skip]

commit c38ba75780c4641816a8090629d1b5eea22fd137
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-31 10:18:57 +0900

    Fixed the sync task for json

      * Ignode to change ext/json/depend
      * Fixed to ignore json_pure files

commit 79d96b42df8850b7ba5dd3a78cb72c23cf8cbe91
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-31 10:05:32 +0900

    Revert "Fix zero free objects assertion"

    This reverts commit e1bf29314feee6aaf535917da0178e868e7ff3fa.

    I'm not sure why this broke stuff, I need to investigate later.

commit e1bf29314feee6aaf535917da0178e868e7ff3fa
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-31 08:28:21 +0900

    Fix zero free objects assertion

    This commit is to attempt fixing this error:

      http://ci.rvm.jp/results/trunk-gc-asserts@ruby-sky1/2353281

    Each non-full heap_page struct contains a reference to the next page
    that contains free slots.  Compaction could fill any page, including
    pages that happen to be linked to as "pages which contain free slots".

    To fix this, we'll iterate each page, and rebuild the "free page list"
    depending on the number of actual free slots on that page.  If there are
    no free slots on the page, we'll set the free_next pointer to NULL.

    Finally we'll pop one page off the "free page list" and set it as the
    "using page" for the next allocation.

commit e08f2e47e302db71621cfe2e770c087a5cf5146d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-31 06:57:06 +0900

    Also ignore mswin platform

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2635

commit 8540efd3429c51682d2d0822935163f0930826b9
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-30 22:17:01 +0900

    Ignore test_racc_command with linux platform

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2635

commit 1c03026ea3cd90cbc37eb4c612aca3c6129032c8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-30 21:38:55 +0900

    Try to run assert_output_unchanged with racc tests

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2635

commit 5f8795a07b163fe3f373ad443db1949de21c747b
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-31 00:38:16 +0900

    * 2019-10-31 [ci skip]

commit 4c7f789e942e78ebd3a7e3bf458c6cbe2133d692
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-10-30 09:08:01 +0900

    Allow only one argument for keyword_init struct

    ```
    irb(main):001:0> RUBY_VERSION
    => "2.6.5"
    irb(main):002:0> S = Struct.new(:foo, keyword_init: true)
    => S(keyword_init: true)
    irb(main):003:0> S.new({foo: 23424}, 234) # I don't think this is intentional
    => #<struct S foo=23424>
    irb(main):004:0>
    ```

    Tightening this up should inform users when they are confused about
    whether a struct is `keyword_init`.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2634

commit 6c3ed0d71cb1b59be5b2fbc886b5dd962ab74d35
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-30 21:36:59 +0900

    Update the latest versions from upstream repository of racc

commit e6d611ad37ab1a8eb04fceecdfe3a61967383256
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-30 21:01:30 +0900

    Regenerate the output results for test fixtures of racc

commit d3272fcba3196738403def453ef0a5119ce16953
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-30 21:00:01 +0900

    Update the latest structure for racc upstream

commit c54635c08b89612bbf2faa50b86fd6d5c8758506
  Author: Martin Drst <duerst@it.aoyama.ac.jp>
  Date:   2019-10-30 08:25:45 +0900

    Update Unicode Emoji version from 12.0 to 12.1.

    This update does not add any new codepoint assignments, it just
    expands the range of emoji codepoint sequences recommended for
    public interchange.

    Depending on how emoji data files are cached, this commit may
    require manual intervention in some build environments
    (including some CI systems).

commit 92c13380e853a8996574fadc8a498c96156674fe
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-30 00:14:03 +0900

    * 2019-10-30 [ci skip]

commit 22dbbbeb32b88708b9ea371e856c48c5d9ad3e63
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-30 00:13:38 +0900

    Compacting the heap can cause GC, so disable it

    When we compact the heap, various st tables are updated, particularly
    the table that contains the object id map.  Updating an st table can
    cause a GC to occur, and we need to prevent any GC from happening while
    moving or updating references.

commit fee5cde00be7342dc6c00d0b0a0276d09e5252e3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-29 22:39:30 +0900

    Fix tests for CVE-2018-6914

    Since the current working directory is not involved in `Tempfile`
    and `Dir.mktmpdir` (except for the last resort), it is incorrect
    to derive the traversal path from it.  Also, since the rubyspec
    temporary directory is created under the build directory, this is
    not involved in the target method.  Fixed sporadic errors in
    test-spec.

commit ad4da86669454dee86844b3e0a3ecf9177084db3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-29 12:12:07 +0900

    Check for nonnull attribute in configure

commit 9195ed18cacb0d448c818d2a80db105d8b3cea3c
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-29 16:05:39 +0900

    Revert "Check for nonnull attribute in configure"

    This reverts commit 54eb51d72bc43f90b595f0d7ffb5069ebf1a56d9.

    Windows build failure. See also https://github.com/ruby/ruby/runs/278718805

commit 7bf51ced5571d6180722f2be1b50c048a02b2e70
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-29 14:34:31 +0900

    test/rubygems/test_gem.rb: early failure when there is /tmp/Gemfile

    Some test cases in rubygems assume that /tmp/Gemfile does not exist.
    If it does, they fail with very difficult-to-understand message:

    ```
    [ 149/2108] TestGemBundlerVersionFinder#test_bundler_version_with_bundle_update_bundler = 0.00
      1) Failure:
    TestGemBundlerVersionFinder#test_bundler_version_with_bundle_update_bundler [/home/mame/work/ruby/test/rubygems/test_gem_bundler_version_finder.rb:38]:
    Expected Gem::Version.new("2.0.2") to be nil.
    ```

    I spent one hour to debug this issue.  To prevent the same accident,
    this change makes the test suite stop when /tmp/Gemfile explicitly.

commit 79a7fd91208989d180027a9fed63db76b0a08cc1
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-29 13:16:31 +0900

    Revert "Revert "[ruby/rdoc] Use omit of test-unit instead of skip of minitest""

    This reverts commit ca5812fe4516a10cc687281f9e47e1a08449f1ab.

    Now tool/lib/minitest provides "omit", so it should work.

commit 1820aeeeb209420e80851d65a42acf188893069b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-29 13:15:09 +0900

    tool/lib/minitest/unit.rb: add "omit" as an alias to "skip"

    According to rdoc, test-unit provides omit instead of skip.
    This is a compatibility layer to make it work with both test-unit and
    tool/lib/minitest.

commit ca5812fe4516a10cc687281f9e47e1a08449f1ab
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-29 12:57:31 +0900

    Revert "[ruby/rdoc] Use omit of test-unit instead of skip of minitest"

    This reverts commit b4da6fc1c277190bbd10e795ebf3be45772038e8.

    `make test-all` uses minitest, which led to "undefined method `omit'"

commit 9525541d022c67f4a162f8221bae7de2a172f371
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-28 13:39:37 +0900

    [ruby/rdoc] Use Dir.glob to convert short path of Dir.tmpdir to long path

    https://github.com/ruby/rdoc/commit/ba16e44572

commit c8ce37d4271a58132fb7fc5548e0ba7d85419152
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-28 01:44:09 +0900

    [ruby/rdoc] Support different drive latters in include paths

    https://github.com/ruby/rdoc/commit/946d2592e2

commit b4da6fc1c277190bbd10e795ebf3be45772038e8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-27 02:28:25 +0900

    [ruby/rdoc] Use omit of test-unit instead of skip of minitest

    https://github.com/ruby/rdoc/commit/1c5bf2ae1d

commit 54eb51d72bc43f90b595f0d7ffb5069ebf1a56d9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-29 12:12:07 +0900

    Check for nonnull attribute in configure

commit b86e5c9fec9d9ea0f9c70d9b20456680607399b3
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-10-29 09:24:07 +0900

    Clang can also use C call cache

    Previously this was restricted to only gcc because of the
    GCC_VERSION_SINCE check (which explicitly excludes clang).

    GCC 3.3.0 is quite old so I feel relatively safe assuming that all
    reasonable versions of clang support this.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2628

commit 85b88c1d89924d00ecd893cea696d2a94232745c
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-10-22 08:18:37 +0900

    Let the arrays for the singleton and instance method reflection helpers be initialized to the methods count

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2595

commit fecaa6e946fc87df28682c96fea67c1535825cd5
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-10-22 08:03:05 +0900

    Let the backtrace array constructed in backtrace_collect be initialized with the size already given

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2593

commit 0095362918375fb694345133e33199b01911e594
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-10-22 07:49:54 +0900

    Right size the vm_default_params hash

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2592

commit 0e68913f81eb35ae615592986a23b0f8f22501c6
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-10-22 07:31:46 +0900

    Right size the Enumerator internal lazy_use_super_method hash

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2591

commit 4480d68931f3c7b25e194b30dea304b294744c92
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-10-22 07:28:41 +0900

    Right size the compile option hash

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2590

commit 65744fb19efa7786c6b528d81328b641ea2e7cd5
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-10-22 06:31:44 +0900

    Right size the iseq coverage branches tmp array - initializes with 5 elements

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2589

commit 0547627705ba2afd9b782ac511c825bfe36f052f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-29 10:34:32 +0900

    Version 0.0.4

commit b4229c0a90ef902328e09a92fc5c6e884d01c542
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-29 08:58:39 +0900

    Restore `in_kwarg` flag properly

commit da3774e5eb6de9dfe5c2ec6f3444c81d22c0e00a
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-29 08:14:50 +0900

    Revert "Protect finalizer references during execution"

    This reverts commit 60a7f9f446604571f8a81499080c57c47baf0e6b.

    We can't have Ruby objects pointing at T_ZOMBIE objects otherwise we get
    an error in the GC.  We need to find a different way to update
    references.

commit 60a7f9f446604571f8a81499080c57c47baf0e6b
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-18 03:37:32 +0900

    Protect finalizer references during execution

    When we run finalizers we have to copy all of the finalizers to a new
    data structure because a finalizer could add another finalizer and we
    need to keep draining the "real" finalizer table until it's empty.
    We don't want Ruby programs to mutate the finalizers that we're
    iterating over as well.

    Before this commit we would copy the finalizers in to a linked list.
    The problem with this approach is that if compaction happens, the linked
    list will need to be updated.  But the GC doesn't know about the
    existence of the linked list, so it could not update references.  This
    commit changes the linked list to be a Ruby array so that when
    compaction happens, the arrays will automatically be updated and all
    references remain valid.

commit 6147fa82a923e7318f493857023006801ed25eb5
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-15 06:52:58 +0900

    Fix continuation mark / compact

commit bbf3de22b6654642c923884b9e186e6412f1ba6a
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-09 05:35:24 +0900

    Pin labels during disassembly

    We need to ensure that labels are pinned while disassembling.  If the
    compactor runs during disassembly, references to these labels could go
    bad, so this commit just ensures that the labels can't move until we're
    done.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2625

commit 339a891c7d9c56f27f10ed9a9e60f511f75da934
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-09 05:15:44 +0900

    Pin keys of this st_table

commit a51583b678945ec2ba7ea355dab2c097c47f4b08
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-29 03:19:25 +0900

    * 2019-10-29 [ci skip]

commit aec16b754055f5436b2770695ce6f579ed2fc248
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-08 09:41:26 +0900

    Marshal is calling functions that should pin things

commit 6e0b40af3da4941b618f018b2c04cee0110ce50c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-28 18:31:00 +0900

    Try out-of-place build

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2622

commit 48f982aba7ab5b23af168d3c108e71e3a27c0648
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-28 19:14:38 +0900

    test-bundled-gems.rb: fixed for out-of-place build

commit 07b5fec008f33e4a5e03def56d5650ba8d897b1f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-28 18:15:12 +0900

    Clean mjit and timestamp directories

commit 3e83f1f00ae89f3391ceed8ea6192cc23257536e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-28 15:34:42 +0900

    Add more matrix info to slack payload

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2621

commit cc5580f175bb55c9a1d7574c1861f405ee972617
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-28 14:36:28 +0900

    fix bug in keyword + protected combination

    Test included for the situation formerly was not working.

commit a72cb6b11d777c2268831df4f21ab56851db425c
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-28 12:20:36 +0900

    * 2019-10-28 [ci skip]

commit d8d581bfc4cee87a59e40eac20e51fe199eb44bf
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-28 12:19:18 +0900

    add assertion for mutex_lock.

    After do_mutex_lock(mutex), the mutex should be owned by the current
    thread. Adding an assertion for this assumption.

commit 85d966af21ce834ddefe13861bcb42abae244d25
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-27 09:59:56 +0900

    Add ubuntu-16.04 to matrix of GitHub Actions

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2617

commit 417369e0cd6ec96950d2d48f2c94e7b1eb012076
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-26 20:02:59 +0900

    Improve Enumerator.produce docs

    * Add to NEWS;
    * Add examples of while-alike cycles with practical tasks.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2616

commit aba23d83f2697247488a2e770fcb9ce5abfcd16c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-27 10:41:35 +0900

    Fix documentation for Fiber#transfer [ci skip]

    Fiber#transfer prevents calling Fiber#resume on the receiver of the
    transfer method, not the fiber calling transfer.

    Transferring back to a fiber does not allow later calling resume on
    the fiber.  Once transfer has been called on a fiber, you can never
    call resume on the fiber.

    Calling resume on a transferred fiber is not a double resume error,
    it is a different FiberError (cannot resume transferred Fiber).

    For details on the differences between transferred fibers and
    regular fibers, see Sasada-san's RubyKaigi 2017 presentation (in
    short, Fiber#transfer is for coroutine, Fiber#resume is for
    semi-coroutine).

commit 4fe89e08217446de3b540088a5ef5af37d17b3c9
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-10-27 05:33:43 +0900

    Add entry for Feature #13083 in NEWS

    * Move Unicode changes under String / Unicode for consistency with the rest.

commit 664e96b1de816c813c29f61e16a2031a7af7ba86
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-10-27 03:53:01 +0900

    Update to ruby/spec@28a728b

commit 3eb0d50c0baae916f4486c264605b18e77bee0dc
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-10-27 03:52:59 +0900

    Update to ruby/mspec@e171725

commit 9c5a962354c7630d4fa2326574df3d3ce568ed5c
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-27 02:24:50 +0900

    * 2019-10-27 [ci skip]

commit 62212482947066d2cbf4dad6ebe60facf35ef223
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-26 18:21:33 +0900

    Improve Net::HTTP docs:

    * Make links from Net::GenericHTTPRequest work;
    * Document +dest+ param of HTTPResponse#read_body;
    * Slightly improve reference to particular response
      classes from HTTPResponse class docs.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2615

commit f93cb6904c69de51bf14b1bcf9fcfc483584f4d3
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-26 17:46:54 +0900

    OptionParser: document into: argument

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2615

commit a24bff461d67e8d5e1f076a9ce773bc876a8b3d4
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-26 17:29:43 +0900

    open-uri: change global docs to reflect that URI.open syntax is preferred

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2615

commit de147bb721ec10675556ef4e93c4480856089ba5
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-26 17:15:18 +0900

    Net::FTP: fix formatting problems for #status method

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2615

commit 4fe06f46675801c5be392551813baabadf43c87c
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-26 17:04:24 +0900

    IRB: Document command evaluation history.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2615

commit 2746fd5d50429994b0d66bb49c2e09089beb1b3f
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-26 16:03:24 +0900

    Update StringIO docs:

    * More explanations/examples in class docs;
    * Fix links to other methods (remove <code> tag);
    * Fix wording of method docs (remove *stringio*
      receiver name, as it is not rendered by modern
      RDoc);
    * Add  option mention to linereading
      methods (added in 2.4);
    * Several other small fixes.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2615

commit f6f1377a4ec187579a7dd0249be1166b42bf668b
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-26 15:34:14 +0900

    Update ERB docs

    * Actualize Notes about other templating engines;
    * Document #location= method.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2615

commit ad9c7137282009bbecae8df8bd5a601311282d62
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-26 16:26:48 +0900

    Make `(#methodname)` a link with --hyperlink-all option

commit d70fdeedf0a2fc942d91b82f564b78a54ff48d7c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 15:03:18 +0900

    Make `(#methodname)` a link

commit 5aacb304551aa29f86e4c59bef5136bf9d20726a
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-26 15:33:16 +0900

    refactor assign variables

    For readability.  Requested by ko1.

    See: https://github.com/ruby/ruby/commit/356e203a3acd4d3d20ba12f956fd22e17b6363e9#r35661401

commit bddb31bb37f878cf171f89ac54f7e43d7d59c444
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-10-25 01:35:36 +0900

    Documentation improvements for Ruby core

    * Top-level `return`;
    * Documentation for comments syntax;
    * `rescue` inside blocks;
    * Enhance `Object#to_enum` docs;
    * Make `chomp:` option more obvious for `String#each_line` and
      `#lines`;
    * Enhance `Proc#>>` and `#<<` docs;
    * Enhance `Processs` class docs.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2612

commit cf9344131c3d0f5993c6d999c427a4c656df30a2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-26 02:15:18 +0900

    Raise on end-exclusive ranges [Feature #14784]

    Raises an error on end-exclusive ranges unless endless, regardless
    the receiver.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2613

commit f14b754151c8b6a006871cff8f590b9b608a7697
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 22:16:21 +0900

    [ruby/forwardable] Use Gemfile instead of Gem::Specification#add_development_dependency.

    https://github.com/ruby/forwardable/commit/1e7123a81b

commit f625a4be3c8f159e97f859785d95d50550b3edca
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-10 11:33:44 +0900

    [ruby/forwardable] Fix NoMethodError on ruby 2.4 or earlier

    https://github.com/ruby/forwardable/runs/242918994#step:5:12
    ```
    Error: test_obj_single_delegators_send_id(TestForwardable): NoMethodError: private method `attr_reader' called for #<Class:#<Object:0x00005605af501f58>>
    ```

    https://github.com/ruby/forwardable/commit/711bbb2466

commit 00989770535cfe69e618a2c556dad44610042e13
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-21 23:33:28 +0900

    [ruby/forwardable] Remove string allocation in def_{instance,single}_delegators

    https://github.com/ruby/forwardable/commit/1a994c90e1

commit d00551a7bb1d5dbabb0a8c95d6bd2d9d4e86934a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-16 07:21:55 +0900

    [ruby/forwardable] Make def_{instance,single}_delegators skip :__send__ and :__id__

    Previously, __send__ and __id__ were skipped if provided as strings,
    but not skipped if provided as symbols.

    Fixes Ruby Bug 8855.

    https://github.com/ruby/forwardable/commit/2e61c8c66c

commit b15e0983f7504c4688afce0ee29a2f4746b6631a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 22:28:03 +0900

    [ruby/forwardable] Update spec.files

    https://github.com/ruby/forwardable/commit/1b6991e589

commit b25ab3832f75f9257d3ea2e450af8a00a28e1acd
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 22:27:13 +0900

    [ruby/forwardable] Extracted VERSION constant for gemspec

    https://github.com/ruby/forwardable/commit/387758d45a

commit 0c579b0a97bdec40ed58e15ab611ec00bb83d48d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 04:02:38 +0900

    [ruby/dbm] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.

    https://github.com/ruby/dbm/commit/1f0ff0bce1

commit 41d52945063e671d34324dc0acefae1534ff7835
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-26 02:56:12 +0900

    * 2019-10-26 [ci skip]

commit 84b69c520e8c7cadf510f21f6e1552d063b1dff3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-26 02:54:29 +0900

    Edit vm_opts.h for VM options

    Revert 46f175ed5c8560b3c9da5ab7b4fa73287f1eb1c5 partially.

    Also tool/ruby_vm scripts refer the options in vm_opts.h.

commit 42c652d1959564bc5fb5147c8c343d8c0589583c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 22:09:38 +0900

    Fixed range argument condition [Feature #14784]

    Allows a beginless/endless range, and an end-exclusive range
    unless the receiver is smaller than its end.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2611

commit 88135845f10f4b8ea3b67584a2c899ad365fd6bb
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-25 17:58:54 +0900

    enable assertion for debug.

    http://ci.rvm.jp/results/trunk-vm-asserts@silicon-docker/2340856

commit f3f1d89d469e3cc18f868a17fc0362c34318cedc
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-25 16:44:15 +0900

    skip tests that do not work on GC.stress

    These tests rely on GC.stat and GC.last_gc_info, which are not
    stable when GC.stress is true.  Skip them for that case.

commit 356e203a3acd4d3d20ba12f956fd22e17b6363e9
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-24 18:08:52 +0900

    more on struct rb_call_data

    Replacing adjacent struct rb_call_info and struct rb_call_cache
    into a struct rb_call_data.

commit a7ec88ad61eba8cda3f99805e6077cb515c0ad08
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-25 10:45:46 +0900

    Add `shell: cmd`

    Use cmd instead of new default shell for `call`.
    https://github.blog/changelog/2019-10-17-github-actions-default-shell-on-windows-runners-is-changing-to-powershell/

    https://github.com/ruby/ruby/commit/7bcc639c720b59eb2199601963bcfa720168185b/checks#step:6:5
    ```
    call : The term 'call' is not recognized as the name of a cmdlet, function, script file, or operable program.
    ```

commit 7bcc639c720b59eb2199601963bcfa720168185b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-25 10:07:17 +0900

    Rename old var name with new name

commit 09936d1d74c51d2afa9bd52e5681b6edf00aef6d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-03 18:56:41 +0900

    [ruby/tracer] Use Gemfile instead of Gem::Specification#add_development_dependency.

    https://github.com/ruby/tracer/commit/9df7d7937b

commit fb15e79403181098c969b4a8b7e4dd69f820955d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-25 04:36:49 +0900

    Handle case where ruby2_keywords method splats to ruby2_keywords method

    Previously, the keyword hash was duped (which results in a regular
    hash), but the dup was not marked as a keyword hash, causing the
    hash not to be marked as keyword hash even though it should be.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2609

commit 5040eea959300ecb183d79f9539151239c281aa6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 08:53:03 +0900

    Do not show progress at chocolatey

commit 4ff2c58f919153b9a47f69f855a0b9d2bb0e0bbe
  Author: wanabe <s.wanabe@gmail.com>
  Date:   2019-10-25 04:40:39 +0900

    retry tailcall optimization (#2529)

    Sorry, f62f90367fc3bce6714e7c34cbd040e14e43fe07 is push miss.

commit 58b363bf0d1f31ae9bcbaf301f9abedb99fa90f6
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-25 04:37:46 +0900

    respect `param.flags.ruby2_keywords` at to_binary.

    `param.flags.ruby2_keywords` is not store/load correctly at to_binary
    so restore this flag correctly.

commit d6a2507e494f0fffca375c9e2eede38b6a777874
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-25 01:47:30 +0900

    Duplicate hash when converting keyword hash to keywords

    This mirrors the behavior when manually splatting a hash.  This
    mirrors the changes made in setup_parameters_complex in
    6081ddd6e6f2297862b3c7e898d28a76b8f9240b, so that splatting to a
    non-iseq method works the same as splatting to an iseq method.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2606

commit 8c59b9250c25c66d6ed16429da139558295a4517
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-25 01:35:48 +0900

    Update date specs

    Allow Date.new spec to run on 2.7.

    Separate Date.valid_jd? specs, since 2.7 is now stricter and
    requires numeric value for the first argument.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2605

commit 5fe8943fdaf765dc01d986abafe85bd3eafb7814
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-25 01:35:02 +0900

    Fix typo causing Date.new(year, month) to fail

    Add a test for this case.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2605

commit e8f90e73978c0321021c177fe3fa2623a8b3a4de
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-25 04:01:02 +0900

    check T_ICLASS for Method#inspect.

    METHOD::klass can contain T_ICLASS so inspect should respect it.

commit b7c8874b6290d17f6f8ebd4b2fa72c231121c714
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 02:24:42 +0900

    Install openssl with chocolatey

    OpenSSL in chocolatey is 1.1.1d but outdated 1.0.2s is in vcpkg.

commit 826bbf9837e1e763c9200bb81e63560b194533dd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 02:24:00 +0900

    Split by `&&`

commit 967b924aa0b8385b2f8effd96c006fb3eeca7802
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 02:08:03 +0900

    Expanded an environment variable

    PowerShell does not expand by `%varname%` syntax.

commit b86af95c5b4e035f5dc14018a7ff8861e6dc203d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 02:04:14 +0900

    Get rid of control flow by cmd.exe

    Github workflow stopped using cmd.exe suddenly, and `||` and `&&`
    seem not working in PowerShell.

commit b609bdeb5307e280137b4b2838af0fe4e4b46f1c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 01:16:05 +0900

    Define arguments forwarding as `ruby2_keywords` style

    Get rid of these redundant and useless warnings.

    ```
    $ ruby -e 'def bar(a) a; end; def foo(...) bar(...) end; foo({})'
    -e:1: warning: The last argument is used as the keyword parameter
    -e:1: warning: for `foo' defined here
    -e:1: warning: The keyword argument is passed as the last hash parameter
    -e:1: warning: for `bar' defined here
    ```

commit 4b3e007e0778415e75ec2f0afcdc559eea43fdf8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 01:03:08 +0900

    Assert no-kwrest case

commit ed65e2d5ae700afe8408836a8774becf5c87f76b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 00:56:27 +0900

    Assert no-block case

commit 8d0c5eb805a0a9afeb6e87c939c9b6f7f22df013
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 00:54:24 +0900

    Set method locations

commit 2ea698969ec92e6442e9a4cf93217d5a690cb559
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-25 00:16:26 +0900

    * 2019-10-25 [ci skip]

commit 6279e45cdefa3e61ca1c9c8085b15727cb2f4a60
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-25 00:06:43 +0900

    Arguments forwarding is not allowed in lambda [Feature #16253]

commit 1fb45848257e3a599809c6cac52338999e604da0
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-22 05:08:22 +0900

    Remove unused output_method argument

    Fixes Ruby Bug 9876.

commit 8439caab0ac91aa33176060bb81cb4197ab21069
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-24 23:37:19 +0900

    Refined `rp` output [ci skip]

    So that the result structure can be accessed as `$number`
    variables, not a mere `VALUE`.

commit dc44ab2913719a7d9b78012f277b9fe02868c172
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-24 19:53:33 +0900

    Revert "[ruby/fiddle] Fix a failing test (#13)"

    This reverts commit 5ebb0d50f6560b35bc03deb79341a115c5f782ee.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2603

commit de5ee47c3da9d06e8dcffa35e4e7f9b5a3122907
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-24 19:53:26 +0900

    Revert "[ruby/fiddle] test: use env Hash"

    This reverts commit 4d844cbaed518743776594fa5ae33b86fe176ad1.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2603

commit efd641ffab34e433a8d8a7d78914576f2425aa90
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-24 19:52:54 +0900

    Revert "[ruby/fiddle] Use ffi_closure_free by default. (#20)"

    This reverts commit ce6caade7c57a505f73086ccd7b33c14f7715f22.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2603

commit f126d80b1e4f42e854555e728cd4478fc7ff56db
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 03:40:36 +0900

    [ruby/webrick] Don't check tainting in access log escaping

    Only untaint result on Ruby <2.7, as taint support is deprecated
    in Ruby 2.7+ and no longer has an effect.

    https://github.com/ruby/webrick/commit/4c430f9410

commit c28d50a753615dff9bd721f608846d4ef541feb1
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-27 14:22:00 +0900

    [ruby/webrick] Support literal IPv6 addresses in X-Forwarded-Host

    https://github.com/ruby/webrick/commit/6b6990ec81

commit 37c266aa57fc2c6798a7b6002867643ef0424fa1
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-07 07:48:18 +0900

    [ruby/webrick] Remove the squishing of whitespace in header values

    While the stripping of header values is required by RFC 2616 4.2 and
    RFC 7230 3.2.4, the squishing is not and can break things, such as
    when one header contains an HMAC of another header.

    Fixes Ruby Bug 7021.

    https://github.com/ruby/webrick/commit/8b96088a86

commit 84ed4c3d59a3317c6aff017e88f0ea897dbf8410
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-04 22:51:39 +0900

    [ruby/webrick] bump version to 1.5.0

    https://github.com/ruby/webrick/commit/00c281caa7

commit 8189d496dff2e3f892338eed13e15816684bb220
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-08 11:17:10 +0900

    [ruby/webrick] Remove Webrick::HTTPResponse#to_s

    It is currently broken, and even if it worked, it can cause problems
    when debugging.  See Ruby Bug 10715.

    https://github.com/ruby/webrick/commit/575dea8656

commit f0452574b16462d0edea16e9b22e55e21e146a49
  Author: thekuwayama <thekuwayama@gmail.com>
  Date:   2019-07-05 23:25:47 +0900

    [ruby/webrick] after ruby-2.6.0, set Net::HTTP#write_timeout

    https://github.com/ruby/webrick/commit/3b51f6b4d2

commit b809784817649817c3e53fa000f57504446caef9
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-20 08:10:47 +0900

    [ruby/fiddle] Remove taint support (#21)

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous Ruby versions.
    https://github.com/ruby/fiddle/commit/18d6fb6915

commit ce6caade7c57a505f73086ccd7b33c14f7715f22
  Author: Vt Ondruch <v.ondruch@tiscali.cz>
  Date:   2019-07-11 06:19:32 +0900

    [ruby/fiddle] Use ffi_closure_free by default. (#20)

    * Use ffi_closure_free unconditionally.

    The current conditionals reflect historic heritage of FFI. Usage of
    ffi_closure_free should be better default nowadays, because libffi 3.0.5
    fixing issues of ffi_closure_free should be widely available.

    * RUBY_LIBFFI_MODVERSION is not used anymore.

    Because `ffi_closure_free()` is not used unconditionally, there is no
    other use for RUBY_LIBFFI_MODVERSION define, so drop its usage.

    * Use more meaningful variable name.

    `ver` variable used to be used to pupulate RUBY_LIBFFI_MODVERSION
    define. Since the define was removed, the `libffi_dir` variable name
    should better describe the remaining usage of the variable.

    https://github.com/ruby/fiddle/commit/c49cc79eb8

commit 30d46966a97968d166f2f1440f227c2b52483780
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-13 16:08:22 +0900

    [ruby/fiddle] Use RbConfig::SIZEOF (#19)


    https://github.com/ruby/fiddle/commit/ea06b28db8

commit 4d844cbaed518743776594fa5ae33b86fe176ad1
  Author: Sutou Kouhei <kou@clear-code.com>
  Date:   2019-05-28 06:04:19 +0900

    [ruby/fiddle] test: use env Hash

    https://github.com/ruby/fiddle/commit/a01a962342

commit 5ebb0d50f6560b35bc03deb79341a115c5f782ee
  Author: Kenta Murata <mrkn@users.noreply.github.com>
  Date:   2019-05-27 18:53:33 +0900

    [ruby/fiddle] Fix a failing test (#13)

    * Fix a failing test

    This commit fixes the following failure:

    ```
      1) Failure:
    Fiddle::TestImport#test_no_message_with_debug [/Users/mrkn/src/github.com/ruby/fiddle/test/fiddle/test_import.rb:152]:

    1. [2/2] Assertion for "stderr"
       | <[]> expected but was
       | <["Exception `NameError' at /Users/mrkn/.rbenv/versions/2.5.1/lib/ruby/2.5.0/fiddle/import.rb:157 - uninitialized constant Fiddle::Function::STDCALL"]>.
    ```

    * Stop using Bundler.with_clean_env

    * Clear existing Ruby environment variables on test_no_message_with_debug

    https://github.com/ruby/fiddle/commit/13133ddec8

commit 7733db665ad07980afcaa5bc3fadebc0128fbdf2
  Author: Aaron Patterson <aaron.patterson@gmail.com>
  Date:   2019-01-10 09:22:26 +0900

    [ruby/fiddle] Fiddle::Function must maintain a reference to the closure

    If the first parameter to Fiddle::Function is a closure object (rather
    than an integer), `rb_Integer` will cast it to an integer but not
    maintain a reference to the closure.  Then if the closure gets GC'd, we
    have a segv.  This commit keeps a reference to the original parameter to
    initialize so that the object will not be GC'd.

    Fixes: https://bugs.ruby-lang.org/issues/13286

    https://github.com/ruby/fiddle/commit/0fc697bbc5

commit 70ca56dedaa7ced969269ed70112ebb8da653ec2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-24 18:50:57 +0900

    Temporarily skipped with upstream changes of Date library.

commit 487d96c6b1cd7f5d415dba27a9684b30dfa9afed
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-03 20:37:51 +0900

    [ruby/date] Use Gemfile instead of Gem::Specification#add_development_dependency.

    https://github.com/ruby/date/commit/13c94362c2

commit 9d3a4ab05bc74d880ca25c2bf0ef48e60f8199af
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-08-11 19:56:41 +0900

    [ruby/date] Update docs

    https://github.com/ruby/date/commit/8c02586a98

commit 913807bd6ce98d3d362d27caef4f5e2aef0e5d79
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-08-11 19:50:20 +0900

    [ruby/date] Simplify #inspect

    https://github.com/ruby/date/commit/af01edd7d8

commit 2e37c1960a0b84a9018dc0202a36daf4e692ed46
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-19 03:56:05 +0900

    [ruby/date] Remove taint support

    Ruby 2.7 deprecates taint and it no longer has an effect.
    The lack of taint support should not cause a problem in
    previous versions.

    https://github.com/ruby/date/commit/519470dc3b

commit fc0e8d00bc50ac8646b37adee3b599c83ce84a41
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-26 02:01:13 +0900

    [ruby/date] Support -Float::INFINITY...date ranges

    Fixes Ruby Bug 12961

    https://github.com/ruby/date/commit/7f533c2552

commit 4e40ca301cca692361627ac6db06c0f0074636f0
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-25 00:03:27 +0900

    [ruby/date] Check for numeric arguments in constructors

    Previously, the type of these arguments were not checked, leading to
    NoMethodErrors in some cases, and TypeErrors in other cases, but not
    showing what field was having the problems.  This change makes it so
    the field with the problem is included in the error message.

    For the valid_*? methods, this changes them to return false if one
    of the arguments that should be numeric is not.

    Fixes Ruby Bug 11935
    Fixes Ruby Misc 15298

    https://github.com/ruby/date/commit/a2f4b665f8

commit 9eb798a3f1de6a9e08e510904d376952d5e94d50
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-18 06:53:55 +0900

    [ruby/date] Make julian dates roundtrip through to_time.to_date

    Previously, julian dates would not round trip through to_time.to_date,
    because Time is always considered gregorian.  This converts the Date
    instance from julian to gregorian before converting to Time, ensuring
    that an equal date object will be returned if converting that Time
    back to Date.

    This does result in julian Date objects showing different day values
    if converting to Time.

    Fixes Ruby Bug 8428.

    https://github.com/ruby/date/commit/d8df64555e

commit f1de438380893682257b8648784a0fe7714b1f9f
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-10-22 01:56:44 +0900

    Use CPDEBUG for debug code

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2564

commit 89e7997622038f82115f34dbb4ea382e02bed163
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-07-31 10:36:05 +0900

    Combine call info and cache to speed up method invocation

    To perform a regular method call, the VM needs two structs,
    `rb_call_info` and `rb_call_cache`. At the moment, we allocate these two
    structures in separate buffers. In the worst case, the CPU needs to read
    4 cache lines to complete a method call. Putting the two structures
    together reduces the maximum number of cache line reads to 2.

    Combining the structures also saves 8 bytes per call site as the current
    layout uses separate two pointers for the call info and the call cache.
    This saves about 2 MiB on Discourse.

    This change improves the Optcarrot benchmark at least 3%. For more
    details, see attached bugs.ruby-lang.org ticket.

    Complications:
     - A new instruction attribute `comptime_sp_inc` is introduced to
     calculate SP increase at compile time without using call caches. At
     compile time, a `TS_CALLDATA` operand points to a call info struct, but
     at runtime, the same operand points to a call data struct. Instruction
     that explicitly define `sp_inc` also need to define `comptime_sp_inc`.
     - MJIT code for copying call cache becomes slightly more complicated.
     - This changes the bytecode format, which might break existing tools.

    [Misc #16258]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2564

commit 38e931fa2ceac6d922f3eabedb8f35f211de0bdb
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-24 16:28:15 +0900

    show "transferred" attribute on Fiber#to_s

    If a fiber is invoked with transfer method (such as "f.transfer"),
    then the invoked fiber ("f") is labeled as "transferred" and this
    fiber can not be invoked with Fiber#resume. This patch adds
    transferred attribute for "Fiber#to_s" (and inspect).

commit 4c3e3b8028ca76fcaedc0e40d9ac678e3ac79ee9
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-24 15:03:26 +0900

    Revert "Fix Fiber#transfer"

    This reverts commit fa8ac91e957a076f6df1adaecad7896817138009.

    Previous behavior is intentional.

commit 65e8267938a260620bbfe1c1d97e67dde8c31f6c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-24 16:17:17 +0900

    Revert "Fixed the require path for e2mmap version file."

    This reverts commit ff953a003e03f5f070112ececefab4c07ff4cb0e.

commit ff953a003e03f5f070112ececefab4c07ff4cb0e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-24 16:12:34 +0900

    Fixed the require path for e2mmap version file.

commit 2791989a311d14fbd69dd1ea0c1eeac521382427
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-24 16:11:01 +0900

    Fixed sync path of e2mmap structure for gemspec.

commit 281f754126a9edf003e347f28ab20e154e22464d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-24 08:30:33 +0900

    include/ruby/backward/cxxanyargs.hpp: call `va_end` before return

    Coverity Scan complains it.

commit f26f0f41096c026e4874bf1af8d500a7aaa69e59
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-24 08:04:45 +0900

    hash.c: Do not use Unicode double-quotes

    It made rdoc fail.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/ubuntu1804/ruby-master/log/20191023T183005Z.fail.html.gz
    ```
    RDoc is not a full Ruby parser and will fail when fed invalid ruby programs.

    The internal error was:

            (ArgumentError) invalid byte sequence in US-ASCII

    uh-oh! RDoc had a problem:
    invalid byte sequence in US-ASCII
    ```

commit df91896f32fdf78c26fc38466927c0bd87444185
  Author: BurdetteLamar <burdettelamar@yahoo.com>
  Date:   2019-10-21 02:28:22 +0900

    More rdoc for ENV#[] and ENV#fetch

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2579

commit 6df6611ce77d1bb7d50375a1399e1d5101a3a616
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-24 02:45:15 +0900

    Treat only left alt key as meta-key on Windows

    On German keyboard, right alt key acts as like shift key.

    Ex. right-alt-8 is just "[". This input doesn't have meta-key statement.

commit f1d4216bd9b89835a8aa7b4e087549dc35279a7f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-24 01:42:31 +0900

    Added refresh-gems

    Refreshes bundled gems to the latest version, and extracts them.

commit 7391db4ab320ef66ff4b0ec7e59ec91daede2373
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-24 01:18:19 +0900

    Updated minitest to 5.12.2

commit 7bc787fa06e20f26fae875c9aac2675fc056e16d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-24 00:12:52 +0900

    Support forced enter insertion by Ctrl+Enter on Windows

commit 659f7c0aeb46b75fec913b33fc6daa39c2f6b611
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-24 00:00:59 +0900

    * 2019-10-24 [ci skip]

commit 039faecdb88546a7ad43594a870900b0b370aa9c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-23 23:58:59 +0900

    Suppress duplicated "require 'reline'"

commit 1d91feaf13e0ffe04b2dabc6e77e4101b6d0bb07
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-23 20:13:34 +0900

    Limit strict RUBY_METHOD_FUNC in C++

    Limit strict function signature check with RUBY_METHOD_FUNC in C++
    to bundled libraries only.  [Bug #16271]

commit 8bb716ab91577f2b1e21e833fb3f3170032ba881
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-22 20:42:03 +0900

    Fix indent...

commit 67f010af9bd08581caa474831b7ed7f21ae00f6d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-23 15:09:44 +0900

    name2ctype.h depends on also Emoji data

commit cbec533677654f9cb5e2a4c21c2f11ae6928bc20
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-23 13:23:43 +0900

    Add gem names [ci skip]

commit 5d7aef20dd972a4398ad2f047710391334b14ac3
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-23 13:18:48 +0900

    Trivial fixes [ci skip]

commit 959ddf44b3613e504897239e76860aae11eed635
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-23 12:00:44 +0900

    Fix typos [ci skip]

commit 46f175ed5c8560b3c9da5ab7b4fa73287f1eb1c5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-23 02:53:36 +0900

    Use cppflags to pass preprocessor options

commit d5d58447444109a75ceb86e239827f001da6214d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-23 02:30:14 +0900

    Use dedicated assertion methods for warning and syntax error

commit 601f1fb456c291b5eb4d20e97d8b151bb04ffda2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-23 02:05:28 +0900

    Catch syntax error even if fatal

commit afab8122c339586ccb120861cc700aa8eee7402c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-23 02:04:36 +0900

    Fix the exception when CPDEBUG

commit 801a11d0ab3e1d387b5aaed92d1965fbdf675780
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-23 01:05:14 +0900

    Relaxed tests for CPDEBUG mode

commit 1a80ee4573eef24ed7465b5c5d72dc085c74c4ff
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-23 00:42:44 +0900

    * 2019-10-23 [ci skip]

commit 51bab75f493d59b07382e99d54c9dd1b0b1bbdf8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-23 00:19:25 +0900

    Provides ruby2_keywords

    So that requiring it succeeds even if that forward compatibility
    gem is not installed.

commit 8390057d1ee9acd67ac9f36dee59f500b1f1bc5f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-22 22:49:41 +0900

    Benchmark for [Feature #16155]

commit 99ca5705a24d540b95fb7069707514c1510f1a81
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-10-22 22:15:52 +0900

    tool/release.sh uses ruby-actions' result

    https://github.com/ruby/actions

commit d736511e4253c924bcfaa7125da3b07a67b6ecbf
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-10-22 21:37:49 +0900

    Move format-release to tool and fix bugs

commit 04075305d3fd2806400235dfc744b6a0c70ef738
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-22 21:33:11 +0900

    Ignore timestamp file for the expected failure [ci skip]

commit aec0a293a4f9d2f8f8d085f57023ec3ba4bf6525
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-10-22 21:12:50 +0900

    Add a tool to generate a patch for www from log

    Receives an output of `tool/make-snapshot` and genarete
    * Markdown format for release note
    * a patch for branches.yml, downloads.yml, and releases.yml of w.r-l.o

commit ed3333f8736e054a2199a3b77e553b858c5fc7e6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-22 21:05:52 +0900

    make-snapshot: Regexp#match raises on nil now

commit 501b517dfbab2a552e68da2da30682261b134156
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-22 20:06:07 +0900

    NEWS: add a URL about the performance improvement of CGI.escapeHTML

commit 02aadf1032d71a3f81653a955f2635c8853b0aca
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-22 19:46:44 +0900

    NEWS: Fix the example of Lazy#eager

commit fac4339a1273df64fe764579f0d3ccccf64b74b4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-22 19:39:42 +0900

    NEWS: add an example for Lazy#eager

commit 0e735b218fbf0d329c4e76e79dbabda27a32d9c7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-22 19:32:04 +0900

    NEWS: Make Net::FTP#features and #option more informative

commit 22845176d70576ea9a331dca019c46d3c0605f12
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-10-22 06:36:38 +0900

    test/ruby/test_exception typo fix

commit 5e0d33a85675663f47956815a0b70f3e4d1d9bc1
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-10-22 06:36:10 +0900

    appveyor.yml - remove timezone & tzinfo gems from MSVC builds

    Not compatible with concurrent-ruby dependency

commit 97a03a035695e948ce6b3a0f91bfd0302fbc30de
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-10-22 01:44:16 +0900

    Add a cron job to keep CPDEBUG working

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2586

commit 9c553139ae7275f7f24694e54a35266c5c5d5e1c
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-10-22 01:29:47 +0900

    Fix build for CPDEBUG=1

    The declarations went out-of-sync in dcfb7f6.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2586

commit fa8ac91e957a076f6df1adaecad7896817138009
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-22 08:54:58 +0900

    Fix Fiber#transfer

    Fiber#transfer previously made it impossible to resume the fiber
    if it was transferred to (no resuming the target of Fiber#transfer).
    However, the documentation specifies that you cannot resume a fiber
    that has transferred to another fiber (no resuming the source of
    Fiber#transfer), unless control is transferred back.

    Fix the code by setting the transferred flag on the current/source
    fiber, and unsetting the transferred flag on the target fiber.

    Fixes [Bug #9664]
    Fixes [Bug #12555]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2588

    Merged-By: jeremyevans <code@jeremyevans.net>

commit f37cc1c719f12d2cad6032aa4e6f4236f0604992
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-08 10:51:42 +0900

    Fallback to TCP in resolv if UDP bind raises EACCES

    Original patch from Andy Grimm.

    Fixes [Bug #10747]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2587

commit 62d43828770211470bcacb9e943876f981b5a1b4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-19 03:05:03 +0900

    Arguments forwarding [Feature #16253]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2575

commit 35f90bf1b9b06f93e919af3c4095b7aff903d799
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-22 01:27:49 +0900

    NEWS: fixed method names [ci skip]

commit 6067c0a220181a3627e60264907fd321e417ac04
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-22 01:27:26 +0900

    NEWS: fixed mark-up [ci skip]

commit 349ad6178c1ba5674a132dce05c7a8264b4d50c6
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-22 01:07:35 +0900

    * 2019-10-22 [ci skip]

commit ee302f54a0b32352faac30758cf91f502997fe1f
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-21 17:09:52 +0900

    add an NEWS entry about [Feature #15575]

commit 9bbc28340e62a732d1fad3676b7a81019bda2db6
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-21 17:00:16 +0900

    add a NEWS entry about Proc#to_s change

commit 0f0d05a3b11e6fe933c52e018900bac2bb6c9fc6
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-21 16:59:52 +0900

    fix NEWS entry about unbundled gems

commit ec2da08e2b65902168d7f4a6bed86c6c8842aa02
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-21 21:30:47 +0900

    NEWS: fixed indents [ci skip]

commit 228ebdbf2fe65c673be8b6240cdec4f1b266eb2f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-21 21:26:47 +0900

    NEWS: fix a typo

commit f364564e66d1db1de8e80d669287386595c8bc46
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-21 21:22:53 +0900

    bignum.c (estimate_initial_sqrt): prevent integer overflow

    `Integer.sqrt(0xffff_ffff_ffff_ffff ** 2)` caused assertion failure
    because of integer overflow.  [ruby-core:95453] [Bug #16269]

commit c8f97d16202a953a66a326b450a82d926f0fea9c
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-21 18:46:54 +0900

    NEWS: structured the "Language changes" section

    There were too many items in the section in somewhat random order.
    This change creates the following five subsections:

    * Pattern matching
    * The spec of keyword arguments is changed towards 3.0
    * Numbered parameter
    * proc/lambda without no block is deprecated
    * Other miscellaneous changes

    Also it adds a handful of example code.

commit 5d63a9da40b452d0455923b6838a961224c933bc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-21 17:45:27 +0900

    [Bug #16121] adjusted indent [ci skip]

commit b9702590445dfea62d271d0a5c942b7adfaaacdd
  Author: Dylan Thacker-Smith <dylan.smith@shopify.com>
  Date:   2019-10-21 17:29:21 +0900

    Stop making a redundant hash copy in Hash#dup (#2489)

    * Stop making a redundant hash copy in Hash#dup

    It was making a copy of the hash without rehashing, then created an
    extra copy of the hash to do the rehashing.  Since rehashing creates
    a new copy already, this change just uses that rehashing to make
    the copy.

    [Bug #16121]

    * Remove redundant Check_Type after to_hash

    * Fix freeing and clearing destination hash in Hash#initialize_copy

    The code was assuming the state of the destination hash based on the
    source hash for clearing any existing table on it. If these don't match,
    then that can cause the old table to be leaked. This can be seen by
    compiling hash.c with `#define HASH_DEBUG 1` and running the following
    script, which will crash from a debug assertion.

    ```ruby
    h = 9.times.map { |i| [i, i] }.to_h
    h.send(:initialize_copy, {})
    ```

    * Remove dead code paths in rb_hash_initialize_copy

    Given that `RHASH_ST_TABLE_P(h)` is defined as `(!RHASH_AR_TABLE_P(h))`
    it shouldn't be possible for a hash to be neither of these, so there
    is no need for the removed `else if` blocks.

    * Share implementation between Hash#replace and Hash#initialize_copy

    This also fixes key rehashing for small hashes backed by an array
    table for Hash#replace.  This used to be done consistently in ruby
    2.5.x, but stopped being done for small arrays in ruby 2.6.x.

    This also bring optimization improvements that were done for
    Hash#initialize_copy to Hash#replace.

    * Add the Hash#dup benchmark

commit 8b8b9c1a1fdb26f9b0470391234d8c935b083577
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-21 16:48:37 +0900

    add a NEWS entry about [Feature #15602]

commit 431132f037aecc8c9bc783fea257db653c4f8cb0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-21 12:20:19 +0900

    Pass the called keyword arguments if `keyword_init`

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2582

commit 215e4b8721d968b83c66c253e6da15b90520f679
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-21 11:50:44 +0900

    * expand tabs. [ci skip]

    Tabs were expanded because previously the file did not have any tab indentation.
    Please update your editor config, and use misc/expand_tabs.rb in the pre-commit hook.

commit 44da5a1c872879b05acab045263d0d4f906f04ba
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-21 11:45:54 +0900

    Look up event ID offsets by token as index

commit 375124be51c796a53cce9716e83003ef37c7bcf5
  Author: K.Takata <kentkt@csc.jp>
  Date:   2019-07-30 12:08:33 +0900

    st: Do error check only on non-Ruby

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2304

commit e70e81b54e10f1882874884564454f566c41b0dd
  Author: K.Takata <kentkt@csc.jp>
  Date:   2019-07-29 21:38:05 +0900

    st: Add NULL checking

    These are found by Coverity.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2304

commit 263ee6639d6f9f599613a20731c0646d125e0813
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-21 09:12:38 +0900

    Make suggestions order stable [Bug #16263]

    As the result order of `DidYouMean::SpellChecker#correct` is
    undefined, keep the order of the original candidates.

commit 71ffe40a447a17a1c3388374b7c9979c826b131d
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-10-21 08:30:42 +0900

    test/optparse/test_did_you_mean.rb - fix suggestion order

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2581

commit 27261007eb45adae4d5b30cbafa2ef27a2345b3f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-21 09:27:25 +0900

    DidYouMean can be an empty stub module [Bug #16263]

commit 1d29c9bd4601ef2783b5bb7de78ebf43cb282607
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-21 09:11:47 +0900

    * 2019-10-21 [ci skip]

commit 92234667526dfb66cfeff0eab49fa3e7588ff73e
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-10-20 07:23:18 +0900

    test_exception - fix with & w/o did_you_mean

    See Ruby issue 16263

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2577

commit ca7de0334d26b28eb8fd731b130404beb5cf5c12
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-20 20:45:56 +0900

    Also BDOT2 and BDOT3 are operators

commit 9e07dfd253f5086b306d5e32d3ef4238a8510bc2
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-20 16:16:54 +0900

    show BASERUBY version at configure.

commit a236eaa762137d7cb32b8311e0ef9a74bbb0f385
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-20 15:45:30 +0900

    Native MonitorMixin::ConditionVariable#wait

    MonitorMixin::ConditionVariable#wait can be interrupted just after
    Monitor#exit_for_cond. So implementation in C.

commit a0a3c701816c2fe4ab6e940c6cf5638756ceb6dc
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-20 14:21:04 +0900

    delegate synchronize method

    Delegate MonitorMixin#synchronize body to Monitor#synchronize.
    It makes guarantee interrupt safe (because Monitor#synchronize is
    written in C). I thought Ruby implementation is also safe, but I
    got stuck failure <http://ci.rvm.jp/results/trunk_test@P895/2327639>
    so that I introduce this fix to guarantee interrupt safe.

commit caac5f777ae288b5982708b8690e712e1cae0cf6
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-20 04:52:20 +0900

    make monitor.so for performance. (#2576)

    Recent monitor.rb has performance problem because of interrupt
    handlers. 'Monitor#synchronize' is frequently used primitive
    so the performance of this method is important.

    This patch rewrite 'monitor.rb' with 'monitor.so' (C-extension)
    and make it faster. See [Feature #16255] for details.

    Monitor class objects are normal object which include MonitorMixin.
    This patch introduce a Monitor class which is implemented on C
    and MonitorMixin uses Monitor object as re-entrant (recursive)
    Mutex. This technique improve performance because we don't need
    to care atomicity and we don't need accesses to instance variables
    any more on Monitor class.

  Notes:
    Merged-By: ko1 <ko1@atdot.net>

commit 434966bffddd4299d34f5d1f7f225bf7396d0807
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-20 02:58:58 +0900

    * 2019-10-20 [ci skip]

commit f2ed8466d3fd3c80b6ad88791c9e92c2f95efa0b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-20 02:58:24 +0900

    Fixed a typo [ci skip]

commit 1d435bd51aeca75f6e437bc92de2271a716a1ced
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-19 15:57:25 +0900

    Extend Ripper DSL to set to pseudo variables other than `$$`

commit 5c81e19b196e940b3233781b7ef0c5bfcbdee4f5
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-10-19 03:03:54 +0900

    appveyor.yml - MinGW - update for MSYS2 / Mingw-w64 (#2573)

    MSYS source code comes from both gcc.gnu.org & Mingw-w64.  Updates to the Mingw-w64 source broke the MinGW build step.

    Fixes the issue until Mingw-w64 updates their source, then it should be reverted, see comments in code.

commit 7dcc24fd81d841718ab2f3b616be084b70adaa89
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-19 00:51:37 +0900

    * 2019-10-19 [ci skip]

commit bf934e48128774717997b036301e27e5fbccc3ce
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-19 00:50:17 +0900

    Fixed passing idNil as a Symbol

commit 9cb809cfefafc58cc0bf56184ecc94aec3c41c1d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-18 22:17:06 +0900

    Verbatim texts need more indent [ci skip]

    And separate ruby script and executed example.

commit 58e2ca31dbbae9bb54917c9b3cc88fc138454eeb
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-18 20:24:36 +0900

    Use `_` instead of `_n_`

commit ddad1fb229421be3dc4b0a3031cb410b62a233a9
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-18 17:53:17 +0900

    NEWS: Mention that optparse now supports did_you_mean for unknown option

commit e2b719bed640d4813fd5f753c80d33d01c612078
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-18 17:46:53 +0900

    Support DidYouMean by AmbiguousOption too

commit b4d308b41939659fe8a4df28afc82eb5205709d1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-18 17:39:16 +0900

    Defer adding additional info until getting the message of an error

commit e29e49abf018730d8419b4797ff17942e00d810b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-18 16:43:40 +0900

    Default DidYouMean.formatter to PlainFormatter

commit d4e52f672cf520d6929d22310a340e09fcb0e35d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-18 15:19:26 +0900

    Added no suggestion test case

commit 46fa301e82d50161fc7ec8e455d9d498b15b2c7a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-18 15:15:59 +0900

    Use DidYouMean.formatter

    Instead of building messages separately.

commit e50b8949fad96a30226e4122172822a2a4c7301d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-18 14:59:26 +0900

    Suppress numbered parameter warnings

commit 095cdca15b430fb5973b1540d92a29598552adba
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-18 14:03:28 +0900

    Make weakmap finalizer an ifunc lambda

    Simple comparison between proc/ifunc/method invocations:

    ```
      proc     15.209M ( 1.6%) i/s -     76.138M in   5.007413s
     ifunc     15.195M ( 1.7%) i/s -     76.257M in   5.020106s
    method      9.836M ( 1.2%) i/s -     49.272M in   5.009984s
    ```

    As `proc` and `ifunc` have no significant difference, chosen the
    latter for arity check.

commit ce7942361d1f1f9a1ca958b6979a432da2014683
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-18 02:51:15 +0900

    Use identhash as WeakMap

    As ObjectSpace::WeakMap allows FLONUM as a key, needs the special
    deal for its hash.  [Feature #16035]

commit c3b64a86bcd7773c081f5049115c57ec73d7a76a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-16 16:31:41 +0900

    lib/optparse.rb: Show a did_you_mean hint for unknown option

    ```
    require 'optparse'

    OptionParser.new do |opts|
      opts.on("-f", "--foo", "foo") {|v| }
      opts.on("-b", "--bar", "bar") {|v| }
      opts.on("-c", "--baz", "baz") {|v| }
    end.parse!
    ```

    ```
    $ ruby test.rb --baa
    Traceback (most recent call last):
    test.rb:7:in `<main>': invalid option: --baa (OptionParser::InvalidOption)
    Did you mean?  baz
                   bar
    ```

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2561

commit 5ca5529d223ee962451685badc9e928ea87dbb44
  Author: Seiei Miyagi <hanachin@gmail.com>
  Date:   2019-10-18 01:34:18 +0900

    Fix warning of generated parser for nested module

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2571

commit 1d564acedc820e91c585cb4850844a09f9a6af96
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-18 05:35:26 +0900

    Remove unused constant.

    This constant isn't used, so lets remove it.

commit 9026e12f93bb0f3f63d7449cdb5eabb2e660088f
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-18 05:30:09 +0900

    Look up constant instead of caching in a global

    The global can go bad if the compactor runs, so we need to look up the
    constant instead of caching it in a global.

commit ee821e90741ebedc6c7a3bb0e8b67e59f3a44022
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-18 02:16:32 +0900

    Update test to handle x32 ABI compiled Ruby on Linux

    Suggestion from Laurence Parry.

    Fixes [Bug #16030]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2572

commit 8c0629ba58c5c95b970a657493d261356eedea1d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-18 02:51:12 +0900

    Treat key sequences from getwch() that start from 0 or 0xE0 correctly

commit 58657fa134852311ce6ce2827f72ba2d1b29a8bb
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-18 02:31:17 +0900

    Add numeric keypad key sequences on Windows

commit 53c05a6cf4bb1713d9db63b6e292644bead16da6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-18 02:29:13 +0900

    Remove freeze

commit 13b106a19c9c819fb0c887beb4787ab894cdba6c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-18 02:15:53 +0900

    Ignore the input method key sequence from getwch() correctly

    The function getwch() returns some key sequences which start from 0 or 0xE0
    with a following key code. Alt+` that is on/off key for input methods gives 0
    and 41 so Reline was always ignoring 0 and following keys but numeric keypad
    keys give 0 and following actual keys. This commit changes the behavior to be
    ignoring only the 0 and 41 sequence.

commit 0162e7e6471b639dfeeded29943e9e27c9519826
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-12 08:22:58 +0900

    Make circular argument reference a SyntaxError instead of a warning

    Fixes [Bug #10314]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2569

commit fdfb5100b9e74cfb89b6de3649e98cb1ad85497a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-18 00:46:02 +0900

    * 2019-10-18 [ci skip]

commit d1a7305848969128d3eb175a4a3b2d7f7929376a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-18 00:41:17 +0900

    Insert multiline incremental search result correctly

commit 4f13927f1fe06a5fe23e25448d9adc80031e0bad
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-17 19:42:25 +0900

    [DOC] no change on Windows [Bug #15267] [ci skip]

commit e169ad93f44e1944ecf7bb65133fd34e8b868ea8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-17 14:42:38 +0900

    Fixed File.extname at a name ending with a dot

    File.extname now returns a dot string at a name ending with a dot.
    [Bug #15267]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2565

commit 2a261909cc6d0767d584c0555a1c6594aacf567a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-17 17:45:02 +0900

    * remove trailing spaces. [ci skip]

commit 2a22a6b2d8465934e75520a7fdcf522d50890caf
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-10-17 17:44:46 +0900

    Regexp#match{?} with nil raises TypeError as String, Symbol (#1506)

    * {String|Symbol}#match{?} with nil returns falsy

    To improve consistency with Regexp#match{?}

    * String#match(nil) returns `nil` instead of TypeError
    * String#match?(nil) returns `false` instead of TypeError
    * Symbol#match(nil) returns `nil` instead of TypeError
    * Symbol#match?(nil) returns `false` instead of TypeError

    * Prefer exception

    * Follow empty ENV

    * Drop outdated specs

    * Write ruby/spec for above

    https://github.com/ruby/ruby/pull/1506/files#r183242981

    * Fix merge miss

commit 41457dcbe050a698c357b516d0a012b1b584643a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-17 16:54:06 +0900

    Remove unused variable

commit 60a0c20cb637ac3b2edc561dbc5888fae290b0e6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-17 16:35:11 +0900

    Refactor prompt generation logic

commit 37457117c941b700b150d76879318c429599d83f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-17 12:51:29 +0900

    Use `\&` instead of `\1` with capture

commit d5744aff3a164c358f92ef9dc2cda5c7a7612d97
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-15 01:00:42 +0900

    Fix DRbServer#any_to_s

    My previous fix in d0ed935d5bf8c3fce9800742a36e44fb7f63dda4 was
    not correct, as pointed out by cremno on GitHub.

    This simplifies things by just using Kernel#to_s.  Also switch to
    bind_call(obj) instead of bind(obj).call for better performance.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2554

commit 567e312d1f56c27ecb4fa20deac4311f05ee5507
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-09 07:44:26 +0900

    Do not raise an exception on a closed DRb socket

    This rescues some exceptions that could happen with a closed or
    shutdown DRb socket. This can prevent the server from
    exiting if an client socket is closed directly after it is
    accepted.

    Fixes [Bug #8039]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2554

commit 50b8033d6b7404670ee985de1473fffc10dd7d9c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-15 08:44:11 +0900

    Handle subclasses of Exception in drb

    This makes it so that client instances that call a method on a
    server-side object that raise a subclass of Exception are handled
    similarly to those that raise a subclass of StandardError.

    Only reraise exceptions that we are fairly sure we don't want to
    rescue.

    Fixes [Bug #5618]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2554

commit 2993b24a1ecc5fa3cc9f140bfd80669c3a3b7b9c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-25 09:11:06 +0900

    Warn for calling public/protected/private/module_function without arguments inside method

    Calling these methods without an argument does not have the
    desired effect inside a method.

    Fixes [Bug #13249]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2562

commit db84123600a2112063441dec4411ab5af6c3a78e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-17 02:19:01 +0900

    Calculate prompt width correctly

commit e26c6d4ab840c100c4f3ad20d0399598ef427c13
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-17 01:51:29 +0900

    Collect multiline prompt logic into a method

commit 3fea2d91ad7a1c493a25a531fcbd3f90f5a6406e
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-10-17 01:21:18 +0900

    Use an even indent in NEWS for code

    * Makes it easier to copy-paste and add code backticks.

commit e003f29e2114549c7488be4440439669797e78a9
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-17 00:29:39 +0900

    * 2019-10-17 [ci skip]

commit 5c80dffd0555a36a31f0da51696609a6af5e34ea
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-17 00:28:53 +0900

    Revert "Disable ccache on arm64 build"

    This reverts commit e8124729fbeaf159ae615f61980ee10018ed5134.

    It worked once, but soon after that it stopped working again
    https://travis-ci.org/ruby/ruby/jobs/598491972

commit 7df227804af8eefac9d82cf449cab09c086aea60
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-16 22:34:58 +0900

    Support multiline history in incremental search

commit f8fb51c976313b8053412c80f3f7474cdd89b4b3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-16 21:00:36 +0900

    Revert "alias assert_raise_message for compatibility with test-unit"

    This reverts commit 43015275b9a7f2833c93ad11ea96ae4cb3b7acd7.

    `assert_raise_message` in test-unit is different from
    `assert_raise_with_message`.  It checks the exception message
    only, but not the exception class,

commit 43015275b9a7f2833c93ad11ea96ae4cb3b7acd7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-16 17:22:31 +0900

    alias assert_raise_message for compatibility with test-unit

commit 5437d7c879585fbdb0c294298eb76cc563e01c69
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-16 16:11:05 +0900

    Temporarily drop test_jit_debug.rb

    Still some CIs are failing:
    https://ci.appveyor.com/project/ruby/ruby/builds/28141041/job/v4hfc99sjefqabkk
    http://ci.rvm.jp/results/trunk-vm-asserts@silicon-docker/2317313

    I'll fix them later.

commit d70855c72584f303228b7821889c0b68813ec06f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-16 15:16:51 +0900

    Added test for rdoc `--force-update` option

commit 17ee01e3f618f15f2bec794238874a62dc60deb6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-16 15:16:07 +0900

    Removed an unused assignment

commit c15856d76dd46030c805523b05808d32ead15162
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-16 15:14:55 +0900

    Do not test --jit-debug on -DVM_CHECK_MODE

commit eef25f95b75f2d8312753002c4f91febaa7c866f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-16 15:04:34 +0900

    Maintain the intention of comment in Travis matrix

commit 006d9013ea29ed8fe837f41796067b10df7a49ee
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-16 14:56:19 +0900

    Remove arm64 build from Drone

    because it started to run on Travis.

commit e8124729fbeaf159ae615f61980ee10018ed5134
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-16 14:54:43 +0900

    Disable ccache on arm64 build

    Follow up https://github.com/ruby/ruby/pull/2559

    According to experiments in https://github.com/ruby/ruby/pull/2560,
    disabling cache seems to make arm64 build succeed.

commit 4ccb49bad31b3c4a9cc7c6138cae93bd60a7bec4
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-16 14:47:20 +0900

    Enforce --jit-debug test by another way

commit 759576a03f0a39f3190e79526d138adc3a3f0a62
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-16 14:01:25 +0900

    Fix test path on travis build

commit 2679e10942c8cebc11423cac8303bea7b4c1522a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-16 13:37:00 +0900

    Test without --jit-debug by default

    and let RUBY_DEBUG=1 job test it.

    We usually don't use --jit-debug and we should test no --jit-debug by
    default.

commit d97229de5c03fb3b824c6ed263de6e005fa3a86e
  Author: Jun Aruga <junaruga@users.noreply.github.com>
  Date:   2019-10-16 12:59:40 +0900

    Add arm64 case on Travis. (#2559)

    misc-16234

commit 6081ddd6e6f2297862b3c7e898d28a76b8f9240b
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-16 04:46:24 +0900

    Dup hash with keyword flag when converted to keywords

    When ruby2_keywords is used on a method, keywords passed to the method
    are flagged.  When the hash is passed as the last element of an
    argument splat to another method, the hash should be treated as a
    keyword splat.  When keyword splatting a hash, a duplicate of the
    hash is made.  So when auto-splatting the hash with the keyword
    flag, a duplicate of the hash should also be made.

    This fixes cases where the hash is later passed to another method
    and would be treated as keywords there:

      class Object
        ruby2_keywords def foo(*a) bar(*a) end
        def bar(*a) baz(*a) end
        def baz(*a, **kw) [a, kw] end
      end
      foo(:a=>1)

    Previously, this would pass the :a=>1 as keywords to bar and also as
    keywords to baz. Now it only passes :a=>1 as keywords to bar, but bar
    passes :a=>1 as a positional hash to baz (which in this case
    generates a warning in 2.7).

commit 259601ab578885418b36138e457c2a93dd281896
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-16 02:55:45 +0900

    Support backspace in incremental search

commit a5245c165808b9ac0a492e218b0603e93262b449
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-16 02:08:44 +0900

    C-r is incremental history search in vi insert mode

commit 1c50ce2cf8347d0ecc29245cd0a2c7ede5b838dd
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-16 01:42:52 +0900

    * 2019-10-16 [ci skip]

commit 929d5fd3b99c1413f737ff16cf0680698036e60f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-15 22:32:10 +0900

    Comparable#clamp with a range [Feature #14784]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2556

commit 375cf129189f32f7be76ac525035bcde691a63e7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-15 23:29:49 +0900

    test/csv/write/test_general.rb: suppress warnings

    of "setting Encoding.default_internal".

commit c01df7e58f34eb81bf569614091a4db428c61282
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-15 23:13:49 +0900

    Fixed the key to delete [Bug #16250]

    https://github.com/ruby/ruby/commit/f94202fcc228d0348ca050a7b18a8f8a538a7305#commitcomment-35505076

    Co-Authored-By: Ary Borenszweig <asterite@gmail.com>

commit 81176095f45a5c9f14fc61dfce041735094f893f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-15 22:38:39 +0900

    [DOC] fixed a variable name [ci skip]

    replaced "anObject" with "obj".  also marked up with simple `_`s
    instead of `<i>`.

commit e0e93a199d28446a5d1b1289ee9466f7af01e62e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-15 20:15:28 +0900

    [rubygems/rubygems] Bump version to 3.1.0.pre2

    https://github.com/rubygems/rubygems/commit/a7a673ce22

commit 51a31b86e9d60643526980830d44f7b5134f39c0
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-15 20:21:09 +0900

    [rubygems/rubygems] Also bump test variable

    https://github.com/rubygems/rubygems/commit/97e9768612

commit d2982bea679b494712f7c19afc0308be0aa2246b
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-15 20:18:06 +0900

    Remove duplicated `.` [ci skip]

commit f94202fcc228d0348ca050a7b18a8f8a538a7305
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-15 09:54:23 +0900

    Use compare_by_identity hash [Bug #16250]

commit b7079e538437aacf079d82c21504e44d7396926a
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-15 18:50:46 +0900

    Try to avoid random failure

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/openbsd-current/ruby-master/log/20191015T070011Z.fail.html.gz
    ```
      1) Failure:
    TestProcess#test_kill_at_spawn_failure [/home/chkbuild/chkbuild/tmp/build/20191015T070011Z/ruby/test/ruby/test_process.rb:2276]:
    [ruby-core:69304] [Bug #11166].
    <#<Thread:0x000009f60a7cac40@/home/chkbuild/chkbuild/tmp/build/20191015T070011Z/ruby/test/ruby/test_process.rb:2272 dead>> expected but was
    <nil>.
    ``

commit c800967acd35a763a6f09fe2b2e29870f064c22e
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-15 13:58:13 +0900

    Simplify circular reference check of IRB::Color

commit 96617ad1d57a13e9a282fb663ea73e4801519389
  Author: Ary Borenszweig <asterite@gmail.com>
  Date:   2019-10-15 13:25:05 +0900

    IRB colorize: take into account recursive arrays and hashes (#2555)

    [Bug #16250]

commit ddd42d8ebdefc520b0c7d6ada4fb0de6969a49f8
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-15 09:55:44 +0900

    * 2019-10-15 [ci skip]

commit 978276a7d9249535f855088f866551b6557f321f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-15 09:43:11 +0900

    Update documentation for File#{readable,writable,executable}{,_real}? [ci skip]

    Some OS-level security features cause these methods to not return
    expected results.  For example fs.protected_regular sysctl on Linux,
    or pledge(2)/unveil(2) on OpenBSD.

    Fixes [Bug #16002]

commit c3a626030235c0349e14c6bc07177810daee841c
  Author: Masatoshi SEKI <m_seki@mva.biglobe.ne.jp>
  Date:   2019-10-14 22:56:37 +0900

    add require "monitor"

commit 8488d5b5b6cc9205e8e0641c514f1f2e38bf7d1e
  Author: Masatoshi SEKI <m_seki@mva.biglobe.ne.jp>
  Date:   2019-10-14 20:30:22 +0900

    Automatically close fds on fork (and GC). The connection pools are maintained at thread scope.

commit a4cf11c10fcaadfab738d8e98712551f701eef5a
  Author: Florian Frank <flori@ping.de>
  Date:   2017-12-21 17:57:16 +0900

    [flori/json] fix test as reported in #343

    https://github.com/flori/json/commit/565c72ba9e

commit 308bbb4e10d247063889ebd9ba957e62f17978a5
  Author: Sho Hashimoto <sho.hsmt@gmail.com>
  Date:   2019-01-08 09:12:05 +0900

    [flori/json] Add ascii_only option to JSON::Ext::Generator::State.new.

    https://github.com/flori/json/commit/0e99a9aac5

commit 98a9445db943c747e8d98cf7236e891eb48b5be0
  Author: Watson <watson1978@gmail.com>
  Date:   2018-03-02 00:45:28 +0900

    [flori/json] Add shortcut converting to String

    In where to convert Hash key to String for json, this patch will add shortcut for String/Symbol in Hash key.

    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json    65.000  i/100ms
    Calculating -------------------------------------
                    json    659.576  ( 1.5%) i/s -      3.315k in   5.027127s
    ```

    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json    78.000  i/100ms
    Calculating -------------------------------------
                    json    789.781  ( 2.7%) i/s -      3.978k in   5.041043s
    ```

    ```
    require 'json'
    require 'benchmark/ips'

    obj = []

    1000.times do |i|
      obj << {
        "id" => i,
        :age => 42,
      }
    end

    Benchmark.ips do |x|
      x.report "json" do |iter|
        count = 0
        while count < iter
          JSON.generate(obj)
          count += 1
        end
      end
    end
    ```

    https://github.com/flori/json/commit/38c0f6dbe4

commit a2f9c38a718eecef6795b4a8667589c0ef68b737
  Author: Watson <watson1978@gmail.com>
  Date:   2018-03-02 00:33:18 +0900

    [flori/json] Convert Hash object using rb_hash_foreach()

    To convert Hash convert, this part was using following pseudo code

    ```
    obj.keys.each do |key|
      value = obj[key]
      ...
    end
    ```

    and `rb_funcall()` was called for `obj.keys`.
    It might be slightly heavy to call the Ruby method.
    This patch will iterate to convert Hash object about key/value using `rb_hash_foreach()` Ruby API instead of `rb_funcall()`.

    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json    55.000  i/100ms
    Calculating -------------------------------------
                    json    558.501  ( 1.1%) i/s -      2.805k in   5.022986s
    ```

    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json    65.000  i/100ms
    Calculating -------------------------------------
                    json    659.576  ( 1.5%) i/s -      3.315k in   5.027127s
    ```

    ```
    require 'json'
    require 'benchmark/ips'

    obj = []

    1000.times do |i|
      obj << {
        "id" => i,
        :age => 42,
      }
    end

    Benchmark.ips do |x|
      x.report "json" do |iter|
        count = 0
        while count < iter
          JSON.generate(obj)
          count += 1
        end
      end
    end
    ```

    https://github.com/flori/json/commit/a73323dc5e

commit 2003755a2c491fd81496308cad97ce6304c51fe8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-14 19:13:20 +0900

    [flori/json] Fixed unexpected illegal/malformed utf-8 error

    flori/json@c34d01ff6a18dac04a90b2e0f820cdb1d5c7e1b2 does not
    consider US-ASCII compatible but non-UTF-8 encodings, and causes
    an error in RDoc tests.

    https://github.com/flori/json/commit/4f471bf590

commit d7fa7e2c860430a3dfa1b08be96734925b6c81d8
  Author: Watson <watson1978@gmail.com>
  Date:   2018-03-03 01:16:34 +0900

    [flori/json] Convert string encoding to UTF-8 only when needed

    ## Before
    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json   129.000  i/100ms
    Calculating -------------------------------------
                    json      1.300k ( 2.3%) i/s -      6.579k in   5.064656s
    ```

    ## After
    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json   189.000  i/100ms
    Calculating -------------------------------------
                    json      1.964k ( 3.3%) i/s -      9.828k in   5.011237s
    ```

    ## Code
    ```
    require 'json'
    require 'benchmark/ips'

    obj = []

    1000.times do |i|
      obj << {
        "id" => i,
        :age => 42,
      }
    end

    Benchmark.ips do |x|
      x.report "json" do |iter|
        count = 0
        while count < iter
          JSON.generate(obj)
          count += 1
        end
      end
    end
    ```

    https://github.com/flori/json/commit/c34d01ff6a

commit 40724d7d10e9902fcdc4149326acbfe4dd95d3c7
  Author: Watson <watson1978@gmail.com>
  Date:   2018-03-02 00:51:30 +0900

    [flori/json] Convert String encoding using `rb_str_encode()`

    `rb_funcall` might be slightly heavy to call the Ruby method.
    This patch will convert String encoding using `rb_str_encode()` instead of `rb_funcall()`.

    ## Before
    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json    78.000  i/100ms
    Calculating -------------------------------------
                    json    789.781  ( 2.7%) i/s -      3.978k in   5.041043s
    ```

    ## After
    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json   129.000  i/100ms
    Calculating -------------------------------------
                    json      1.300k ( 2.3%) i/s -      6.579k in   5.064656s
    ```

    ## Code
    ```
    require 'json'
    require 'benchmark/ips'

    obj = []

    1000.times do |i|
      obj << {
        "id" => i,
        :age => 42,
      }
    end

    Benchmark.ips do |x|
      x.report "json" do |iter|
        count = 0
        while count < iter
          JSON.generate(obj)
          count += 1
        end
      end
    end
    ```

    https://github.com/flori/json/commit/9ae6d2969c

commit 641136c4af89ec2bc1f2c80aeefc7a38f3bc48df
  Author: Watson <watson1978@gmail.com>
  Date:   2018-03-04 23:34:26 +0900

    [flori/json] Does not check whether illegal utf-8 if string has ascii only.

    ## Before
    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json    25.000  i/100ms
    Calculating -------------------------------------
                    json    250.478  ( 4.8%) i/s -      1.250k in   5.002238s
    ```

    ## After
    ```
    $ ruby bench_json_generate.rb
    Warming up --------------------------------------
                    json    32.000  i/100ms
    Calculating -------------------------------------
                    json    360.652  ( 3.6%) i/s -      1.824k in   5.064511s
    ```

    ## Test code
    ```
    require 'json'
    require 'benchmark/ips'

    obj = []

    1000.times do |i|
      obj << {
        :string => "x" * 100,
        :utf8 => "" * 100
      }
    end

    Benchmark.ips do |x|
      x.report "json" do |iter|
        count = 0
        while count < iter
          JSON.generate(obj)
          count += 1
        end
      end
    end
    ```

    https://github.com/flori/json/commit/91a24ecac3

commit d9e50fcbeb34534d065f3662b6b952bc57994b43
  Author: Sho Hashimoto <sho.hsmt@gmail.com>
  Date:   2019-01-15 22:16:05 +0900

    [flori/json] Pass args all #to_json in json/add/*.

    https://github.com/flori/json/commit/36a7ef6790

commit 7376d70cb0817158a9ce0ef433872be5ca7af56b
  Author: Florian Frank <flori@ping.de>
  Date:   2019-04-29 22:56:14 +0900

    [flori/json] Only attempt to resize strings not other objects

    https://github.com/flori/json/commit/167ada8da7

commit ede1a3dc110d3cfc094ce4cd5b27f92cab8b7b6c
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-14 17:30:04 +0900

    Fix typos [ci skip]

commit 0195966ba26b9cec9a8b32a2dc502ad753764d2a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-14 15:42:27 +0900

    Suppress warnings for Thread.exclusive

commit 3e763883eab8435c6ebf9427b9bc49b95a1c7175
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-14 15:10:33 +0900

    Fixed overflow at onig_region_set

    To get rid of a bug of `onig_region_set` which takes `int`s
    instead of `OnigPosition`s, set elements of `beg` and `end`
    members directly, for the time being.

commit d0ed935d5bf8c3fce9800742a36e44fb7f63dda4
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-14 14:20:32 +0900

    Fix some DRb issues (#2552)

    * Handle BasicObject in drb

    Also fix a bug in rescue clause of any_to_s because sprintf
    does not handle the %l modifier.

    Fixes [Bug #7833]

    * Do not send a reply to the client if there is a connection error

    This allows for normal TCP shutdown (fin-ack-fin-ack instead of
    fin-ack-push-rst).

    Patch from pierre@mouraf.org (Pierre-Alexandre Meyer).

    Fixes [Bug #2339]

    * Detect fork and do not reuse forked connections in drb

    This associates each DRbConn with a pid, and if the pid changes,
    it closes any DRbConns in the pool with a pid that no longer
    matches.  This fixes DRb servers from sending messages intended
    for one client to another client after forking.

    Fixes [Bug #2718]
    Fixes [Bug #14471]

commit 95c420c4a65ca2e7f3edf27134ad33691959296c
  Author: Sutou Kouhei <kou@cozmixng.org>
  Date:   2019-10-14 12:40:50 +0900

    Import StringScanner 1.0.3 (#2553)

  Notes:
    Merged-By: kou <kou@clear-code.com>

commit 6fa3492362dc91cfec7eb4fd55918791da5a34fb
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-14 11:29:46 +0900

    Eliminate the possibility to leave freed ISeq

    in active_units

    Hoping to fix:
    http://ci.rvm.jp/results/trunk-mjit@silicon-docker/2311375

commit 183b42150962e507cd69ceddb64ad2a10f02fdfa
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-14 06:11:02 +0900

    Delay the free until we stop referring to a unit

    `if (unit->iseq)` might have referred to a freed unit. Therefore this
    commit delays its free.

commit 673f3842dd520ac872bb003de393ba7ae558840a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-14 02:05:30 +0900

    * 2019-10-14 [ci skip]

commit 26fae9aa9db59fdee7422a276662b45611e98a22
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-14 01:59:43 +0900

    Remove the quick stop path after convert_unit_to_func

    Now I'm not exactly sure why I needed to check `stop_worker_p` after
    `mjit_copy_cache_from_main_thread` of `convert_unit_to_func`
    in 4161674b2fbea6bdd01783ac5d3b39d88db22972.
    If it's for avoiding deadlock under `in_gc` condition, we should keep it.

    However, if it's not the case and it's just for retrying accidental
    compilation failure or just to avoid `MJIT_ATOMIC_SET` and
    `compact_all_jit_code`, I think this quick stop path is not mandatory.

    Because this path is somewhat problematic in my upcoming fix in
    mjit_worker, let me try to remove this first and see how CI goes.

commit 6a1809e2e1a95c14cfb72701df480e3ebccd4b24
  Author: Burdette Lamar <BurdetteLamar@Yahoo.com>
  Date:   2019-10-13 09:48:20 +0900

    Enhance doc for ENV.delete

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2542

commit 6ee2fb5021c4c09b718b88089c83073997d5412f
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-13 00:54:04 +0900

    * 2019-10-13 [ci skip]

commit a5ecf7e0a165dff1b4604f1ed75a677c690488df
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-13 00:51:50 +0900

    dir.c (join_path_from_pattern): check NULL from malloc

    Coverity Scan points out that all the return values of GLOB_ALLOC_N are
    NULL-checked except this call.

commit 90b9900dc159efb63feee9b0995cc5d56aef6d75
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-13 00:49:18 +0900

    io.c (rb_update_max_fd): fail with a negative file descripter

    Coverity Scan points out that ext/socket/unixsocket.c may pass -1 to
    rb_update_max_fd.  I'm unsure whether it can happen actually or not, but
    it would be good for the function to reject a negative value.

commit ebc2198d9f0292fee97e623b5e2a545fccb91d2a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-12 22:43:34 +0900

    re.c (match_set_string): add a check for memory allocation

    Found by Coverity Scan

commit 7ebf9da78830cd13895a38809b0c6f1fc6797620
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-12 22:08:50 +0900

    Also moved fallback definition of __has_attribute

commit cb14c4a535ca95bb87d47be284f447c9325733fd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-12 21:10:49 +0900

    missing/setproctitle.c: remove nonsense NULL check

    If fmt is NULL, ptitle is uninitialized and used.
    SETPROCTITLE(3bsd) says "If fmt is NULL, the process title is restored",
    but looks like the feature is not implemented in missing/setproctitle.c.
    At least the source code of ruby does not pass NULL to the function.
    So I assume this function requires non-NULL fmt.

    This issue was found by Coverity Scan.

commit f4055647115f2003ce614dd16cf68d2933f811fe
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-12 18:47:06 +0900

    Suppress deprecation warnings of MD5 from Xcode 11.1

commit 04333da7beb3e50daf5f53ef7fe24b253a1a26ef
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-12 18:14:15 +0900

    Suppress "clobbered" warnings by gcc 9.2.0

commit 710bc003791b90adf3970e137c69f283c88234cd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-12 17:21:05 +0900

    Moved RB_METHOD_DEFINITION_DECL to intern.h

    This macro is used here before defined in ruby.h.

commit 6333020fc924d3ae63775c032bbe8f57364cd42e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-12 14:55:55 +0900

    atime may not updated unless strictatime is set on macOS Catalina

    Cited from mount(8):

    ```
    strictatime
            Always update the file access time when reading from a
            file. Without this option the filesystem may default to a
            less strict update mode, where some access time updates
            are skipped for performance reasons. This option could be
            ignored if it is not supported by the filesystem.
    ```

commit 92df7d98b62f48cf21cdec522f2e7b34380fd718
  Author: Sutou Kouhei <kou@cozmixng.org>
  Date:   2019-10-12 14:03:21 +0900

    Import CSV 3.1.2 (#2547)

  Notes:
    Merged-By: kou <kou@clear-code.com>

commit d6e68bb263e79cb802fa683d9c4139ddca2fd4f5
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-12 13:25:52 +0900

    Use `warn` with `uplevel:` instead of `caller`

commit f6a666a1fcbb7076b57fe08bba758719cb68bdea
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-12 12:07:36 +0900

    * 2019-10-12 [ci skip]

commit 412cd56766a4822c48117a16d79303d3d915b28a
  Author: Sutou Kouhei <kou@cozmixng.org>
  Date:   2019-10-12 12:07:15 +0900

    Import REXML 3.2.3 (#2548)

  Notes:
    Merged-By: kou <kou@clear-code.com>

commit c866663784ea5a8f16e7fe5127127fb46ae90e6e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-11 21:43:18 +0900

    io.c (NUM2IOCTLREQ): Accept a value more than INT_MAX

    ioctl accepts int as request arguments on some platforms, but some
    requests are more than INT_MAX, e.g., RNDGETENTCNT(0x80045200).
    Passing (0x80045200 | (-1 << 32)) may work around the issue, but it may
    not work on a platform where ioctl accepts unsigned long.  So this
    change uses NUM2LONG and then casts it to int.

commit 9e4a53fe13d8e3ad2e284dea8034bdd6a0561d97
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-11 21:39:21 +0900

    test/ruby/test_rubyoptions.rb (test_encoding): skipped on Android

    On Android, nl_langinfo() always returns UTF-8 even when LANG is C.

commit f3c4e620ac612eab6370b1fb82feaa4e651542bb
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-11 21:13:52 +0900

    test/test_syslog.rb (test_log): skipped on Android

    On Android 28, LOG_PERROR is defined, but not implemented yet.
    This change skips Syslog#log explicitly.

commit d6c80876b7aae5b3f44abe7cf1b64161354b8ebd
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-11 13:50:27 +0900

    Use `bind_call` instead of `bind` and `call`

commit ddfb306e8e98282174cb078aa8e55aca223973ab
  Author: Gabriel Nagy <gabrielnagy@me.com>
  Date:   2019-10-11 13:48:02 +0900

    win32.c: Remove unused calls to StartSockets (#2312)

    NtSocketsInitialized behavior changed in e33b1690, requiring
    a call to rb_w32_sysinit for starting Windows Sockets.

    This commit removes NtSocketsInitialized entirely to avoid confusion.

    Signed-off-by: Gabriel Nagy <gabriel.nagy@puppet.com>

commit 7cc1cd3d1ed1d482ea2ec247fa6a4ad0f044418a
  Author: ksss <co000ri@gmail.com>
  Date:   2016-10-24 11:42:31 +0900

    Module#define_method: Add UnboundMethod to expected classes

  Notes:
    Merged: https://github.com/ruby/ruby/pull/1465

commit 9c24ce551d19ac0f5cac4bc9ff5ef5a7a980909d
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-04-26 06:35:43 +0900

    Reduce the minimum string buffer size from 127 to 63 bytes

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2151

commit 0ca4f74967bb5a439b1f3d322ae7729265b917a4
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-09-11 08:18:41 +0900

    Right size the numtable in insn_make_insn_table to VM_INSTRUCTION_SIZE

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2447

commit 87958520f3fd7fdec18c3508888b3d2a4e5c27a4
  Author: takkanm <takkanm@gmail.com>
  Date:   2018-06-19 20:49:09 +0900

    set real path to __FILE__ and __dir__ in Binding#irb

    When reading Binding#irb, the file of the calling source is reflected in __FILE__ and __dir__.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/1896

commit 29c1e9a0d4c855781853f0ad41b0125f42cf504d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-11 03:25:54 +0900

    Document the difference between expressions and statements [ci skip]

    In the grammar, all expressions are statements, but not all
    statements are expressions.  Some parts of the grammar accept
    expressions and not other types of statements, which causes
    similar looking code to parse differently due to operator
    precedence.

    Mostly from Dan0042 (Daniel DeLorme).

    Fixes [Bug #16092]

commit ddb0267e76d4127e66fec9b5865d053c6ed9721a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-11 05:15:28 +0900

    * 2019-10-11 [ci skip]

commit 2322c94dd65c0247b103e2f91411e37458e1466d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-25 16:04:14 +0900

    Support delegates for BasicObject

    For BasicObject, bind the Kernel respond_to? instance method to the
    object and call it instead of calling the method directly.

    Also, use bind_call(recv, ...) for better performance.

    Fixes [Bug #16127]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2546

commit 41719096957aa3d80e2e23d04ae288d2dee5328e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-10 23:22:37 +0900

    mjit_worker.c: Add `-lm` to the C compiler in MJIT on Android

    To avoid:

        cannot locate symbol "modf" referenced by .../_ruby_mjit_XXX.so"

commit f845e1bc9951ef40f2b3672d825aa67f6d6f8368
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-10 23:21:24 +0900

    ext/syslog/extconf.rb: add -llog for Android

    Otherwise, requiring syslog results in:

        cannot locate symbol "__android_log_print" referenced by "syslog.so"

commit a886d5cb79e2440eb6cf422723e08447ee4735db
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-10 23:18:44 +0900

    test/ruby/test_file_exhaustive.rb: check the owner of the root directory

    The root directory may be owned by the current user, for example, in
    chroot environment.

commit c144d7215b3444fa36d28d540b60170a5b30743d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-10 21:02:45 +0900

    Skip very time consuming test [Bug #16196]

commit 9c0cd5c569ba22bc68d1a77ad6580a275cd99639
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-10 19:38:37 +0900

    Prefer rb_gc_register_mark_object

    * ext/openssl/ossl_asn1.c (Init_ossl_asn1): prefer
      `rb_gc_register_mark_object`, which is better for constant
      objects, over `rb_gc_register_address` for global/static
      variables which can be re-assigned at runtime.  [Bug #16196]

commit 0131fab749fb76800de09e49a6abf910201c5b58
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-10 19:56:51 +0900

    Slimed down test runtime by stressing openssl.so only [Bug #16196]

commit 3f413896c3e71e4d2ed61bcd969f2ed3fc35ea4a
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-10 18:15:33 +0900

    forgot to delete unused #include line

commit 2d393bf1255864706cabdd9375dd26e33bdf40b9
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-10 17:49:31 +0900

    guard rb_fatal against non-GVL call

    Suggested by ko1.  rb_fatal requires GVL so just in case one lacks,
    print that information and let the process die.  As commented,
    we cannot print the given messages on such situations.

commit f1ce4897f2eaf9a99c250e4707e3ab6f6bdacb74
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-10 17:04:59 +0900

    make rb_raise a GVL-only function again

    Requested by ko1 that ability of calling rb_raise from anywhere
    outside of GVL is "too much".  Give up that part, move the GVL
    acquisition routine into gc.c, and make our new gc_raise().

commit d96f04d73a5feb15b9d27bd23af2f7325732bb03
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-10 16:10:58 +0900

    add "[FATAL]" marker on abort

    Indicate that the situation is fatal.

commit 0b26f56a77a6dabe2b1c09c4569ed846798afcdc
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-10 16:48:26 +0900

    Remove unreachable step level `[ci skip]`

commit 203b7fa1ae8cc40d41c38d684f70b3fea7fae813
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-10 16:08:39 +0900

    Guard static variable first

    * ext/openssl/ossl_asn1.c (Init_ossl_asn1): register the static
      variable to grab an internal object, before creating the object.
      otherwise the just-created object could get collected during the
      global variable list allocation.  [Bug #16196]

commit 6f522455bf801acefcd2ade0b2e4a2fef3cb70a4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-07 00:12:18 +0900

    [rubygems/rubygems] Do not compare with unreliable Gem::Specification::TODAY

    https://gist.github.com/ko1/a88834d744a0682711dab53fd9015a04#file-brlog-trunk-nopara-20191005-235153-L393-L472

    https://github.com/rubygems/rubygems/commit/707408d8e7

commit dc2b301994ed9de75477ece30111553d4f1ee2e3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-07 00:08:32 +0900

    [rubygems/rubygems] Restrict possible date range

    https://github.com/rubygems/rubygems/commit/1bd77f53df

commit 717b72a8af6b99ca79fd5bbe52ba4bd16b038bf6
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-10-01 20:16:32 +0900

    [rubygems/rubygems] Optimize Gem::Package::TarReader#each

    https://github.com/rubygems/rubygems/commit/1de8f39ac4

commit 495ebd6e9555bdd220a74c96cda7a7d6fe40209b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-10 14:21:29 +0900

    Now error.o needs thread.h

commit c2065c64cb198d5b53a5ecdf9638d064f6fec2e2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-10 13:50:13 +0900

    Fixed numbered parameter check

    * parse.y (struct local_vars): moved numbered parameter NODEs for
      nesting check to separate per local variable scopes, as numbered
      parameters should belong to local variable scopes.  [Bug #16248]

commit a23b639050792c74cbf585aff6742c6ee3931f5f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-10 14:07:27 +0900

    negative_size_allocation_error never returns

commit 9c3153e0da991e1a7df9b4cf91d6830effc79b22
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-10 11:55:43 +0900

    allow rb_raise from outside of GVL

    Now that allocation routines like ALLOC_N() can raise exceptions
    on integer overflows.  This is a problem when the calling thread
    has no GVL.  Memory allocations has been allowed without it, but
    can still fail.

    Let's just relax rb_raise's restriction so that we can call it
    with or without GVL.  With GVL the behaviour is unchanged.  With
    no GVL, wait for it.

    Also, integer overflows can theoretically occur during GC when
    we expand the object space.  We cannot do so much then.  Call
    rb_memerror and let that routine abort the process.

commit 25100c469758dd3676ec608ed27fd89248980666
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-10 08:53:46 +0900

    lhs of pattern matching expression of should have a value

commit 42edb056268303e8d2a1772cda0e46e1ba1a14bb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-10 01:08:42 +0900

    extracted declare_under

commit 8dc5fe6e89cb86bd92628b5f34ba5f549a241c2d
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-10-10 00:34:03 +0900

    Simplify rb_define_module_id

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2544

commit ecf6c0402eb8706001831e0464b47cbed8e82fa0
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-10 00:14:36 +0900

    * 2019-10-10 [ci skip]

commit 9b919885a08d6cf3c68cb1bce992feb43a8fad0c
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-10 00:10:14 +0900

    fix memory corruption in old GCC

    This typo introduced memory corruption when __builtin_add_overflow
    is not available but uint128_t is.  GCC before 5 are one of such
    situatins.

    See also https://rubyci.org/logs/rubyci.s3.amazonaws.com/opensuseleap/ruby-master/log/20191009T120004Z.log.html.gz

commit bb71a128eb6e901d3d7deb895971a6706eb7110d
  Author: Ben Woosley <ben.woosley@gmail.com>
  Date:   2017-05-19 07:59:38 +0900

    Prefer st_is_member over st_lookup with 0

    The st_is_member DEFINE has simpler semantics, for more readable code.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/1622

commit 29e6782f5dbf127dc20156938af374eea9e2d74e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-09 23:39:58 +0900

    Share ruby_sighandler_t definition

commit 891cbd66a411725d7300a28b1a95619c2902f0eb
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-09 23:13:59 +0900

    signal.c: save the original sighandlers for fatal signals

    On Android, a signal handler that is not SIG_DFL is set by default for
    SIGSEGV.  Ruby's install_sighandler inserts Ruby's handler only when the
    signal has no handler, so it does not insert Ruby's SEGV report handler,
    which caused some test failures.

    This changeset forces to install Ruby's handler for some fatal signals
    (sigbus, sigsegv, and sigill).  They keep the original handlers, and
    call them when the interpreter receives the signals.

commit dd477df411691803fc5a83c7daa64faac112a0e4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-09 23:02:22 +0900

    error.c (rb_bug_for_fatal_signal): renamed from rb_bug_context

    Just refactoring.

    The name "rb_bug_context" is completely unclear for me.
    (Can you see that "context" means "machine register context"?)
    The context is available only when a fatal signal (sigbus, sigsegv, or
    sigill) is received; in fact, the function is used only for fatal
    signals.  So, I think the name should be changed.

commit b9cf58d2b2deca7d5b204080c2fe04d68cc50ab1
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-09 22:57:19 +0900

    signal.c (ruby_abort): move the definition for refactoring

    The three functions for fatal signals, sigbus, sigsegv, and sigill, are
    a family.  The definition of ruby_abort had interrupted them for no
    reason.  This change just moves the definition after the family.

commit 6f11c3b3354bef107f894f112ff7698414c7bae5
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-09 17:46:05 +0900

    Check '[ci skip]' at job level

commit d0e30fc955a3a91952c6d63c56d900b72d657a3a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-09 14:03:04 +0900

    vm_eval.c (rb_adjust_argv_kw_splat): avoid memcpy with zero length

    A method call is often with `argc = 1` and `argv = &v` where v is a
    VALUE, and some functions shift the arguments by `argc-1` and `argv+1`
    (for example, rb_sym_proc_call).  I'm unsure whether it is safe or not
    to pass a pointer `argv+1` to memcpy with zero length, but Coverity Scan
    complains it.  So this attempts to suppress the warning by explicit
    check of the length.

commit b439ee1b8fa8d8a99f3f519af946ead94917edb2
  Author: Pavel Valena <pvalena@redhat.com>
  Date:   2019-09-25 22:35:56 +0900

    Remove uselsess shebang

    as the file is not executable anyway.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2483

commit 12d05537d73325d60902feaf0da323ef20ace74b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-18 18:51:02 +0900

    Update required_ruby_version to 2.4.0

commit 2d001003e4b3a6c20ead09ed54b6726a7669f457
  Author: Watson <watson1978@gmail.com>
  Date:   2019-10-09 12:25:08 +0900

    Improve performance of Array#sum with float elements (#1555)

    The declaration of local variable in loop, it will initialize local variable for each run of the loop with clang generated code.
    So, it shouldn't declare the local variable in heavy loop.

    Array#sum with float elements will be faster around 30%.

    * Before
           user     system      total        real
       3.320000   0.010000   3.330000 (  3.336088)

    * After
           user     system      total        real
       2.590000   0.010000   2.600000 (  2.602399)

    * Test code
    require 'benchmark'

    Benchmark.bmbm do |x|
      ary = []
      10000.times { ary << Random.rand }

      x.report do
        50000.times do
          ary.sum
        end
      end

    end

commit a14cc07f2ffc704b73ba4b96543e2f85c3ed1921
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-08 16:07:31 +0900

    avoid returning NULL from xrealloc

    This changeset is to kill future possibility of bugs similar to
    CVE-2019-11932.   The vulnerability occurs when reallocarray(3)
    (which is a variant of realloc(3) and roughly resembles our
    ruby_xmalloc2()) returns NULL.  In our C API, ruby_xmalloc()
    never returns NULL to raise NoMemoryError instead.  ruby_xfree()
    does not return NULL by definition.  ruby_xrealloc() on the other
    hand, _did_ return NULL, _and_ also raised sometimes.  It is very
    confusing.  Let's not do that.  x-series APIs shall raise on
    error and shall not return NULL.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2540

commit 7e0ae1698d4db0baec858a46de8d1ae875360cf5
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-07 16:56:08 +0900

    avoid overflow in integer multiplication

    This changeset basically replaces `ruby_xmalloc(x * y)` into
    `ruby_xmalloc2(x, y)`.  Some convenient functions are also
    provided for instance `rb_xmalloc_mul_add(x, y, z)` which allocates
    x * y + z byes.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2540

commit a220410be70264a0e4089c4d63a9c22dd688ca7c
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-07 13:16:42 +0900

    annotate malloc-ish functions

    Make them gcc friendly.  Note that realloc cannot be __malloc__
    attributed, according to the GCC manual.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2540

commit 2f3b4029da1b64ffb989916a8b74e17c366e45b0
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-07 13:46:24 +0900

    fix arity mismatch

    Seems nobody has actually used this macro.  Such an obvious typo.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2540

commit 59cfa2d1871c0b74d39d9eee6241f3e950eff42e
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-09 09:08:53 +0900

    * 2019-10-09 [ci skip]

commit e078352a787ce3d52b5147a5fdf69b89a9d60cff
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-09 09:04:37 +0900

    lldb_cruby.py: fixed inspecting string  [ci skip]

    Show the size of String.

    To see the whole contents even after NUL char:

    ```
    (lldb) rp str
    (const char [5]) $1 = "x"
    (lldb) memory read -s1 --format x --count `sizeof($1)` -- &$1                                                                                          0x1010457a8: 0x78 0x00 0x61 0x61 0x61
    ```

commit 98131f148f057b1364ae080f99b1efb2dc72002a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-09 09:01:11 +0900

    lldb_cruby.py: fixed embedded string ptr [ci skip]

    Use GetLocation to get the address of embedded array.

commit 7909f06212ae8df6ba7203f8152292a190b2b33a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-06 06:45:19 +0900

    Check for invalid hex escapes in URI#query=

    Fixes [Bug #11275]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2535

commit 8feb8c9bb7e9036ee2014b0f532677635a16893e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-08 09:13:58 +0900

    Packed delayed token elements

commit 11b6ff12af99b177979c7a4f57f49b91a50fcc0c
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-08 11:21:20 +0900

    more use of RbConfig::LIMITS

    `8 * RbConfig::SIZEOF` ... is not straight.

commit dd0c75fdc2104a6ba38b68d4431a572504a3bbc2
  Author: Kenta Murata <mrkn@users.noreply.github.com>
  Date:   2019-10-08 09:06:28 +0900

    Import changes from ruby/bigdecimal (#2531)

    Sync to ruby/bigdecimal@92356ba71c6bd325b0ab618c634a7aecf8cdc767

  Notes:
    Merged-By: mrkn <mrkn@ruby-lang.org>

commit 59c3b1c9c843fcd2d30393791fe224e5789d1677
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-08 05:45:40 +0900

    Add section to extension.rdoc for backwards compatibility macros [ci skip]

    These macros should make it easier to C extensions to switch to
    the Ruby 2.7 C-API *_kw functions, but still have the code work
    correctly on older Ruby versions.

commit c0eae130b1d9fde5716c2340141d78ebc48c82a5
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-08 05:16:33 +0900

    Note RB_PASS_EMPTY_KEYWORDS and RB_SCAN_ARGS_EMPTY_KEYWORDS will be removed

    There is no need for these in Ruby 3.0, and the plan is to
    remove them.

commit 055a85d3d9ab5850b1269089f28385158d969d18
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-08 04:55:22 +0900

    Update NEWS with Module#ruby2_keywords and a few other things

commit 6abcd35762db4bf49cd6c62a8c624e2a013e5dc1
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-08 04:28:21 +0900

    Do not free too many pages.

    Sweep step checks `heap_pages_freeable_pages`, so compaction should do
    the same.

commit 058db33c5ec881271d028b7490d88b3baed74acb
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-08 04:10:24 +0900

    Move empty pages to the tomb

    I think we need to be moving empty pages to the tomb after they become
    empty.

commit 0a2f04e156cb717dcf78f2ea9bfe26f864a24616
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-08 02:14:13 +0900

    Eliminate second GC pass for eliminating T_MOVED

    `T_MOVED` is a linked list, so we can just iterate through the `T_MOVED`
    objects, clearing them out and adding them to respective free lists.

commit d8b6f585027a5657c6921f97513a8cf70a031c94
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-08 00:00:54 +0900

    * 2019-10-08 [ci skip]

commit 7abb02771a188671a6ddc3ccbe87dcecc4fe645f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-08 00:00:24 +0900

    Fix typo [ci skip]

    pointed out by ruby-trunk-changes

commit 468184a996c99d1f94f94d7468f65e386cf13564
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-07 13:18:20 +0900

    Allow ruby2_keywords to be used with bmethods

    There are libraries that use define_method with argument splats
    where they would like to pass keywords through the method. To
    more easily allow such libraries to use ruby2_keywords to handle
    backwards compatibility, it is necessary for ruby2_keywords to
    support bmethods.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2532

commit 3374e1450c18c33420f616f41ad7f884fdb4df21
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-07 19:33:33 +0900

    Write yaml and json under destdir and print to stdout

commit 96753e8475ee69537134ab3d966c3d25cb5c467c
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-07 19:05:42 +0900

    Create info.yml and info.json

    - `info.yml` is for ruby/www.ruby-lang.org/_data/releases.yml
    - `info.json` is meta data for users of snapshot

commit bb86611c9b61b47ba7ff65c3b0a0737a20183460
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-07 19:03:06 +0900

    Remove `-s3` option

    It will not use in `ruby/actions`, and `default=tmp` is not correct.

commit f4252f64964f3b66171cc0c81bda4c1b2d028601
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-07 14:21:38 +0900

    Version 0.0.3

commit c8542ab484efb6ee0009cd081789d9a68f482483
  Author: Prajjwal Singh <sin@prajjwal.com>
  Date:   2019-10-07 14:12:29 +0900

    Add: Array#intersection method

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2533

commit d4ec37f69e3bd6f88725fe1075daa2e5f58c2aec
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-07 14:16:12 +0900

    * 2019-10-07 [ci skip]

commit a9e9cd20369ea110333deb2ef7c23b5ed7d09773
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-06 00:52:20 +0900

    Flush console just after printing

commit 136116819eea66c5a053971efb9aba403a44e38a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-05 23:46:16 +0900

    Use built-in Win32API on JRuby

    It's fixed for JRuby dedicatedly.

commit 309f6a772692e696b79f6bd213680e534551cca3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-10-02 19:56:55 +0900

    Swap expected and actual correctly

commit ddf5020e4fcae5ed28a064af10124a032590452f
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-06 17:01:00 +0900

    Revert "tailcall optimization again (#2528)"

    This reverts commit f62f90367fc3bce6714e7c34cbd040e14e43fe07.

commit f62f90367fc3bce6714e7c34cbd040e14e43fe07
  Author: wanabe <s.wanabe@gmail.com>
  Date:   2019-10-06 16:52:09 +0900

    tailcall optimization again (#2528)

    This is follow up of r67315.

commit 6525d3bcc7d0be65e2ff97d6785d9f36b5e4988a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-06 15:22:12 +0900

    test/dtrace/helper.rb: Etc.getgrnam may return nil on some platforms

commit 2ca353c2e0785056fea551d78e957bd753b17586
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-06 11:49:27 +0900

    * 2019-10-06 [ci skip]

commit 2409667aa2e03b6008ed7a4ccce48a8b288cc0fd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-06 11:39:01 +0900

    time.c: Fix some bugs about WIDEVALUE

    WIDEVALUE differs from VALUE in 32bit platform, but some codes assume
    that they are the same.

    There is `#define STRUCT_WIDEVAL` mode to check the consistency.
    This change allows to build with STRUCT_WIDEVAL.

commit 06a04a1aa3fbf9132c61f4ced9582c36c96d3f65
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-05 19:08:23 +0900

    ext/openssl/ossl_ssl.c: Use const declaration if LibreSSL >= 2.8.0

    to suppress a warning in OpenBSD.

    ```
    ossl_ssl.c:938:31: warning: incompatible pointer types passing 'SSL_SESSION *(SSL *, unsigned char *, int, int *)' (aka 'struct ssl_session_st *(struct ssl_st *, unsigned char *, int, int *)') to parameter of type 'SSL_SESSION *(*)(struct ssl_st *, const unsigned char *, int, int *)' (aka 'struct ssl_session_st *(*)(struct ssl_st *, const unsigned char *, int, int *)') [-Wincompatible-pointer-types]
            SSL_CTX_sess_set_get_cb(ctx, ossl_sslctx_session_get_cb);
                                         ^~~~~~~~~~~~~~~~~~~~~~~~~~
    /usr/include/openssl/ssl.h:738:20: note: passing argument to parameter 'get_session_cb' here
        SSL_SESSION *(*get_session_cb)(struct ssl_st *ssl,
                       ^
    1 warning generated.
    ```

commit 96452373fd192ada49c831386e033531e2263a52
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-05 18:28:19 +0900

    ext/json/parser/prereq.mk: use `if $. == 1` instead of a hacky code

commit 70e3fda2eb45c841e5fb4574273d20f8df5455e5
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-05 17:54:36 +0900

    ext/json/parser/prereq.mk: keep line numbers of ext/json/parser/parser.c

    Follow up of 5717e55e9a7790c938afa694a9bf558c0e54bb83.
    Adding a header with newline broke linenos.

commit 3e3cc0885a9100e9d1bfdb77e136416ec803f4ca
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-05 11:28:53 +0900

    Now keyword parameter warnings are suppressed by 871005bdd204

    This reverts commits:

    * 2a490d5660ac869f8f2bbcec4887b1dc2950643f
      Suppress assert_match warnings.

    * d4a86e407ec2057c2c7ad757aa76dad757f34c3a
      Assert warnings message for the last argument is keyword parameter.

commit 212da9a6aec5da26f97b8312b7e8fd3d9b1eef47
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-05 11:04:23 +0900

    Added dependencies on prerequisite makefiles

commit 6dfe0c9dcd8327dfce5f689d6a184c0f3a146a24
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-01 10:41:10 +0900

    [rubygems/rubygems] The date might have advanced since TODAY has been set

    https://bugs.ruby-lang.org/issues/16189

    https://github.com/rubygems/rubygems/commit/e331222163

commit 7d4ab8bbe70c92410d35270be9030775b9ee31ac
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-09-29 23:43:17 +0900

    [rubygems/rubygems] Use dependency.identity in available_specs

    https://github.com/rubygems/rubygems/commit/bde88f00a1

commit b659c1b92f3d5f251a3436073cd60d955d5fc457
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-09-29 23:41:49 +0900

    [rubygems/rubygems] Add Gem::Dependency#identity method

    https://github.com/rubygems/rubygems/commit/05146bb2fd

commit 871005bdd2044ef7bd532a7cc4f0756217161f97
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-26 20:11:24 +0900

    [rubygems/rubygems] Suppress keywords warning in ruby 2.7

    https://github.com/rubygems/rubygems/commit/892bfc11fe

commit caa9d0bd7851c3b8cc9064987109eed9952a7c90
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-26 20:01:03 +0900

    [rubygems/rubygems] Always pass an encoding option to Zlib::GzipReader.wrap

    The arity of this method has been -1 since the import, so the
    option has been passed always, even if Zlib::GzipReader#initialize
    does not take the option.  Actually it takes the option since 1.9.

    https://github.com/rubygems/rubygems/commit/2fcde0f4e0

commit 39e8d5e1cdc25ca17f74da5e72ba87dcdfa4a602
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-26 19:47:22 +0900

    [rubygems/rubygems] Use dedicated assertion methods

    For better messages at failures.

    https://github.com/rubygems/rubygems/commit/971455b16e

commit f8104d9e9f1a9b378dde08e806f4aadf9b17200b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-26 19:38:56 +0900

    [rubygems/rubygems] Fixed assertion arguments

    It is `assert_eqal(expected, actual)`.

    https://github.com/rubygems/rubygems/commit/1d6197a090

commit 170d1540596c72c9197732d051d8d9302b87f033
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-05 07:37:19 +0900

    signal.c: Use MINSIGSTKSZ by casting to int

    MINSIGSTKSZ is unsigned int in OpenBSD, which makes a warning of
    comparison:

    ```
    signal.c:535:14: warning: comparison of integers of different signs: 'int' and 'unsigned int' [-Wsign-compare]
        if (size < MINSIGSTKSZ)
            ~~~~ ^ ~~~~~~~~~~~
    1 warning generated.
    ```
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/openbsd-current/ruby-master/log/20191004T200009Z.log.html.gz

commit 417c64b9a8c4815a54f9bbef37f4438ee5c2f4fc
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-05 07:00:57 +0900

    ext/json/parser/parser.rl: Use "signed" char to contain negative values

    char is not always signed.  In fact, it is unsigned in arm.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20191004T181708Z.log.html.gz
    ```
    compiling parser.c
    parser.rl: In function unescape_unicode:
    parser.rl:50:5: warning: comparison is always false due to limited range of data type [-Wtype-limits]
         if (b < 0) return UNI_REPLACEMENT_CHAR;
         ^
    ```

commit 5717e55e9a7790c938afa694a9bf558c0e54bb83
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-05 07:00:07 +0900

    ext/json/parser/prereq.mk: Add a "automatically generated" header

    to parser.c.

commit 076d3d758b0df47d3dceb3ba0930486f3dd0cc2d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-05 06:30:27 +0900

    ext/json/parser/parser.rl: Update the source code of parser.c

    There have been some direct changes in parser.c which is automatically
    generated from parser.rl.  This updates parser.rl to sync the changes:

    * 91793b8967e0531bd1159a8ff0cc7e50739c7620
    * 79ead821dd4880725c9c6bb9645b3fad71715c5b
    * 80b5a0ff2a7709367178f29d4ebe1c54122b1c27

commit bd4b65f4b05ff7dcb5c7e16f174c57885bf27e40
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-05 03:17:43 +0900

    IMEMO objects don't have a class, so return early

    IMEMO objects don't have a class field to update, so we need to return
    early, otherwise it can cause a segv.

commit a20ed0565efd2f47845c890d1ebea341d43ee5e6
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-10-04 09:52:00 +0900

    Don't allocate objects in `gc_compact`

    I'd like to call `gc_compact` after major GC, but before the GC
    finishes.  This means we can't allocate any objects inside `gc_compact`.
    So in this commit I'm just pulling the compaction statistics allocation
    outside the `gc_compact` function so we can safely call it.

commit cbf88064f5bd433c13345bbc2ce509b4e8509c7a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-05 03:07:31 +0900

    * 2019-10-05 [ci skip]

commit cbbe198c89fa25a80ec0a5f0592ea00132eacd01
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-05 02:08:07 +0900

    Fix potential memory leaks by `rb_imemo_tmpbuf_auto_free_pointer`

    This function has been used wrongly always at first, "allocate a
    buffer then wrap it with tmpbuf".  This order can cause a memory
    leak, as tmpbuf creation also can raise a NoMemoryError exception.
    The right order is "create a tmpbuf then allocate&wrap a buffer".
    So the argument of this function is rather harmful than just
    useless.

    TODO:
    * Rename this function to more proper name, as it is not used
      "temporary" (function local) purpose.
    * Allocate and wrap at once safely, like `ALLOCV`.

commit c8a18e25c1cc9a44231b97e12f30a98cf9d979bb
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-04 21:30:32 +0900

    iseq.c (rb_iseq_compile_on_base): Removed

    ko1 cannot remember why he introduced the function.  And it is not used.

    After it is removed, the argument "base_block" of
    rb_iseq_compile_with_option is always zero.

commit 113bef697633803a33a547914b16ba5fbef165b8
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-04 16:07:46 +0900

    array.c (rb_mem_clear): remove "register" from arguments

    to suppress the following warning:

    ```
    compiling cxxanyargs.cpp
    In file included from cxxanyargs.cpp:1:
    In file included from ../../.././include/ruby/ruby.h:2150:
    ../../.././include/ruby/intern.h:56:19: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    void rb_mem_clear(register VALUE*, register long);
                      ^~~~~~~~~
    ../../.././include/ruby/intern.h:56:36: warning: 'register' storage class specifier is deprecated and incompatible with C++17 [-Wdeprecated-register]
    void rb_mem_clear(register VALUE*, register long);
                                       ^~~~~~~~~
    ```

commit 5be2af5f9052e7f799b2c576d78a373c57069771
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-10-04 10:15:24 +0900

    Remove call-seq for method that doesn't exist (#2521)

    ```
    $ ruby -ve 'IO.popen("ls"){}; $?.to_int'
    ruby 2.6.4p104 (2019-08-28 revision 67798) [x86_64-darwin18]
    Traceback (most recent call last):
    -e:1:in `<main>': undefined method `to_int' for #<Process::Status: pid 33989 SIGPIPE (signal 13)> (NoMethodError)
    Did you mean?  to_i
                   taint
    ```

    Process::Status#to_int was removed at 7ba5c4e.

commit 7db83b04d0e170a6b9ed56597a1327c68c04bfec
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-04 07:58:20 +0900

    Revert "Simplify bin_path_spec.rb guard"

    This reverts commit a56d742e69aa8a3a1fe92fc515d93f6e51cf5fbc.

    I was checking the CI result of the wrong revision. It actually worked
    fine https://ci.appveyor.com/project/ruby/ruby/builds/27866303. Never
    mind...

commit a56d742e69aa8a3a1fe92fc515d93f6e51cf5fbc
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-04 07:33:10 +0900

    Simplify bin_path_spec.rb guard

    For some reason the guard_not seems not working as expected
    https://ci.appveyor.com/project/ruby/ruby/builds/27866153/job/v6wa6q6p7b7n7r37

commit ac69a051cf00e3fda3cb7e8d7377558d84ef880f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-04 07:15:05 +0900

    Ignore arm32 failure for now

commit 182336ccb5a8d46fbcddbdad9e7bbca6d5d5d63f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-04 06:24:57 +0900

    bin_path_spec.rb has failed from the beginning

    for mswin. This spec is not valid for mswin platform.
    https://ci.appveyor.com/project/ruby/ruby/builds/27748774/job/85khngfpc806m5lj

commit 804672e7b452c4d0dcb653e14cb9900513bfa8de
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-10-04 06:17:36 +0900

    Try disabling build on trunk

commit 9f24e8fdbb6a579fe00f4449c79417a418d67a87
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-04 06:07:32 +0900

    Document *_kw functions added to include/ruby/ruby.h [ci skip]

    Also documents the non-*_kw functions if they were not already
    documented.

commit c7715a4936a298ff9bcce97e65dfd3dc6f32f906
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-04 05:14:45 +0900

    Add documentation regarding keyword argument separation [ci skip]

commit 12e27a411c394366b3c701153040d63390d314cc
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-04 05:14:08 +0900

    Minor updates to methods and calling_methods documentation [ci skip]

commit bdbf8de4980ef54f466809ee27a9f2a00614b0f0
  Author: Jun Aruga <junaruga@users.noreply.github.com>
  Date:   2019-10-04 06:12:58 +0900

    Enable Drone CI for ARM 64/32-bit cases. (#2520)

    https://bugs.ruby-lang.org/issues/16234

commit c3dd3b95538a641bbffb02993985ce0cbac1b9d6
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-04 02:35:10 +0900

    iseq.c (rb_iseq_compile_with_option): dummy parent_iseq for the parser

    The parsing of `RubyVM::InstructionSequence.compile` does not support an
    outer scope currently.  So it specified NULL as parent_iseq for the
    parser.  However, it resulted in the following false-positive warning.

    ```
    RubyVM::InstructionSequence.compile(<<END)
      o = Object.new
      o #=> <compiled>:2: warning: possibly useless use of a variable in void context
    END
    ```

    This change specifies a dummy empty parent_iseq instead of NULL, which
    suppresses the false positive.

commit b732a9f8a0f694d8668bb1d42e94435c47e05df3
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-04 02:33:39 +0900

    parse.y: use "struct rb_iseq_struct" instead of rb_iseq_t

    typedef was not declared in parse.y.  Sorry.

commit bb9604e18c73558709b49962bdcec59613dbf014
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-04 02:30:54 +0900

    * 2019-10-04 [ci skip]

commit b43afa0a8f82a5d806adc24afa2eaf41479da1a3
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-04 01:48:31 +0900

    Make parser_params have parent_iseq instead of base_block

    The parser needs to determine whether a local variable is defined or
    not in outer scope.  For the sake, "base_block" field has kept the outer
    block.

    However, the whole block was actually unneeded; the parser used only
    base_block->iseq.

    So, this change lets parser_params have the iseq directly, instead of
    the whole block.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2519

commit 711c40ebdcd0974ef3e6ac6870412dc88ae25f3e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-04 01:29:21 +0900

    Refactor parser_params by removing "in_main" flag

    The relation between parser_param#base_block and #in_main were very
    subtle.
    A main script (that is passed via a command line) was parsed under
    base_block = TOPLEVEL_BINDING and in_main = 1.
    A script loaded by Kernel#require was parsed under
    base_block = NULL and in_main = 0.
    If base_block is non-NULL and in_main == 0, it is parsed by Kernel#eval
    or family.

    However, we know that TOPLEVEL_BINDING has no local variables when a
    main script is parsed.  So, we don't have to parse a main script under
    base_block = TOPLEVEL_BINDING.

    Instead, this change parses a main script under base_block = 0.
    If base_block is non-NULL, it is parsed by Kernel#eval or family.
    By this simplication, "in_main" is no longer needed.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2519

commit 8f7fca784a46c4d4213ed7b166945f5b9143062d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-03 19:13:05 +0900

    make-snapshot: touch updated files after prepared

    Align mtime of files updated by `make prepare-package` to make
    packages reproducible.

commit 8142a9b43dfc3e141fd7cb3fc255fc102523f6df
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-03 19:12:03 +0900

    make-snapshot: suppress make error messages unless failed

commit 47d143be17819bed6dda08e24069d755ef34530b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-03 16:47:57 +0900

    make-snapshot: copy cache files instead of linking

    To get rid of setting mode and mtime of the original cache files.

commit b7ae26e2eec9efb826e4a2d913a67341531c6342
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-03 16:47:05 +0900

    vcs.rb: fix to export git-svn version

    * Use the given branch name instead of implicit 'HEAD".
    * Format like as git-svn when `from` or `to` is SVN revision
      number.

commit ad67adb5f942d463ab378fea21cc21cb15466cbc
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-03 14:47:18 +0900

    [ruby/fileutils] Use pend instead of skip

    https://github.com/ruby/fileutils/commit/ba2c24e2d7

commit c14755e9ca8f2cf8fea5b0232d846bd57193ea53
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-03 18:32:21 +0900

    [ruby/fileutils] improve the compatibility of minitest

    https://github.com/ruby/fileutils/commit/f16f5a0dd6

commit 3ffd98c5cd040a4081617b3bc6f9062237937b9b
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-01 16:45:14 +0900

    add debug counters for vm_search_method_slowpath()

    Implemented fine-grained inspection of cache misshits.  Handy for
    counting the reasons why an inline method cache was evicted.

commit 84fc1de5125a6f7c61609bf153f0359b3da55d8d
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-03 14:56:35 +0900

    use bind_call for test-all --gc-stress

    This one allocation of Method object is worth avoiding.  We don't
    want to test UnboundMethod#bind right here.  GC need not run.

commit 1c999952e74e9b5f1e882501580d5f2f5a92f142
  Author: Romain Tartire <romain@blogreen.org>
  Date:   2019-10-03 05:26:39 +0900

    Resolve unused local variable reported by LGTM

    LGTM reports that the value assigned to local variable 'shared' is never
    used:
    https://lgtm.com/projects/g/ruby/ruby/snapshot/f319a5d064627c6641817ec2ed16b97b4d215148/files/misc/lldb_cruby.py#x6512c0281581a470:1

    This problem was introduced in by the refactoring that took place in
    7c496b6624f720d539e3c0b40f122a9422a13b99.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2517

commit a515e3f99ea50358afbfc94a53d54a390096626d
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-03 12:48:30 +0900

    * 2019-10-03 [ci skip]

commit 7e060d50183712b7ab11f5887af6a3ce69df4a57
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-03 12:48:20 +0900

    * expand tabs. [ci skip]

    Tabs were expanded because previously the file did not have any tab indentation.
    Please update your editor config, and use misc/expand_tabs.rb in the pre-commit hook.

commit eb92159d72fc711387f7e17ffbaca1678f23fd47
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-10-03 12:26:41 +0900

    Revert https://github.com/ruby/ruby/pull/2486

    This reverts commits: 10d6a3aca7 8ba48c1b85 fba8627dc1 dd883de5ba
    6c6a25feca 167e6b48f1 7cb96d41a5 3207979278 595b3c4fdd 1521f7cf89
    c11c5e69ac cf33608203 3632a812c0 f56506be0d 86427a3219 .

    The reason for the revert is that we observe ABA problem around
    inline method cache.  When a cache misshits, we search for a
    method entry.  And if the entry is identical to what was cached
    before, we reuse the cache.  But the commits we are reverting here
    introduced situations where a method entry is freed, then the
    identical memory region is used for another method entry.  An
    inline method cache cannot detect that ABA.

    Here is a code that reproduce such situation:

    ```ruby
    require 'prime'

    class << Integer
      alias org_sqrt sqrt
      def sqrt(n)
        raise
      end

      GC.stress = true
      Prime.each(7*37){} rescue nil # <- Here we populate CC
      class << Object.new; end

      # These adjacent remove-then-alias maneuver
      # frees a method entry, then immediately
      # reuses it for another.
      remove_method :sqrt
      alias sqrt org_sqrt
    end

    Prime.each(7*37).to_a # <- SEGV
    ```

commit ef697388becedf36966a2edcdcf88baca342b9e2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-10-02 23:56:28 +0900

    Treat return in block in class/module as LocalJumpError (#2511)

    return directly in class/module is an error, so return in
    proc in class/module should also be an error.  I believe the
    previous behavior was an unintentional oversight during the
    addition of top-level return in 2.4.

  Notes:
    Merged-By: jeremyevans <code@jeremyevans.net>

commit 9759e3c9f09ec442b2aa0d0cc299ac791e516a01
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-02 17:16:04 +0900

    fix assertion number.

    On parallel test, there are additional tests because of implicit
    checkers which are enabled on 84cbce3d88.

commit 4ed51b39563df23ad9a9c1fa192ee213cb958991
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-10-02 15:00:17 +0900

    Fixed failure message for `clean-cache`

commit 84cbce3d880f0d6a51ccf3622b8d1e79132b9a0e
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-02 16:02:00 +0900

    Enable checkers on parallel test.

    parallel test (`make test-all TESTS=-j8`) runs tests on specified
    number of processes. However, some test checkers written in
    `runner.rb` are not loaded. This fix enable these checkers on
    parallel tests.

    See also: https://github.com/ruby/ruby/pull/2508

commit 99d3043bd8e7705cb5ec1772080667981bd07a36
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-10-02 16:05:40 +0900

    Iseq#to_binary: dump flag for **nil (#2508)

    RUBY_ISEQ_DUMP_DEBUG=to_binary and the attached test case was failing.
    Dump the flag to make sure `**nil` can round-trip properly.

commit 4946d83a1cbfe23369bdbc8057592b48c673d94b
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-02 13:00:56 +0900

    * 2019-10-02 [ci skip]

commit a61ae414b6f8310c9dff9a6f18b6064499167513
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-10-02 13:00:17 +0900

    Fix the order of executing `after-update` task

commit 5af2c8735a22e6b54acf4164b1f1f7bac98e7111
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-10-02 12:59:59 +0900

    Should fail if `system` failed

commit 15606963de0c818c549aef2352da45d749e4b0db
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-10-01 20:53:16 +0900

    expose assert_raise and assert_join_threads

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2516

commit 55de0282da1ae0a16c857fb4b160dea04579b36c
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-10-01 21:26:54 +0900

    Remove draft-release.yml [ci skip]

    I thought default branch's workflow runs on any tags,
    but it does not run for stable branches without draft-release.yml.
    So I abandoned, and use workflow in ruby/actions instead.

commit 3ce238b5f9795581eb84114dcfbdf4aa086bfecc
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-01 12:29:18 +0900

    WEBrick: prevent response splitting and header injection

    This is a follow up to d9d4a28f1cdd05a0e8dabb36d747d40bbcc30f16.
    The commit prevented CRLR, but did not address an isolated CR or an
    isolated LF.

    Co-Authored-By: NARUSE, Yui <naruse@airemix.jp>

commit 36e057e26ef2104bc2349799d6c52d22bb1c7d03
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 12:14:28 +0900

    Loop with String#scan without creating substrings

    Create the substrings necessary parts only, instead of cutting the
    rest of the buffer.  Also removed a useless, probable typo, regexp.

commit a0a2640b398cffd351f87d3f6243103add66575b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2018-12-12 14:38:09 +0900

    Fix for wrong fnmatch patttern

    * dir.c (file_s_fnmatch): ensure that pattern does not contain a
      NUL character.  https://hackerone.com/reports/449617

commit a38fe1fbf068d05177e6e6fac2b8ec7704873e63
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-10-01 08:57:50 +0900

    ext/-test-/enumerator_kw/enumerator_kw.c: remove unused variable

commit 01e75b6be9987bf9ce0793643470e47a32871c38
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-10-01 01:14:45 +0900

    * 2019-10-01 [ci skip]

commit 671ca21254a60d967570c8c973f5f2f17beb4931
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-10-01 01:14:19 +0900

    remove `unused var` warning

commit a8c436d9a1d333e9391c78d4ffd32568a56534a6
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-30 14:49:43 +0900

    Issue keyword flag warning even with no arguments

    If the keyword flag is set, there should be at least one argument,
    if there isn't, that is a sign the keyword flag was passed when it
    should not have been.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2509

commit 3073404e741df19ae16248126640777ed36110e8
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-30 13:33:59 +0900

    Add rb_enumeratorize_with_size_kw and related macros

    Currently, there is not a way to create a sized enumerator in C
    with a different set of arguments than provided by Ruby, and
    correctly handle keyword arguments.  This function allows that.

    The need for this is fairly uncommon, but it occurs at least in
    Enumerator.produce, which takes arguments from Ruby but calls
    rb_enumeratorize_with_size with a different set of arguments.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2509

commit 5ddc2ba13ed6964a0383894e3728dc1bc708c404
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-30 20:24:26 +0900

    test/ruby/test_io.rb: suppress a "method redefined" warning

    by explicitly removing the old definition.

commit fc66947c61fe20f6f584ab3b1f7a5f10982af87e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-30 20:22:29 +0900

    test/-ext-/string/test_fstring.rb: suppress "possibly useless use of -@"

    "in void context" by assigning the result to a dummy variable.

commit 945560008ffbb768df3a6e9f0814f2d117993a5e
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-09-30 17:59:10 +0900

    Revert "introduce debug check."

    This reverts commit c3b84f2de83a27acc638f99743bfa2c44bac621c.
    Backtrace shows it is before running tests and debug check was
    nonsense.

commit 10d6a3aca78771d0a7bfaecce982aac148152f35
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-30 17:43:11 +0900

    Fix assertion

    callable_method_entry_p is for rb_callable_method_entry_t.

commit 771fd915a453d1cbc809189a57520675f2fa3fd4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-30 17:39:38 +0900

    Use assert_operator instead of mere assert

commit 1722c156dd45618cea712f017ca744d6f3b55be8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-30 17:35:29 +0900

    Now `use_symbol` is always true

commit c3b84f2de83a27acc638f99743bfa2c44bac621c
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-09-30 17:23:36 +0900

    introduce debug check.

    There are random failures:

    > lib/rubygems/core_ext/kernel_require.rb:61:in `require':
    > wrong number of arguments (given 1, expected 0) (ArgumentError)
    http://ci.rvm.jp/results/trunk-jemalloc@silicon-docker/2275159

    To check this failure, I added a small check code.

commit 88f38c187e3171f8f351f3198247d20ea9f016ee
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-09-30 15:36:19 +0900

    Emulate method_list (chkbuild) on test-all.

    chkbuild (CI process) shows methods list before
    running tests and sometimes it can fails. This
    commit a code part to emulate this method listing
    feature.

commit bf8d7d9c1d89a62537566ea6dd43db175a892dbd
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-09-30 15:35:22 +0900

    show RUBY_ISEQ_DUMP_DEBUG envval if given.

commit 8ba48c1b8509bc52c2fc1f020990c8a3a8eca2c9
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-09-30 14:27:02 +0900

    rb_method_attr_t::location should be 0 or others.

    method_def_location() expects that rb_method_attr_t::location
    is 0 (Qfalse) or not.

commit 649a64ae29318501472f74798a12eb60871ab990
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-30 09:47:17 +0900

    Add three more C-API functions for handling keywords

    This adds rb_funcall_passing_block_kw, rb_funcallv_public_kw,
    and rb_yield_splat_kw.  This functions are necessary to easily
    handle cases where rb_funcall_passing_block, rb_funcallv_public,
    and rb_yield_splat are currently used and a keyword argument
    separation warning is raised.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2507

commit fba8627dc1c5b191713edeb5fc21cbe0ddde9e3c
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-26 13:44:51 +0900

    delete unnecessary branch

    At last, not only myself but also your compiler are fully confident
    that the method entries pointed from call caches are immutable.  We
    don't have to worry about silent updates.  Just delete the branch
    that is now always false.

    Calculating -------------------------------------
                               ours       trunk
    vm2_poly_same_method     2.142M      2.070M i/s -      6.000M times in 2.801148s 2.898994s

    Comparison:
                 vm2_poly_same_method
                    ours:   2141979.2 i/s
                   trunk:   2069683.8 i/s - 1.03x  slower

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit dd883de5ba311c38818d0f638a94b4fbc63f5ee5
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-26 10:22:01 +0900

    refactor constify most of rb_method_entry_t

    Now that we have eliminated most destructive operations over the
    rb_method_entry_t / rb_callable_method_entry_t, let's make them
    mostly immutabe and mark them const.

    One exception is rb_export_method(), which destructively modifies
    visibilities of method entries.  I have left that operation as is
    because I suspect that destructiveness is the nature of that
    function.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit 6c6a25feca8752205d81c5247f85d8ae8fb880d8
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-25 17:00:25 +0900

    refactor add rb_method_entry_from_template

    Tired of rb_method_entry_create(..., rb_method_definition_create(
    ..., &(rb_method_foo_t) {...})) maneuver.  Provide a function that
    does the thing to reduce copy&paste.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit 167e6b48f1b321d671998728adf5a0db06d24445
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-25 15:52:02 +0900

    refactor reduce METHOD_ENTRY_FLAGS_COPY

    Make things more immutable.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit 7cb96d41a52d5ce4b2485ff542edc88fa246bc1a
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-25 13:51:06 +0900

    refactor delete rb_method_entry_copy

    The deleted function was to destructively overwrite existing method
    entries, which is now considered to be a bad idea.  Delete it, and
    assign a newly created method entry instead.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit 3207979278bea11c50cb84f4044047b9c503230b
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-24 15:41:52 +0900

    refactor delete rb_method_definition_set

    Instead of destructively write fields of method entries, create a
    new entry and let it overwrite its owner.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit 595b3c4fddc5cde58add2fa2637acb2664694194
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-23 17:42:27 +0900

    refactor rb_method_definition_create take opts

    Before this changeset rb_method_definition_create only allocated a
    memory region and we had to destructively initialize it later.
    That is not a good design so we change the API to return a complete
    struct instead.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit 1521f7cf89fe3cf356a589c45bce4ccb57dce7fd
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-20 17:16:44 +0900

    refactor delete vm_cref_dump

    No longer used.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit c11c5e69ac66ae10255a20a6b84e481f0423703d
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-20 17:01:53 +0900

    refactor split rb_method_definition_set

    Did you know that C functions can return structs?  That has been
    true since the beginning, but not that very useful until C99.  Now
    that we can write compound literals, this feature is much easier
    to use.  By allowing struct-returning functions, some formerly big
    functions can be split into smaller ones, like this changeset.

    At least GCC is smart enough to inline the split functions back
    into one.  No performance penalty is observed.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit cf336082039ae84b5001908f6bb7e04bdda8893e
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-20 14:12:51 +0900

    refactor constify most of rb_method_definition_t

    Most (if not all) of the fields of rb_method_definition_t are never
    meant to be modified once after they are stored.  Marking them const
    makes it possible for compilers to warn on unintended modifications.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit 3632a812c0b1e0bd1c75b2426cbfe9ec1715bb56
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-25 13:00:56 +0900

    refactor add rb_id_table_foreach_with_replace_with_key

    This is a pure refactoring to reduce copy & paste.  Also the new
    function is made visible from other parts of the interpreter, to
    be used later.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit f56506be0dc7f1a9cb35d8371b04720bef50fd9b
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-25 13:11:28 +0900

    refactor delete ID_TABLE_ITERATOR_RESULT_END

    Not used from anywhere.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit 86427a321997b733bf8ebb6036157c341a52edfc
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-26 10:26:40 +0900

    refactor delete METHOD_ENTRY_COMPLEMENTED flag

    Because rb_method_definition_t tracks its own complemented_count,
    we no longer have to check it in rb_method_entry_t side.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2486

commit 6fdd701472af5355562cb2394167b26a4c3a2a97
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-30 08:41:00 +0900

    Remove VM_NO_KEYWORDS, replace with RB_NO_KEYWORDS

    VM_NO_KEYWORDS was introduced first in vm_core.h, but it is best
    to only use a single definition for this.

commit 58dfea0c8de29cbad35621847c04372b779c5f5d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-30 05:15:04 +0900

    Make direct calls to rb_{obj_instance,mod_module}_{eval,exec} not pass keywords

    In general RB_PASS_CALLED_KEYWORDS should only be set if we are
    sure the arguments passed come directly from Ruby.  For direct calls
    to these C functions, we should not assume that keywords are passed.
    Add static *_internal versions of these functions that
    Kernel#instance_{eval,exec} and Module#{class,module}_{eval,exec}
    call that set RB_PASS_CALLED_KEYWORDS.

    Also, change struct.c back to calling rb_mod_module_eval, now that
    the call is safe.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2505

commit 59060aadea28d3a6cd0ebbcc17c10a3628e6e867
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-30 06:43:15 +0900

    Run test-unit tests in CI

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2506

commit 2740b869051f773147bd1e26d7b489eab9037c04
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-30 06:42:51 +0900

    Update to latest test-unit

    * See https://github.com/test-unit/test-unit/issues/165

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2506

commit 54d49aeb52fd1a8699004eb5065779cd8c6eb3a9
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-30 02:56:15 +0900

    Update to ruby/spec@2699ea4

commit 869e4f6e4c683bf8e76ae7db54a26b33fb925410
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-30 01:15:43 +0900

    Fix or suppress keyword argument separation warnings in util_spec

    Some warnings are because the @o.rb_scan_args call doesn't
    include keyword arguments, but the first argument is passed to
    rb_scan_args may have a last hash treated as keywords.  Those
    should be handled using rb_scan_args_kw on Ruby 2.7.

    Other warnings are for the deprecated rb_scan_args behavior to
    split option hashes or treat a nil argument as an option hash.
    Those warnings should just be suppressed.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2504

commit 070cbe22b70ec2bec36c7cfc84b726510afa306f
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-30 02:13:37 +0900

    Update to ruby/spec@34e6246

commit d51b4e34fbdbe1a845aa2251b1fa3304de809b32
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-30 02:13:35 +0900

    Update to ruby/mspec@5dda9fb

commit 2d41c712a73a1b5d85dd8d5bf9134ed1be0e94eb
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-30 01:34:12 +0900

    Skip default gemspecs spec if the default_specifications_dir cannot be found

commit 59648af296ab15a2e34ebce62a7cc14deb889e7b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-30 01:08:32 +0900

    Suppress keyword argument warning from #step

    * numeric.c (num_step): pass the extracted argument from keyword
      argument, not the last argument itself which should have been
      warned already.

commit f39314a98ac6e762e8f5d72d80923038b0b5f01a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-30 01:02:54 +0900

    * 2019-09-30 [ci skip]

commit a17bc04d159ec9839cc8cfb02dc0cdd2802110f4
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-30 01:01:32 +0900

    Update to ruby/spec@e69a14c

commit f9a9f3c7c6cf3fe534d4934dd3b502d721151b81
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-30 01:01:30 +0900

    Update to ruby/mspec@8cabcef

commit 1c938a72aa9378f982dbc55327e86150c47b8707
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-29 23:03:58 +0900

    Update to ruby/spec@519df35

commit 31bb66a19df26409c9d47afcf37919c9a065516a
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-29 23:03:47 +0900

    Update to ruby/mspec@8106083

commit a27dc83113afa9831dcdf919138666b09a73ccf6
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-29 19:38:21 +0900

    Pass $(XRUBY) to test-bundled-gems.rb since RbConfig.ruby is incorrect for miniruby

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2503

commit 4096e4b08c46dddb8edc9dabf70e737946ac6df8
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-29 19:16:10 +0900

    Move the logic to test bundled gems to Ruby code

    * Writing shell scripts in a Makefile is very error-prone.
    * TEST_BUNDLED_GEMS_ALLOW_FAILURES seemed to not work before.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2503

commit d090e449ef4e92b2020e51fe495cd039e4f6fdda
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-29 19:18:49 +0900

    Exclude the test-unit bundled gem tests since they also fail since the Time#inspect change

    * See https://github.com/test-unit/test-unit/issues/165

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2503

commit e3b11566bfbb6ddcdd9f3483a6bdeb501a610fa9
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-28 18:45:23 +0900

    Remove continue-on-error for test-bundled-gems

    * Otherwise, it takes a very long time to notice those tests broke.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2503

commit f6f03dcad60d38868d345172ad5c5d2ce44bd004
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-29 18:07:51 +0900

    [ruby/stringio] Bump up the version

    https://github.com/ruby/stringio/commit/f0e5027279

commit 7fe253f47f55f69069fc0e03879a3a2b55aee408
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-29 18:06:02 +0900

    [ruby/stringio] Use rb_funcallv_kw when delegating arguments

    https://github.com/ruby/stringio/commit/5892663e32

commit 68ab4a5e35d30a8f1c4620dfa8f5132f4996f2fc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-29 18:02:00 +0900

    [ruby/stringio] Replaced rb_funcall2 with rb_funcallv

    https://github.com/ruby/stringio/commit/a37ab7c419

commit ef795f9abdb1db1bfa061dbc97d294db4f87756f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-29 18:13:41 +0900

    [ruby/stringio] Dropped older ruby versions

    https://github.com/ruby/stringio/commit/e8065153b8

commit 7f30783af73bb484912365c28da4e7292f1d8211
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-29 18:13:00 +0900

    [ruby/stringio] Get rid of String#undump for ruby 2.4 or earlier

    https://github.com/ruby/stringio/commit/4dfd997e0a

commit 94db8cda9b4eeee4736d089570a343fdf5ef86c0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-29 18:52:31 +0900

    [ruby/zlib] Fix for older ruby 2.6 or earlier

    https://github.com/ruby/zlib/commit/00ead8cb2c

commit f10c9cb1f2dfca024937bc48137168124d8511aa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-29 18:21:17 +0900

    [ruby/zlib] Search zlib.c as a gem

    https://github.com/ruby/zlib/commit/8f43b264cd

commit ce477089f690d3bedcaef088158b429db8a97d64
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-29 18:04:28 +0900

    [DOC] Fix typos in Array#{to_s,inspect} doc [ci skip]

commit e2d97cffe5aecc88f3fc4dc7be9a7b3a57bede87
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-29 17:28:58 +0900

    [DOC] stated that Array#to_s calls #inspect [ci skip]

    [ruby-list:50826]

commit 289cad501d7a5219568450333d440364674441b0
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-29 13:17:05 +0900

    * 2019-09-29 [ci skip]

commit 6e1b72ae4afca7c7726e3f03171b597c2d0f12b0
  Author: Yuki Nishijima <yk.nishijima@gmail.com>
  Date:   2019-09-29 13:15:09 +0900

    Upgrade to the latest did_you_mean 1.3.1

commit 550a6a6bc1be4ff9aa6b65f6ad9b45c3fa2d1344
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-28 13:51:27 +0900

    NEWS: marked up `**nil` [ci skip]

commit d474243e8c635a011ce2789660cb71b3f6815317
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-28 13:49:49 +0900

    NEWS: Added module name to proc and lambda [ci skip]

    RDoc cannot know if bare words are method name or not.

commit d53cf854741bbf496298c5a722988d2dd84314a1
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-28 00:07:49 +0900

    Fix warning when doing Struct.new(:x, keyword_init: true){}

    This is due to calling rb_mod_module_eval directly instead of using
    rb_funcall_passing_block.

    The problem with calling directly is it does not create a new VM
    frame, so rb_mod_module_eval was called with no arguments, but with
    the keyword given VM frame flag set, which causes problems
    internally.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2500

commit 7814b6c6572446a6b64614e524d13dd423577004
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-28 01:35:51 +0900

    Correctly issue ArgumentError when calling method that accepts no keywords

    If a method accepts no keywords and was called with a keyword, an
    ArgumentError was not always issued previously.  Force methods that
    accept no keywords to go through setup_parameters_complex so that
    an ArgumentError is raised if keywords are provided.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2501

commit fd0e2141835a0ef98b31d0a6b23924413f8452d3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-28 01:43:31 +0900

    Update NEWS section on keyword argument separation [ci skip]

    This may be too verbose, if so, maybe it should be moved lower in
    the document, or to a separate document.

commit 707c48859e30760712a6a57d1f3df5e8a9d4ea33
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-28 01:24:51 +0900

    * 2019-09-28 [ci skip]

commit a1fda16b238f24cf55814ecc18f716cbfff8dd91
  Author: Dylan Thacker-Smith <dylan.smith@shopify.com>
  Date:   2019-09-28 01:24:25 +0900

    Optimize Array#flatten and flatten! for already flattened arrays (#2495)

    * Optimize Array#flatten and flatten! for already flattened arrays
    * Add benchmark for Array#flatten and Array#flatten!

    [Bug #16119]

commit 869e2dd8c8efc1e7a043c9eee82d97c47befbcc7
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-27 05:20:22 +0900

    Warn for URI.{,un}{escape,encode}, even if not in verbose mode

    The verbose mode warning has been present for almost 10 years.
    If we ever plan to remove these methods, we should make the warning
    a regular deprecation warning so that people are aware.

    Implements [Feature #15961]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2494

commit a2c26fe1c6d49b54494b7c6301cc4c77596eec0c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-21 06:47:15 +0900

    Fix fallback in URI.encode_www_form_component to include #

    Patch from Matthew Kerwin.

    Fixes [Bug #14358]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2494

commit 43a16c98df392e726040f0331a3e09d00c53d513
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-21 05:19:48 +0900

    Do not escape + in Shellwords.escape

    + is not a character that requires escaping in Bourne sh.

    Fixes [Bug #14429]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2494

commit 2b6a9f3a1ffcdb00bf89798979d475c6d189d419
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-21 04:59:29 +0900

    Ignore Errno::EPIPE when sending requests in net/http

    An EPIPE when sending the request should be ignored.  Even if you
    cannot write more data, you may still be able to read the server's
    response.

    Fixes [Bug #14466]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2494

commit 80d0b6f132e6475c0b9c78ff857e7bb81c93df0d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 21:54:26 +0900

    Updated bundled_gems

commit 79d5332a2da0e2743a77480aebfca256a54a962e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 21:12:27 +0900

    Drop eliminated catch-entries

    Drop catch table entries used in eliminated block, as well as
    call_infos.  [Bug #16184]

commit 03284fb91151bff5e12f1b7d5cdb0589f1ee43fb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 21:07:53 +0900

    assert_in_out_err should use FailDesc too

commit 8d0ff887274fdc73415035d652551d1fa0768c7b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 14:06:07 +0900

    Adjusted spaces [ci skip]

commit 4d3502d57f53d5cd54452d9b19475944055989f4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 14:01:37 +0900

    More tests for [Feature #16150]

commit eff15a269fdc37d2b09cf1dfe8c1b1bf6e377a32
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-09-27 00:27:47 +0900

    [EXPERIMENTAL] Make NilClass#to_s, TrueClass#to_s and FalseClass#to_s return a frozen String

        * Always the same frozen String for each of these values.
        * Avoids extra allocations whenever calling these 3 methods.
        * See [Feature #16150]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2492

commit 2082a26dc75da7cb76150b51cd5b8f7636ad0fa2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-26 18:32:26 +0900

    [ruby/fileutils] Bump version to 1.3.0.

    https://github.com/ruby/fileutils/commit/ba3bd6fdfd

commit 49b7805e9acd181838c17d5aa9e14244a4cce365
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 21:05:53 +0900

    [ruby/fileutils] Use Gemfile instead of Gem::Specification#add_development_dependency.

    https://github.com/ruby/fileutils/commit/17a9de6d9b

commit d5355123ccf41c05766b1d58b75419bece61b8ea
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-24 21:19:31 +0900

    [ruby/fileutils] Reduce global variables

    https://github.com/ruby/fileutils/commit/ba81f024cf

commit 06c35cfa65ed5e023bb8b82af93a3d711e550913
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-24 06:52:12 +0900

    [ruby/fileutils] Fix cp_r with symlink root on Windows

    Previously this would copy the symlink root as a symlink instead
    of creating a new root directory.  This modifies the source
    to expand it using File.realpath before starting the copy.

    Fixes Ruby Bug 12123

    https://github.com/ruby/fileutils/commit/7359cef359

commit 9792c9d183ccc0e80230858c910c74cfef5ddc32
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-24 06:50:34 +0900

    [ruby/fileutils] Fix test_cp_r_dev on Windows or other systems without character/block device in /dev

    Previously this would give an error such as:

    TestFileUtils#test_cp_r_dev [c:/fileutils/test/fileutils/test_fileutils.rb:455]:
    [RuntimeError] exception expected, not.
    Class: <TypeError>
    Message: <"no implicit conversion of nil into String">

    https://github.com/ruby/fileutils/commit/0ce0fefbeb

commit 9494ef8b2de3a7224eb85800606e7c046964cbd2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-01 04:57:21 +0900

    [ruby/fileutils] Do not break in verbose mode if using FileUtils with a frozen object

    If FileUtils is included into another object, and verbose mode is
    used, a FrozenError is currently raised unless the object has the
    @fileutils_output and @fileutils_label instance variables.

    This fixes things so that it does not attempt to set the instance
    variables, but it still uses them if they are present.

    https://github.com/ruby/fileutils/commit/689cb9c56a

commit 02cd42050515b3af67396a25e78d948adcac6cdf
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-15 02:17:57 +0900

    [ruby/fileutils] Skip test_cp_r_socket on JRuby

    https://github.com/ruby/fileutils/commit/20bb9ec789

commit 1d99163aa59b637f1c14287135f26480df447e49
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-10 12:41:51 +0900

    [ruby/fileutils] Make copy methods handle FIFOs and UNIX sockets

    Previously, this was broken.  Trying to copy a FIFO would raise a
    NoMethodError if File.mkfifo was defined.  Trying to copy a UNIX
    socket would raise a RuntimeError as File.mknod is not something
    Ruby defines.

    Handle the FIFO issue using File.mkfifo instead of mkfifo.

    Handle the UNIX Socket issue by creating a unix socket.

    Continue to not support character or block devices, raising a
    RuntimeError for both.

    Add tests for FIFO, UNIX Socket, and character/block devices.

    https://github.com/ruby/fileutils/commit/123903532d

commit 366dd9d80308e6526502ef636b63893b3fb41af2
  Author: zverok <zverok.offline@gmail.com>
  Date:   2019-03-10 20:09:59 +0900

    [ruby/fileutils] Update the documentation content and formatting

    https://github.com/ruby/fileutils/commit/b701353c53

commit 660c7e050f6cb050fd5618f812129c211af29810
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-27 09:25:54 +0900

    Fix more keyword separation issues

    This fixes instance_exec and similar methods. It also fixes
    Enumerator::Yielder#yield, rb_yield_block, and a couple of cases
    with Proc#{<<,>>}.

    This support requires the addition of rb_yield_values_kw, similar to
    rb_yield_values2, for passing the keyword flag.

    Unlike earlier attempts at this, this does not modify the rb_block_call_func
    type or add a separate function type.  The functions of type
    rb_block_call_func are called by Ruby with a separate VM frame, and we can
    get the keyword flag information from the VM frame flags, so it doesn't need
    to be passed as a function argument.

    These changes require the following VM functions accept a keyword flag:

    * vm_yield_with_cref
    * vm_yield
    * vm_yield_with_block

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2493

commit 0c6f36668a11902903d85ada61a812d297d02de5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 10:20:56 +0900

    Adjusted spaces [ci skip]

commit 293c6c8cc3cd9a9cb2910672589ee3631e1f1653
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-10 07:46:07 +0900

    Add compaction support to `rb_ast_t`

    This commit adds compaction support to `rb_ast_t`.

commit 37f9213f8957e0c6dffee7d8803890907f97bdbb
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-27 01:10:42 +0900

    Fix keyword argument separation issues in Enumerator::Generator#each

    This requires adding rb_proc_call_kw to pass the keyword flag.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2491

commit dd2068ac8d4016f43c1f3cc1aa81decb504db5b6
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-27 01:09:30 +0900

    Add rb_adjust_argv_kw_splat to internal.h

    We are calling this in a few other files, it is better to have it
    in a header than adding prototypes to the other files.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2491

commit 31339ef4f2af9c7dad2a81eaa9470ee4574181a0
  Author: George Claghorn <george@basecamp.com>
  Date:   2019-09-12 04:47:20 +0900

    Honor Syslog::Logger#level overrides

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2453

commit f5e8d33761aa2c0d8bec18ba21aeef4bb6940640
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-27 06:57:45 +0900

    Fix clang errors when pedantic errors enabled

    I've been compiling with:

    ```
      set -lx cflags '-std=c99 -Werror=pedantic -pedantic-errors'
    ```

    But compilation would fail with the following:

    ```
    cont.c:296:90: error: format specifies type 'void *' but the argument has type 'struct fiber_pool_stack *' [-Werror,-Wformat-pedantic]
        if (DEBUG) fprintf(stderr, "fiber_pool_stack_alloca(%p): %"PRIuSIZE"/%"PRIuSIZE"\n", stack, offset, stack->available);
                                                            ~~                               ^~~~~
    cont.c:467:24: error: format specifies type 'void *' but the argument has type 'struct fiber_pool *' [-Werror,-Wformat-pedantic]
                    count, fiber_pool, fiber_pool->used, fiber_pool->count, size, fiber_pool->vm_stack_size);
                           ^~~~~~~~~~
    cont.c:588:83: error: format specifies type 'void *' but the argument has type 'struct fiber_pool_vacancy *' [-Werror,-Wformat-pedantic]
        if (DEBUG) fprintf(stderr, "fiber_pool_stack_acquire: %p used=%"PRIuSIZE"\n", fiber_pool->vacancies, fiber_pool->used);
                                                              ~~                      ^~~~~~~~~~~~~~~~~~~~~
    cont.c:736:76: error: format specifies type 'void *' but the argument has type 'rb_fiber_t *' (aka 'struct rb_fiber_struct *')
          [-Werror,-Wformat-pedantic]
        if (DEBUG) fprintf(stderr, "fiber_stack_release: %p, stack.base=%p\n", fiber, fiber->stack.base);
    ```

    This commit just fixes the pedantic errors

commit 4808afb360c58e26669fec5a60a55088e16fdb4a
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-27 05:19:11 +0900

    Replace `freeze_string` with `rb_fstring`

commit 0846d48853d460de50dda477d8c75024ba96679b
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-27 05:16:33 +0900

    Remove `iseq_add_mark_object_compile_time`

    This function is just a synonym for RB_OBJ_WRITTEN, so we can just
    directly call that.

commit 9b6460caccc125be6ba9f2dace9eaafbbe5bc438
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-26 06:57:25 +0900

    Remove mark array

    We don't use this array anymore so we can remove it

commit e197d9ca71570c980274ddd2cb6a32af6c00d95e
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-26 06:08:11 +0900

    Execute write barrier instead of adding to array

    We can mark everything via the instruction objects, so just execute the
    write barrier instead of appending to the array

commit 98d7583bfcf1442c01ebe0288726cacef138d349
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-26 05:59:54 +0900

    Pull `iseq_add_mark_object_compile_time` out of `freeze_string`

    `freeze_string` essentially called iseq_add_mark_object_compile_time.  I
    need to know where all writes occur on the `rb_iseq_t`, so this commit
    separates the function calls so we can add write barriers in the right
    place.

commit f639e046992d8d757b9745bfc02918f2acb8b23c
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-24 04:10:33 +0900

    Pull "mark object" up

    Move the "add mark object" function to the location where we should be
    calling RB_OBJ_WRITTEN.  I'm going to add verification code next so we
    can make sure the objects we're adding to the array are also reachable
    from the mark function.

commit 50fadefb7ed275148b2266712b923b8cca1ed785
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-17 09:19:44 +0900

    Scan the ISEQ arena for markables and mark them

    This commit scans the ISEQ arena for objects that can be marked and
    marks them.  This should make the mark array unnecessary.

commit a618d6408653b7f2459acb5af6205c42ad3aad87
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-17 08:09:46 +0900

    Allocate `INSN *` out of a separate arena

commit 3cd8f76f7f1bc09f9dd6b65eaafe2fd3a990ac60
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-13 07:21:18 +0900

    Introduce a secondary arena

    We'll scan the secondary arena during GC mark. So, we should only
    allocate "markable" instruction linked list nodes out of the secondary
    arena.

commit bd017c633da4fe27c85b5dfc059b85d44a3b7afe
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-13 07:15:43 +0900

    Extract allocation and free functions

    Now we can allocate and free a secondary arena.

commit 451776f13d24b0121b2bdfbe4eaafe7c74069c72
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-13 07:02:23 +0900

    Pass in arena to allocator

    This is so we can configure a new arena later

commit dd1e047fcb2a6429dd960b38a9ce03f86bb828fa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 02:31:39 +0900

    NEWS: fixed markups and indent [ci skip]

    C API updates:

    * adjusted indent.
    * marked up ANYARGS as RDoc.

commit 81191afe8a9b40e6dd6cc8e0d1a9899938840073
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 01:13:10 +0900

    Kernel#open may be redefined

commit 617fa3049a151d773bb26151ae774a8f6a60bc2a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 00:48:48 +0900

    NEWS: fixed markups and formatting [ci skip]

    * got rid of inadvertent label lists.
    * marked up resolve_feature_path method names.
    * fixed indentation of UnboundMethod#bind_call and marked up as
      RDoc.

commit 876c5fe1b2ba38fd893a81f91769b11f78cf4e92
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-27 00:37:54 +0900

    Check the argument size

    Ensure that argument array size does not overflow as `int`, before
    cast in thread_do_start after new thread created.

commit 3b9cdc59ce7c992f1906638be6acf2a9eeb6d58b
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-27 00:02:18 +0900

    * 2019-09-27 [ci skip]

commit 955634283862d9d1966de43c73ece15714afdae2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-26 09:59:41 +0900

    Fix shorten-64-to-32 compile warnings/errors

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2484

commit b193041b992e5ce0ae1a07735fbdc53a739b5434
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-26 09:57:00 +0900

    Fix keyword argument separation issues in Fiber#resume

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2484

commit 6b52959ef76f6f19e50c6f80f00c08bb0daf5c7c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-26 09:14:17 +0900

    Fix keyword argument separation issues in Thread.new

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2484

commit 47d44510a3f5c6cfca69b3fc05d7f5f35b1b2784
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-26 07:32:35 +0900

    Fix more keyword argument separation issues in Pathname

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2484

commit 3959469f240edb6c1f43976bbb72a0ba9105a6b1
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-26 07:03:09 +0900

    Fix keyword argument separation issues in OpenSSL::SSL::SSLSocket#sys{read,write}_nonblock

    It's unlikely anyone would actually hit these.  The methods are
    private, you only hit this code path if calling these methods
    before performing the SSL connection, and there is already a
    verbose warning issued.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2484

commit 760893d2f85682a3c8c00be4b29dea0f6b2bb4f8
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-26 03:22:14 +0900

    Fix keyword argument separation issues in Proc#{<<,>>}

    This requires adding rb_proc_call_with_block_kw.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2484

commit 0aa267f985084e69c3e45cc3e94698eaacab5c36
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-26 03:02:40 +0900

    Fix keyword argument sepration issues when IO#open calls #to_open

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2484

commit 5b9d646944fe3a2f92682be906b0e9c7beae323c
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-09-26 20:41:41 +0900

    Fix Module#name news and add a test

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2488

commit b29c68e6876976b22f64318bf390f05447e4ca01
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-26 22:57:25 +0900

    Restore ENV, rubygems always sets SOURCE_DATE_EPOCH now

commit c4ec817a7a6bc104dc1caf9018bc97a2dbfd324e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-26 22:56:32 +0900

    Gem::Specification#to_ruby needs OpenSSL

commit 41e3c204fd83660a243fa61f91aeda2a78817a97
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-26 22:13:24 +0900

    Reduce ISeq size of mjit_exec benchmark

    to avoid unwanted memory pressure

commit 1070456bb8ddf48be7b601daa024fe372c3c25c1
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-26 20:25:42 +0900

    * remove trailing spaces. [ci skip]

commit 9d0866c7d7b9cbe36a851744a37806e747e0e7a8
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-09-26 17:41:43 +0900

    [EXPERIMENTAL] Make Module#name return a frozen String

        * Always the same frozen String for a given Module or Class.
        * Avoids extra allocations whenever calling Module#name.
        * See [Feature #16150]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2487

commit c8f71686533cf068ad2f7a2e9fbb95a5c9f44642
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-26 19:22:30 +0900

    Revert the accidentally commits related GitHub Actions

commit 2a490d5660ac869f8f2bbcec4887b1dc2950643f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-26 18:24:20 +0900

    Suppress assert_match warnings.

commit d4a86e407ec2057c2c7ad757aa76dad757f34c3a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-26 18:07:17 +0900

    Assert warnings message for the last argument is keyword parameter.

commit a2af47301834ede4892dbbe1b7da28317202657e
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-09-12 16:44:22 +0900

    [rubygems/rubygems] Make sure our modifications to kernel.warn work

    And test the fix we're adding.

    https://github.com/rubygems/rubygems/commit/6f86637b98

commit 54839f01736a8827be64c7f1720d226d37fa17d3
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-09-12 17:19:11 +0900

    [rubygems/rubygems] Fix jruby build

    https://github.com/rubygems/rubygems/commit/cc255b774a

commit 966915d807f4d9ce8b9efaf5fedcceada05528c0
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-26 14:06:37 +0900

    [rubygems/rubygems] indent

    https://github.com/rubygems/rubygems/commit/8cdb2fd66f

commit 1eb503373e808b9cd2e1dbff5ec72d151a74d981
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-25 21:34:55 +0900

    [rubygems/rubygems] filter dependency type and name strictly.

    Co-authored-by: Yusuke Endoh <mame@ruby-lang.org>

    https://github.com/rubygems/rubygems/commit/92892bbc3a

commit 0b65a7a19e949eece72a6a961a2642c0e5e19eb0
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-09-26 10:31:57 +0900

    [rubygems/rubygems] Fix test_gem_attr

    https://github.com/rubygems/rubygems/commit/7c5b66f9ef

commit 4f87a1583dce25749c0492146ef78fcb0319ccd2
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-09-25 00:35:00 +0900

    [rubygems/rubygems] Introduce default prerelease requirement

    https://github.com/rubygems/rubygems/commit/506c5bce49

commit 6134fd7a646842ca67081cd07a182642307138bd
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-09-25 00:27:27 +0900

    [rubygems/rubygems] Remove comment not adding much

    https://github.com/rubygems/rubygems/commit/b3b5c2d379

commit 73633683c5a880af0207a55c6f3ea42c13cb5de1
  Author: f <f@sutty.nl>
  Date:   2019-09-21 00:54:48 +0900

    [rubygems/rubygems] add tests

    https://github.com/rubygems/rubygems/commit/8a7e27381c

commit 1fb44d2b8c324afdb969c37df48b0ff5856fa65f
  Author: f <f@sutty.nl>
  Date:   2019-09-20 22:38:10 +0900

    [rubygems/rubygems] Detect libc version, closes #2918

    https://github.com/rubygems/rubygems/commit/1d18b12a26

commit ea5b1361557690569a33204c122a08f2faefdf91
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-09-10 18:07:03 +0900

    [rubygems/rubygems] Fix underscore version for bundler itself

    Previously it wouldn't play nice with the bundler version finder.

    https://github.com/rubygems/rubygems/commit/d8bb81556d

commit ad638a713a953f62ff598fd820b44a3318f4241e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-17 18:06:50 +0900

    [rubygems/rubygems] Added jruby to matrix

    https://github.com/rubygems/rubygems/commit/0832c079c8

commit 769a28d7dc913740d864e7478bbc7f9b3a188a5b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-15 14:32:30 +0900

    [rubygems/rubygems] Removed 2.2

    https://github.com/rubygems/rubygems/commit/7fd2460f76

commit ba8fb735cb3151ce48e388878da0565119222e95
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-15 14:13:00 +0900

    [rubygems/rubygems] Added rvm workflow for Ruby 2.2 and 2.7

    https://github.com/rubygems/rubygems/commit/d4ba75dfd2

commit 01c90f17d974c002c054ff2d82ec3982b665b01a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-15 11:37:30 +0900

    [rubygems/rubygems] Removed the needless configurations

    https://github.com/rubygems/rubygems/commit/7134c49179

commit f5248f6f504701960a2bbb7a51117060f7d66613
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-09 16:20:50 +0900

    [rubygems/rubygems] Added the initial workflow file.

    https://github.com/rubygems/rubygems/commit/6405a1e51a

commit 5c872b297c11394cc436885400c295f7dccff039
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-22 10:37:09 +0900

    [rubygems/rubygems] Avoid adding OpenSSL::PKey::RSA instances

    https://github.com/rubygems/rubygems/commit/ba021fb4be

commit d1c97ceb86bb39d411d88563e17daebe0a764d00
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-22 10:30:37 +0900

    [rubygems/rubygems] Update expectation in test_to_ruby_with_rsa_key

    https://github.com/rubygems/rubygems/commit/2e65f7d4ae

commit 2e9c078707b8c87511c9fe45b7057086e214f6fb
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-05-30 11:23:59 +0900

    [rubygems/rubygems] Fix indentation in case statement

    https://github.com/rubygems/rubygems/commit/8ac0647659

commit 8f2379b0c5e182eb6e417431cbdcf2a0edfba71a
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-05-30 11:22:52 +0900

    [rubygems/rubygems] Make ruby_code method handle OpenSSL::PKey::RSA objects

    https://github.com/rubygems/rubygems/commit/b1d825ab3a

commit 508afe2c26737e0be60a72faa9d6740a06b0914c
  Author: Ellen Marie Dash <the@smallest.dog>
  Date:   2019-08-17 13:45:09 +0900

    [rubygems/rubygems] Set SOURCE_DATE_EPOCH env var if not provided.

    Fixes #2290.

    1. `Gem::Specification.date` returns SOURCE_DATE_EPOCH when defined,
    2. this commit makes RubyGems set it _persistently_ when not provided.

    This combination means that you can build a gem, check the build time,
    and use that value to generate a new build -- and then verify they're
    the same.

    https://github.com/rubygems/rubygems/commit/d830d53f59

commit 8436b2717c458a554dd81456a8e6e030e2c3e038
  Author: Daniel Berger <dberger@redhat.com>
  Date:   2019-07-11 22:20:43 +0900

    [rubygems/rubygems] Add a gem attr to the Gem::Package class.

    https://github.com/rubygems/rubygems/commit/5b81f364ae

commit 6ffc045a817fbdf04a6945d3c260b55b0fa1fd1e
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-08 18:53:27 +0900

    [EXPERIMENTAL] Make Symbol#to_s return a frozen String

    * Always the same frozen String for a given Symbol.
    * Avoids extra allocations whenever calling Symbol#to_s.
    * See [Feature #16150]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2437

commit 4a4c5028258e53f3395af29655a66bcef796fd73
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-26 12:57:43 +0900

    Add special runner to benchmark mjit_exec

    I wanted to dynamically generate benchmark cases to test various number
    of methods. Thus I added a dedicated runner of benchmark-driver.

commit 5d8f112505fbc3f9b008ce4ec40fc74f9f623c4a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-26 12:53:41 +0900

    RubyVM::MJIT.pause(wait: true) should wait

    for all compilations and compaction.

    Prior to this commit, the last-compiled code has not been used because
    MJIT worker is stopped before setting the code, and compaction has also
    been skipped.

    But it was not intentional and `wait: true` pause should wait until
    those two things by its feature.

commit 47a234954a119c6957e947f5769c55d0b40c6004
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-09-23 05:09:32 +0900

    Rename STR_IS_SHARED_M to STR_BORROWED

    Since the introduction of STR_SHARED_ROOT, the word "shared"
    has become very overloaded with respect to String's internal
    states. Use a different name for STR_IS_SHARED_M and explain
    its purpose.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2480

commit 93faa011d393bb4b5cf31a0cbb46922f0a5e7cdc
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-09-23 04:36:00 +0900

    Tag string shared roots to fix use-after-free

    The buffer deduplication codepath in rb_fstring can be used to free the buffer
    of shared string roots, which leads to use-after-free.

    Introudce a new flag to tag strings that at one point have been a shared root.
    Check for it in rb_fstring to avoid freeing buffers that are shared by
    multiple strings. This change is based on nobu's idea in [ruby-core:94838].

    The included test case test for the sequence of calls to internal functions
    that lead to this bug. See attached ticket for Ruby level repros.

    [Bug #16151]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2480

commit 3cee99808d629c0ec493955ce8ea019d1f8a637b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-21 10:29:34 +0900

    [EXPERIMENTAL] Expression with modifier `in`

    [Feature #15865]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2485

commit 1fe73dc8609c4bac9e517dc70f602a16dae556cc
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-26 11:35:01 +0900

    include/ruby/ruby.h: suppress a false-positive warning of GCC

    GCC emits a lot of false positives for rb_scan_args because:

    * `rb_scan_args(argc, argv, "*:", NULL, &opts);` makes `n_mand == 0`,
    * `n_mand == argc + 1` implies `argc == -1`, and
    * `memcpy(ptr, argv, sizeof(VALUE)*argc);` explodes

    However, we know that argc is never so big, thus this is a false
    positive.  This change suppresses it by adding a condition `n_mand > 0`.

    ```
    In file included from /usr/include/string.h:494,
                     from ./include/ruby/defines.h:145,
                     from ./include/ruby/ruby.h:29,
                     from ./include/ruby/encoding.h:27,
                     from dir.c:14:
    In function 'memcpy',
        inlined from 'ruby_nonempty_memcpy.part.0' at ./include/ruby/ruby.h:1763:17,
        inlined from 'ruby_nonempty_memcpy' at ./include/ruby/ruby.h:1760:1,
        inlined from 'rb_scan_args_set' at ./include/ruby/ruby.h:2594:9,
        inlined from 'dir_s_aref' at dir.c:2774:12:
    /usr/include/x86_64-linux-gnu/bits/string_fortified.h:34:10: warning: '__builtin___memcpy_chk' pointer overflow between offset 0 and size [-8, 9223372036854775807] [-Warray-bounds]
       return __builtin___memcpy_chk (__dest, __src, __len, __bos0 (__dest));
              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    /usr/include/x86_64-linux-gnu/bits/string_fortified.h:34:10: warning:
    '__builtin___memcpy_chk' specified size 18446744073709551608 exceeds maximum object size 9223372036854775807 [-Wstringop-overflow=]
    ```

commit 5357ceb1ca454e2b3c5c173c638054cf705e4752
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-26 09:54:24 +0900

    [ruby/io-console] Defer creating VT query string

    https://github.com/ruby/io-console/commit/3d69c577a4

commit 9b106987050b06e3495e6ec5d3da152557fad8a0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-26 09:53:16 +0900

    [ruby/io-console] Added IO#console_mode

    https://github.com/ruby/io-console/commit/77ed8d5a06

commit 3b302ea8c95d34d5ef072d7e3b326f28a611e479
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-22 01:03:36 +0900

    Add Module#ruby2_keywords for passing keywords through regular argument splats

    This approach uses a flag bit on the final hash object in the regular splat,
    as opposed to a previous approach that used a VM frame flag.  The hash flag
    approach is less invasive, and handles some cases that the VM frame flag
    approach does not, such as saving the argument splat array and splatting it
    later:

      ruby2_keywords def foo(*args)
        @args = args
        bar
      end
      def bar
        baz(*@args)
      end
      def baz(*args, **kw)
        [args, kw]
      end
      foo(a:1)    #=> [[], {a: 1}]
      foo({a: 1}, **{}) #=> [[{a: 1}], {}]

      foo({a: 1}) #=> 2.7: [[], {a: 1}] # and warning
      foo({a: 1}) #=> 3.0: [[{a: 1}], {}]

    It doesn't handle some cases that the VM frame flag handles, such as when
    the final hash object is replaced using Hash#merge, but those cases are
    probably less common and are unlikely to properly support keyword
    argument separation.

    Use ruby2_keywords to handle argument delegation in the delegate library.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2477

commit 80b5a0ff2a7709367178f29d4ebe1c54122b1c27
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-26 03:18:49 +0900

    Make rb_scan_args handle keywords more similar to Ruby methods (#2460)

    Cfuncs that use rb_scan_args with the : entry suffer similar keyword
    argument separation issues that Ruby methods suffer if the cfuncs
    accept optional or variable arguments.

    This makes the following changes to : handling.

    * Treats as **kw, prompting keyword argument separation warnings
      if called with a positional hash.

    * Do not look for an option hash if empty keywords are provided.
      For backwards compatibility, treat an empty keyword splat as a empty
      mandatory positional hash argument, but emit a a warning, as this
      behavior will be removed in Ruby 3.  The argument number check
      needs to be moved lower so it can correctly handle an empty
      positional argument being added.

    * If the last argument is nil and it is necessary to treat it as an option
      hash in order to make sure all arguments are processed, continue to
      treat the last argument as the option hash. Emit a warning in this case,
      as this behavior will be removed in Ruby 3.

    * If splitting the keyword hash into two hashes, issue a warning, as we
      will not be splitting hashes in Ruby 3.

    * If the keyword argument is required to fill a mandatory positional
      argument, continue to do so, but emit a warning as this behavior will
      be going away in Ruby 3.

    * If keyword arguments are provided and the last argument is not a hash,
      that indicates something wrong. This can happen if a cfunc is calling
      rb_scan_args multiple times, and providing arguments that were not
      passed to it from Ruby.  Callers need to switch to the new
      rb_scan_args_kw function, which allows passing of whether keywords
      were provided.

    This commit fixes all warnings caused by the changes above.

    It switches some function calls to *_kw versions with appropriate
    kw_splat flags. If delegating arguments, RB_PASS_CALLED_KEYWORDS
    is used.  If creating new arguments, RB_PASS_KEYWORDS is used if
    the last argument is a hash to be treated as keywords.

    In open_key_args in io.c, use rb_scan_args_kw.
    In this case, the arguments provided come from another C
    function, not Ruby.  The last argument may or may not be a hash,
    so we can't set keyword argument mode.  However, if it is a
    hash, we don't want to warn when treating it as keywords.

    In Ruby files, make sure to appropriately use keyword splats
    or literal keywords when calling Cfuncs that now issue keyword
    argument separation warnings through rb_scan_args.  Also, make
    sure not to pass nil in place of an option hash.

    Work around Kernel#warn warnings due to problems in the Rubygems
    override of the method.  There is an open pull request to fix
    these issues in Rubygems, but part of the Rubygems tests for
    their override fail on ruby-head due to rb_scan_args not
    recognizing empty keyword splats, which this commit fixes.

    Implementation wise, adding rb_scan_args_kw is kind of a pain,
    because rb_scan_args takes a variable number of arguments.
    In order to not duplicate all the code, the function internals need
    to be split into two functions taking a va_list, and to avoid passing
    in a ton of arguments, a single struct argument is used to handle
    the variables previously local to the function.

  Notes:
    Merged-By: jeremyevans <code@jeremyevans.net>

commit 4755e23d2e43a0a16ae70be83097dcae050bc0c8
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-26 00:27:40 +0900

    * 2019-09-26 [ci skip]

commit ae83dbe28d35f43ec60d913fbae5d3a95ae2af05
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-24 09:03:38 +0900

    Get rid of `IO.select` to fix multiline paste

commit 5b1fd79ad90899adc71a1f34a722b26ba22a9c8a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-25 20:51:20 +0900

    [DOC] fixed the return value of IO#ready? [ci skip]

    IO#ready? returns true or false only, since r50262(1baa57b0033).

commit 6d578164f5da815fb71d23ad186e841359384f25
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-09-25 17:12:55 +0900

    check `ARY_SHARED_ROOT_P()`.

    ARY_SHARED_ROOT_P(ary) is true, ARY_HEAP_CAPA(ary) should not
    be called.

commit 3deeb3fd914bc5604e84e7a41ec2b5193a560479
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-09-25 16:55:54 +0900

    introduce `obj_ary_extracapa`.

    Introduce a new debug counter `obj_ary_extracapa` which counts
    arrays which are `len < capa`.

commit 112c9f1430ce495e76aef73221578adc9b240a3b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-25 16:58:24 +0900

    lldb_inspect: removed unnecessary newline and `end` option

commit 33c5ad3154099769cec7f77b6d95cbf4b8d52bb0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-25 13:51:49 +0900

    Removed idNUMPARAM_0

commit 55e1e22b2d44a8a1eca0f6ed2b11dc0f564f7192
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-25 13:01:03 +0900

    Changed numbered parameters semantics

    * `_1` (and no other numbered parameters) to work as `|x|`.
    * giving up `_0`.

    [ruby-core:95074] [Bug #16178]

commit e663299a5f7a980aae39f3e87cec064ae19a870c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-25 10:14:36 +0900

    Simplified duplicate code

commit c99fb0f41e7bb88a4d5891e86bd54def2fca1de4
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-25 09:48:34 +0900

    Revert "[ruby/io-console] Skip cursor position test on Solaris"

    This reverts commit 5294ded681992ced2ecbd31c814b63265d2f591e.

commit ca58e834007199929e41fca97f3c103dfbab4bb1
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-25 09:48:02 +0900

    Do not use of non-standard escape character '\e'

commit c60451d9cd8ff69095acf826b11ea01557cc9b8b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-25 09:42:35 +0900

    [ruby/io-console] Unique paths to be added

    https://github.com/ruby/io-console/commit/a3ad851b6c

commit fc9eb5b9c1b0a6f61735ace45ab39c281a55e8a3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-25 09:33:10 +0900

    [ruby/io-console] Load the current libraries

    https://github.com/ruby/io-console/commit/ab7653c543

commit 8e8dd88c80e43c0d10857a3394df7cf0fb6e2cb2
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-25 08:24:44 +0900

    * 2019-09-25 [ci skip]

commit 5294ded681992ced2ecbd31c814b63265d2f591e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-25 08:23:18 +0900

    [ruby/io-console] Skip cursor position test on Solaris

    It results in a mysterious failure.

    https://github.com/ruby/io-console/commit/e3543c3da4

commit 0e84eecc1764ec6e2a28654b3e66b8c006f73432
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-24 18:25:32 +0900

    Make numbered parameters exclusive in a scope

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2431

commit ea68bb914a3c806a1c5188993b96791a76ab0849
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-04 00:07:50 +0900

    Changed numbered parameter prefix

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2431

commit e73cc3eead75b27eabf93a7163bed511f2bb3b17
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-24 02:21:30 +0900

    Added implicit block parameter

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2431

commit a1dcb9daa56874ff11e717ad141d36f26e0b9c13
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-24 21:52:23 +0900

    Rename from ruby-x.y.z.ext.draft to ruby-x.y.z-draft.ext [ci skip]

commit c5a97d995ae06e0ae420d7529085ae94695c7593
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-24 21:05:29 +0900

    misc/lldb_cruby.py: update for python3 [ci skip]

    lldb module bundled with Xcode is for Python 3 now.

commit 052636603377a793dcbd7169d7483a72833d6721
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-24 20:59:47 +0900

    misc/lldb_cruby.py: removed unused module `commands` [ci skip]

commit 10e3267c31c4c976d79e00bca484094f1a87dc65
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-24 15:53:58 +0900

    [ruby/io-console] Made cursor position 0-origin

    https://github.com/ruby/io-console/commit/9377e37295

commit 244f7ec204e2b3fd54ca68740587b5be6d9defc4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-24 15:48:58 +0900

    [ruby/io-console] Made cursor position consistent with `winsize`

    To be consistent with `winsize`, changed the cursor position
    format from `[x, y]` to `[row, column]`.

    https://github.com/ruby/io-console/commit/d1f5ae9286

commit 2366c681166a1dab95de6b9ca8ffcaae18aadd39
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-24 11:47:04 +0900

    suppress meddlesome clang10 warrning

    It says:

    vm.c:2519:34: warning: expression does not compute the number of elements in this array; element type is 'const struct __jmp_buf_tag', not 'VALUE' (aka 'unsigned long') [-Wsizeof-array-div]
                                 sizeof(ec->machine.regs) / sizeof(VALUE));
                                        ~~~~~~~~~~~~~~~~  ^
    vm.c:2519:34: note: place parentheses around the 'sizeof(VALUE)' expression to silence this warning

commit 14ba62d4881061a1d54b6204b0c4f0b4811ac921
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-24 11:44:41 +0900

    refactor delete unused variable

    cadfaacb2533d47d52dbb5dbefe724d7bf11112e missed it.

commit e561e4a8f390b3e46e45787931f75ee5c237a0c2
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-24 01:28:48 +0900

    * 2019-09-24 [ci skip]

commit 74e33662fe987e5418fc277c8a7ba1f9805f8673
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-24 00:44:38 +0900

    Make public_send and rb_f_send handle keyword argument separation

    Kernel#send takes a different optimized code path that was already
    handled.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2481

commit 9e4be78ea88f882e1562dbb3eeb24304d0049b8d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-23 19:27:18 +0900

    [ruby/io-console] Try fallback to stdout when stdin

    https://github.com/ruby/io-console/commit/b8017509ef

commit 8487193b109ab8cecea74ff383b01b5ecce172c4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-23 19:22:31 +0900

    [ruby/io-console] Try to write DSR query to writable IO

    https://github.com/ruby/io-console/commit/a54b6e4dd1

commit b443bdbdb997a6b5c0d6f06cada146f523361980
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-23 17:31:41 +0900

    Use short wait for select(2)

    It is one of the reasons why paste to IRB is slow.

commit 934507472c92ccada3f30be183fea5066427efda
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-23 17:26:38 +0900

    Retrieve key-buffer that was supposed to lose

commit 142efba93e91209a7f336863974d4c84a969e2a3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-23 02:20:43 +0900

    Adjusted directives order of a function [ci skip]

commit cadfaacb2533d47d52dbb5dbefe724d7bf11112e
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-07-20 10:42:10 +0900

    Lazy init thread local storage

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2295

commit 642dbb962cafc39e9e44eef212435e50a01190ec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-23 01:25:17 +0900

    make-snapshot: store timestamps in UTC for zip which lacks timezone

commit 2afe86e4bedeffd65c8e5cbbf08b0cce76669d40
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-23 01:04:25 +0900

    * 2019-09-23 [ci skip]

commit d8221a54f2c5729573ddb03cb51d638ae74cc876
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-23 00:55:48 +0900

    Add `-mtc=off` to `7z` not to store NTFS timestamps

    https://sevenzip.osdn.jp/chm/cmdline/switches/method.htm

commit b0d24e262f2ca3ba4f8d3f60248d30209b0a39a2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-22 22:26:07 +0900

    make-snapshot: Added -no7z option

    It disables 7z, which seems not to have an option to stop saving
    extra file attributes (uid/gid and atime), in order to make zip
    packages stable.

commit 7fe7dec7e5f7cefae986fe6475805198ec4dbada
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-22 21:56:58 +0900

    make-snapshot: Do not save extra file attributes

    Extra file attributes (uid/gid and atime) make the packaged zip
    file unstable.

commit 5f35b8ca30cba69968d4d0c885a4bf5c48b03e17
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-22 22:12:18 +0900

    st.c: Use rb_st_* prefix instead of st_* (#2479)

    The original st.c was public domain hash table implementation, but
    Ruby's st.c is highly modified, and its data structure is not
    compatiblie with the original one.

    Therefore, when creating an extension library to wrap C code that uses
    the original st.c, the symbols conflict, which leads to segfault.

    This changes the prefix `st_*` of st.c functions to `rb_st_*` for
    reflecting that they are specific to Ruby's, and avoid symbol conflicts.

  Notes:
    Merged-By: mame <mame@ruby-lang.org>

commit 2272efa4632a845ead37377a22ad9e24b45ebf27
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-22 16:35:50 +0900

    st.c (st_add_direct_with_hash): make it "static inline"

    It was originally static inline, but seemed to be accidentally published
    at 8f675cdd00e2c5b5a0f143f5e508dbbafdb20ccd.

commit 28eefb33c8d27e5711319873d065e5414d7ffe25
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-22 16:21:26 +0900

    variable.c: Rename rb_st_copy to rb_iv_tbl_copy

    This function was created as a variant of st_copy with firing write
    barrier.
    It should have more explicit name, such as st_copy_with_write_barrier.
    But because it is used only for copying iv_tbl, so I rename it to
    rb_iv_tbl_copy now.  If we face other use case than iv_tbl, we may want
    to rename it to more general name.

commit b4c328bebcf45b7a983f7e5ce29ba6ec57ed1a1a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-22 11:55:00 +0900

    test/bigdecimal/test_bigdecimal.rb: Use BigDecimal()

    instead of deprecated BigDecimal.new.

commit a0ce0b6297852f64f6a05593e1364619da7a831d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-22 10:11:06 +0900

    Add `if: always()` because 2.4.x's `make check` failed on snapshot [ci skip]

    `check-snapshot-ruby_2_4` uses `make test` instead of `make check`.
    https://github.com/ruby/actions/blob/95692e54f4263501db1508d51c1fb67c03b4f575/.github/workflows/snapshot.yml#L448-L449

    `draft-release` use `make check` to make it simple, and
    actions is required regardless of success or failure.

    On the other hand, snapshot success can be ignored,
    so normally it should not fail.

commit c020fd6aa8a356b1ae9d3db5b99c7e29a1fddae0
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-22 08:10:56 +0900

    * 2019-09-22 [ci skip]

commit 2e551356a7a6e74ba07283e000ff16f5d1ea6506
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-08 01:01:33 +0900

    Make Kernel#{Pathname,BigDecimal,Complex} return argument if given correct type

    This is how Kernel#{Array,String,Float,Integer,Hash,Rational} work.
    BigDecimal and Complex instances are always frozen, so this should
    not cause backwards compatibility issues for those.  Pathname
    instances are not frozen, so potentially this could cause backwards
    compatibility issues by not returning a new object.

    Based on a patch from Joshua Ballanco, some minor changes by me.

    Fixes [Bug #7522]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2473

commit 7470f965650bf17875632f0c5f9e5a4d9de9fc3f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-10 08:44:43 +0900

    Fix Module#class_variables for singleton classes of classes/modules

    Module#class_variables should reflect class variable lookup. For
    singleton classes of classes/modules, this means the lookup should
    be:

    * Singleton Class
    * Class
    * All Ancestors of Class

    Note that this doesn't include modules included in the singleton
    class, because class variable lookup doesn't include those.

    Singleton classes of other objects do not have this behavior and
    always just search all ancestors of the singleton class, so do not
    change the behavior for them.

    Fixes [Bug #8297]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2478

commit 5cb283217b713605c6bddc527f96bbc773fd1fb9
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-21 19:23:47 +0900

    test/ruby/test_assignment.rb: use bug number for assert message

    to suppress variable unused warning

commit b4149993709169b9a67373095593da385e7d48e5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-21 16:09:45 +0900

    Add a benchmark for JIT-ed code dispatch

commit e006b992c29decb01865b0749e35a4cfc872bdaf
  Author: Fangrui Song <i@maskray.me>
  Date:   2019-09-19 16:04:29 +0900

    typedef rb_jmpbuf_t to void *[5] if __builtin_setjmp is used

    The built-in version operates on a buffer of 5 words, much smaller than
    the size of jmp_buf defined in libc.
    Note, powerpc requires 5 words, while arm and x86_64 just require 3.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2471

commit 27144de2bd95c5886c3d4400c3b8aea932b856f1
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-21 04:18:07 +0900

    Fix documentation for ENV.each to return ENV

    Also have spec check that it returns ENV.

    Mostly from burdettelamar@yahoo.com (Burdette Lamar).

    Fixes [Bug #16164]

commit 7aeacb213bdf40bab4393448023930eac35d127a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-21 01:57:15 +0900

    Revert eval.c in e81a3e6df54842b5a836dad7055a4295cf4155bc

    Inadvertently merged change to suppress warnings by gcc 9.2.
    Pointed out by Alan Wu.

commit 990e714fd3f4e9b28e007ff1bd2bcf4217269776
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-21 00:48:46 +0900

    * 2019-09-21 [ci skip]

commit daa4ad8ed7f73e8d5e2a2047fe92e5fe08227627
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-21 00:48:24 +0900

    Disable method definition type checks on Windows

commit fe1e623faea75952f27baa949a7468021443c12a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 23:25:18 +0900

    Fixed format specifiers

    Use PRIdPTRDIFF for the platforms where a pointer is larger than a long.

commit e47b111627d5c68b8900f57364fecd51cbcd0268
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-19 07:30:59 +0900

    Call rb_vm_call_kw instead of rb_vm_call0 in a few cases

    rb_vm_call_kw handles the tmp buffer for you.

    Also, change method_missing so it also calls rb_vm_call_kw to
    handle the kw_splat flag, instead of requiring callers to handle
    kw_splat flag before calling method_missing.  This may fix other
    cases where method_missing is currently called without the kw_splat
    being handled.

commit c9f2b790adcff8df48e3192d18ee8afa02f5530c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-19 04:59:01 +0900

    Handle keyword argument separation for Enumerator#size

    When Object#to_enum is passed a block, the block is called to get
    a size with the arguments given to to_enum.  This calls the block
    with the same keyword flag as to_enum is called with.

    This requires adding rb_check_funcall_kw and
    rb_check_funcall_default_kw to handle keyword flags.

commit 27b67468724dc48ed8305d8cb33484a4af98fc05
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-19 04:08:14 +0900

    Make passing empty keywords to dig pass empty keywords to next dig method

    If defined in Ruby, dig would be defined as def dig(arg, *rest) end,
    it would not use keywords.  If the last dig argument was an empty
    hash, it could be treated as keyword arguments by the next dig
    method.  Allow dig to pass along the empty keyword flag if called
    with an empty keyword, to suppress the previous behavior and force
    treating the hash as a positional argument and not keywords.

    Also handle the case where dig calls method_missing, passing the
    empty keyword flag to that as well.

    This requires adding rb_check_funcall_with_hook_kw functions, so
    that dig can specify how arguments are treated.  It also adds
    kw_splat arguments to a couple static functions.

commit e81a3e6df54842b5a836dad7055a4295cf4155bc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 22:03:37 +0900

    Allows calling a private method only with bare `self`

commit 9e171b1fa0b4e2e5b0bf82da11b4b511c602c336
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-20 21:50:00 +0900

    Fix wrong allocation failure handling

    `iseq->body->jit_unit->compile_info` should not be referenced before
    the null check of `iseq->body->jit_unit`.

commit 6e0dd3e7c1786e33c3193d0b4dd9579655c4e842
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-20 21:06:07 +0900

    Use RUBY_VM_NEXT_CONTROL_FRAME macro

    in vm_push_frame and limit scope of i.
    Just a minor maintainability improvement.

commit 740a98fe108305324a66edb16f0acb8521a53da7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 19:03:43 +0900

    Fix for explicit cast without RUBY_METHOD_FUNC

commit cb1f9fe9184c67f9a99f6a9702559293613b7e80
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 16:48:42 +0900

    Check various method definitions in C++

commit 4ffcadd39cb7061ff501478ed436a56e7f99f3dc
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-20 17:44:16 +0900

    Fix rb_define_singleton_method warning

    for debug counters

    ```
    ../include/ruby/intern.h:1175:137: warning: passing argument 3 of 'rb_define_singleton_method0' from incompatible pointer type [-Wincompatible-pointer-types]
     #define rb_define_singleton_method(klass, mid, func, arity) rb_define_singleton_method_choose_prototypem3((arity),(func))((klass),(mid),(func),(arity));
                                                                                                                                             ^
    ../vm.c:2958:5: note: in expansion of macro 'rb_define_singleton_method'
         rb_define_singleton_method(rb_cRubyVM, "show_debug_counters", rb_debug_counter_show, 0);
         ^~~~~~~~~~~~~~~~~~~~~~~~~~
    ../include/ruby/intern.h:1139:99: note: expected 'VALUE (*)(VALUE) {aka long unsigned int (*)(long unsigned int)}' but argument is of type 'VALUE (*)(void) {aka long unsigned int (*)(void)}'
     __attribute__((__unused__,__weakref__("rb_define_singleton_method"),__nonnull__(2,3)))static void rb_define_singleton_method0 (VALUE,const char*,VALUE(*)(VALUE),int);
    ```

commit 04c53a1d03130b5cd4a1eea35cab92003a4d0909
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 17:05:52 +0900

    Get rid of embedding make command line

    NMAKE sets MAKE to the full path name, which includes spaces by
    the default installation.

commit d56a3c063532906158cc0427a42133fadda75cde
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 16:55:16 +0900

    Fixed cxxanyargs/depend

    * Removed excess backslashes
    * Fixed the target name to try failure.cpp

commit 26831719948f4ab6fdffdfcd8083be23aa300436
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 15:50:42 +0900

    [DOC] DOT is not a part of a receiver [ci skip]

    [Feature #11297] [Feature #16123]

commit 1de242de0fdec873eb5138ebdf09eaf0f6297967
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-20 14:22:32 +0900

    Fixed up 37c083942509dd7e0d8b7ccd3575936a2017c400

commit 9d25c652a98f0a5bc552f81846c6dc975dc2f307
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-20 14:21:04 +0900

    Removed ThreadsWait from the ruby repository

commit 37c083942509dd7e0d8b7ccd3575936a2017c400
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-20 14:06:22 +0900

    Removed Synchronizer from the ruby repository.

commit 3b56a0934fa503b518e8302ed32f9124740d896b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-20 12:56:18 +0900

    Removed Shell from the ruby repository.

commit 67a6662032d0a7c4af07f44c2046cd0ed2d7d253
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-20 12:42:53 +0900

    Removed Scanf from the ruby repository.

commit a3b85016149f4f73f08c739626b2f02badd5ad17
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-20 12:12:37 +0900

    Removed CMath from the ruby repository.

commit 422ae594d97e803e829e65716e85483f5942e0c3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 10:29:24 +0900

    Fixed memory leak

    * array.c (flatten): fix a memory leak in the case of an exception
      at conversion of an element to Array.

commit 45bac6284595834b68a34f4f4efe5880436fce11
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 09:31:55 +0900

    Added the target to run a benchmark

commit d3c6fe65e3ce017e62deaca7344fa90adfb314a9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 09:25:30 +0900

    Fixed a variable in checkout-github-%

commit b80df6e8e0a59207545822d92c0a4f78cd64ef5e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 02:32:50 +0900

    Update NEWS and documents [ci skip]

    [Feature #11297] [Feature #16123]

commit e6378cdcd8246697be652b74442f9c07503e0ba6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 02:17:58 +0900

    Allow calling a private accessor with `self.`

    [Feature #11297] [Feature #16123]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2474

commit d583df525922ca14ecfab7a39f0c617eb86bc804
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-20 02:16:17 +0900

    Added version guard

    [Feature #11297] [Feature #16123]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2474

commit 7fbd2f7cc247ee66e877ab3c88f0274834c6b6c7
  Author: Dylan Thacker-Smith <Dylan.Smith@shopify.com>
  Date:   2019-07-02 23:06:54 +0900

    Allow calling a private method with `self.`

    This makes it consistent with calling private attribute assignment
    methods, which currently is allowed (e.g. `self.value =`).

    Calling a private method in this way can be useful when trying to
    assign the return value to a local variable with the same name.

    [Feature #11297] [Feature #16123]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2474

commit 17a13663998a98ff75fcc838d1cea95c879fbb88
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-18 22:52:41 +0900

    Overload variable definition functions

    Define overloading functions of rb_define_virtual_variable and
    rb_define_hooked_variable, for combinations with and without
    ANYARGS casts.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2461

commit 9c0d5e51cb3726455560c34ad595ab82f651da48
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-15 23:28:26 +0900

    Check method functions in C++

    By using template and overloading, instead of transparent union.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2461

commit 5e3771aad4228ac18cec7be4ccb93866c81744fa
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-20 00:20:35 +0900

    * 2019-09-20 [ci skip]

commit e13b09c450eb4ffc0ffc86d479e5b0c75599ad9c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 23:45:09 +0900

    Use EXPECT_NODE_NONULL

commit 82f25404ffe2ad910ac61e436f02cad312755b2f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 23:44:37 +0900

    Check COMPILE_RECV result

commit e0c56b45a41f052223e23d222ca49c7e0225923e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 22:09:43 +0900

    Moved unmatch arity check to depend file

    To substitute suffixes and VPATH for nmake.

commit a3daf8e49a36dc5501b020a882d611676a6ad264
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 20:07:24 +0900

    Ensure that unmatched arity fails in C++

commit b3ddeac33e299f36084339aceaaa0a29cf8b7498
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 20:31:15 +0900

    Revert "DEBUG: dump mkmf.log"

    This reverts commit 69e209a3450bd6b281dcad1d96a34e9cab184845.

    The debug has finishted.

commit cbf405fec4ea3c93640b0b7072cf6205442100e5
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-09-19 20:45:24 +0900

    Specify encoding explicitly for sprintf

commit 5208c431bef3240eb251f5da23723b324431a98e
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-09-19 19:49:12 +0900

    Separate Time#inspect from to_s and show subsec [Feature #15958]

commit 2698f13a1f0cc07ef97b7f20502c420b51e9c57d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 19:40:44 +0900

    Fixed reserved numbered parameter warning

commit 6180f1fede487bf5dfdd00cbae2ee7f2b4613a7e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 19:06:18 +0900

    Added link_command for C++

commit 6045ff64e3c310cd24f5e49e088610249d4cf24f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-19 18:04:46 +0900

    Use benchmark-driver v0.15.6

    to fix another keyword argument warning which was added recently.

commit 20baa08d652b844806fab424a2a590408ab613ef
  Author: NagayamaRyoga <38316184+NagayamaRyoga@users.noreply.github.com>
  Date:   2019-09-19 17:35:32 +0900

    Improve the output of `RubyVM::InstructionSequence#to_binary` (#2450)

    The output of RubyVM::InstructionSequence#to_binary is extremely large.
    We have reduced the output of #to_binary by more than 70%.

    The execution speed of RubyVM::InstructionSequence.load_from_binary is about 7% slower, but when reading a binary from a file, it may be faster than the master.

    Since Bootsnap gem uses #to_binary, this proposal reduces the compilation cache size of Rails projects to about 1/4.

    See details: [Feature #16163]

commit f84efe4b9da8e16b0986b75ca24352639bc502ec
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-19 17:30:31 +0900

    Avoid unneeded casts in INSN_ENTRY_SIG

commit 7202bf9ed899677f43a01ecf9f671082268d2d88
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-19 17:19:21 +0900

    Drop PREFETCH macro unused since 6b534134a7

commit fcfe36b7332a29fd6835ba65984448477acc5bcc
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-19 10:37:30 +0900

    fix spec failure

    See also https://travis-ci.org/ruby/ruby/jobs/586452224

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2468

commit d74fa8e55ce64904f2f99dfef4cbdff94e290672
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-18 17:18:48 +0900

    reuse cc->call

    I noticed that in case of cache misshit, re-calculated cc->me can
    be the same method entry than the pevious one.  That is an okay
    situation but can't we partially reuse the cache, because cc->call
    should still be valid then?

    One thing that has to be special-cased is when the method entry
    gets amended by some refinements.  That happens behind-the-scene
    of call cache mechanism.  We have to check if cc->me->def points to
    the previously saved one.

    Calculating -------------------------------------
                              trunk        ours
    vm2_poly_same_method     1.534M      2.025M i/s -      6.000M times in 3.910203s 2.962752s

    Comparison:
                 vm2_poly_same_method
                    ours:   2025143.9 i/s
                   trunk:   1534447.2 i/s - 1.32x  slower

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2468

commit 9fb9f2d318520ddfdbe73809eea85847550b42ae
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-19 12:39:52 +0900

    Add draft-release.yml [ci skip]

    Make draft release packages. (Release packages are official after tests and release announce.)

    - Copy from ruby/actions
    - Change trigger tags from `draft/v*` to `v*` (I use `draft/v*` on ruby/actions because I want to avoid to cause trouble with shell history on working directory of ruby/ruby.)
    - Change secrets names because secrets are repository local and use different names between ruby/ruby and ruby/actions.

commit e2aac6a611f4924e4bed2a38e063d65c731aa33a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 12:25:34 +0900

    Separate @have_devel for C++

commit df3fd5071742397c7c5b908d0632f17aa79c2b51
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 12:23:55 +0900

    Removed mkmf.log dump in Makefile

commit 66c644da5e80258bb3217941223d923f923c3548
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-19 12:15:53 +0900

    refactor reuse existing on-stack structs

    rb_vm_call0 allocates its own struct call_info etc.  But they are
    already there in case of rb_funcallv_with_cc.  Let's just pass the
    existing ones, instead of re-creation.

commit 69e209a3450bd6b281dcad1d96a34e9cab184845
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 12:03:58 +0900

    DEBUG: dump mkmf.log

commit 2d1e3bd8f1448ef55d3e1bda8dc0855ae995d659
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 11:25:09 +0900

    DEBUG: cxxanyargs

commit a98181eb11ab3d0a643a5fb50e731c3fe50960d9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 10:46:52 +0900

    DEBUG: cxxanyargs

commit 70fd022a2ae03d237ee9045db9834f253f3d843f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 09:47:11 +0900

    DEBUG

commit a9cdaaada4ade22f2f85fbc1f8bd41a8579528b0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 08:46:49 +0900

    DEBUG

commit 5177dd8ba081dd25bf8ceb0f1c861ea8f83884c3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-19 03:16:00 +0900

    Add and fix some keyword tests

    Replace [arg=1, args] with [arg, args] so we can actually test
    the value correctly.

    Add some missing tests for **h3 when method accepts (**args).

    Add tests for passing positional hashes to (**args) methods and
    check for the expected warnings/errors.

commit 2b708ab7238fc1f904f66d9a3999ca1c8ae165fe
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-19 00:11:31 +0900

    * 2019-09-19 [ci skip]

commit 842f600a93deca71e908ef5bb16e4e6aed519890
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-18 23:31:53 +0900

    Look up the language module

    Look up language module with `MakeMakefile.[]`, instead of a
    accessing constant under that module directly, to get rid of
    expose the constant to the toplevel inadvertently.

commit 15d5de59fb089eb47ca18dd4a7296fa2e7e73709
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-19 00:02:34 +0900

    Removed unused keyword argument [ci skip]

commit f9d0778fca8fd9ff0243062726ed4a6186da1cde
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-18 22:51:56 +0900

    Removed MakeMakefile::C

    It is exposed to the topleven namespace via included MakeMakefile.

commit 9bd77d7cf3d817fab24b1a10550eae6abb2e341d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-18 19:25:58 +0900

    Removed a debug print [ci skip]

commit a491159a6e91976b026f8c968549acd1288d3af2
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-18 22:45:34 +0900

    Add badges of GitHub Actions [ci skip]

commit 38069a3a55325757d2bba84191b006361a284cb0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-18 18:54:07 +0900

    Try using Ruby 1.9.3 on Travis xenial

    Isn't it there? http://rubies.travis-ci.org/

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2469

commit c3f03da4944241f46233ce159068f35c5bd5f9b2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-18 15:38:24 +0900

    [EXPERIMENTAL] MakeMakefile::CXX for C++

commit 7d354175d7dcabc317030194f503d69a8a7892f5
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-18 17:39:51 +0900

    Fixed up ccbfb054b1dcd06d30924c4a83af1bac75d78c31

commit ba86353446f6c1ce9b2c95d03bf16cfed3a532d2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-18 15:28:08 +0900

    Update the latest documentation of bundler

commit 2da8574930f14950ce78892fe65f383fcaf8a71b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-18 15:05:38 +0900

    Fixed the rubocop warnings

commit effacde2c0104935fd7258eac77f17684f724cd0
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 21:30:39 +0900

    [bundler/bundler] Merge all `bundle check --path` specs

    And skip them all for bundler 3.

    https://github.com/bundler/bundler/commit/b88936cdc2

commit 434af7303ceed8ee5318a31eb7da02b0ed557965
  Author: Bundlerbot <bot@bundler.io>
  Date:   2019-09-05 01:20:09 +0900

    [bundler/bundler] Merge #7340

    7340: Fix bundle clean issue r=deivid-rodriguez a=deivid-rodriguez

    ### What was the end-user problem that led to this PR?

    The problem was that `bundle clean` is crashing under some conditions.

    ### What was your diagnosis of the problem?

    My diagnosis was that sometimes (when the bundle includes git sourced gems with extensions), it assumes that some paths exist, but they don't.

    ### What is your fix for the problem, implemented in this PR?

    My fix is to ignore those paths.

    ### Why did you choose this fix out of the possible options?

    I chose this fix because it fixes the issue.

    Fixes #7338.

    Co-authored-by: David Rodrguez <deivid.rodriguez@riseup.net>
    (cherry picked from commit b007fde67c77c1f15f13b97eda186644c2a2be04)

    https://github.com/bundler/bundler/commit/3766053507

commit e6ad9452b6cf1cf118ead0cbd0cf86e2c0fb61e0
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 19:07:55 +0900

    [bundler/bundler] Fix remembered flag deprecation message

    It was suggested a deprecated command as a fix.

    https://github.com/bundler/bundler/commit/e330a9a34f

commit 1cb8cf5df0b2a7dbf8b1d616ac5268d76140aab6
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-09-15 16:42:48 +0900

    [bundler/bundler] Version 2.1.0.pre.2

    https://github.com/bundler/bundler/commit/6e9774b377

commit 4f2f6aeb5fa65a10c633d92fcdd1980d42a6d745
  Author: Samuel Giddins <segiddins@segiddins.me>
  Date:   2017-10-21 03:55:04 +0900

    [bundler/bundler] Add a spec for installing git deps after packaging w/o git

    https://github.com/bundler/bundler/commit/65351c58b8

commit 0c6529bac2c38c536567e443b7da851144e84be8
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-22 03:53:36 +0900

    [bundler/bundler] Revert "Add all platforms to lockfile by default"

    This reverts commit 3dc509e645abb497e4dc92a7c42be471ff87db0b.

    https://github.com/bundler/bundler/commit/b5766564fb

commit 6f16ededdd5eed8bab9e4f4cb70032a151fbc405
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-22 03:52:35 +0900

    [bundler/bundler] Revert "Remove now meaningless warning"

    This reverts commit 00b095b98fe4bd44950beaf3bc9f1d91eac7b69e.

    https://github.com/bundler/bundler/commit/e93bce3b20

commit f18d88b5356d347304245c703329b82293f56efc
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-22 03:52:25 +0900

    [bundler/bundler] Revert "Remove now meaningless setting"

    This reverts commit 52c5a0eedec34b5d86464b3cf135dc2002486f1d.

    https://github.com/bundler/bundler/commit/b4cc36deb9

commit 399501cdfe957325631e70efa6afffca6b56db6e
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-22 03:52:17 +0900

    [bundler/bundler] Revert "Remove now unused method"

    This reverts commit 3a2d2f025081755bdb38af660897e7b2f749a33a.

    https://github.com/bundler/bundler/commit/13cef81582

commit c27aaf1a8f6f4240dadeaa9b203cce640b56e3db
  Author: Takayuki Nakata <f.seasons017@gmail.com>
  Date:   2019-08-21 23:46:46 +0900

    [bundler/bundler] Fix comments and messages to refer to https url

    https://github.com/bundler/bundler/commit/a86b49f1b9

commit b9996803f7278f3a6d30360f1b7220070a9208d3
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 21:25:37 +0900

    [bundler/bundler] Remove duplicated spec filter

    https://github.com/bundler/bundler/commit/b7fc6f4187

commit c92e098781470c84a497a1d430f425aca897f895
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 18:59:39 +0900

    [bundler/bundler] Fix --path option descriptions

    To not mention that the flag is remembered when it's not.

    https://github.com/bundler/bundler/commit/82f0b95854

commit a29ead52e169cf702a61ba91cdf301a3bd87d713
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 19:08:22 +0900

    [bundler/bundler] Deprecate `--path` flag to `bundle check`

    https://github.com/bundler/bundler/commit/0a0e7cf5ec

commit 9118cb242b141c380a0180f64ffeb0c9fdae0c8b
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-09-18 17:24:24 +0900

    Fix typos

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2467

commit bcd5f2e9d30d2bb34912e56b2e766ae952dd12dc
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-18 11:06:24 +0900

    delete unused variable

commit c170e23d8118edba08981fd1c5d7f03652b543a4
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-18 08:23:06 +0900

    * 2019-09-18 [ci skip]

commit 775365cbd2bf17195e694771fc1c15698273a640
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-18 06:32:19 +0900

    Fix keyword argument separation issues with sym procs when using refinements

    Make sure that vm_yield_with_cfunc can correctly set the empty keyword
    flag by passing 2 as the kw_splat value when calling it in
    vm_invoke_ifunc_block.  Make sure calling.kw_splat is set to 1 and not
    128 in vm_sendish, so we can safely check for different kw_splat values.

    vm_args.c needs to call add_empty_keyword, and to make JIT happy, the
    function needs to be exported.  Rename the function to
    rb_adjust_argv_kw_splat to more accurately reflect what it does, and
    mark it as MJIT exported.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2462

commit 9b35dc38644c10eed008f9ba19a7224f2fb49af2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-17 05:19:06 +0900

    Pass keyword argument flag when rb_call_super_kw calls method_missing

    This makes method_missing take a flag for whether keyword arguments
    were passed.

    Adds tests both for rb_call_super_kw usage as well as general usage
    of super calling method_missing in Ruby methods.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2462

commit 0785469a400b00eb4576fedbf93b614c70eaf760
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-17 16:59:47 +0900

    `brew install` may fail, so try to use `tool/travis_retry.sh`

    https://github.com/ruby/ruby/runs/224877570#step:3:1008
    ```
    Error: No such file or directory @ dir_s_rmdir - /Users/runner/Library/Caches/Homebrew/downloads/ca756e367eb98d2b525e72b311633c27ffc74eca825a5392153b3488d1adb732--libssh2-1.9.0.mojave.bottle.tar.gz
    ```

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2464

commit 68ffb679d461722da6ef0bcdb2f18d8929d98204
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-14 00:41:04 +0900

    Undefine DSUSP key

    Enable `Ctrl+Y`, which is bound with it by default on BSD-like
    systems, for editing.

commit b49c1380c10bc3c13814a818a6c860f0f82bba79
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-17 15:15:43 +0900

    * 2019-09-17 [ci skip]

commit f9332ad8333bffd9a0d34d5c5e10a2f7323cbde5
  Author: Adam Cammack <adam_cammack@rapid7.com>
  Date:   2019-09-14 01:03:34 +0900

    Fix previous history in vi_insert mode

commit a3533bc90493cf84e6c9d6cc0356bbbd694cd6da
  Author: Adam Cammack <adam_cammack@rapid7.com>
  Date:   2019-09-08 05:56:29 +0900

    Fix history navigation in vi_insert mode

commit 3bb1162cacf951794af7c9124dde002ceaed5b38
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-16 20:01:42 +0900

    Folded files in gemspec

commit 2a39de193cc1e40b2e73cdbd24df280cb81638dd
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-16 21:37:37 +0900

    * 2019-09-16 [ci skip]

commit 70f57287cfaab470b6e24c6bbc47c7e3890ec7e5
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-16 21:35:38 +0900

    Fix a typo [ci skip]

commit 4a403e3f9850901eaeaf3a261bf810bc18516ca6
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-15 23:19:01 +0900

    oops [ci skip]

    Fixing typo.  It seems I failed to press the shift key.

commit 3a3f48fb8fbdbb810d9b675159529970015316b9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-15 23:12:24 +0900

    Comment lines can be placed between fluent dot now

commit 751d4ab9c2382d60868446cc69fdac0a9f6cdf4a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-27 13:56:54 +0900

    Refine Timezone fixture

commit 6cad0644248d5acbaf3a2e8de4ff6d88b3dd2cb4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-15 16:23:33 +0900

    Try to fetch commits notes to the source tree automatically

    [Bug #16167]

commit 44d594189aa2b1365b9b765cb272906b9561cc1d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-15 13:29:12 +0900

    rb_scan_args_count_lead: use arguments instead of magic numbers

commit 585b15d75df525054cf46b79baf16498472a0e65
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-15 03:21:41 +0900

    make-snapshot: no merge commits in ChangeLog

    Parents commit hashes in logs of merge commits are abbreviated to
    necessary length depending on the repositories.  Exclude merge
    commits from ChangeLog to make it stable.

commit df4a4bd88c98a0b966d88ae825c14e891c5cfba2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-15 02:16:15 +0900

    make-snapshot: export ChangeLog from srcdir

commit 1edcfd610703fb6f773e8f31f88f8ca920bda1ac
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-15 05:57:39 +0900

    Issue a warning if invalid kw_splat is passed to *_kw function

    This should only happen if the API is misused.  It's much better
    to warn here and fix the problem, versus to try to debug TypeErrors
    or segfaults later.

commit 395e5f510cb3788dd2b57f1f9fa9be8980564af8
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-15 02:15:29 +0900

    * 2019-09-15 [ci skip]

commit 1ad4be13cb75c5f039f5732d2149f0b84bcf5f8e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-15 02:07:00 +0900

    make-snapshot: deprecated -exported option [Bug #16167]

commit e9c7fc7ca9bc15a9f84bdc356f7b6fac12988ccb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-14 23:47:33 +0900

    Continue to export even if no notes/commits

    Just exporting may not imply exporting ChangeLog which needs
    notes/commits.  [Bug #16167]

commit 6d2dcf96323189402ea551ed86de6c2766659593
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-14 22:24:44 +0900

    [ruby/io-console] Added `intr:` option to IO#raw

    Enters raw-mode but enable interrupts.

    https://github.com/ruby/io-console/commit/7cba76561a

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2459

commit 8263459627b20d4383978b3d1471298bf52bde05
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-14 21:36:41 +0900

    Keep the reference of imemo while argv may be used

    To prevent the `v` reference from being eliminated before argv is used,
    calling `rb_free_tmp_buffer` against `v` explicitly.

commit f41cd4ba43771139dacf2c9d3e3ebd490a2619c0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-14 21:09:39 +0900

    Fixed one-off error

    Needs another room to append an empty hash.

commit 9699a5c5bcb9e1483f21efdf7e5cb9bf0a6279fb
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-09-14 19:43:51 +0900

    Update news regarding `Fiber#raise`.

commit 39c37acf86960ae745c4d690fe2d9dd38cd96fba
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-14 18:21:37 +0900

    Fix memory leak when adding empty keyword hashes

    nagachika pointed out that ALLOC_N is actually just malloc, so
    this memory wasn't being freed.  This shouldn't be a performance
    sensitive code path, and will be going away after 2.7, so just
    allocate a temp buffer that will be freed later by Ruby GC.

commit b78a345bd63ff2b52ea0f84754ab0988748a9bd0
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-14 17:49:33 +0900

    Only set RB_PASS_CALLED_KEYWORDS in C functions called directly from Ruby

    It is not safe to set this in C functions that can be called from
    other C functions, as in the non argument-delegation case, you
    can end up calling a Ruby method with a flag indicating keywords
    are set without passing keywords.

    Introduce some new *_kw functions that take a kw_splat flag and
    use these functions to set RB_PASS_CALLED_KEYWORDS in places where
    we know we are delegating methods (e.g. Class#new, Method#call)

commit b2c29bbab6e88253f497fc3e66a43cb7b4d425b5
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-14 08:54:08 +0900

    * remove trailing spaces. [ci skip]

commit 3cfbfa9628435e3b09316a18c2db9e4f250fdd77
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-14 08:42:27 +0900

    Consolidate empty keyword handling

    Remove rb_add_empty_keyword, and instead of calling that every
    place you need to add empty keyword hashes, run that code in
    a single static function in vm_eval.c.

    Add 4 defines to include/ruby/ruby.h, these are to be used as
    int kw_splat values when calling the various rb_*_kw functions:

    RB_NO_KEYWORDS :: Do not pass keywords
    RB_PASS_KEYWORDS :: Pass final argument (which should be hash) as keywords
    RB_PASS_EMPTY_KEYWORDS :: Add an empty hash to arguments and pass as keywords
    RB_PASS_CALLED_KEYWORDS :: Passes same keyword type as current method was
                               called with (for method delegation)

    rb_empty_keyword_given_p needs to stay.  It is required if argument
    delegation is done but delayed to a later point, which Enumerator
    does.

    Use RB_PASS_CALLED_KEYWORDS in rb_call_super to correctly
    delegate keyword arguments to super method.

commit 24b1b339757ecab4539a2cb00a545bfcf885d3ef
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-14 01:31:13 +0900

    Correctly handle keywords for Method#call for cfuncs, send, and attr_*

    This sets the correct VM frame flags when using Method#call to
    call funcs, and handles empty keyword hashes for cfuncs,
    attr_reader, and attr_writer. It also fixes calls to send through
    Method#call.  It adds tests for all of those, as well as tests for
    using Method#call to call define_method, lambda, and sym_procs
    (which didn't require code changes).

commit 98f919ed47a136c9a51c7ab5fa39ffb4965a1687
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-14 00:16:08 +0900

    The stdlib readline should raise Interrupt when pressing C-c

commit 70fe473c7dfee70d0e9ee7346c260493e3aceaf2
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-14 00:12:12 +0900

    * 2019-09-14 [ci skip]

commit 83ef23bd75bfee481ea259473742d99d95d2f954
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-14 00:11:01 +0900

    Revert "Use IO#getch to read one char in raw mode"

    This reverts commit 805b0a481132938638dbd32830cf5dca3910efb1.

commit e8fff0ec9cf16487986856c83354c9427e358d1d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-14 00:10:45 +0900

    Revert "Use IO#getbyte"

    This reverts commit 685f12bbca50ff9b7a16b3016b3b8b3f2ac8b796.

commit 06bbacc086d9a63c4443aafb19903b792c41c2e0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-14 00:10:34 +0900

    Revert "Support multibyte input"

    This reverts commit 6d9e54816f828983bcf383ce6fce287bd3ca05b9.

commit 7e0f56fb3dfcbc1b48f40c6c3b2c23c8e46a2341
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-13 19:48:44 +0900

    Name dynamically defined methods with line numbers

commit 5f5aca1b5fb95013f5b805f74ead4cfa143dc1d8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-13 17:17:21 +0900

    Moved ruby_node_name declaration to node.h

commit 2da6b328bb5124793a6420c55325f3106b615bb4
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-09-13 16:24:28 +0900

    introduce IBF_(MAJOR|MINOR)_VERSION.

    RubyVM::InstructionSequence.to_binary generates a bytecode binary
    representation. To check compatibility with binary and loading
    MRI we prepared major/minor version and compare them at loading
    time. However, development version of MRI can change this format
    but we can not increment minor version to make them consistent
    with Ruby's major/minor versions.

    To solve this issue, we introduce new minor version scheme
    (binary's minor_version = ruby's minor * 10000 + dev ver)
    and we can check incompatibility with older dev version.

commit 3c162df9d4a80bc09d88eeb36db7d59ea0034b1d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-13 11:15:52 +0900

    Dump some information

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2457

commit 69acf40b45823e6cc7d12476349a9251a307d1f0
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-13 00:35:29 +0900

    * 2019-09-13 [ci skip]

commit bcd49a4669bd88ab374f9eabdf15aec4f6fff917
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-13 00:34:53 +0900

    Upgrade benchmark_driver to v0.15.5

    Fixed new Struct-related keyword argument warnings

commit ac3e8834e030f62d2d313ec60cd7ed3c14c9ea5e
  Author: Akinori MUSHA <knu@idaemons.org>
  Date:   2019-09-12 20:15:03 +0900

    Document and test Enumerator.produce

    Co-authored-by: Victor Shepelev <zverok.offline@gmail.com>

commit 775037613bffe6f90e7af510b7f46a2ac10610be
  Author: Akinori MUSHA <knu@idaemons.org>
  Date:   2019-08-29 20:05:10 +0900

    Implement Enumerator.produce [Feature #14781]

commit 9f86e5ecb6c66226252bda0d8bdf304d64e69ee3
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-12 18:28:46 +0900

    Moved coverage.yml to https://github.com/ruby/actions [ci skip]

commit 515b1989b1093a4dddef83d0cda763c9ae6760e3
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-12 06:02:05 +0900

    Make NODE_ARYPTN layout consistent between Ripper and AST

    We are seeing SEGVs in CI:

      http://ci.rvm.jp/results/trunk-gc-asserts@ruby-sky1/2253563

    This is happening because Ripper constructs AST nodes differently than
    parse.y normally does.  Specifically in this case Ripper is assigning 3
    `VALUE` objects:

      https://github.com/ruby/ruby/blob/1febb6f4a14f7222c6d30250bfdc252d34238187/parse.y#L757-L761

    Where parse.y will normally assign other things:

      https://github.com/ruby/ruby/blob/1febb6f4a14f7222c6d30250bfdc252d34238187/parse.y#L11258-L11260

    The important one is the last one, the `struct rb_ary_pattern_info`. The
    mark function assumed that `NODE_ARYPTN` have a pointer to `struct
    rb_ary_pattern_info`, and used it:

      https://github.com/ruby/ruby/blob/1febb6f4a14f7222c6d30250bfdc252d34238187/node.c#L1269-L1274

    In the case of Ripper, `NODE_ARYPTN` doesn't point to an
    `rb_ary_pattern_info`, so the mark function would SEGV.  This commit
    changes Ripper so that its `NODE_ARYPTN` nodes also point at an
    `rb_ary_pattern_info`, and the mark function can continue with the same
    assumption.

commit 21994b7fd686f263544fcac1616ecf3189fb78b3
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-09-12 01:02:22 +0900

    Avoid rehashing keys in transform_values

    Previously, calling transform_values would call rb_hash_aset for each
    key, needing to rehash it and look up its location.

    Instead, we can use rb_hash_stlike_foreach_with_replace to replace the
    values as we iterate without rehashing the keys.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2452

commit 14e3731059246fcd093daa36fd0139d0287e633f
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-12 03:57:57 +0900

    Make sure WB executes after object is reachable

commit 1febb6f4a14f7222c6d30250bfdc252d34238187
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-12 03:21:40 +0900

    * 2019-09-12 [ci skip]

commit ed96c9f270829c7c07852f0aadcd88a58a13875b
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-12 03:17:35 +0900

    Emit missing keyword argument separation warnings for define_method

    Previously, the warning functions skipped warning in these cases.
    This removes the skipping, and uses a less descriptive warning
    instead.

    This affected both last argument to keyword warnings and keyword
    split warnings.

commit fba5bbc69545f6d45f7a2c649321a61f43a0b1a0
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-11 23:38:05 +0900

    Moved doxygen.yml to https://github.com/ruby/actions [ci skip]

commit fc3bfd521d4b2354e18bfe403a3b02bd00251d15
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-11 21:36:00 +0900

    Fixed the function signature to rb_rescue2

commit 343b0a281d1dd6e1ab7e6af4c48ad2e6d09a0071
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-11 16:17:04 +0900

    Made a short-circuit expression w/o result into an `if`-statement

commit 655c65d65b75a6ac733dfb8e42437e7c43b7cfe1
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-10 16:41:34 +0900

    &$$->nd_lit is uninitialized at this point

    See also https://travis-ci.org/ruby/ruby/jobs/583031687#L1874

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2444

commit 489676bd2049c0a8c9949bf09d3dfb2730a29736
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-11 09:35:06 +0900

    Add `--no-progress` to `aws s3` [ci skip]

    https://docs.aws.amazon.com/cli/latest/reference/s3/sync.html
    > --no-progress (boolean) File transfer progress is not displayed. This flag is only applied when the quiet and only-show-errors flags are not provided.

commit 91ee9584f9a3e8b8e5e0e9c2f1f2b229ca10323e
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-11 06:00:48 +0900

    Macros can't be expressions, so make a function

    Macros can't be expressions, that is a GNU extension (I didn't know
    that).  This commit converts the macro to a function so that everything
    will compile correctly on non-GNU compatible compilers.

commit 139510238bcbb8d7fd8022c23a603c51d2acbe2e
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-11 03:27:40 +0900

    WB needs to be executed after object is reachable

commit 721cab470606294e5b49ef75793a62becdf5cfb7
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-11 02:45:56 +0900

    * 2019-09-11 [ci skip]

commit 414a80d242796059d69e8980073b5420910cab50
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-11 02:44:49 +0900

    `NODE_MATCH` needs to be marked / allocated from marking bucket

    Fixes a test in RubySpec

commit 83ef58f264964f86e7276fdb146c108cc0d6abc0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-10 17:27:07 +0900

    [ruby/io-console] Suppress yet another warning on Windows

    https://github.com/ruby/io-console/commit/4e17c90788

commit b5ab918d0c7cdeac8f1b1d45842383ea5413699f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-10 17:22:06 +0900

    [ruby/io-console] Suppress warnings on Windows

    About unused variables and a function.

    https://github.com/ruby/io-console/commit/32baf54e7a

commit ad6cbc1d33d6013ef9b1d2ff9deb286956d9bcbc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-10 17:20:12 +0900

    Unused LONG_MAX_as_double

    LONG_MAX_as_double is not needed when long is small enough to be
    exactly representable as a double, e.g., IL32LLP64 platforms.

commit 487d290044c5876991d0b9c577bf77a667ec6b93
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-10 16:03:30 +0900

    oops

    Silly typo.

commit df1721c668cfd20a08ec6369de89ea314c1d4d19
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-10 14:37:17 +0900

    Fixed GCC version for diagnostic-pragmas

    "GCC diagnostic push/pop" seems appeared at gcc 4.6.

commit f5024de002fa82dfe5730b245ad24b8fc3a68424
  Author: Masaki Matsushita <glass.saga@gmail.com>
  Date:   2019-09-10 12:39:49 +0900

    Remove check of ai.protocol

    Solaris 10 returns addrinfo.ai_protocol as 0, not 6.

commit 20e428ec40ee1c83708b3ade6a0007ab2a435f83
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-10 12:22:26 +0900

    fix CentOS 6 compile error

    See also https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos6/ruby-master/log/20190910T003005Z.fail.html.gz

commit 8d3db4f26cbbc920c717dfa2784a467014b954a6
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-10 08:19:26 +0900

    Default to cc/c++ instead of gcc/g++ on OpenBSD

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2443

commit 0e9d56f5e73ed2fd8e7c858fdea7b7d5b905bb64
  Author: Masaki Matsushita <glass.saga@gmail.com>
  Date:   2019-09-10 09:57:31 +0900

    Support timeout for Addrinfo

    Addrinfo.getaddrinfo and .foreach now accepts :timeout in seconds as
    a keyword argument. If getaddrinfo_a(3) is available, the timeout will be
    applied for name resolution. Otherwise, it will be ignored.

    Socket.tcp accepts :resolv_timeout to use this feature.

    This commit is retry of 6382f5cc91ac9e36776bc854632d9a1237250da7.
    Test was failed on Solaris machines which don't have "http" in
    /etc/services. In this commit, use "ssh" instead.

commit 3678c371199d9a048589bf3da37f06223912dea5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-10 01:04:47 +0900

    [ruby/io-console] Added IO#check_winsize_changed on Windows

    https://github.com/ruby/io-console/commit/ee648fa8bb

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2440

commit 74790e2dc429daddc6996bc46cb2a0aae2a176e9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-10 00:01:06 +0900

    [ruby/io-console] Added scroll methods

    https://github.com/ruby/io-console/commit/83e70de8ab

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2440

commit c1412bd6d95805dea7335ef3cb60ac942b4773bf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-09 23:55:45 +0900

    [ruby/io-console] Added line/screen erase methods

    https://github.com/ruby/io-console/commit/e6344108a1

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2440

commit 9844a349bfdd5a97ae639e7798cc51aa897846fb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-09 23:53:05 +0900

    [ruby/io-console] Added IO#goto_column

    https://github.com/ruby/io-console/commit/143a9d5764

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2440

commit e8be056af92b2f13162567c057322a2c16797b79
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-09 23:51:44 +0900

    [ruby/io-console] Added relative cursor move methods

    https://github.com/ruby/io-console/commit/21d340e4a2

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2440

commit 3d9c7c28358110076abb2d77365eef805ddb896c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-09 23:48:47 +0900

    [ruby/io-console] Added IO#goto and IO#cursor= for VT

    https://github.com/ruby/io-console/commit/7f2b1b473d

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2440

commit 53ed4fb37632789db69815bb9b9df0e3572779ef
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-09 23:17:38 +0900

    [ruby/io-console] Added IO#cursor for VT

    https://github.com/ruby/io-console/commit/41a6a6cace

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2440

commit 803dc9e1e48325515bf7c5ce176cf2b5bc0792a9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-09 23:14:30 +0900

    [ruby/io-console] Added console_vt_response

    A function to query console info.

    https://github.com/ruby/io-console/commit/db75a07fa3

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2440

commit f4aa06c0ffbf23d68aaed46ce21208f431894eda
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 05:05:39 +0900

    [ruby/io-console] Drop fat gem support

    https://github.com/ruby/io-console/commit/972ceb081d

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2440

commit 00744a03d576f308d7fa586c2d04b5c1cb8fe3f4
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-10 07:20:54 +0900

    Update documentation for Exception [ci skip]

    Mostly from burdettelamar@yahoo.com (Burdette Lamar).

    Implements [Misc #16156]

commit d8a4af47a5e5f72be2cd2897712d1718013b2e4c
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-10 02:15:07 +0900

    Only use `add_mark_object` in Ripper

    This patch changes parse.y to only use `add_mark_object` in Ripper.
    Previously we were seeing a bug in write barrier verification.  I had
    changed `add_mark_object` to execute the write barrier, but the problem
    is that we had code like this:

    ```
    NEW_STR(add_mark_object(p, obj), loc)
    ```

    In this case, `add_mark_object` would execute the write barrier between
    the ast and `obj`, but the problem is that `obj` isn't actually
    reachable from the AST at the time the write barrier executed.
    `NEW_STR` can possibly call `malloc` which can kick a GC, and since
    `obj` isn't actually reachable from the AST at the time of WB execution,
    verification would fail.

    Basically the steps were like this:

    1. RB_OBJ_WRITTEN via `add_mark_object`
    2. Allocate node
    3. *Possibly* execute GC via malloc
    4. Write obj in to allocated node

    This patch changes the steps to:

    1. Allocate node
    2. *Possibly* execute GC via malloc
    3. Write obj in to allocated node
    4. RB_OBJ_WRITTEN

commit 4524780d1795e750e23896866eb447be2670ddcd
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-10 01:37:06 +0900

    Revert "Reverting node marking until I can fix GC problem."

    This reverts commit 092f31e7e23c0ee04df987f0c0f979d036971804.

commit 9b53a69d57ae64a28b4c7904a4590b04d91bbbf3
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-10 00:57:34 +0900

    * 2019-09-10 [ci skip]

commit 6d9e54816f828983bcf383ce6fce287bd3ca05b9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-08 22:34:01 +0900

    Support multibyte input

commit 685f12bbca50ff9b7a16b3016b3b8b3f2ac8b796
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-08 22:19:10 +0900

    Use IO#getbyte

commit 805b0a481132938638dbd32830cf5dca3910efb1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-08 21:04:46 +0900

    Use IO#getch to read one char in raw mode

commit 89c5d5a64e12cea23b230913b79c3d499bf30b12
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-09 13:19:33 +0900

    add minimaist C++ check

    This is a test extension so we basically want test failures rather
    than a configure breakage but if there is no C++ compiler, we need
    no test at all because there will be no chance for the tested
    header file to be used later.

    This makes it possible to build the ruby binary without any C++
    compiler installed in a build environment.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2434

commit 150f514e19125ce8239602dc9266c7f68166d671
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-09 11:13:31 +0900

    workaround for C++ 98 const union problem.

    Not the case of recent compilers, but compilers before C++11
    rejected ruby.h, like https://ci.appveyor.com/project/ruby/ruby/builds/27225706/job/qjca7dpe204dytbd

    This is supposedly because a struct with a member qualified with
    a const effectively deletes its default copy constructor, which
    is considered as being user-defined somehow.  Not sure where
    exactly is the phrase in the C++98 standard who allows such C /
    C++ incompatibility though.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2434

commit 042c436cd9cfaeee7a0d7b8e35bee8dec90e972d
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-07 18:46:37 +0900

    static member variables must explicitly be initialized

    These variables then get their room for storage.

    See also https://github.com/ruby/ruby/runs/214042030

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2434

commit 1364217bcdcf128de4586527042035d833349c15
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-07 18:41:34 +0900

    add missing dependency for .travis.yml

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2434

commit 92a87269945154344ba3fc96c0de63493e2fe6a1
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-07 17:48:02 +0900

    Revert "save committers' weekend from CI failures"

    This reverts commit 53d21087da078cf999cc4757b03b2ff0fab4c2cf.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2434

commit c4efbf663ea1849986383ca97bfc8c2609142c68
  Author: Masaki Matsushita <glass.saga@gmail.com>
  Date:   2019-09-09 20:30:45 +0900

    Revert "Support timeout for Addrinfo"

    This reverts commit 6382f5cc91ac9e36776bc854632d9a1237250da7.
    test failed on Solaris.

commit cce6cfbe486984c2c41d6b772a692ea87ad0222a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-09 20:24:03 +0900

    Make test-all and test-spec runnable on Android

    Calling some syscall functions such as Dir.chroot causes SIGSYS instead
    of EPERM on Android.
    This change skips all tests that stops the test-suite run.

commit 0691a748b6406670ef4cb52d0791b45033b7064e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-09 20:06:00 +0900

    Fix a typo [ci skip]

commit 551edf64bcbbbc84af59b5ae44a0820314b72777
  Author: Lars Kanis <lars@greiz-reinsdorf.de>
  Date:   2019-09-09 01:24:48 +0900

    Reline: Fix wrong variable name

    This raised a NameError before.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2438

commit 8c09de38c5f2dab324bcb30ab4a8db9bd55357b2
  Author: Masaki Matsushita <glass.saga@gmail.com>
  Date:   2019-09-09 18:44:42 +0900

    Fix expected ip_port

commit 0fb2457d794ee49701873584c80a6e1cace94b83
  Author: Masaki Matsushita <glass.saga@gmail.com>
  Date:   2019-09-09 18:35:19 +0900

    Fix service name for test

    change service name to fix failed test on Solaris

commit 461663f52a87bbae7f3713862a20a4aa6bd63e4c
  Author: Masaki Matsushita <glass.saga@gmail.com>
  Date:   2019-09-09 15:05:05 +0900

    Fix domain name for test

commit 61d90da25c027f896ddc0e71c7b17c67d4b12a97
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-09 12:51:56 +0900

    Fix invalid keyword argument separation warning for delegating calls

    This removes an invalid keyword argument separation warning for
    code such as:

    ```ruby
    def foo(arg)
      arg
    end
    kw = {}
    foo(*[1], **kw)
    ```

    This warning was caused because the remove_empty_keyword_hash
    was set based on a comparison with two variables, and in this
    case, one of the variables was updated after the check and we
    need to use the updated variable.

    Simplify things by just inlining the comparison.

commit 6382f5cc91ac9e36776bc854632d9a1237250da7
  Author: Masaki Matsushita <glass.saga@gmail.com>
  Date:   2018-12-31 12:17:39 +0900

    Support timeout for Addrinfo

    Addrinfo.getaddrinfo and .foreach now accepts :timeout in seconds as
    a keyword argument. If getaddrinfo_a(3) is available, the timeout will be
    applied for name resolution. Otherwise, it will be ignored.

    Socket.tcp accepts :resolv_timeout to use this feature.

commit fa79219356715e28529b721e81056ec69a998c4e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-09 02:34:34 +0900

    Add keyword argument separation tests for implicit/explicit super calls

    No code changes are necessary, but we didn't have as extensive
    tests for these calls previously.

commit d636feb6a6e1a2ff7ca39b7735514a06843e7aae
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-09 00:27:05 +0900

    * 2019-09-09 [ci skip]

commit 8d53b2cdf8e4f175876f184e4f74fb6125204cc8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-09 00:21:40 +0900

    Use target-specific variable instead of a conditional [ci skip]

    And test-rubyspec is deprecated.

commit 3ef76ce44a3308871e7b4d6158cc880a8dfa9949
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-08 21:22:25 +0900

    make-snapshot: -git option is no longer provided [ci skip]

commit b10940a839636cbd990cb2f8a6430fb39c50fb04
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-08 19:41:14 +0900

    Improve Proc#to_s specs

commit aedf6946a7e958dd00a272c08550790be9dd1c0d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-08 12:54:06 +0900

    Removed useless braces to suppress a warning

commit e9bc8b35c6c860e227627e3b0aab86b4f51c59af
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-08 03:26:09 +0900

    Behave ESC key correctly when vi command mode

commit 46bfe907f1d61217215bcd1a7da9dff258c63294
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-08 03:06:38 +0900

    compile.c (compile_hash): rewrite keyword splat handling

    and add some comments.
    (I confirm that `foo(**{})` allocates no hash object.)

commit 95297a15f19743db690d330d082636638313542b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-08 02:54:56 +0900

    compile.c (compile_hash): rewrite the compilation algorithm

    This is a similar refactoring to 8c908c989077c74eed26e02912b98362e509b8a3,
    but the target is compile_hash.

commit 35680298239f1cd02c19ab742a2116be37d24d90
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-07 22:06:58 +0900

    Remove .document and .gitignore from file list of rdoc.gemspec

commit 4f63634af1fdce87c842f79fcb489ff2f7e4fee8
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-08 01:21:19 +0900

    compile.c (NODE_OP_ASGN1): Remove unneeded DECL_ANCHOR

commit 2d017d612657ab2cffc320dcad679a8854b14a6b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-08 00:48:18 +0900

    make-snapshot: default to the toplevel directory

    As this tool has been intended to use in a working directory,
    assume that the toplevel directory is under the VCS, and SVN will
    no longer be canonical.

commit a3f5265fd104ec3812af6a918f375e23aa05a251
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-08 00:22:26 +0900

    parse.y: Use the correct alias for brace flag of hash literal

    nd_alen and nd_brace is the same field, but nd_brace is more suitable
    for this case.

commit 95f9d7c76d9e808099f89e5cf160306680dc5994
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-08 00:21:23 +0900

    compile.c (keyword_node_p): Refactor out keyword node checks

commit 86b74d1a7389ceaccdc2822b1bbe0a91dc50db99
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-08 00:11:50 +0900

    compile.c (compile_hash): Remove redundant check for NODE_ZLIST

    NODE_ZLIST case is handled in compile_hash, so iseq_compile_each0
    doesn't have to do the same check redundantly.

commit 050f67c9c634fc0064c49f79ecb49588676028ec
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 23:57:37 +0900

    compile.c (compile_hash): Simplify the keyword handling

    The length of NODE_LIST chain in NODE_HASH is always even because it
    represents key-value pairs.  There is no need to check for the
    odd-length case.

commit bb78c8367802335ec17c39b228e0f535b6e23cb4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 23:56:19 +0900

    compile.c (compile_hash): don't add a temporal array to mark_ary

    The array is just for a temporal buffer to create a hash, not stored in
    the final iseq.

commit 7cba9a84068e26d798bfe579607c27587302d67f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 23:55:51 +0900

    compile.c (compile_array): undef a temporal macro

commit b543f5b20fa992dfb62e65525394ee079ea5de57
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-08 00:23:56 +0900

    * 2019-09-08 [ci skip]

commit f3bae2c6cff8eff83114df0e96fd6c338c90ee91
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-08 00:21:42 +0900

    Touch copied cache files to make tarballs stable

commit 5a6954ba74adf190a64f91598667520135284a1c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 17:28:05 +0900

    Suppress detached head warning

commit ae8b9777424f11cbcb962db94958f1e8a3c11acd
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-07 23:13:46 +0900

    Avoid defining DISPATCH_ARCH_DEPEND_WAY macro

    when it's not used. This macro is not used when it's direct threaded code.

    This patch is purely for readability and has no impact for any behavior.

commit a9b63db3b6cd7cdf5ca48eafc784d4ed37b5fdac
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-07 22:22:30 +0900

    * remove trailing spaces. [ci skip]

commit 8c908c989077c74eed26e02912b98362e509b8a3
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 22:08:39 +0900

    compile.c (compile_array): rewrite the compilation algorithm

    The original code looks unnecessarily complicated (to me).
    Also, it creates a pre-allocated array only for the prefix of the array.

    The new code optimizes not only the prefix but also the subsequence that
    is longer than 0x40 elements.

        # not optimized
        10000000.times { [1+1, 1,2,3,4,...,63]    } # 2.12 sec.
        # (1+1; push 1; push 2; ...; puts 63; newarray 64; concatarray)

        # optimized
        10000000.times { [1+1, 1,2,3,4,...,63,64] } # 1.46 sec.
        # (1+1; newarray 1; putobject [1,2,3,...,64]; concatarray)

commit 07876bf6dbdab5a8a633173f91ee1603d617afb0
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 20:24:24 +0900

    compile.c (compile_hash): refactoring

    The same refactoring as to b601b13c7267889bf394146353c5f2b0eb488278.

commit 187328b7037e54f1f5c2558d84215f3d5d3fbdee
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 18:54:01 +0900

    compile.c (compile_array): refactoring

    "popped" case can be so simple, so this change moves the branch to the
    first, instead of scattering `if (popped)` branches to the main part.
    Also, the return value "len" is not used.  So it returns just 0 or 1.

commit 324dd9d01f0c97631a2588f63231bcb651844cca
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-09-07 19:53:07 +0900

    armv7l and armv7l are the same platform, generalize to armv7

    [Bug #16007]

commit 5511213487f9e6c6bd23a227ee64f9c541680f02
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 17:25:52 +0900

    Exit gently if no VCS found but --suppress_not_found is given

commit 5b5c9b61015434a253bf1eee65c7f05dc870b105
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 17:23:42 +0900

    Removed no longer used variable

commit a2260bd636646cde486afeebe5a0a7ef5ec78a4e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 16:45:49 +0900

    compile.c: Separate compile_list to two functions for Array and Hash

    compile_list was for the compilation of Array literal and Hash literal.
    I guess it was originally reasonable to handle them in one function, but
    now, compilation of Array is very different from Hash.  So the function
    was complicated by many branches for Array and Hash.

    This change separates the function to two ones for Array and Hash.

commit 2f2f8107d0d21f5ebaaaf3b2d7ed6d09dfec91d5
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 16:26:38 +0900

    compile.c (compile_list): allow an odd-length hidden array literal

    An array literal [1,2,...,301] was compiled to the following iseq:

      duparray [1,2,...,300]
      putobject [301]
      concatarray

    The Array literal optimization took every two elements maybe because it
    must handle not only Array but also Hash.
    Now the optimization takes each element if it is an Array literal.  So
    the new iseq is: duparray [1,2,...,301].

commit 1e008105bc4576af46036f1c73f96f7f93bee319
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 16:01:16 +0900

    compile.c (compile_list): emit newarraykwsplat only at the last chunk

    `[{}, {}, {}, ..., {}, *{}]` is wrongly created.

    A big array literal is created and concatenated for every 256 elements.
    The newarraykwsplat must be emitted only at the last chunk.

commit c725a4e48fc30cb60e539e86c917698209184345
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-07 14:02:35 +0900

    Check github.repository in doxygen.yml [ci skip]

commit a7a2be7a31b66b05a118fb41dabf0cb965f4a9c0
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 13:51:18 +0900

    Rename some function/definition names that handles NODE_LIST

    from array to list.
    Follow up to ac50ac03aeb210763730cdc45f230e236519223d

commit 99c9431ea1cc538489c3da70f52121aa8bc0800b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 10:42:00 +0900

    Rename NODE_ARRAY to NODE_LIST to reflect its actual use cases

    and NODE_ZARRAY to NODE_ZLIST.

    NODE_ARRAY is used not only by an Array literal, but also the contents
    of Hash literals, method call arguments, dynamic string literals, etc.
    In addition, the structure of NODE_ARRAY is a linked list, not an array.

    This is very confusing, so I believe `NODE_LIST` is a better name.

commit f223ab47e6e41e4a5f0307a5202b4f5c534a3596
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-07 13:49:47 +0900

    [DOC] Update output of Ripper.sexp [ci skip]

commit 8bfc46a9a3ba16f58aa68d8191048df7f0720f04
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 11:59:19 +0900

    Fixed wrong usage of file2lastrev.rb

commit 8b290448e3233e03b01288c179eb49bee63d1302
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 11:56:23 +0900

    Assign to vcs in new_vcs block not to use rescue result

commit 59e29389a8c3501e71444fed2c10ba6821e63625
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 11:47:21 +0900

    Fixed wrong method at 71f7b0421ac

commit 146677a1e76fd33d86894d0430ea137dbc63579a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-07 05:37:31 +0900

    Fix keyword argument warnings in the tests from Class#new

    This were previously hidden because calls from C were not warned.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2432

commit 434582d888ad2982ec01d9b5a1e1afe8480312ab
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-07 05:37:09 +0900

    Fix Tempfile.open to correctly pass keywords to Tempfile.new

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2432

commit 56036815207b803151b0c7215da3a880bbad6df1
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-07 05:35:50 +0900

    Enable keyword argument warnings when called from C

    Previously, Ruby did not warn in these cases, and in some cases
    did not have the same behavior.  This makes calls from C handled
    the same way as calls from Ruby.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2432

commit 80e679ef2d6f370e853e37053c73930c65b5e76c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-07 05:33:19 +0900

    Fix keyword argument separation warnings for enumerators

    This makes objects created via #to_enum and related methods pass
    keyword arguments as keywords.

    To implement this, add a kw_splat member of struct enumerator and
    struct iter_method_arg, and add rb_block_call_kw, which is the
    same as rb_block_call_kw with a flag for whether the last argument
    is keyword options.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2432

commit 37a2c660aa4f4aacfd6a56651b10124e3ac01321
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-06 11:25:34 +0900

    Convert keyword argument to required positional hash argument for Class#new, Method#call, UnboundMethod#bind_call

    Also add keyword argument separation warnings for Class#new and Method#call.

    To allow for keyword argument to required positional hash conversion in
    cfuncs, add a vm frame flag indicating the cfunc was called with an empty
    keyword hash (which was removed before calling the cfunc).  The cfunc can
    check this frame flag and add back an empty hash if it is passing its
    arguments to another Ruby method.  Add rb_empty_keyword_given_p function
    for checking if called with an empty keyword hash, and
    rb_add_empty_keyword for adding back an empty hash to argv.

    All of this empty keyword argument support is only for 2.7.  It will be
    removed in 3.0 as Ruby 3 will not convert empty keyword arguments to
    required positional hash arguments.  Comment all of the relevant code
    to make it obvious this is expected to be removed.

    Add rb_funcallv_kw as an public C-API function, just like rb_funcallv
    but with a keyword flag.  This is used by rb_obj_call_init (internals
    of Class#new).  This also required expected call_type enum with
    CALL_FCALL_KW, similar to the recent addition of CALL_PUBLIC_KW.

    Add rb_vm_call_kw as a internal function, used by call_method_data
    (internals of Method#call and UnboundMethod#bind_call). Add tests
    for UnboundMethod#bind_call keyword handling.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2432

commit 3fafc549ba909e986917f2b6b96eb14624c26329
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 11:35:00 +0900

    Fix error when checking file modified with git-svn

commit d783609ac3b2901eb664dd37f964c8fd805dca40
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 11:33:26 +0900

    Get rid of overwriting revision.h and creating .revision.time

commit 5118aa2d58f70a2f1349daa784705d20b2928869
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 01:02:37 +0900

    Use `git describe --contains` for tags

commit 3890c9eeee2322b8bf81c04517a4714de77e49ff
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 01:01:52 +0900

    Added more debug outputs from VCS::GIT

commit 71f7b0421acff068b94953f4d3f5b4d987ce5350
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 01:00:14 +0900

    Refined file2lastrev.rb options

    * check --srcdir if given twice or more
    * falls back to the current working directory if no --srcdir
      option is given.
    * define common VCS options.

commit 799de9122e2bd9c2f4cc7e0611f6f8313876ca1d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-07 00:36:08 +0900

    Separated VCS.define_options for common VCS options

commit 4068be1d9f60d8a9ac063c4871986dc26bdd0d56
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-09-07 09:14:15 +0900

    appveyor.yml - msys2 update code

    As AppVeyor's MSYS2 install gets out of date, this may require 'special' code...

    This code also adds updating the database, which currently updates gcc from 9.1.0 to 9.2.0.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2433

commit 3bb3fa4051c754af1a26f023a902d1ce67fe964e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-07 09:18:38 +0900

    eval.c (rb_rescue2): fix a probably wrong return

    This return skips `va_end(ap)`, which is not intended, I guess.
    Coverity Scan found this.

commit 9c0626fa909b57e43a476aa78171e140ae09d31f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-07 09:14:32 +0900

    Upgrade benchmark-driver to v0.15.4

    Fixing a bug on Windows introduced in v0.15.0

commit 258843106f343d05732499dd1832958eb1bf64f0
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-05 11:08:54 +0900

    Fix SortedSet subclasses that override initialize

    The first time SortedSet#initialize is called, it overwrites
    itself, then recalls #initialize, which results in calling the
    subclass's initialize, not the current initialize.

    Just inline the default initialize behavior to avoid this issue.

    No test for this as it can only be triggered the very first time
    that SortedSet#initialize is called.

    Fixes [Bug #15830]

commit 2d076dd5ac8fc1102939f04236878446348599d0
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-07 00:45:44 +0900

    * 2019-09-07 [ci skip]

commit bb53ddfe0e826bcb6a7ff823c20ac3e7599500b1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-07 00:43:26 +0900

    Upgrade benchmark-driver to v0.15.3

    It got some nice features for better support of
    benchmark_driver-output-charty, Windows, ridk, and rbenv.

commit ade1283ca276f7d589ffd3539fbc7b9817f682d5
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-06 23:18:26 +0900

    Fix a use-after-free bug by avoiding rb_str_new_frozen

    `str2 = rb_str_new_frozen(str1)` seems to make str1 a shared string that
    refers to str2, but str2 is not marked as STR_IS_SHARED_M nor
    STR_NOFREE.
    `rb_fstring(str2)` frees str2's ptr because it is not marked, and the
    free'ed pointer is the same as str1's ptr.
    After that, accessing str1 may cause use-after-free memory corruption.

    I guess this is a bug of rb_str_new_frozen, but I'm completely unsure
    what it should be; the string states and flags are not documented.
    So, this is a workaround for [Bug #16136].  I confirmed that rspec of
    activeadmin runs gracefully.

commit 055b44109316bfc5461d6ac820619f893cea536c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-06 22:15:36 +0900

    VCS::GIT no longer accepts remote repository

commit 733aa2f8b578d03bbcb91d2f496b01e3b990c7e8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-06 18:43:10 +0900

    Stop setting same flags as cflags to cxxflags

commit dd26c9f333b9681b3b14cf01969cda9d77368cbc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-06 18:35:37 +0900

    Check clang++ as CXX when CXX is bare clang without suffix

commit 53d21087da078cf999cc4757b03b2ff0fab4c2cf
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-06 18:17:47 +0900

    save committers' weekend from CI failures

    Kill the failing tests.

commit 99bfa6c16562f7af7fb6daf3cf89680ef30d4163
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-06 17:47:24 +0900

    Try to fix compile error on win32

    https://github.com/ruby/ruby/runs/213995386#step:7:810
    ```
    cxxanyargs.cpp
    C:\Program Files (x86)\Windows Kits\10\include\10.0.17763.0\ucrt\corecrt_malloc.h(54): error C2485: '__restrict': unrecognized extended attribute
    ```

commit 1851dc269cb7a957fcb1fe2e97b7b76c2a52d096
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-06 16:50:57 +0900

    avoid name mangling

    Otherwise the dynamic linker cannot find this function.
    See also https://ci.appveyor.com/project/ruby/ruby/builds/27224231/job/4pg6lxlsnsjotu2l

commit 2aa4fb57d103b8deec43de6735e23a1c9b8c8fa0
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-06 16:42:45 +0900

    nullptr is a C++11ism.

    Should use numeric 0 for maximum portability.
    See also https://travis-ci.org/ruby/ruby/jobs/581543798

commit 7516c48b2744b563a6cb420c23c1ff8bdea72da6
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-06 16:33:30 +0900

    fix Visual Studio compilation error

    See also https://github.com/ruby/ruby/runs/213964487

commit 04f570e266ba7f9d155ceea943043532a7e2f859
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-06 15:50:23 +0900

    add test for cxxanyargs.hpp

commit a569bc09e25a2ba813d0bec1228d9ff65330a3db
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-05 23:50:45 +0900

    add include/ruby/backward/cxxanyargs.hpp

    Compilation of extension libraries written in C++ are reportedly
    broken due to https://github.com/ruby/ruby/pull/2404

    The root cause of this issue was that the definition of ANYARGS
    differ between C and C++, and that of C++ is incompatible with the
    updated ones.

    We are using the incompatibility against itself.  In C++ two distinct
    function prototypes can be overloaded.  We provide the old, ANYARGSed
    prototypes in addition to the current granular ones; and let the
    older ones warn about types.

commit d6a94cffda6763c7ad3ac3830dcfe6a87e405fe4
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-06 10:38:40 +0900

    doxygen update [ci skip]

commit 41b7c335d3ede90e7bc1b469de242df392dc6adc
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-06 13:04:36 +0900

    Revert "Add a temporal stack dumper for debugging on trunk-mjit"

    This reverts commit 433c9c00d96124e3b416d0a20ff795b0ad4273fa.

    Successfully captured some traces, and
    3b60e5e6bc2c84b971bea9c8312eb5d33ada2ff5 seems to fix the issue.

commit 3b60e5e6bc2c84b971bea9c8312eb5d33ada2ff5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-06 10:34:33 +0900

    Try shrinking tested VM stack max

commit dd81af7b6a7539473b6d7a7e35637b4a7d986523
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-06 09:50:59 +0900

    * remove trailing spaces. [ci skip]

commit d3cf0eb2142902245b7d45b557f73bbb1f02ba5a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-06 08:06:38 +0900

    Mark rb_warn_keyword_to_last_hash as static inline

    mame pointed out that vm_args.c is included in vm_insnhelper.c.

commit 5045fe6017996a9ce2562667284b392e01b5759e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-06 08:02:45 +0900

    Mark rb_warn_keyword_to_last_hash at MJIT_FUNC_EXPORTED

    Hopefully this fixes MJIT errors on AppVeyor.

commit 729de9ee68b868b43375eb4339b2d59f0bb8e7e8
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-06 05:07:28 +0900

    Convert empty keyword hash to required positional argument and warn for method_missing

    This is the same as the bmethod, sym proc, and send cases,
    where we don't remove the keyword splat, so later code can
    move it to a required positional parameter and warn.

commit e220b467ef3faf24140cba572b2d67973391aaa5
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-06 05:03:09 +0900

    Convert empty keyword hash to required positional argument and warn for sym procs

    This is the same as the bmethod and send cases, where we don't
    remove the keyword splat, so later code can move it to to a
    a required positional parameter and warn.

commit e2878a96f77978b224f8461244cd3e1efc248d83
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-06 04:43:06 +0900

    Convert empty keyword hash to required positional argument and warn for lambda and bmethod

    The lambda case is similar to the attr_writer case, except we have
    to determine the number of required parameters from the iseq
    instead of being able to assume a single required parameter.

    This fixes a lot of lambda tests which were switched to require
    warnings for all usage of keyword arguments.  Similar to method
    handling, we do not warn when passing keyword arguments to
    lambdas that do not accept keyword arguments, the argument is
    just passed as a positional hash in that case, unless it is empty.
    If it is empty and not the final required parameter, then we
    ignore it.  If it is empty and the final required parameter, then
    we pass it for backwards compatibility and emit a warning, as in
    Ruby 3 we will not pass it.

    The bmethod case is similar to the send case, in that we do not
    want to remove empty keyword splats in vm_call_bmethod, as that
    prevents later call handling from moving them to required
    positional arguments and warning.

commit e7274a8ec43b5b20e42842e730dbabae58d2e6a2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-06 04:25:14 +0900

    Convert empty keyword hash to required positional argument and warn

    In general, we want to ignore empty keyword hashes.  The only case
    where we want to allow them for backwards compatibility is when
    they are necessary to satisfy the final required positional argument.
    In that case, we want to not ignore them, but we do want to warn,
    as that will be going away in Ruby 3.

    This commit implements this support for regular methods and
    attr_writer methods.

    In order to allow send to forward arguments correctly, send no
    longer removes empty keyword hashes.  It is the responsibility of
    the final method to remove the empty keyword hashes now.  This
    change was necessary as otherwise send could remove the empty
    keyword hashes before the regular or attr_writer methods could
    move them to required positional arguments.

    For completeness, add tests for keyword handling regular
    methods calls.

    This makes rb_warn_keyword_to_last_hash non-static in vm_args.c
    so it can be reused in vm_insnhelper.c, and also moves declarations
    before statements in the rb_warn_* functions in vm_args.c.

commit d1ef73b59cede58f2173fa0f4ff7480a820f25d6
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-06 02:36:28 +0900

    Always remove empty keyword hashes when calling methods

    While doing so is not backwards compatible with Ruby 2.6, it is
    necessary for generic argument forwarding to work for all methods:

    ```ruby
    def foo(*args, **kw, &block)
      bar(*args, **kw, &block)
    end
    ```

    If you do not remove empty keyword hashes, and bar does not accept
    keyword arguments, then a call to foo without keyword arguments
    calls bar with an extra positional empty hash argument.

commit 55b96c5d2d7d8bcc2953484bd2f9c9519b252dae
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 19:29:25 +0900

    Add a keyword-to-last-hash warning for some case of define_method method

    and lambda.

    When define_method is a simple iseq (`define_method(:m) {|x| ... }`),
    passing keywords to it (`m(**kw)`) didn't print a warning.

commit dd83f7bf98764b27385735f6f39dd090dc4854f9
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 19:07:05 +0900

    define_method should not drop the empty keyword hash

    Similar to 38e9c1bc35d5549575fbb263afff560e97db068e

commit 70f2780892330f8d1b612002c437fc2ca739fc7f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 18:57:19 +0900

    vm_call_bmethod should not drop the empty keyword hash

    Similar to 38e9c1bc35d5549575fbb263afff560e97db068e

commit 252e2990099557a54577ad8915b689761117cd7a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 18:54:26 +0900

    vm_call_opt_send should not drop the empty keyword hash

    Now the mechanism that conveys kw_splat flag is gradually established,
    so the hack to drop the empty keyword hash is not needed for
    vm_call_opt_send.

commit 4615886c76c0e906a349440ac7e232ad0ba5ce30
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 18:52:22 +0900

    test_method_missing_kwsplat should call the target directly

    not via Object#send which uses a fast path vm_call_opt_send.

commit acee6302419f02792ec331d384f430c5fc6bdb70
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 18:34:07 +0900

    vm_insnhelper.c: Do not read `ci->flag` after CALLER_SETUP_ARG

    Actually, the following call is wrongly warned without this change.

    ```
    class C
      def method_missing(x, *args, **opt)
      end
    end
    C.new.foo(k: 1)
      # warning: The last argument is used as the keyword parameter
      # warning: for `method_missing' defined here
    ```

commit eda8dcea164b561359f638b1489d0ab12659c9a2
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 17:31:00 +0900

    Add a comment that some ci->flag is inconsistent after CALLER_SETUP_ARG

commit 0bfe3bf4d1a2cf6659a99c7466c733cf922ee0e0
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 17:03:38 +0900

    Ignore an empty keyword splat for attr_reader/writer methods

commit 437ff408790d5426e0ee03a4b22171bf745471a7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 16:54:43 +0900

    C method should accept a keyword hash (for compatibility with 2.6)

commit c5555e2eb8631e649cc9377f0bd75ebc2788cc7d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 16:27:26 +0900

    CALLER_SETUP_ARG removes an empty keyword hash from argv

    ...only when a "remove_empty_keyword_hash" flag is specified.

    After CALLER_SETUP_ARG is called, `ci->flag & VM_CALL_KW_SPLAT` must not
    be used.  Instead. use `calling->kw_splat`.  This is because
    CALLER_SETUP_ARG may modify argv and update `calling->kw_splat`, and
    `ci->flag & VM_CALL_KW_SPLAT` may be inconsistent with the result.

commit a23ddf7ff58ec77548d2ecd7f9f202aa3eff9fc7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 16:24:46 +0900

    vm_argc.c (vm_caller_setup_arg_kw): "cfunc" argument is no longer used

commit 030b8e5edf1056e59c37bc52ed6f4deca7e8ac41
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 12:28:36 +0900

    Set calling->kw_splat = 1 in vm_caller_setup_arg_kw

    There are two styles that argv contains keyword arguments: one is
    VM_CALL_KWARG which contains value elements in argv (to avoid a hash
    object creation if possible), and the other is VM_CALL_KW_SPLAT which
    contains one last hash in argv.

    vm_caller_setup_arg_kw translates argv from the VM_CALL_KWARG style to
    the VM_CALL_KW_SPLAT style.
    `calling->kw_splat` means that argv is the VM_CALL_KW_SPLAT style.

    So, instead of setting `calling->kw_splat` at many places, it would be
    better to do so when vm_caller_setup_arg_kw is called.

commit 1fffd33189ddb4dfdefe2ada09ec884f89e305ce
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-05 07:47:53 +0900

    Fix passing keywords without splats to sym procs, define_method, and method_missing

commit 6f9b86616a8ad60cfed2979e2a0f8398a12e7c85
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-04 06:54:37 +0900

    Make Symbol#to_proc calls handle keyword arguments

    Make rb_sym_proc_call take a flag for whether a keyword argument
    is used, and use the new rb_funcall_with_block_kw function to
    pass that information.

commit 38dae1d510b931516ba1229a1ffbe5f6e470e292
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-04 06:53:16 +0900

    If removing an empty keyword splat hash, unset the kw_splat flag

    Otherwise the last positional hash could be considered as the
    keyword arguments.

commit 7fc874bf4cbdd87b3d6fe05dc5959175f3fe94b8
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-04 06:49:03 +0900

    Add rb_funcall_with_block_kw

    This is needed for C functions to call methods with keyword arguments.
    This is a copy of rb_funcall_with_block with an extra argument for
    the keyword flag.

    There isn't a clean way to implement this that doesn't involve
    changing a lot of function signatures, because rb_call doesn't
    support a way to mark that the call has keyword arguments.  So hack
    this in using a CALL_PUBLIC_KW call_type, which we switch for
    CALL_PUBLIC later in the call stack.

    We do need to modify rm_vm_call0 to take an argument for whether
    keyword arguments are used, since the call_type is no longer
    available at that point.  Use the passed in value to set the
    appropriate keyword flag in both calling and ci_entry.

commit e3cb3e11af4323aba002a84044375180dd24248c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-04 03:55:32 +0900

    Set VM_FRAME_FLAG_CFRAME_KW if kw_splat set in vm_yield_with_cfunc

commit fd2ef1a9bfa489842472d183ea10b6fd9838c460
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-04 03:50:46 +0900

    Add VM_NO_KEYWORDS

    I think this is easier to read than using literal 0 with comments
    in every case where it is used.

commit ce04392d8d4f8cf14c70bbf1ad3544c7db4e1671
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-04 01:32:42 +0900

    Propagate kw_splat information

    The kw_splat flag is whether the original call passes keyword or not.
    Some types of methods (e.g., bmethod and sym_proc) drops the
    information.  This change tries to propagate the flag to the final
    callee, as far as I can.

commit 3754e155309ed430250781c616a6e52b54ef511d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-29 22:07:45 +0900

    Warn local variables which conflict with new numbered parameters

commit 092f31e7e23c0ee04df987f0c0f979d036971804
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-06 04:44:23 +0900

    Reverting node marking until I can fix GC problem.

    Looks like we're getting WB misses during stressful GC on startup.  I am
    investigating.

commit f211ab20157a840770567ea182b1372e339cd82a
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-06 03:37:03 +0900

    I forgot to add `break` in my case statements

    Give me a break.

commit 8f096226e1b76f95f4d853d3dea2bc75eeeb5244
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-06 03:04:43 +0900

    Stash tmpbuffer inside internal structs

    I guess those AST node were actually used for something, so we'd better
    not touch them.  Instead this commit just puts the tmpbuffer inside a
    different internal struct so that we can mark them.

commit 8cd845aa5b69e49c1092a482f8c14f85f899e038
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-05 09:00:09 +0900

    add debugging code to the mark function

commit 01aa2462b5abb6833af83f47961932ebca587573
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-05 08:21:05 +0900

    lazily allocate the mark array

commit 429ed8d587423414fbbf2f562479c69562d52598
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-05 06:37:13 +0900

    Don't change DSTR nodes to ARRAY nodes

    DSTR nodes are allocated in to the "markable" bucket where ARRAY nodes
    are not.  Switching buckets can cause errors during GC.

commit 545b6db3fb367944f72cee5d41892eed63574634
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-05 01:38:17 +0900

    Create two buckets for allocating NODE structs

    This commit adds two buckets for allocating NODE structs, then allocates
    "markable" NODE objects from one bucket.  The reason to do this is so
    when the AST mark function scans nodes for VALUE objects to mark, we
    only scan NODE objects that we know to reference VALUE objects.  If we
    *did not* divide the objects, then the mark function spends too much
    time scanning objects that don't contain any references.

commit f0fd1c0cd8d34b870a3011a36f5179d1b5f3547d
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-05 08:00:19 +0900

    Stash the imemo buf at the end of the ID list

    Now we can reach the ID table buffer from the id table itself, so when
    SCOPE nodes are marked we can keep the buffers alive.  This eliminates
    the need for the "mark array" during normal parse / compile (IOW *not*
    Ripper).

commit 64817a7cfd4a258b45356e6da8fbdd0040b3231b
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-09-04 06:01:07 +0900

    Mark some tmpbufs via node objects

    This way we don't need to add the tmpbufs to a Ruby array for marking

commit 581fcde0884e493206b04b3e6b7a069b941dfe46
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-30 07:22:41 +0900

    Directly mark node objects instead of using a mark array

    This patch changes the AST mark function so that it will walk through
    nodes in the NODE buffer marking Ruby objects rather than using a mark
    array to guarantee liveness.  The reason I want to do this is so that
    when compaction happens on major GCs, node objects will have their
    references pinned (or possibly we can update them correctly).

commit 70d3596a4a2ef023243bf4805ce2a9cd6fdc0487
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-06 01:58:03 +0900

    * 2019-09-06 [ci skip]

commit c6464c44c02fdbb597ca8027af0bc0db28d56f66
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-05 04:00:25 +0900

    Fix code locations of array node inside hash node when multiple kw splats

    This is broken at least since 2.5 (I didn't check earlier versions).
    It resulted in failure in test_ast.rb when the tests were added before
    the parser change.

    Basically, in remove_duplicate_keys, if the node is modified, set
    the location information to the previous location information. The
    removal of keys should not affect the location in the code.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2428

commit 1d5066efb08cbb328ba528a5f8be1708584b659f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-05 02:54:12 +0900

    Make m(**{}) mean call without keywords

    Previously, **{} was removed by the parser:

    ```
    $ ruby --dump=parse -e '{**{}}'
     @ NODE_SCOPE (line: 1, location: (1,0)-(1,6))
     +- nd_tbl: (empty)
     +- nd_args:
     |   (null node)
     +- nd_body:
         @ NODE_HASH (line: 1, location: (1,0)-(1,6))*
         +- nd_brace: 1 (hash literal)
         +- nd_head:
             (null node)
    ```

    Since it was removed by the parser, the compiler did not know
    about it, and `m(**{})` was therefore treated as `m()`.

    This modifies the parser to not remove the `**{}`.  A simple
    approach for this is fairly simple by just removing a few
    lines from the parser, but that would cause two hash
    allocations every time it was used.  The approach taken here
    modifies both the parser and the compiler, and results in `**{}`
    not allocating any hashes in the usual case.

    The basic idea is we use a literal node in the parser containing
    a frozen empty hash literal.  In the compiler, we recognize when
    that is used, and if it is the only keyword present, we just
    push it onto the VM stack (no creation of a new hash or merging
    of keywords).  If it is the first keyword present, we push a
    new empty hash onto the VM stack, so that later keywords can
    merge into it.  If it is not the first keyword present, we can
    ignore it, since the there is no reason to merge an empty hash
    into the existing hash.

    Example instructions for `m(**{})`

    Before (note ARGS_SIMPLE):

    ```
    == disasm: #<ISeq:<main>@-e:1 (1,0)-(1,7)> (catch: FALSE)
    0000 putself                                                          (   1)[Li]
    0001 opt_send_without_block       <callinfo!mid:m, argc:0, FCALL|ARGS_SIMPLE>, <callcache>
    0004 leave
    ```

    After (note putobject and KW_SPLAT):

    ```
    == disasm: #<ISeq:<main>@-e:1 (1,0)-(1,7)> (catch: FALSE)
    0000 putself                                                          (   1)[Li]
    0001 putobject                    {}
    0003 opt_send_without_block       <callinfo!mid:m, argc:1, FCALL|KW_SPLAT>, <callcache>
    0006 leave
    ```

    Example instructions for `m(**h, **{})`

    Before and After (no change):

    ```
    == disasm: #<ISeq:<main>@-e:1 (1,0)-(1,12)> (catch: FALSE)
    0000 putself                                                          (   1)[Li]
    0001 putspecialobject             1
    0003 newhash                      0
    0005 putself
    0006 opt_send_without_block       <callinfo!mid:h, argc:0, FCALL|VCALL|ARGS_SIMPLE>, <callcache>
    0009 opt_send_without_block       <callinfo!mid:core#hash_merge_kwd, argc:2, ARGS_SIMPLE>, <callcache>
    0012 opt_send_without_block       <callinfo!mid:m, argc:1, FCALL|KW_SPLAT>, <callcache>
    0015 leave
    ```

    Example instructions for `m(**{}, **h)`

    Before:

    ```
    == disasm: #<ISeq:<main>@-e:1 (1,0)-(1,12)> (catch: FALSE)
    0000 putself                                                          (   1)[Li]
    0001 putspecialobject             1
    0003 newhash                      0
    0005 putself
    0006 opt_send_without_block       <callinfo!mid:h, argc:0, FCALL|VCALL|ARGS_SIMPLE>, <callcache>
    0009 opt_send_without_block       <callinfo!mid:core#hash_merge_kwd, argc:2, ARGS_SIMPLE>, <callcache>
    0012 opt_send_without_block       <callinfo!mid:m, argc:1, FCALL|KW_SPLAT>, <callcache>
    0015 leave
    ```

    After (basically the same except for the addition of swap):

    ```
    == disasm: #<ISeq:<main>@-e:1 (1,0)-(1,12)> (catch: FALSE)
    0000 putself                                                          (   1)[Li]
    0001 newhash                      0
    0003 putspecialobject             1
    0005 swap
    0006 putself
    0007 opt_send_without_block       <callinfo!mid:h, argc:0, FCALL|VCALL|ARGS_SIMPLE>, <callcache>
    0010 opt_send_without_block       <callinfo!mid:core#hash_merge_kwd, argc:2, ARGS_SIMPLE>, <callcache>
    0013 opt_send_without_block       <callinfo!mid:m, argc:1, FCALL|KW_SPLAT>, <callcache>
    0016 leave
    ```

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2428

commit 433c9c00d96124e3b416d0a20ff795b0ad4273fa
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-05 22:14:01 +0900

    Add a temporal stack dumper for debugging on trunk-mjit

    This must be definitely removed after we collect the stack traces :-)
    http://ci.rvm.jp/results/trunk-mjit@silicon-docker/2245710

commit 0036aa35321b036be6e49e07b19f92c061ca4135
  Author: yuuji.yaginuma <yuuji.yaginuma@gmail.com>
  Date:   2019-09-05 08:33:43 +0900

    Add version that FreeBSD supports `CLOCK_PROCESS_CPUTIME_ID` [ci skip]

    Seems FreeBSD already supported `CLOCK_PROCESS_CPUTIME_ID`.
    That added by https://reviews.freebsd.org/rS239347 and the doc was updated
    by https://reviews.freebsd.org/rS315694.

    I confirmed `CLOCK_PROCESS_CPUTIME_ID` constant exists in 9.3.0 branch.
    https://github.com/freebsd/freebsd/blob/release/9.3.0/sys/sys/time.h#L269

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2429

commit 1c4af1a77fb2dad27d523fe5d97ea4a27b145e3c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-23 18:40:27 +0900

    Add tests for `File.absolute_path?`

    [Feature #15868]

commit 2a166cfea22b90e39e3fe9bafab6b806ed4813f6
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-09-05 20:00:50 +0900

    Add `File.absolute_path?` (#2198)

    In order to check whether a path is absolute or not in a portable way.

    [Feature #15868]

commit d9e6315177be2a1264213a1e7cb215312a23384a
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-23 00:36:29 +0900

    [rubygems/rubygems] Bump rubocop to 0.74.0 and fix new offenses

    https://github.com/rubygems/rubygems/commit/d4fc383497

commit 0b9b0774c3dc0c4113335a57717bbc9d3d9595e8
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-09-03 03:36:08 +0900

    [rubygems/rubygems] Minor fix

    https://github.com/rubygems/rubygems/commit/95c1f4e179

commit 565828a778ab57affad9216721659a489176bf2d
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-24 07:41:44 +0900

    [rubygems/rubygems] Fix Layout/SpaceAroundOperators: Operator = should be surrounded by a single space.

    https://github.com/rubygems/rubygems/commit/eaa38ebeb1

commit 73574756f944280b920322d0034772c9aeb2bdac
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-24 06:21:57 +0900

    [rubygems/rubygems] Add missing parentheses

    https://github.com/rubygems/rubygems/commit/f5972338e0

commit 92be07b1e1a9ca3b0e2588817629c23ab1201701
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-24 06:19:54 +0900

    [rubygems/rubygems] Remove unnecessary gem_name method

    https://github.com/rubygems/rubygems/commit/d1bb122651

commit b11cfed4c4fae51f7111c6cc0a3ec436a9c8faa3
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-22 14:35:39 +0900

    [rubygems/rubygems] Error out if there are multiple gemspecs and no gemspec is specified

    https://github.com/rubygems/rubygems/commit/547947bbf0

commit 400d693863cc8b500d9bcaee9529a395f3fe6da7
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-19 06:25:29 +0900

    [rubygems/rubygems] Remove useless gem setup

    https://github.com/rubygems/rubygems/commit/c8913e37a7

commit 6cacbf542caa9954bf760dd10a6ae3c92c9f15e4
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-19 06:19:52 +0900

    [rubygems/rubygems] Test building a gem with multiple gemspec without a gem name specified

    https://github.com/rubygems/rubygems/commit/38c72fd145

commit a02da1012bb391ae01affac7454ea28996fd7dbf
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-19 05:57:41 +0900

    [rubygems/rubygems] Build the first gemspec we found if no gemspec is specified

    https://github.com/rubygems/rubygems/commit/ab186266b7

commit bcf51dd76332bc28ee75494c51828a36774ff99f
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-19 05:04:08 +0900

    [rubygems/rubygems] Improve gemspec assignment and error message

    https://github.com/rubygems/rubygems/commit/dc70c5a192

commit 68937fe0e4bf6e0943fe165e0a157058cff760fe
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-19 04:53:41 +0900

    [rubygems/rubygems] Make passing a gem name to be optional

    https://github.com/rubygems/rubygems/commit/4ba4ffebbe

commit 95326150faa0854ed6cd0877e0069d2080bc5005
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-08-17 23:54:17 +0900

    [rubygems/rubygems] Move build gem logic to its own method

    https://github.com/rubygems/rubygems/commit/a16eacd650

commit fea91d69a3b4aebd5e69058f9ec51adf2896cdfd
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-22 03:17:11 +0900

    [rubygems/rubygems] Don't fail when `uninstall --all` with default gem

    Instead, display an informative message saying that uninstallation of
    specific versions is being skipped because of being default gems.

    https://github.com/rubygems/rubygems/commit/b44845aa1d

commit f9f6a3d793186bd4b8897f775dcdcc9719361c11
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-23 00:32:47 +0900

    [rubygems/rubygems] Little refactor to avoid rubocop's false positive

    Otherwise it detects duplicate methods here, because it doesn't see that
    we are reopening the class in two different places.

    https://github.com/rubygems/rubygems/commit/ae3fb47f5f

commit d84b9b6d0a938cec9f0c1266702d9c4aecc0423a
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-08-22 07:19:10 +0900

    [rubygems/rubygems] Use IAM role to extract security-credentials for EC2 instance

    https://github.com/rubygems/rubygems/commit/9a401646e1

commit d219be4a1c237356670ebafd415e983433362e72
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-22 03:05:24 +0900

    [rubygems/rubygems] Move empty check earlier

    https://github.com/rubygems/rubygems/commit/fc224e9717

commit 7a2bd91ed24cceecc627df574fc109cdd6b258dd
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-05 17:51:02 +0900

    Try to fix `invalid option`

    https://github.com/ruby/ruby/runs/212727409#step:11:67
    ```
    invalid option: -j5
    ```

commit f4df9fb46b35335530fd99fabfa65772e6aaf1df
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-05 17:47:51 +0900

    Change name to `Tests (test-bundled-gems)` in macos.yml too

commit 436099ee0459ee51ceccb3eb343a5f281556bf61
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-05 15:02:07 +0900

    add tests

    Some coverage improvements.

commit 8a608f1b1f9812d0bd1d7589a03e8abd653b8364
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-05 14:37:05 +0900

    Removed -git option of make-snapshot

    Git is not for direct access to a remote repository.
    Most of its operations need a local clone.

commit 41bc766763dba63ae2529f2f9070b8e26399745c
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-05 14:29:11 +0900

    interesting (but annoying) tidbit warning suppressed

    This changeset is to suppress clang's -Wimplicit-int-float-conversion
    warning.

    In 64 bit signed long and IEEE 754 double combination (== almost
    everyone these days), LONG_MAX is 9,223,372,036,854,775,807.  This
    value is _not_ exactly representable by double.  The nearest value
    that a double can represent is 9,223,372,036,854,775,808. It is one
    greater than LONG_MAX.  Let's call this value the "x".

    The expression `LONG_MAX < yi` is a long versus double comparison.
    According to ISO/IEC 9899:1999 Section 6.3.1.8 (that defines the
    "usual rithmetic conversions"), The long value must first be casted
    into double.  Because FLT_ROUNDS is typically 1 ("round to the
    nearest" mode), the conversion yields the "x" value shown above.  So
    the comparison is in fact `x < yi`.

    This comparison is false for yi == x situation, i.e. yi is still
    bigger than LONG_MAX.  On such situation the `yn = (long)yi;`
    statement that appear several lines below renders underfined
    behaviour, as per ISO/IEC 9899:1999 Section 6.3.1.3.

    To remedy, we just change the comparison from `<` to `<=` so that
    yi == x situation can properly be handled.

commit dd2b9d4a96e6c9784daf645efc79bef11eb1decb
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-04 15:55:02 +0900

    hide rb_funcallv_with_cc from public

    Requested by ko1.  Also, because now that this function is internal
    use only, why not just directly use struct rb_call_cache to purge
    the ZALLOC.

commit b005d7c2e208790b89b332d5f8ca56334039d6ae
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-04 15:10:10 +0900

    use existing vm_search_method()

    Ko1 plans to implement Guild.  That can interface the caching
    mechanism introduced here.  To prevent future breakage we would
    better avoid rolling our own code here.  Instead use the existing
    vm_search_method() which would be modified by him.

    This commit deletes some asserions, but they are in fact checked
    inside of vm_search_method().

commit 7a1f650c130768eee07b8f64e73e218a9d9f8638
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-05 08:33:02 +0900

    * 2019-09-05 [ci skip]

commit 9f59d30daa0d2fba5c98a9b6148b935baaae67da
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-04 23:54:41 +0900

    Separate VCS::DEBUG_OUT

commit f6da4a544760e00d932fea9a586bd869e82ad339
  Author: Akinori MUSHA <knu@idaemons.org>
  Date:   2019-09-04 16:07:40 +0900

    Describe #eager in the Enumerator::Lazy section

commit 1d4bd229b898671328c2a942b04f08065c640c28
  Author: Akinori MUSHA <knu@idaemons.org>
  Date:   2019-06-05 20:39:21 +0900

    Implement Enumerator::Lazy#eager [Feature #15901]

commit 2a6457b5b7d67378528235cee7b9cb93fed00204
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2018-10-11 11:47:49 +0900

    add rb_funcallv_with_cc()

    Why not cache the method entry at each caller site.  The void**
    is in fact a method entry, but this struct is hidden from ruby.h
    so intentionally left opaque.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/1981

commit ccad34f4533ffe532fea796def06808dc5a85877
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-04 12:51:39 +0900

    Add TEST_BUNDLED_GEMS_ALLOW_FAILURES=minitest

commit 967ef0d4f6c84b5c204247a8a960656d6264ef49
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-04 12:36:45 +0900

    Use `git pull` instead of `git fetch` if master branch

commit 1e30d0af7d0258bd3a9e6b072e6517f8db78f853
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-04 12:03:28 +0900

    `$JOBS` does not set in `env:`

commit b0d0b850bc61e158fb7caac4123af824b12938f1
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-04 11:50:37 +0900

    Use RUBY_TESTOPTS instead of TESTOPTS

    https://github.com/ruby/ruby/pull/2417#issuecomment-526884646
    > `TESTOPTS` is defaulted to `$(RUBY_TESTOPTS)` in `common.mk` file.
    > Use the latter name to pass options via an environment variable.

commit c14b67b2a8cf60b37cfb221d8b97c6eb91833522
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-04 10:53:20 +0900

    Check frozen flag on MJIT setinstancevariable

    It does not seem to have a significant performance impact, hopefully?

    ```
    $ benchmark-driver -v benchmark.yml --rbenv 'before --jit;after --jit' --repeat-count=24 --output=all
    before --jit: ruby 2.7.0dev (2019-09-03T21:02:24Z master 77596fb7a9) +JIT [x86_64-linux]
    after --jit: ruby 2.7.0dev (2019-09-04T01:54:44Z master 7363e22d79) +JIT [x86_64-linux]
    Calculating -------------------------------------
                                     before --jit           after --jit
    Optcarrot Lan_Master.nes    48.44054595799523     71.67010255902900 fps
                                71.32797692837639     71.97846863769546
                                72.51921961607691     78.87360980544105
                                73.54082925611047     79.80408132389941
                                74.03503843709451     79.85739528572826
                                74.04863857926493     79.89850834901381
                                75.30266276129467     80.34607233076015
                                75.69063990896244     80.88474397425360
                                75.70458132587405     81.09234267781642
                                77.39842764662852     82.13766823612643
                                77.76922944068329     82.20398304840373
                                81.17984044023393     82.26722630628272
                                82.85235776076533     82.71375902781254
                                83.04906099135320     82.75893420702198
                                83.10214168136230     82.79668965325972
                                83.71456007558125     82.85131667916379
                                84.06658306760725     82.95676565411722
                                84.25690684305728     83.19972846225775
                                84.27938663923503     83.28510503845854
                                84.45467716218090     83.41003730434703
                                84.51563186125925     83.67773614721280
                                84.56139892968321     84.02082201151110
                                84.69819452180658     84.10495346787033
                                84.78125989622576     84.47867803506055
    ```

    Note for backporter:
    test_jit's `success_count` would be 1 in Ruby 2.6, since 2.7 introduced
    "MJIT recompile" on JIT-ed code cancel.

    [Bug #16139]

commit 77596fb7a91cc119b25ac9e19b3c8682709765b4
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-04 06:02:24 +0900

    Do not turn on keyword_init for Struct subclass if keyword hash is empty

    This was accidentally turned on because there was no checking for
    Qundef.

    Also, since only a single keyword is currently supported, simplify
    the rb_get_kwargs call.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2423

    Merged-By: jeremyevans <code@jeremyevans.net>

commit 39c3252cd175074581855e5f9681cc723c15ff72
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-04 03:32:02 +0900

    Merge pull request #2422 from jeremyevans/rb_keyword_given_p

    Add rb_keyword_given_p to the C-API

  Notes:
    Merged-By: jeremyevans <code@jeremyevans.net>

commit f702cd6ace7e134714d42ffb1606c25b5ded24c7
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-04 03:31:11 +0900

    * 2019-09-04 [ci skip]

commit a7d7a0df91805e59fe6b383ea7ecdad509222966
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-03 05:22:26 +0900

    Fix Enumerator::Lazy#{to_enum,enum_for} where method is defined in Lazy

    Previously, passing to_enum/enum_for a method that was defined in
    Lazy itself returned wrong results:

      [1,2,3].to_enum(:map).to_a
      # => [1, 2, 3]
      [1,2,3].lazy.to_enum(:map).to_a
      # => []

    I'm not sure why methods that are designed to be lazy do not work
    with to_enum/enum_for.  However, one possible way to work around
    this bug is to have to_enum/enum_for use the implementation found
    in Enumerable/Enumerator, which is what this commit does.

    While this commit works around the problem, it is a band-aid, not a
    real fix.  It doesn't handle aliases of Enumerable::Lazy methods,
    for instance.  A better fix would be appreciated.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2421

commit 4a3972c2612c3e3695d7f67b096b2ef8cbb6649a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-03 05:20:44 +0900

    Remove bad expectation in spec

    This spec should not be checking where methods are defined, only
    that the method works as expected (returns a Lazy instance).

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2421

commit e94ac03eb0d07af3cbff20194acf479bf8851c39
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-09 05:09:17 +0900

    Make Enumerator::Lazy#with_index be lazy

    Previously, Enumerator::Lazy#with_index was not defined, so it
    picked up the default implementation from Enumerator, which was
    not lazy.

    Based on earlier patch from nobu.

    Fixes [Bug #7877]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2421

commit fb67d4fc77f211cfec6b2065787d9212f4e2154b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 21:49:51 +0900

    Move an unstable bootstraptest to pending

    This has been unstable on AppVeyor mswin since the introduction
    3fd83cb6fcc483d2eac0795bc139c521a3a59bd2.
    https://ci.appveyor.com/project/ruby/ruby/builds/27103307/job/j7xwjmsos2k22cck

    Let's have it in pending.rb to be fixed.

commit ecc37ee67b90426198bd768d0bf036663e301d06
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 21:38:32 +0900

    Stop testing inexistent instructions

commit beaabd23087a54364bc8fc8aa7a45dd9f425e19b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 21:08:07 +0900

    Unify SUPPORT_JOKE and OPT_SUPPORT_JOKE

    for simplicity and consistency.

    Now SUPPORT_JOKE needs to be prefixed with OPT_ to make the config
    visible in `RubyVM::VmOptsH`, and the inconsistency was introduced.

    As it has never been available for override in configure (no #ifndef
    guard), it should be fine to rename the config.

commit 7cb19b3f5bf0a5dcee0e8444b920e01e7d4e7fae
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 21:03:10 +0900

    Roughly retry choco install commands

    to deal with random failures:
    https://github.com/ruby/ruby/runs/210617845

commit afe8bf24894d742fa43bba3331470f428d819eb0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 20:33:46 +0900

    Try extending timeout of IO.select

    hoping to stabilize:
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5d6df8a8a952c20008acf75b?step=5d6df90e4971a6000714c627

commit 36a0c668b69d90c881246324e76cdb8889047026
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-03 18:36:08 +0900

    Remove SKIP_DOXYGEN because job.env does not set in `if:`

commit 83889292f5e0944d6762228c9ca81318f618aa4e
  Author: Naohisa Goto <ngotogenome@gmail.com>
  Date:   2019-09-03 16:51:01 +0900

    Examine TestIO#test_select_exceptfds on Solaris with 1 byte data

    On Solaris, it seems that the select(3C) in this test works only
    when sending 1 byte out-of-band data, though I cannot investigate
    the cause. The behavior is observed on a Solaris 10 server in
    addition to Solaris 11 on which the test had been skipped.

commit e913fa94d30e5d3007fe52f5d7840576c0f86c78
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-09-03 12:18:36 +0900

    delete ruby_eval_string_from_file_protect

    Not used from anywhere.

commit 1a9cc3b27c020c33c87d8b4fe659243aacfeedf3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 02:51:48 +0900

    Avoid defining unused instructions

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2420

commit 355ccdeae52cde250f09675e9d5e65b3ddc41f2e
  Author: d0 (Daisuke Fujimura) <booleanlabel@gmail.com>
  Date:   2019-09-03 12:52:04 +0900

    Disable method definition type checks on Cygwin too

    [Bug #16134]

commit 547887138f19959f649b1c0dbcde5659ae3878ed
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-03 12:27:53 +0900

    test/ruby/test_fiber.rb: reduce the count of object creation to cause GC

    The test consistently fails on OpenBSD.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/openbsd-current/ruby-master/log/20190903T010009Z.fail.html.gz
    ```
      1) Failure:
    TestFiber#test_fork_from_fiber [/home/chkbuild/chkbuild/tmp/build/20190903T010009Z/ruby/test/ruby/test_fiber.rb:327]:
    [ruby-core:41456].
    <0> expected but was
    <1>.
    ```

commit e6c4ea22d62c95ce0590849219da505fef5a538e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-03 12:28:00 +0900

    Touch tar file itself to make gz file hash stable

commit b0a7221dcf998d72efe57cd7ab75260d80941109
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-03 11:43:38 +0900

    Touch the toplevel directory too

commit 542a1ade8033d03513647ace64e50dbf31cb5e68
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-03 11:31:14 +0900

    --date=iso-local does not work with old git

commit 703f0cd3d007f1ada69957a529870b07fa053230
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-03 11:30:40 +0900

    Do not keep tar file by the default

commit c181ecc161c5482426f045322cf00d00b15d96c6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-03 11:14:07 +0900

    Align timestamps to make tarball stable

commit 1994adf938afcdc562f87497156e6d4900f3f06b
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-16 06:03:28 +0900

    Make Array#uniq return subclass instance if called on subclass instance

    Previously, Array#uniq would return subclass instance if the
    length of the array were 2 or greater, and would return Array
    instance if the length of the array were 0 or 1.

    Fixes [Bug #7768]

commit a848b62819c78e12c420b1ed29605242e292358b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 01:53:47 +0900

    Make the rb_vmdebug_debug_print_post declaration

    consistent with the definition

commit 1a5a01e9ce9bf69944e4e37a33c8b044657a200a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 01:39:00 +0900

    Add insn tests for newarraykwsplat

commit e13da00824e0979b2417bcffe94a8668cab7532c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 01:25:58 +0900

    Explain how to run an individual btest in help

commit 6c3ab99eae1fa84dc28635eb90170b03408b94fb
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 01:11:18 +0900

    Now it's always os: linux

commit 52f0c31558f0870c16da86b8abe524bd7040ea27
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 01:06:29 +0900

    Fix accidental leftover for Linux

    In 91aa8bfff8, my understanding of the branch was inverted.

commit 91aa8bfff8a9f9c0af96915c120d863fc474e8d5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 01:01:47 +0900

    Drop unstable Travis osx in favor of GitHub Actions

    For some reason, the Travis osx environment has been really unstable.
    It failed on today's cron too:
    https://travis-ci.org/ruby/ruby/builds/579843163

    As we have almost the same test environment (including OpenSSL version)
    in GitHub Actions and it seems to be more stable and faster, I think
    there's no motivation to maintain Travis osx CI environment.

    By removing this, we'd be able to simplify .travis.yml as well.

commit 1d68d29c143231303504e28833089485a2355aec
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 00:36:18 +0900

    Drop obsoleted IRC channel reference

    travis-ci user does not live in #ruby-ja. Therefore the notification
    isn't working anymore.

commit f1d8d0f47b8018a15d024e1beb5c06f9c4b901d7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 00:30:17 +0900

    Drop obsoleted branch references

    We don't have topic branches on ruby.git anymore.

commit d83ade1db59a21b675b6386b94b56eabb90ae83e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-02 23:42:21 +0900

    Use -z option for git-log

commit f560609d66502101264706877577220e3ebf5a38
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-03 00:21:30 +0900

    Merge pull request #2418 from jeremyevans/array-empty-kwsplat

    Ignore empty keyword splats in arrays

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2418

    Merged-By: jeremyevans <code@jeremyevans.net>

commit be86591458c5f29db0d97601f29e15e43d5fe23c
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-03 00:08:39 +0900

    * 2019-09-03 [ci skip]

commit 60a49a6ff95ece1a13004a53db001bfde2373afc
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-03 00:07:36 +0900

    Fix SUPPORT_JOKE CI on Travis

    It looks like a flag which cannot be enabled on configure.

commit 834e77186086a4ae1fc73edbe035e90157d79fab
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-02 23:48:38 +0900

    Run daily cron against SUPPORT_JOKE

commit ca8ae759d0dee6840aa446499a9e1752f74da500
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-02 23:35:51 +0900

    Fix compilation error in SUPPORT_JOKE

    This seems to have been broken since 4e15be8bade.

commit 6a9c5ef186db70dc60fcd42ec820767d9a75543a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-02 23:10:58 +0900

    Extract git commit log as raw format like git-svn for ChangeLog

commit 53a7abe2cd6bd07b816a7a7e2235befd5e1b4446
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-02 22:30:12 +0900

    test/drb/drbtest.rb: Skip test_06_timeout on Solaris10s

    The test seems to have a race condition, which fails on very slow
    machine like Solaris10s.  So skip it.

    In addition, this change restores timeout guard that was removed at
    0660d7cb538cf5284d50f66adfcbd78609839715.  This is because the test gets
    stuck forever when something wrong occurs.  It is better to fail the
    test than stuck.

commit 8b2e1ca10ecf92ad402decd6b1eab586eded0ddb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-02 16:47:12 +0900

    Do not clear backtrace in Exception#exception

    [Bug #15558]

commit 8e38d4c78c1a9b45f604963f85995e9a817ee72c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-02 16:46:28 +0900

    Rewrote using assert_separately

commit 6f206b8ec6f945804c56cf8249739c6e94ed65f6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-02 15:08:53 +0900

    Prohibit nul-separated glob pattern [Feature #14643] (#2419)

  Notes:
    Merged-By: nobu <nobu@ruby-lang.org>

commit 633ae3278ecce7c2b98fa1aa6106f963894c538a
  Author: Shugo Maeda <shugo@ruby-lang.org>
  Date:   2019-09-02 14:43:35 +0900

    Add Net::FTP#features and Net::FTP#option

    Patch by darkphnx (Dan Wentworth) .  Thanks!
    [Feature #15964]

commit e9b271d1e2251a2e2f613431ae2d9eb2a14ba0a9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-02 14:31:22 +0900

    Get rid of interpreting BTS references as label-list [ci skip]

commit 6724b1f83d2cad57bbcbcdc9756532d825b0c592
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-02 14:35:38 +0900

    Revert "Make Enumerator::Lazy#with_index be lazy"

    This reverts commit 83498854eb5a824f1f83c31fac18c9279f9ee10d.

    This didn't pass rubyspec.

commit c69545ae32a5ddf928e8992a0d2cf39648c2b555
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-02 14:33:29 +0900

    Fix opt_regexpmatch1 references

commit 83498854eb5a824f1f83c31fac18c9279f9ee10d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-09 05:09:17 +0900

    Make Enumerator::Lazy#with_index be lazy

    Previously, Enumerator::Lazy#with_index was not defined, so it
    picked up the default implementation from Enumerator, which was
    not lazy.

    Based on earlier patch from nobu.

    Fixes [Bug #7877]

commit 79e3d6bb9e007fc97153c1097daf78e9a201a642
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2018-09-19 16:46:44 +0900

    fix shortcut condition

    rb_reg_match expects its first argument to be a Regexp instance.
    Should check that.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/1959

commit ec80d5c4f322b9ae02babd32a491bd05807a8155
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2018-09-19 11:46:21 +0900

    delete unused function

  Notes:
    Merged: https://github.com/ruby/ruby/pull/1959

commit 8ad7fafcddece2096b748178df9a3318cb1ba3ae
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2018-09-19 10:41:56 +0900

    opt_regexpmatch1 is actually making things slower.

    ----

    trunk: ruby 2.6.0dev (2018-09-18 trunk 64767) [x86_64-darwin15]
    ours: ruby 2.6.0dev (2018-09-18 opt_regexpmatch 64775) [x86_64-darwin15]
    last_commit=opt_regexpmatch1 is actually making things slower.
    Calculating -------------------------------------
                                  trunk        ours
    Optcarrot Lan_Master.nes     33.877      35.282 fps

    Comparison:
                 Optcarrot Lan_Master.nes
                        ours:        35.3 fps
                       trunk:        33.9 fps - 1.04x  slower

  Notes:
    Merged: https://github.com/ruby/ruby/pull/1959

commit ff462bc6c3d88bab9df4c8d17b420f21223984c2
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-02 13:46:29 +0900

    Add a benchmark for opt_regexpmatch2

    vm2_regexp was for opt_regexpmatch1.

commit 1f636e74e661e8976d8884a1dcb7027a97cb6a83
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-02 12:15:35 +0900

    Set mtime of checked out files to past time

    instead of waiting 2 seconds, if possible.

commit 63ab7046a1a5c374a52dfa79406fe52d92d80344
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-09-02 10:02:17 +0900

    Skip POINTOPOINT of IPv4 too instead of IPv6 only

    Fix following error on `utun*`:
    ```
      1) Error:
    TestSocket#test_udp_server:
    Errno::ECONNREFUSED: Connection refused - recvmsg(2)
    ```

commit f58db5a6f5c7b5c2f5f8471adcf8b1fe9577c01a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-02 11:46:19 +0900

    Simplify setting of VM_CALL_KW_SPLAT in vm_call_method_missing

    Pointed out by ko1.

commit ca11a7d74e5e992cf4b84180727259095f4c1e75
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-02 10:54:30 +0900

    Fix method name in test to not override existing method name

commit 3fde9ef93781585a675b3e7184ad3a51072fb95f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-02 08:08:42 +0900

    Fix keyword argument separation warning in method_missing

    vm_call_method_missing was dropping VM_CALL_KW_SPLAT, so this just
    makes it not drop it, to get the same behavior as calling the method
    directly.

commit 85dc89c90747d492e5ecbbbfc631a55088195f61
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-02 06:37:25 +0900

    Treat Japanese IME on/off code correctly

commit b0d885da765d3212f807ae83968082800df6422e
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-02 00:42:54 +0900

    * 2019-09-02 [ci skip]

commit f82cf05626a3020e01b2551fc0cc78a9365fe7b5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-02 00:41:45 +0900

    Fixed the directory to be removed

commit 007d6d15f4aeea266d4d88e0541ab45a34a1dcd4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-01 23:29:39 +0900

    test/drb/drbtest.rb: Use EnvUtil.timeout for timeout scale factor

commit 188c2b67c9365fcf75a595186d95c325f06b9182
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-01 23:27:44 +0900

    Revert "Revert "Revert "Skip BUGs on Solaris"""

    This reverts commit 3be3948870f6589343c4aecb541e22fae7751b47.

    The Solaris environment couldn't lookup the hostname itself by a wrong
    setting.  Now it is fixed, so try again.

commit bd785ca07779bacf78b9678b3d19eef4754fcbae
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-01 23:24:05 +0900

    Restore pwd for each version

commit fd4aad6d41da016f3a7aa7d3f130c39fe7bf082b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-01 22:16:18 +0900

    Support packaging different branch/tag

commit d8260bc872c8c562fff90278bb21815b9e7946e5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-01 19:01:19 +0900

    Fetch commit notes

commit b578c63f8398d4203c27a012f60b99d14910007d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-01 18:15:02 +0900

    Resolve symlinks to cache directory under gems

commit ff7c95dfd9b6aa1b4a83c18172e2845f7e6a4e7f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-01 18:10:50 +0900

    Support git tags

commit 04c3e344562eed9892409643bb4cfd6a2317e647
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-01 19:26:22 +0900

    Upgrade benchmark-driver for keyword args warnings

commit 3be3948870f6589343c4aecb541e22fae7751b47
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-01 18:57:40 +0900

    Revert "Revert "Skip BUGs on Solaris""

    This reverts commit 84dca8eff0cbcb1c23623b47fb78b0daf5c76e35.

    "execution expired" occurred on Solaris.
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-master/log/20190901T072504Z.fail.html.gz

commit 94d6ec1d90bb28e5f303867b048e6322d8781cb1
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-09-01 16:39:34 +0900

    Make pattern matching support **nil syntax

commit cda5745c1bacdb3be8384d21ee0dd70a9d95af5b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-01 16:31:09 +0900

    Automatically detect missing symbols

    which are usually optimized away by -O3.

    This CI can detect missing exports like
    ea84a680755b5a7fa700618cbe78e3b2fc7be01d which was needed for
    761346a9604ca2c79777d1d67fb5dcc3c30dbf69.

commit ea84a680755b5a7fa700618cbe78e3b2fc7be01d
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-09-01 16:25:01 +0900

    Export rb_const_source_location_at for MJIT

commit 02dfa0f16361c498e0f529054b00e3e09730892b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-01 15:24:37 +0900

    test/ruby/test_keyword.rb: Add remove_method before method redefinition

    to suppress redefinition warnings.

commit 84dca8eff0cbcb1c23623b47fb78b0daf5c76e35
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-09-01 15:14:27 +0900

    Revert "Skip BUGs on Solaris"

    This reverts commit 8adefd4cf29288f6e43f20efbdd44b215ae16c7a.

    I couldn't see any failure on Solaris if the guard is removed.
    Give it a try.

commit d646a292cddabfd41593d0b58fd5270e3aeefbb4
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-01 15:05:02 +0900

    Fix keyword argument separation warning when using send

    vm_call_opt_send was dropping VM_CALL_KW_SPLAT, so this just makes
    it not drop it, to get the same behavior as calling the method
    directly.

commit e13c0bb82018197d906b8f11eccf2cd90d142e41
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-09-01 14:54:04 +0900

    Note about ANYARGS in NEWS

    Since 50f5a0a8d6e7ad89d6caff695a08dbd38edb7a6e, some C++ extensions
    needed fixes like https://github.com/eagletmt/faml/pull/49 to make their
    build succeed.

    Thus it's worth noting that C API declarations are changed.

commit 15757390fff14071f3d77fa75934b741723eb92a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-09-01 13:51:02 +0900

    Don't pass an empty keyword hash when double splatting empty hash when calling cfunc

    This mirrors earlier changes in keyword argument separation for
    calling Ruby methods and calling procs/lambdas, so that behavior
    is kept the same.

commit e80a6f65c873fb01c98f71fa94085264dbb1dbf0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-01 13:37:28 +0900

    Made :nil static ID

commit e5dd63ba8c854d8dce9537adb730658aded6bc8d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-01 11:19:17 +0900

    IRB 1.1.0.pre.3

commit 11d6094cbe2965563942152bebca5ba4b54a7004
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-01 11:08:09 +0900

    Reline 0.0.2

commit c5bb074fe731832b64143372986197c83201d2f3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-09-01 11:02:14 +0900

    Re-calculate state variables of screen when screen size changes

commit 1756ec2065d5219659b585f3fe3ce666861acd3a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-09-01 08:56:00 +0900

    Ignore the all of warnings with inline_spec.rb of bundler examples.

commit a060629e66899a02d01760ee249df84754c8e445
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-09-01 01:56:24 +0900

    * 2019-09-01 [ci skip]

commit 431a99b5569e90dd76677be273ad81640ce7e757
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-09-01 01:44:36 +0900

    Split warning messages for tag-jump

commit d4eef04883104c6b4618a843651584cb65c9428d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-31 20:55:35 +0900

    Use double splat for keyword args by a hash object in lib/un.rb

commit 602fbd4338a875aa26c6248338a3df97e08a6b72
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-31 17:34:23 +0900

    Limit the apt addon enablement to trusty

    8897fa60fdbc83f9cce7df384893e902c17c1bf2 worked.
    But we want to retry that part and this commit is trying to fix the
    problem.

commit 8897fa60fdbc83f9cce7df384893e902c17c1bf2
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-31 17:18:00 +0900

    Try using built-in apt source for gcc-8

    58a373e9ed54556e18a13825dfe72d3f7a86b833 and
    3868df83330bb897be996604df3862639abbf002
    didn't work.

commit 3868df83330bb897be996604df3862639abbf002
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-31 17:03:26 +0900

    Try to fix apt-get update error for trusty (take 2)

    https://travis-ci.org/ruby/ruby/jobs/579116510

commit 58a373e9ed54556e18a13825dfe72d3f7a86b833
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-31 16:44:41 +0900

    Try to suppress errors in BASERUBY Travis

    https://travis-ci.org/ruby/ruby/jobs/579108692

commit 1f18b578ce300a3ba71a9525e680037122bb81d3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-31 15:50:50 +0900

    Don't pass an empty keyword hash when double splatting empty hash

commit 4868ad7e5b3065f9d94cc7e70889c9d31ebe88cc
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-31 13:31:21 +0900

    fix CI failures in x64-mingw32

    For insatnce
    https://ci.appveyor.com/project/ruby/ruby/builds/27086475/job/mb9whkiygemlfy93

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2413

commit d7aa1260b6c378b2f540a06eb770bc07db0ebb53
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-31 14:44:57 +0900

    Remove files/directories for git/github which are committed [ci skip]

commit 60a08d9a6c11fda25bb73ded9e26aabc57af9433
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-31 14:11:00 +0900

    Add rb_iseq_location

    This wraps iseq_location and should fix the leaked global test.

commit ec6206a81a1d61efe5bda69ab704c09e75033c01
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-31 13:56:50 +0900

    Use more accurate source location in keyword argument separation warnings

    This shows locations in places it didn't before, such as for
    proc calls, and fixes the location for super calls.

    This requires making iseq_location non-static and MJIT exported,
    which I hope will not cause problems.

commit 3463e83192215c36bdcebad8be907eaa09593a41
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-31 11:23:10 +0900

    Warn for keyword to last hash parameter when method has no optional/rest parameters

    Previously, there was no warning in this case, even though we will
    be changing the behavior in Ruby 3.

    Fixes [Bug #14130]

commit 6424d316b993ecceb6f583ae476096274e304788
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-31 09:33:33 +0900

    Remove a verbose warning that is no longer needed

    This warns about a case that we will continue to support.

commit 8cb9efbbe62a9a544bff2cd6571fc756ce92a738
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-31 07:17:46 +0900

    tool/rbinstall.rb: remove a keyword-argument warning

commit a1e588d1a73e3d72cd9ce6a2516ada9baeb77861
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-31 07:03:27 +0900

    NEWS: Hash-to-keywords automatic conversion is now warned

    A follow up for 16c6984bb9..b5b3afadfa.  [Feature #14183]

commit 38e08db48e9d8cf34b2362df24afa97ba1e2ff4b
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-31 04:39:56 +0900

    * 2019-08-31 [ci skip]

commit b5b3afadfab4072f55320075ccac6afe333a140c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-31 03:52:46 +0900

    Fix a couple of bundler issues with keyword argument separation

    There are more issues than this, but hopefully this is enough
    to get make test-bundler passing in CI.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 856bb3c35d5d81481b2e5dd00353298e8a0c2ee7
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-21 04:29:51 +0900

    Fix remaining warning issues in the tests due to keyword argument separation

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 42adc5bc6bb532e20bf2191ad99781ee701dea36
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-21 04:28:04 +0900

    Add back missing warning for duplicate keys in splatted hashes

    This reverts the changes to parse.y in
    a5b37262524ac39d2af13eea174486370a581c23 as they are not actually
    needed and cause the warning for duplicate hash keys to not be
    emitted.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit a810f6cbefb5726c626b0c490522865588f4480e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-18 14:49:04 +0900

    Update specs to handle non-Symbols for keyword splats in 2.7

    Also handle some warnings for behavior that will change in 3.0.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 16cd0de6ec8464129041c52174f5608e32512ca1
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-18 14:47:43 +0900

    When splitting a keyword hash, dup it first to not mutate it

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 5c507db467f20a6981ce6b282a607d4d975bcb07
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-18 14:43:26 +0900

    Implement keyword argument to last positional hash emulation

    For methods that accept keyword arguments but do not accept a
    keyword splat, if a keyword splat is passed, or keywords are
    used with a non-symbol key, check the hash.  If the hash contains
    all symbols, keep the same behavior as before.  If the hash
    contains all non-symbols, move the hash to the last positional
    hash and warn. If the hash contains symbols and non-Symbols, split
    the hash and use the symbol keys for the keyword hash and non-symbol
    keys for the positional hash and warn.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 8399609e5a27d3d993c9fbb08f9d88051f26d455
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-17 04:43:13 +0900

    Make keyword_hash_split static

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 3a23b71f0ac76d52f334643ab3152017c7a10b39
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-25 04:06:39 +0900

    Make Method/Proc#parameters handle **nil syntax

    Use a [:nokey] entry in this case.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit fa41a7b2608523a89d4eb1c9309d39a140e839ef
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-25 03:40:02 +0900

    Make RubyVM::AbstractSyntaxTree handle **nil syntax

    Use false instead of nil for the keyword and keyword rest values
    in that case.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 4d64693c703edbccc5b155072276ce7b8c3becdb
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-25 02:34:02 +0900

    Make ripper support **nil syntax

    The on_params hook will use :nil as the keyword rest argument.
    There is a new on_nokw_param hook as well.

    This fixes a type issue in the previous code, where an ID was
    passed where a VALUE was the declared type.  The symbol :nil is
    passed instead of the id.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 6a9ce1fea89bc5c6518dd6bb7ff3b824a9321976
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-19 22:19:41 +0900

    Support **nil syntax for specifying a method does not accept keyword arguments

    This syntax means the method should be treated as a method that
    uses keyword arguments, but no specific keyword arguments are
    supported, and therefore calling the method with keyword arguments
    will raise an ArgumentError.  It is still allowed to double splat
    an empty hash when calling the method, as that does not pass
    any keyword arguments.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit afae8555da07b2349a245d6646e3b36a49f027d5
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-09 11:45:54 +0900

    Set symbol export for rb_hash_stlike_foreach

    This fixes MJIT after rb_hash_stlike_foreach used vm_args.c.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 896e42d93f52966644c2700ed9fd18f2a1988dd3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-09 10:45:50 +0900

    Restore splitting of hashes into positional and keyword arguments, add warning

    This restores compatibility with Ruby 2.6, splitting the last
    positional hash into positional and keyword arguments if it
    contains both symbol and non-symbol keys.  However, in this case
    it will warn, as the behavior in Ruby 3 will be to not split the
    hash and keep it as a positional argument.

    This does not affect the handling of mixed symbol and non-symbol
    keys in bare keywords.  Those are still treated as keywords now,
    as they were before this patch.  This results in different
    behavior than Ruby 2.6, which would split the bare keywords and
    use the non-Symbol keys as a positional arguments.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 15bca0d4d373820fa648c351dc13c2131849d9b3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-08 10:49:55 +0900

    Fix test after keyword argument separation

    Now that keyword splats accept non-Symbols, the type of exception
    changes.

    Previously, a TypeError (hash key "k1" is not a Symbol) was raised
    for this test, but now an ArgumentError (unknown keyword: "k1") is
    raised.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 03697ddf63eb9acd41e4f2185a019d39d1ead3cf
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-08 10:48:43 +0900

    Update tests to fix warning message changes

    Now that keyword splats accept non-Symbols, the inspect value of
    the keyword is used instead of the string value.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 9c2e165f7dbb63dd1921eacae58c4305d3e9e5b6
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-08 10:45:26 +0900

    Only promote last hash to keyword if all keys are symbols

    If all keys are not symbols, then the non-symbol keys would not
    be treated as keywords in previous versions.  It doesn't make
    sense to treat these hashes as keywords to break compatibility and
    warn about behavior changes in Ruby 2.7 when the Ruby 3.0 behavior
    will be the same as the Ruby 2.6 for these hashes.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit e0b4599bba6bea744e0e90b7640dcc21d695c434
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-08 08:55:34 +0900

    Fix keyword argument separation warnings in test

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit d08e1004e0ee1286e4513de2a170391a4d0a0116
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-08 08:44:49 +0900

    Fix keyword argument separation issues in lib

    Mostly requires adding ** in either calls or method definitions.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 3f67fcd3d5ca5e2907790eb5bb16d03f5884ece8
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-08 03:38:21 +0900

    Fix hash to keyword warning to apply in all cases

    Previously, it only applied if the call had more positional
    arguments than the method it was calling accepted.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 334b41a46b2a1a72965494dcecc6fe73a83f4490
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-02 04:15:01 +0900

    Allow ** syntax to be used for calling methods that do not accept keywords

    Treat the ** syntax as passing a copy of the hash as the last
    positional argument.  If the hash being double splatted is empty, do
    not add a positional argument.

    Remove rb_no_keyword_hash, no longer needed.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit 16c6984bb97409029e213154ac4f633ae04af3d8
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-03-18 14:25:47 +0900

    Separate keyword arguments from positional arguments

    And, allow non-symbol keys as a keyword argument

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2395

commit b0a291f6f6a5834fd84807eb48be906ade429871
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-30 22:16:32 +0900

    Split CC_LINKER_ARGS from CC_DLDFLAGS_ARGS

    to drop MJIT_DLDFLAGS from compile_c_to_o for OpenBSD failure
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/openbsd65/ruby-master/log/20190830T110008Z.fail.html.gz.

    8c7f4e8f8b7f9e74195ea0eb51f39014fec342c0 did not work for i686-linux
    https://travis-ci.org/ruby/ruby/jobs/578808112.

commit 8c7f4e8f8b7f9e74195ea0eb51f39014fec342c0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-30 22:03:36 +0900

    Try dropping DLDFLAGS from compile_c_to_o

    I think this did not work for some environments, but this seems to fix
    OpenBSD RubyCI failure:
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/openbsd65/ruby-master/log/20190830T110008Z.fail.html.gz

    Let me check RubyCI impact by this.

commit c45dd4d4826704471cf9ff2c7869065236dd174e
  Author: Maciej Mensfeld <maciej@mensfeld.pl>
  Date:   2019-08-30 18:24:33 +0900

    Make the dot-colon method reference frozen

    [Feature #16103]

    Close: https://github.com/ruby/ruby/pull/2267

commit 998ee350b9b2cb3659c442d68447aa8bfc54d101
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-30 16:09:08 +0900

    Revert "require 'pp' before use PP"

    of lib/bundler/vendor/molinillo/lib/molinillo/resolution.rb.
    This reverts commit 500149709b92ccb36396589a0c39afb3ff77bfb6 partially.

commit 631db0de274ff3d00d47c3d3581d8af5592f8a14
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-30 16:00:18 +0900

    Removed debug print

    It seems to be fixed by b870ca58791e576f5dbb263f54ae433a7f6d65ee.

commit b870ca58791e576f5dbb263f54ae433a7f6d65ee
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-30 12:49:27 +0900

    Add guard as same as `==`

    Try to fix failure at https://github.com/ruby/ruby/runs/207580232#step:10:382
    ```
           undefined method `name' for "Gemfile.lock":String
           /home/runner/work/ruby/ruby/lib/bundler/resolver/spec_group.rb:65:in `eql?'
    ```

commit 896d9f967b535a6ecb9ff5d3c08f1a37bcb8d1f9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-27 13:43:16 +0900

    Constified local variable `translator`

commit e9da4f57b35afe40b74c32e8f95e39aaaecc11b5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-27 13:42:53 +0900

    Adjust indent [ci skip]

commit 1680bd4e4f63901ff8ab119540850e7e63f1b7a2
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-30 12:01:45 +0900

    [DOC] Return obj may be different from 1st argument [ci skip]

commit ba9adcc1759cda3cb7838b650be1fe197d9ba3ba
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-30 11:49:14 +0900

    spec/ruby/core/unboundmethod/bind_call_spec.rb: Add ruby_version_is guard

commit 96b32aad93a0eb36770a9b1339e204f00f44f0b3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-30 11:26:48 +0900

    Exclude ripper y.output from packages [ci skip]

commit 98ccdd744ab46554e7f0e1d0a89f2ed24d365e53
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-30 11:23:06 +0900

    Export the last modified revision for tags [ci skip]

commit e593d5b31a13c59f9af07a2a6012c09bae7477d1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-30 11:18:23 +0900

    Suppress uninitialized instance variable warnings [ci skip]

commit 55f496c89b820f57d9e07c744675da8c43d6aa46
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-30 10:14:15 +0900

    Support revision in git-svn log

commit 1191049436556955893d7f6037eb626e6f51a004
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-30 10:13:45 +0900

    Updated comment of VCS#get_revisions [ci skip]

commit 43ab88c73706f4ffca2d01b149f5d7092b46000b
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-30 11:20:43 +0900

    Workaround for https://reviews.llvm.org/D25824

    This changeset make it possible to use very old clang.

commit c9fc82983ccf624ccec88ffafe6f4e3eb8e7abc4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-30 11:11:55 +0900

    lib/pp.rb: Use UnboundMethod#bind_call instead of .bind(obj).call(...)

    Related to [Feature #15955].

commit 09c940b17fcbaec2f7d04e528b8869c8c51ff336
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-30 11:10:29 +0900

    spec/ruby/core/unboundmethod/bind_call_spec.rb: Added

    For UnboundMethod#bind_call [Feature #15955] introduced in
    002e592e0d67bb0271d16314a32380ad947c9ae9.

commit 83c6a1ef454c51ad1c0ca58e8a95fd67a033f710
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-30 11:01:25 +0900

    proc.c: Add UnboundMethod#bind_call

    `umethod.bind_call(obj, ...)` is semantically equivalent to
    `umethod.bind(obj).call(...)`.  This idiom is used in some libraries to
    call a method that is overridden.  The added method does the same
    without allocation of intermediate Method object.  [Feature #15955]

    ```
    class Foo
      def add_1(x)
        x + 1
      end
    end
    class Bar < Foo
      def add_1(x) # override
        x + 2
      end
    end

    obj = Bar.new
    p obj.add_1(1) #=> 3
    p Foo.instance_method(:add_1).bind(obj).call(1) #=> 2
    p Foo.instance_method(:add_1).bind_call(obj, 1) #=> 2
    ```

commit 500149709b92ccb36396589a0c39afb3ff77bfb6
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-30 10:18:32 +0900

    require 'pp' before use PP

    `Kernel#pp` has wrapper, but `PP` does not.

    https://github.com/ruby/ruby/runs/207405029#step:10:141
    `NameError: uninitialized constant Bundler::Molinillo::Resolver::Resolution::PP`

commit 0a9d74f8cf1c01300d0396ce3cb4da81d3652d5a
  Author: Charles Oliver Nutter <headius@headius.com>
  Date:   2019-08-30 06:15:45 +0900

    Move pread + pwrite tests out of RUBY_ENGINE block

    These tests were guarded by a RUBY_ENGINE of "ruby" even though they test an official Ruby feature (pread/pwrite added in Ruby 2.5). This commit moves them to the top level of the test case so they will run on other implementations.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2412

commit bdc36094e3e11c045b26b2831a3a7e69b937ec61
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-30 06:51:34 +0900

    Add some NODE information for lldb

    Just adds a conditional in the lldb scripts so we can more easily debug
    NODE objects.

commit 94b79bffb108ccacb6d165f31e177fa24d392774
  Author: schneems <richard.schneeman+foo@gmail.com>
  Date:   2019-08-30 03:01:43 +0900

    Add word "Euler's number" to Math::E docs

    When searching for this constant, I landed on the correct page https://ruby-doc.org/core-2.6.4/Math.html however I was using CMD+f to search for "Euler" and did not find it. If we add the full name for this constant then it will be easier to search for and find.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2411

commit a8b310e14c2816f686b2e0b1cd1dca72f02fdf0d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-30 00:35:18 +0900

    7z does not accept gzip's options

    e.g. `GZIP=-9`

commit c52d38b7b6fa8383977a3629bc7331a45598259a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-30 00:23:35 +0900

    * 2019-08-30 [ci skip]

commit e51dca2596db9567bd4d698b18b4d300575d3881
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-06 02:01:06 +0900

    Disallow use of attrset symbols as Struct members

    Fixes [Bug #11326]

commit 01b723ba6dd48a0954765e43cff6bd9212afe259
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-29 23:06:27 +0900

    Refined warnings against literal in flip-flop

commit 79117d4a9b794fba68c3d7ac699ad8a989bd29dc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-29 22:06:05 +0900

    NEWS: [Feature #16035] [ci skip]

commit 2c1e902cba710eb5a83412a98984711e5fe8aad7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-29 21:49:19 +0900

    Don't pick up lib/readline.rb from ruby/reline

commit a39b26b5947f19c4ec1d410e0d0869b5ab839c65
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-29 21:11:53 +0900

    Check events that console window size changed on Windows

commit 3a425c7623d2062ae931dc83050c00a12873217b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-29 21:05:19 +0900

    Fix alignment of a SHORT variable

    typedef struct _COORD {
      SHORT X;
      SHORT Y; // I wanted to take this...
    } COORD, *PCOORD;

    typedef struct _CONSOLE_SCREEN_BUFFER_INFO {
      COORD      dwSize;
      COORD      dwCursorPosition; // ...of this one
      WORD       wAttributes;      // But it's combined with first 2bytes of this
      SMALL_RECT srWindow;
      COORD      dwMaximumWindowSize;
    } CONSOLE_SCREEN_BUFFER_INFO;

    If wAttributes has non-zero value, the code breaks.

commit b74dd665c0e9558f355cbe1a625beb444c2a2ab4
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-29 20:59:29 +0900

    CONSOLE_SCREEN_BUFFER_INFO is 22bytes

    typedef struct _CONSOLE_SCREEN_BUFFER_INFO {
      COORD      dwSize;              // 4(SHORT X, Y)
      COORD      dwCursorPosition;    // 4
      WORD       wAttributes;         // 2
      SMALL_RECT srWindow;            // 8(SHORT Left, Top, Right, Bottom)
      COORD      dwMaximumWindowSize; // 4
    } CONSOLE_SCREEN_BUFFER_INFO;

commit a4a19b114ba94b8f28d5a91aee5d595a516006d5
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-08-02 03:41:21 +0900

    Allow non-finalizable objects in ObjectSpace::WeakMap

    [feature #16035]

    This goes one step farther than what nobu did in [feature #13498]

    With this patch, special objects such as static symbols, integers, etc can be used as either key or values inside WeakMap. They simply don't have a finalizer defined on them.

    This is useful if you need to deduplicate value objects

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2313

commit e4be2fda3dbbfdb1f2ace697c96cf6bdd7dfef21
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-29 15:47:33 +0900

    Rule out gcc on Windows

    It seems the combination fails at the moment.  Don't know exactly
    why but I suspect there can be issues in resolving weak references.
    Let's rule them out for now.

    https://ci.appveyor.com/project/ruby/ruby/builds/27036383/job/x3c5d54839aacoyt

commit 3df37259d81d9fc71f8b4f0b8d45dc9d0af81ab4
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-29 11:47:20 +0900

    drop-in type check for rb_define_singleton_method

    We can check the function pointer passed to
    rb_define_singleton_method like how we do so in rb_define_method.
    Doing so revealed many arity mismatches.

commit bfe5d22f89a871b6c1cb556c0115145ade9fe286
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-29 10:57:48 +0900

    drop-in type check for rb_define_private_method

    We can check the function pointer passed to rb_define_private_method
    like how we do so in rb_define_method.  Doing so revealed some
    problematic usages of rb_obj_dummy.  They had to be split according
    to their arity.

commit 9b429eb3b15321115d9a217c91c5510fe43777a7
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-29 10:45:09 +0900

    drop-in type check for rb_define_protected_method

    We can check the function pointer passed to
    rb_define_protected_method like how we do so in rb_define_method.
    This changeset revealed no prototypes mismatches.

commit 0b81e7d6e2810adac081965f0da1d8064888c0bd
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-29 10:40:40 +0900

    drop-in type check for rb_define_method_id

    We can check the function pointer passed to rb_define_method_id
    like how we do so in rb_define_method.  This method is relatively
    rarely used so there are less problems found than the other APIs.

commit 0766f67168cf248b698a8b2cde1c22c526374be7
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-29 10:23:14 +0900

    move docs around [ci skip]

    To properly generate documents.

commit 7bcfd9189a6a0b2ad58fed988faaf795a4987893
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-28 18:19:11 +0900

    drop-in type check for rb_define_global_function

    We can check the function pointer passed to rb_define_global_function
    like we do so in rb_define_method.  It turns out that almost anybody
    is misunderstanding the API.

commit 7b6fde4258e700c0e0292bb091aa84a5e473342e
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-28 17:48:48 +0900

    drop-in type check for rb_define_module_function

    We can check the function pointer passed to rb_define_module_function
    like how we do so in rb_define_method.  The difference is that this
    changeset reveales lots of atiry mismatches.

commit 9ef51b0b89a10c8c401cb9f2337e47a25be72cbe
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-28 17:11:23 +0900

    drop-in type check for rb_define_method

    The rb_define_method function takes a pointer to ANYARGS-ed functions,
    which in fact varies 18 different prototypes.  We still need to
    preserve ANYARGS for storages but why not check the consistencies if
    possible.

    Q&As:

    Q: Where did the magic number "18" came from in the description above?

    A: Count the case branch of vm_method.c:call_cfunc_invoker_func().
       Note also that the 18 branches has lasted for at least 25 years.
       See also 200e0ee2fd3c1c006c528874a88f684447215524.

    Q: What is this __weakref__ thing?

    A: That is a kind of function overloading mechanism that GCC provides.
       In this case for instance rb_define_method0 is an alias of
       rb_define_method, with a strong type.

    Q: What is this __transparent_union__ thing?

    A: That is another kind of function overloading mechanism that GCC
       provides.  In this case the attributed function pointer is either
       VALUE(*)(int,VALUE*,VALUE) or VALUE(*)(int,const VALUE*,VALUE).

       This is better than void* or ANYARGS because we can reject all
       other possibilities than the two.

    Q: What does this rb_define_method macro mean?

    A: It selects appropriate alias of the rb_define_method function,
       depending on the arity.

    Q: Why the prototype change of rb_f_notimplement?

    A: Function pointer to rb_f_notimplement is special cased in
       vm_method.c:rb_add_method_cfunc().  That should be handled by the
       __builtin_choose_expr chain inside of rb_define_method macro
       expansion.  In order to do so, comparison like (func ==
       rb_f_notimplement) is inappropriate for __builtin_choose_expr's
       expression (which must be a compile-time integer constant but the
       address of rb_f_notimplement is not fixed until the linker).  So
       instead we are using __builtin_types_compatible_p, and in doing so
       we need to distinguish rb_f_notimplement from others, by type.

commit 48e346a088395924298163941d4b4cdd8243e377
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-28 17:33:07 +0900

    fix arity of bug_start

    This is just a trivial mistake introduced in
    0f36e8fc03a5c6433972d6bb5f177d5f6e106bac.

commit 69683968a99a8281c28e46c1e6cb3736694a1ba6
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-28 16:18:58 +0900

    fix arity of rb_mutex_synchronize_m

    This is just a trivial mistake introduced in
    6c56dae4b23c5c50e351758538141ca26b9aba40.

commit abe12d8b96be3c12618811f22ca01788366f99f8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-29 16:58:21 +0900

    Freeze method reference operator object

    [Feature #16103]

commit 2ed68d0ff9a932efbc4393c869534040dec8f647
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-29 15:09:43 +0900

    Revert "Add pipeline operator [Feature #15799]"

    This reverts commits:
    * d365fd5a024254d7c105a62a015a7ea29ccf3e5d
    * d780c3662484d6072b3a6945b840049de72c2096
    * aa7211836b769231a2a8ef6b6ec2fd0ec882ef29
    * 043f010c28e82ea38978bf8ed885416f133b5b75
    * bb4dd7c6af05c7821d572e2592ea3d0cc748d81f
    * 043f010c28e82ea38978bf8ed885416f133b5b75
    * f169043d81524b5b529f2c1e9c35437ba5bc3a7a

    http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/94645

commit 893900dc7876596fab0e488affddf3abcb510445
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-29 15:21:00 +0900

    Add stub set_screen_size for other platforms

commit 07f9cd96f3e99537ee47ceed07706338ab08c1f0
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-29 15:12:37 +0900

    * 2019-08-29 [ci skip]

commit 0f405541bfe5186c068c4521d815b64b82e1ae5e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-29 14:36:45 +0900

    Support SIGWINCH

commit 682aaf6af5ff345897a9128bb19e0b17b71426a6
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-29 14:32:24 +0900

    Replace numbered parameters with named parameters [ci skip]

commit 761346a9604ca2c79777d1d67fb5dcc3c30dbf69
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-04 16:54:34 +0900

    Show the previous definition location,

    when reopened class/module redefinition mismatched the previous
    definition.  [Feature #11460]

commit d3e0bc07e2909f1105dcde4febb0e120eaea30b6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-29 11:20:34 +0900

    Fixed a comment [ci skip]

    A range literal in conditional expression is turned into a
    flip-flop, as a Range object is never falsy and does not make a
    sense.

commit 1cf5a31e7a00c3900bb8bdc358606f66a729d4f7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-29 11:16:17 +0900

    Aseert exception at negative step for non-endless range too

commit d92289cd8d5cac784ae856fb777f10dbc9f91b62
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-29 11:09:22 +0900

    Revert "Remove warnings of flip-flop deprecation from tests and specs"

    This reverts commit bf7a32d22079cc44eb19794e41d82b886d5d17b3.

    flip-flop is no longer deprecated.

    [Feature #5400]

commit cd0e208963bdf9ee2fec30e83bdc8f6bc77a7b8d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-29 03:40:56 +0900

    Document {n}? regexp pattern is optional and not non-greedy [ci skip]

    While not consistent with {n,}?, {,m}?, and {n,m}?, it is arguably
    more useful, as otherwise the ? would have no effect.

    Fixes [Bug #15583]

commit e82719c6511cf00bd4b92759ba0197108cfad0cc
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-28 19:45:27 +0900

    Remove jquery.js from file list of rdoc.gemspec

commit c1d0b6adfcbc219db3348b2b2cc4817db21e4b76
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-28 16:34:17 +0900

    Revert "Treat RUBY_REVISION as an integer on old rubies"

    This reverts commit 6454808c52fff445ff09fefb0fb96988f82aaa3c.

    It is no longer needed, as `VCS::SVN#get_revisions` now returns
    `Integer` as revision numbers, and `short_revision` should deal
    with it.

commit b11d739444e312e3284dc5daf8354a3067606f2d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-28 16:40:57 +0900

    Fix warnings

    `_FILE_OFFSET_BITS` should be defined before system headers.

commit a506b7f35a65a1ecee09fbff0372dc354255dd77
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-28 01:07:27 +0900

    Adjusted indents and supplied last commas

    Fixed unmatched indent of the closing bracket for
    `:irb_current_working_workspace`, and adjusted following elements.

commit 2b55df7315ad78a138d877a3a319f86a3d3bfc24
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-08-28 15:57:30 +0900

    `revision` might be an Integer

commit ed8d2e1cfdc57bba03065e96424e4ba7df45682e
  Author: nagachika <nagachika@ruby-lang.org>
  Date:   2019-08-28 14:50:21 +0900

    tool/merger.rb: fix tag existence check with subversion.

commit c9dc569a94e568de19a39c08d69cf4ea9bd159dd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-28 12:32:43 +0900

    Ensure the last and changed revisions as Integers

commit 8e13da1ee83028000e5d7f9f9526379e32765a81
  Author: pavel <pavel.rosicky@easy.cz>
  Date:   2019-07-19 23:23:00 +0900

    optimize get_power2 [Feature #15631]

    Merged: https://github.com/ruby/ruby/pull/2292

commit 989e8ad322afdfa3aa06e74b89fc42aef42895d0
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 10:34:56 +0900

    Remove debug print [ci skip]

commit 624a0ad44db1f2f5f70ef1726e0c5d4be4d854fb
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 10:06:43 +0900

    Use `set-env` instead of `grep` in each step

commit 108dbb389b0a47199c8d0f271c34a22dd2406f2e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 09:45:31 +0900

    Use JOBS again like macos.yml

commit 330c2f7597a132281d37eeca999a4a069c8bc11a
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 09:41:14 +0900

    Change name to `Tests (test-bundled-gems)`

commit 230f4054792c624d36c043ee0acfa19eeef29f31
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 09:38:52 +0900

    Add name to autoconf

commit 17c0ce379877fa3f8f79e84c5652bc2b74b9e08e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 09:20:07 +0900

    Remove GITHUB_SHA from jobs.<job_id>.steps.env

    because default value overrides it.
    https://help.github.com/en/articles/virtual-environments-for-github-actions#environment-variables

commit 767992329ea335546bbdc98812b5a16be720a415
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 09:15:40 +0900

    Allow missing projectnumber [ci skip]

commit d4de5e645913ae8cacb372f5d405d62de817b6a2
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 09:13:43 +0900

    Show projectnumber in current index.html and GITHUB_SHA

commit 932a471d3811d6d44764ce42b1b140a04961a763
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-17 08:04:26 +0900

    Directly mark compile options from the AST object

    `rb_ast_t` holds a reference to this object, so it should mark the
    object.  Currently it is relying on the `mark_ary` on `node_buffer` to
    ensure that the object stays alive.  But since the array internals can
    move, this could cause a segv if compaction impacts the array.

commit cbcad66741507daea5f5037510404848720e347f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 02:16:28 +0900

    Fix doxygen action

    - Fix checkout error: `fatal: destination path '.' already exists and is not an empty directory.`
    - Remove `GITHUB_SHA` in env, because set automatically
      https://help.github.com/en/articles/virtual-environments-for-github-actions#environment-variables
    - Change minute from 0 to 20 for test soon

commit 71e5871c3be6df6a02b0af2cdb78b3fb35b24918
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-28 01:47:56 +0900

    Run on schedule only and skip if not modified

commit f308ab2131ee675000926540cbb8c13c91dc3be5
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-28 01:09:15 +0900

    Remove jquery.js

commit 88a37dc62099b49e71a05342460da4061d5f23dd
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-28 00:45:21 +0900

    Stop passing CC_LIBS in compile_c_to_o

    To fix "gcc: -lgcc: linker input file unused because linking not done" in
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/openbsd65/ruby-master/log/20190826T200009Z.log.html.gz

    Still I'm intentionally leaving CC_DLDFLAGS_ARGS because making compiler
    options different might result in compile/link failure. (Of course
    CC_DLDFLAGS_ARGS usually should not have compiler options, but it might
    include by bad configure setup)

    The same problem may exist in MJIT_LIBS used inside CC_LIBS as well, but
    I just ignored that case because it impacts only MinGW / cygwin, hoping
    that their users do not perform a wrong configure.

  Notes:
    s/might include/might be included/

commit d8fa88294fbbd04b218b7e9724bec2553dab72b8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 21:56:04 +0900

    Version 6.2.0

commit 39810b4035beb2a4a3e3b993224eb20ead26e40c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 21:55:51 +0900

    Good bye jQuery

commit 6454808c52fff445ff09fefb0fb96988f82aaa3c
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-08-28 00:19:25 +0900

    Treat RUBY_REVISION as an integer on old rubies

commit dd032a5fb4dd8da59c685910b3c673439edc8c42
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-28 00:13:54 +0900

    Make doxygen / coverage torelant to clone race

    a little.

    Doing both `git clone --depth=1` and `git reset --hard ${sha}` does not
    make sense (the latter command either does nothing or just fails), so I
    added non-1 value as a depth.

    Maybe we don't need depth=50 for pull_request and schedule, so it's 10
    for now.

commit 9928a6a3670fff8c87d1def74c719987acae8cf0
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-28 00:12:01 +0900

    * 2019-08-28 [ci skip]

commit 6a0d2bc2af7597e3e308c949e01c8e6329107b47
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-28 00:09:01 +0900

    Follows callback declaration updates

commit 4209066f0e2be775357d09cb513c89a2f064a335
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-27 23:52:31 +0900

    Drop more unused configs from doxygen and coverage

    workflows, because mame said he has never seen it.

commit 3bed468e8864f3ac4332a08b6c95b1a542aa23dd
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-27 23:49:24 +0900

    Omit unused matrix strategy from doxygen workflow

commit 2cd68a38d97c8f2633c88d0d94e9aa1724261f9f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-27 23:42:56 +0900

    Short revision of SVN should be an Integer

commit eaff19de2b31dc2133ba477291498d66bf3448bd
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-27 23:41:51 +0900

    Fix rb_thread_create argument type

    in response to the declaration change in
    e3fc30564e9466d6926f9d25a090dcf787bd5c33.

    Fixing the AppVeyor mswin CI failure:
    https://ci.appveyor.com/project/ruby/ruby/builds/26980881/job/2j6h1qwjnbc8cpop

    ref: https://github.com/ruby/ruby/pull/2404

commit d8060782373c181bc689ce9bc73f6cb8b74de44d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-27 18:46:16 +0900

    Add graphviz for dot command

commit 3ac0b75c456fa1d16c133cef2f47b7361cf651c5
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-27 16:39:42 +0900

    Doxygen in GitHub Actions  (#2406)

    * .github/workflows/doxygen.yml: add a workflow for doxygen in Actions

  Notes:
    Merged-By: mame <mame@ruby-lang.org>

commit 1663d347c993debf7ed83e11e291e7a21e14ed03
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-27 14:21:18 +0900

    delete `$` sign from C identifiers

    They lack portability. See also
    https://travis-ci.org/shyouhei/ruby/jobs/577164015

commit 19b6678132acc56460432d8c2d6246f399b27160
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-27 12:40:06 +0900

    rb_uninterruptible now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This function has only one call site
    so adding appropriate prototype is trivial.

commit bd8dc2561d4983df7bf44dbc6ca194930532adc7
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-27 12:29:00 +0900

    struct MEMO now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  There is only one usage of
    MEMO::u3::func in load.c (where void Init_Foobar(vodi) is registered)
    so why not just be explicit.

commit 79d280a5e855d623957638b6d73f530995e03cae
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-27 12:08:32 +0900

    rb_ivar_foreach now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit adds a function
    prototype for rb_ivar_foreach.  Luckily this change revealed no
    problematic usage of the function.

commit 50f5a0a8d6e7ad89d6caff695a08dbd38edb7a6e
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-27 11:53:39 +0900

    rb_hash_foreach now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit adds function prototypes
    for rb_hash_foreach / st_foreach_safe.  Also fixes some prototype
    mismatches.

commit ae2dc3f217ba9f181471f39a7e5ce72a28b27c2a
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-27 11:16:52 +0900

    rb_define_hooked_variable now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit uses rb_gvar_getter_t /
    rb_gvar_setter_t for rb_define_hooked_variable /
    rb_define_virtual_variable which revealed lots of function prototype
    inconsistencies.  Some of them were literally decades old, going back
    to dda5dc00cff334cac373096d444a0fd59e716124.

commit 78628618da98236fc1bf702079185b36ed394e2a
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-27 12:21:36 +0900

    struct st_hash_type now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit adds function prototypes
    for struct st_hash_type.  Honestly I don't understand why they were
    commented out at the first place.

commit 6dd60cf114701f1ff3526381c0e742c588af2f91
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-26 16:06:40 +0900

    st_foreach now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit deletes ANYARGS from
    st_foreach.  I strongly believe that this commit should have had come
    with b0af0592fdd9e9d4e4b863fde006d67ccefeac21, which added extra
    parameter to st_foreach callbacks.

commit e3fc30564e9466d6926f9d25a090dcf787bd5c33
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-26 15:53:57 +0900

    rb_thread_create now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit deletes ANYARGS from
    rb_thread_create, which seems very safe to do.

commit bc3e7924bc66d3ef77b219c72f3e59cc154550a3
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-26 15:35:28 +0900

    rb_proc_new / rb_fiber_new now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit deletes ANYARGS from
    rb_proc_new / rb_fiber_new, and applies RB_BLOCK_CALL_FUNC_ARGLIST
    wherever necessary.

commit af5e2566405e4808a6d0a29c5b7d305d6fc0aada
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-26 15:27:48 +0900

    rb_catch now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit deletes ANYARGS from
    rb_catch, and fixes some bugs revealed by that.

commit 703783324c16b8b2b50210d1a7d1119902abbb8b
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-26 15:20:15 +0900

    rb_ensure now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit deletes ANYARGS from
    rb_ensure, which also revealed many arity / type mismatches.

commit 5c7c2d9951f2512ca10ea38fecc48d8ac67502e6
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-26 14:51:00 +0900

    rb_rescue / rb_rescue2 now free from ANYARGS

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit deletes ANYARGS from
    rb_rescue / rb_rescue2, which revealed many arity / type mismatches.

commit 3cae73133cfec7d5ec3f8058ec647d5163578003
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-26 14:42:08 +0900

    rb_iterate now takes rb_block_call_func_t

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit makes rb_iterate free
    from ANYARGS.

commit b8fd2e83e7b18fe3c70fc342388b1cb054b22e42
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-26 14:25:53 +0900

    decouple compile.c usage of imemo_ifunc

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  This commit deletes ANYARGS from
    struct vm_ifunc, but in doing so we also have to decouple the usage
    of this struct in compile.c, which (I think) is an abuse of ANYARGS.

commit 7329b3339adab12092056bd8159513645d4f9e8a
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-26 13:30:04 +0900

    #define RB_BLOCK_CALL_FUNC_STRICT 1

    After 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2, I now think ANYARGS is
    dangerous and should be extinct.  Let's start from making
    rb_block_call_func_t strict, and apply RB_BLOCK_CALL_FUNC_ARGLIST liberally.

commit 0c8592b9af304dfcac0d08ba96d5f22ad8312e1a
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-27 14:11:02 +0900

    fix function prototype mismatch of rb_block_call

    Nobu missed it in f0e73fc9862c8d2c57a89349fb79012b826b8245.

commit 6007c7c3663fd1b92020cf60e806cc9634947d5d
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-27 13:03:47 +0900

    delete rb_method_defined_by declaration.

    Ko1 missed this in d5893b91faa7dc77ca6c9728d1054dabd757aead.

commit 2fb723b8af8dbcc2afc0fae7d434e66c2258dece
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-27 15:11:01 +0900

    Revert "Explain which test task"

    This reverts commit 9bc1667a188392b94971b9b96507af76cbd5f413.

    `name` lines are not expanded.

commit 0c8525ecc987615f59fc68f2f767fc12217a7e4e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-26 17:26:39 +0900

    .github/workflows/coverage.yml: add a cron job for coverage in Actions

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2401

commit 9bc1667a188392b94971b9b96507af76cbd5f413
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-27 14:30:52 +0900

    Explain which test task

commit 2789bdddc7602fbc2089242d12e5cc4deed181c4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-27 14:20:07 +0900

    Use array indexing with considering clang's feeling

    ```
    In file included from sprintf.c:1256:
    ./vsnprintf.c:833:8: warning: adding 'int' to a string does not append to the string [-Wstring-plus-int]
                                IS_PRI_EXTRA_MARK(fmt)) {
                                ^~~~~~~~~~~~~~~~~~~~~~
    ./vsnprintf.c:826:34: note: expanded from macro 'IS_PRI_EXTRA_MARK'
               strncmp((s)+1, PRI_EXTRA_MARK+1, \
                              ~~~~~~~~~~~~~~^~
    ./vsnprintf.c:833:8: note: use array indexing to silence this warning
    ./vsnprintf.c:826:34: note: expanded from macro 'IS_PRI_EXTRA_MARK'
               strncmp((s)+1, PRI_EXTRA_MARK+1, \
                                            ^
    1 warning generated.
    ```

commit d53b669948af29ca086d915c8bded0d1963e2c98
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-27 14:05:20 +0900

    compile.c: remove const from the first argument of dladdr

    Unfortunately, dladdr accepts void*, not const void*, in Solaris.

commit 8eee3f3a3623d728c160c41546513594793fb7fb
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-27 13:57:25 +0900

    signal.c: Don't mark ruby_abort as NORETURN on Solaris

    to suppress a warning.

    ```
    signal.c: In function 'ruby_abort':
    signal.c:987:1: warning: 'noreturn' function does return
     }
     ^
    ```

commit 76abd79629bb4ed1e2811f4c9dcccf3165a8af3e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-27 10:38:58 +0900

    Fix the appropriate C++ compiler in OS X selection

    Merge space and slash to character class and add missing `CXX=` before `=g++-4.2`
    at 5e10cb04e88c8a95ee44f6cad2bdf264e0dff92a

commit 22834112650e33e16dd15529a260c0a42745168e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-27 07:59:10 +0900

    Added license comment [Bug #12230] [ci skip]

commit 744be55fad44f73e4966c1c6a2d601f1d31354b2
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 06:30:32 +0900

    Remove duplicated delegation

commit fd0a4a64a38d003621f6b11b5581bd453b12ed00
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 05:59:46 +0900

    Delegete an instance method to a class method correctly

commit 9f0f77717368783bfded08875ade2ea46b75fab7
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-27 05:41:54 +0900

    this iv table should also use the new update function

commit f13db4adde53299868b7523525e5aa2fe0a4b157
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 05:33:27 +0900

    Save value to @ambiguous_width because of a accessor

commit 978ff1ff3a0db5455d591e151f212f4eff0f86c0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 05:24:13 +0900

    Pick lib/readline.rb from ruby/reline

commit f2a5c50f94cb53a418c09e53657292ab56347c2d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 05:10:25 +0900

    The "private" doesn't make sense for class methods and a constant

commit 68207bb4fc35c2f92ba8b5d5b091d6f93f580850
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 05:08:58 +0900

    Use preposing "private" to define methods

commit d8bcede9c357c5f0e743e736f698d1ebdada8f14
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 05:07:55 +0900

    Adjust method forwardings of Reline

commit 09d8e06b335d7647fa5e0385980ba3f1a67a592b
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-27 03:31:52 +0900

    Try only updating hash value references

    I'm afraid the keys to this hash are just integers, and those integers
    may look like VALUE pointers when they are not.  Since we don't mark the
    keys to this hash, it's probably safe to say that none of them have
    moved, so we shouldn't try to update the references either.

commit d9bfbe363d14f8258d239eb702729926571b88e7
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-27 03:14:03 +0900

    Make `gc_update_table_refs` match `mark_tbl_no_pin` a little more closely

    This commit just makes `gc_update_table_refs` match `mark_tbl_no_pin`
    more closely.

commit 3a4a58e2ccf13be874cc81e9c663bd39e687acd3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-27 01:42:41 +0900

    Fix use_lib_reline for test/readline

commit 344f507e4e7f74477f29a8f72d1042a468ce8a42
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-08-24 01:34:00 +0900

    Remove .freeze.

commit 50d4a77041db71ce3110038109b65c3f059c0676
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-08-18 16:07:20 +0900

    Add test with encoding.

commit 0295bffc9645d8e6b40f60d285c69e861f439967
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-08-18 15:59:42 +0900

    Change to test file path.

commit 1ee9299bcab5c9a685fbf0b8b34d6abab157b2bc
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-08-18 15:51:18 +0900

    Add support Windows in CI.

commit f33117fbc6a8fb90f94bb9ff2a4d948a19933c2a
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-07-16 21:26:30 +0900

    Add test reline.

commit 195f545c14857d7eb76c2f7a76e6623f5285014f
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-07-16 21:05:27 +0900

    Fix `Reline::Windows`.

commit 298ac047102f8651970b50a0096989a0b7df88ca
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-07-15 03:10:26 +0900

    Refactoring Reline.

commit afed2668a6f6675536e967f053d7dec0b2026e2f
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-07-15 03:08:36 +0900

    Fix reference core method.

commit f60e5a1f99088849fdc8ddfa84d594179c197a54
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-07-15 01:32:17 +0900

    Remove test_mode in `lib/reline`.

commit 9c0cd6a09eff793356ddc65a76b3fc72c61fee05
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-07-14 21:05:02 +0900

    Refactoring Reline accessor.

commit d5b237325b631e06775c2c7b5a8012b61ca5bccf
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-27 00:11:32 +0900

    * 2019-08-27 [ci skip]

commit 7d9c3a5712b00ebe059a63954674c10d247d1ec3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-25 15:18:23 +0900

    Handle binding.irb for frozen objects and BasicObjects using a delegate

    Fixes Ruby Bug 13264

commit caeafbe8252d13624a16acac703e4d04fcb19062
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-25 09:16:11 +0900

    Move private call without arguments inside method

    This code did not have the desired effect.  I'm not sure if
    irb_binding is supposed to be private or not.  If not, the private
    call can just be removed.

commit ccc5b22a7f4302a286cb16a797e8dccf422e8279
  Author: Kazuhiro NISHIYAMA <znz@users.noreply.github.com>
  Date:   2019-08-26 21:09:02 +0900

    Expand JOBS instead of meaningless export (#2402)

    * Expand JOBS instead of meaningless export

    * Remove -j option in TESTOPTS of test-bundled-gems

    https://github.com/ruby/ruby/runs/203129516#step:10:167
    > invalid option: -j3

  Notes:
    Merged-By: znz

commit 48f1a38f23f9a544e71c5656c83c419c064509fd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-26 18:21:04 +0900

    Limit ChangeLog entries

    Since the previous release date, when the starting message is not
    found.

commit 972222c039bc5f5aa4a0d5bd6ec48ff4629e0fff
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-26 17:45:18 +0900

    Show MFLAGS to check `Set ENV` in .github/workflows/ubuntu.yml

commit 44bead391f32ece837e741c34474aa281c45ec94
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-26 16:38:08 +0900

    CPPFLAGS is not needed for link

commit 261465362222a2de6528c03aa8cc6d237f8435bb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-26 16:30:45 +0900

    Moved INCFLAGS to XCFLAGS from CPPFLAGS as well as mswin

    Rules which have used CPPFLAGS will need XCFLAGS or INCFLAGS now.

commit fafabe2f43ecd58588ac89edc5c177dd956825ad
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-26 16:11:53 +0900

    Add INCFLAGS for fake.rb

    INCFLAGS is not included in CPPFLAGS on mswin, not to be exported
    to rbconfig.rb.

commit b4d6d9c167a096c8647f989ae74e21c1929d227f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-26 13:14:01 +0900

    Removed unnecessary flags for fake.rb

    Flags for ruby core such as warning and `_FORTIFY_SOURCE` macro
    are not necessary to make fake.rb, except for `RUBY_EXPORT` macro
    which prevents to include ruby/backward.h.

commit 1581249de369e4d3e4ac09856bd10fb98cd4addb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-26 13:09:48 +0900

    Added in-srcdir macro [ci skip]

commit 5e86b005c0f2ef30df2f9906c7e2f3abefe286a2
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-23 12:14:06 +0900

    uid_t and gid_t are narrower than VALUE.

    Often uid / gid are 16 bit or 32 bit integers, while VALUE are 32
    to 64 bits.  They tend to differ in size.  Because rb_ensure expects
    its callbacks to take VALUE arguments, narrowing must be done by
    hand, otherwise data corruption can happen depending on machine ABI.

commit 48131a46730b76bdb252d24507980ea90c0166ad
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-23 10:10:59 +0900

    rb_mjit_header.h is not worth documenting [ci skip]

    This is an auto-generated header file that does not include anything
    interesting.  Should skip generating CAPI documents.

commit fa6c1b06ad65e18bd187b643c045e700f7081c2d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-26 11:58:55 +0900

    Suppress a "clobbered" warning

commit 4448d5864237de5d570f3d0ea80ddc53cf6f57fe
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-26 11:08:30 +0900

    * 2019-08-26 [ci skip]

commit 5e10cb04e88c8a95ee44f6cad2bdf264e0dff92a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-26 11:04:11 +0900

    Refined the appropriate C++ compiler in OS X selection

    Allows CC to be prefixed another path or command, e.g., ccache.

commit b4dfac2c125605881239fd62b7f458f52efff7ed
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-26 04:53:15 +0900

    Fix ArgumentError in expand_tabs.rb

    This fixes the following in my environment:

    misc/expand_tabs.rb:29:in `=~': invalid byte sequence in US-ASCII (ArgumentError)

    This switches from =~ to start_with? as a regular expression is
    not actually needed here.

commit e496e96547b64c3a2fa6f285c3bc9bd21a245ac6
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-26 04:50:19 +0900

    Document that Enumerable#sum may not respect redefinition of Range#each

    It already documented that it may not respect redefinition
    of Integer#+.

    Fixes [Bug #13700]

commit 71d97a5ef80a23b0bb1005570ed059580981a467
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-26 02:52:58 +0900

    Fix sample/drb/http0serv.rb

    Previously, trying to use this would result in:

    undefined method `uri' for #<DRb::HTTP0::ServerSide:0x00000aec9f1637f8> (NoMethodError)

    Also, use a relative require to load sample/drb/http0.rb.

    Fixes [Bug #13431]

commit 365e5b38a9ca24116a9c3133e0a0e8ce230ccb02
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-25 23:08:13 +0900

    configure.ac: Improve icc_version guessing for non-icc environment

    icc_version was wrongly defined as "__ICC" on non-icc C compiler, which
    caused a warning:

    ```
    ./configure: line 8211: test: __ICC: integer expression expected
    ```

    This change adds a sed command to delete "__ICC".

commit 11f7c30fa7812388b8919453b92fdf5613db22dd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-25 22:11:49 +0900

    configure.ac: fix the guess of icc_version

    The icc_version guessing was accidentally disabled because of
    61885c9b7ca8ccdaf53d7c365fbb86bad3294d88; `AC_PROG_CC_C99` changes
    CC like "icc -std=c99", and `AS_CASE(["x$CC"], [xicc],` does not match.

    The variable `icc_version` is eventually defined, so the `AS_CASE` is
    not needed.  This change removes the `AS_CASE`.

commit fa5f7771f2312147d4b628205fdaf90afc3527e6
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-25 20:10:24 +0900

    Drop duration from AppVeyor notification

    The format is a little weird, and not so helpful either.

commit 6944a1aa4f805c19faa3340f841a459f907f840e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-25 19:29:52 +0900

    lib/webrick.rb: use require_relative for webrick/utils.rb

    `require "webrick/utils.rb"` should load `lib/webrick/utils.rb`, but on
    some CI machines, it wrongly loads `test/webrick/utils.rb`, which caused
    circular require warning:

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/ubuntu/ruby-master/log/20190825T093007Z.log.html.gz
    ```
    /data/chkbuild/tmp/build/20190825T093007Z/ruby/lib/rubygems/core_ext/kernel_require.rb:61: warning: /data/chkbuild/tmp/build/20190825T093007Z/ruby/lib/rubygems/core_ext/kernel_require.rb:61: warning: loading in progress, circular require considered harmful - /data/chkbuild/tmp/build/20190825T093007Z/ruby/lib/webrick.rb
    ```

commit c775ab5e2892a86e89cebc2c2d16e7b0fd190f19
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-25 18:27:57 +0900

    `local_path?` is a class method [ci skip]

commit cc6fe1524122ba7d890129c7fdbfd28edba198bf
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-25 16:59:45 +0900

    tool/lib/vcs.rb: explicitly fail when notes/commits is not available

commit 1b03d2d76be48039e8a4d609f36d221077a1daa9
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-25 13:58:30 +0900

    Revert workaround

commit 5decf66ab3395193160673ddd80395a5b3b86223
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-25 07:39:57 +0900

    Inspect dynamic symbol as well as static symbol

commit b341e98b041e5e0f1fd2f40145b0b3d9cd8fdc3f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-25 11:38:15 +0900

    Simplified f13a00f5b4 [ci skip]

commit f13a00f5b471f0f637c3f165daba235f24083bfc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-25 11:24:53 +0900

    Export all commits as ChangeLog when no starting commit is found [ci skip]

commit 04735c48ab44c97cbfd5a5cd37f9a1696e2f5a2b
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-25 06:05:19 +0900

    Minor documentation fixes [ci skip]

    From zverok (Victor Shepelev)

    Fixes [Misc #16126]

commit e1c991f8d783440411e5bf4faf3f0923cef4a0e1
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-25 01:09:53 +0900

    Move Object#hash rdoc to hash.c [ci skip]

    This gets RDoc to pick up the documentation correctly.

    Problem pointed out by zverok (Victor Shepelev).

commit cf5516de7bff474030a820b63788e12f0b8b93d6
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-25 00:51:59 +0900

    * 2019-08-25 [ci skip]

commit 03ee12a3b83ff9d56f3a993850cb134c2e16f846
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-25 00:50:34 +0900

    Add workaround (2nd try)

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/gentoo/ruby-master/log/20190824T153002Z.fail.html.gz
    ```
    /home/gentoo/chkbuild/tmp/build/20190824T153002Z/ruby/tool/lib/vcs.rb:577:in `export_changelog': cannot find the beginning revision of the branch (RuntimeError)
        from ./tool/make-snapshot:353:in `block in package'
        from ./tool/make-snapshot:351:in `chdir'
        from ./tool/make-snapshot:351:in `package'
        from ./tool/make-snapshot:523:in `block in <main>'
        from ./tool/make-snapshot:523:in `collect'
        from ./tool/make-snapshot:523:in `<main>'
    ```

commit df348310dc2ba0b01f7dd7277184c688a5d430fe
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-24 23:17:12 +0900

    Add workaround for some CIs

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian8/ruby-master/log/20190824T093005Z.fail.html.gz
    ```
    branches:
    * trunk
      remotes/origin/trunk
    ```
    and
    ```
    fatal: Remote branch master not found in upstream origin
    ```

commit 5d5502dc852cc7588c75c519f5c881ead577e827
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-24 21:26:24 +0900

    Fix typos

commit 571ffcd6094ccf1c68d4bfc36e425e0ee524e8b4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-24 20:31:16 +0900

    ext/psych/yaml/api.c: Suppress a "variable set but not used" warning

    ```
    compiling ../.././ext/psych/yaml/api.c
    ../.././ext/psych/yaml/api.c: In function 'yaml_document_delete':
    ../.././ext/psych/yaml/api.c:1122:7: warning: variable 'context' set but not used [-Wunused-but-set-variable]
         } context;
           ^~~~~~~
    ```
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/ubuntu1604/ruby-master/log/20190824T093004Z.log.html.gz

commit 97ad7862d5f65c48409a5301609af8448aaae16d
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-24 16:22:37 +0900

    Add debug print

    master branch not found on some CIs
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian9/ruby-master/log/20190824T063005Z.fail.html.gz
    ```
    fatal: Remote branch master not found in upstream origin
    ```

commit fe83ed47e7e79208c0129a0005dcb9d569543893
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-24 10:20:44 +0900

    Try to fix `make dist` error on chkbuild

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian9/ruby-master/log/20190823T213004Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian8/ruby-master/log/20190824T003006Z.fail.html.gz

commit b38ab0a3a928939daf7c1772bf49065a3184b88a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-24 01:41:09 +0900

    * 2019-08-24 [ci skip]

commit d5b917d50062559efb5b90ed093293d37e8a40b9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-24 01:10:42 +0900

    Named numbered parameter indexes

commit 2e28b3678fc1b48f7dbca751d2a65d3fe0018789
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-23 20:43:15 +0900

    [ruby/stringio] Fixed a typo

    https://github.com/ruby/stringio/commit/b249631c433f800c979be2705bf63555075db2fc#commitcomment-34804150

    https://github.com/ruby/stringio/commit/998d6257fb

commit d9b73dcc0d5e4c4613a89a1d58727b52bb5d1d10
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-23 17:18:37 +0900

    Remove github_action_linux tag from bundler examples.

      Maybe it has fixed at 5a384e2c08704dc7af9d8d3bdfc475eb8c0723aa

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2399

commit 3b55394b07f29fac2717bb82fdc92140b2b302fe
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-02-19 20:57:41 +0900

    Ensure all default gems have an gem folder

    Even if they don't ship with any executables. This makes rbinstall
    behaviour consistent with rubygems `gem install --default` command.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2085

commit 1c5a2682392ece013ae95215d97f0561591b6dc6
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-23 13:57:19 +0900

    Simplify expand_tabs.rb file selection

commit a5b809e994ce10d265e73f8c9d7c042e5e84d171
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-23 13:00:17 +0900

    Check metadata a bit more

commit 650cd245552d5c1abb244398b98d46ee280c4cd0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-22 20:14:59 +0900

    Hoisted out get_digest_obj_metadata

commit 9ffb0548bf95e1113f5657453c64477e792d1230
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-23 09:46:17 +0900

    * 2019-08-23 [ci skip]

commit 1d6a31f3d5b1e608dd6726918b64d2369e8df8b1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-23 09:45:46 +0900

    Make AppVeyor notification similar to Travis

commit fd20b32130f52f4a7799a8d7a367f5b39636bc6a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-22 23:10:54 +0900

    Make GitHub Actions Slack notification consistent

    with Travis, rather than AppVeyor.

    Formerly it was made similar to AppVeyor to provide some normal set of
    CI failure notification. But for some reason people preferred a shorter
    variant and introduced a1d606c079f6c3d1779d885e0bf2e3991251609e and
    d8d8015b93c6daa8d8433895464db3493a2056e2.

    Instead of AppVeyor format, this commit chose Travis-like format to achieve
    consistency and to include usual CI-failure information, while keeping
    it one-liner for people who prefer short notifications.

    Note that this shrinks the 40-char sha to 10-char, using the new feature
    of k0kubun/action-slack@v2.0.0:
    https://github.com/k0kubun/action-slack/commit/1c88a05dac664cbafa1c99a37f292ed23ac1c289

commit efc89703365fa787c012370c18803bae67924526
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-22 22:47:05 +0900

    * expand tabs. [ci skip]

    Tabs are expanded because previously the file did not have any tab indentation.
    Please update your editor config, and use misc/expand_tabs.rb in the pre-commit hook.

commit a4d389d8fe87b6af9e5fac0e430d56a4ee9b8470
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-22 22:46:29 +0900

    Improve the description of MJIT cancel-all [ci skip]

commit 15eaedf805fb2727c79a6c59af6d5f6c2a6d634b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-22 21:13:34 +0900

    Add misc/expand_tabs.rb ported from auto-style.rb

    This is implemented to close [Misc #16112] because all other options got
    at least one objection, and nobody has objected to this solution.

    This code is a little complicated for the purpose, but that's just
    because it includes some historical code for auto-style.rb:
    https://github.com/ruby/ruby-commit-hook/blob/918a7c31b69ad2f7b125608c1c6a1f4fd01ec15a/bin/auto-style.rb

    Please feel free to improve this file as you like.

    [Misc #16112]

commit d8d8015b93c6daa8d8433895464db3493a2056e2
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-22 09:24:35 +0900

    Remove footer from message to Slack

commit a1d606c079f6c3d1779d885e0bf2e3991251609e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-22 07:57:06 +0900

    Show short message to Slack

commit 1940347fdfe44a515a4d4ba31f068a245570b70d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-22 07:21:43 +0900

    Use () instead of {} for nmake

commit 2d8d6345ffba384c2825225c0b9c972629ff0d5b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-22 07:03:54 +0900

    `--fomart progress` is default. It's duplicated.

commit 0b0fedad7098b70686ef9f3c931a8c9c93d5b00c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-22 07:02:48 +0900

    Introduce test-bundler-parallel task.

commit 800821831d6b4319e82d23291d3127212a2e7334
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-22 06:02:21 +0900

    Always check multiline termination

commit 8d804e41a013ab1967a703a0ce388b579f735ac8
  Author: Fernando Wolf Bona <bonafernando@gmail.com>
  Date:   2019-08-22 05:36:39 +0900

    Add abs to Matrix (#2199)

commit 48fdc37ad52d9a59763da4c1c22683713b7ddea8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-22 05:07:59 +0900

    IRB's multiline history is enable only when Reidline mode

commit 6bdb65c0e6383f2ef845b8f4b0cc3c03e8aec118
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-22 00:20:27 +0900

    * 2019-08-22 [ci skip]

commit a9638511009bb8847dfb037d05bdbbdd685066e7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-21 16:41:06 +0900

    Hoisted out rb_id_metadata

commit 74c6662af5d9748baff7c32e8f0baf7996dd898e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-21 16:31:26 +0900

    Hoisted out rb_digest_namespace

commit c030cec7cac3bacd230b87c9610bc67d8b89ab26
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-21 23:13:20 +0900

    Debug GitHub context on broken notification

    sometimes Slack notification footer becomes just " at ".
    It seems like `github.event.head_commit` is missing. Let me debug the
    context.

commit 3df9f3cc13b126cb270743c82f2c037c30a98103
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-21 16:20:31 +0900

    Separated initializing IDs

commit 4419b5dbc2e3fe4ec3ac27e3d8b8a2b357f27426
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-21 13:30:43 +0900

    The investigation is going on...

commit 81dfe3c47bb397a0a54ee10c6913112181a8466d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-21 13:26:12 +0900

    Enable more Time TZ tests on OpenBSD

commit a230e65e8b08003c6b346e6ef177bc8655de55b7
  Author: lolwut <lol@wut.com>
  Date:   2019-08-16 22:12:40 +0900

    [bundler/bundler] Freeze time to avoid failures at midnight

    Specify just a string

    set @built_at as nil before testing

    https://github.com/bundler/bundler/commit/578ec96c9c

commit 1c2774526eef733ea95e5dda576c95169341ba7e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-19 12:51:19 +0900

    [bundler/bundler] Share test fixtures with parallel_tests

    https://github.com/bundler/bundler/commit/a38161c5be

commit 10011f4371c4d6f9a5e49b210800beba1e3e3722
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-19 11:36:17 +0900

    [bundler/bundler] Try to use RunTimeLogger for parallel_tests

    https://github.com/bundler/bundler/commit/faccc522d1

commit ace88852f2c2dae52118d80cbf5800ea99e409e6
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-01-25 01:28:02 +0900

    [bundler/bundler] Parallelize test suite

    https://github.com/bundler/bundler/commit/23007cb107

commit ede77d82e709956cd1d3c849840107c84cd2e911
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-15 23:47:18 +0900

    [bundler/bundler] Fix a couple of typos

    https://github.com/bundler/bundler/commit/52b6b94068

commit 1120bacd8b8656b45a56487ee62fd48095aca019
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-18 06:11:38 +0900

    [bundler/bundler] Remove the :ruby exclusion tag

    Our current set of specs is the same for all supported rubies, and we
    should keep it that way.

    https://github.com/bundler/bundler/commit/c9dc0f6f2c

commit bcc4ac924d495d74d5ce56c7d4c735a1df320220
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-18 05:03:26 +0900

    [bundler/bundler] Remove another 1.8.7 specific bit

    https://github.com/bundler/bundler/commit/8c7942d2c6

commit 5ea08883cfc90e05e5fb76e1e10cee1818a40c9e
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-18 05:00:52 +0900

    [bundler/bundler] Remove old rubies stuff no longer needed

    https://github.com/bundler/bundler/commit/36fb3287f4

commit 864f23a457291e64cb6a0703dcc0b3e26e4cf109
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-21 01:04:27 +0900

    * 2019-08-21 [ci skip]

commit 88b1f2dac430d7b10fc98c5a072c4edfeb51b27a
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-21 01:04:08 +0900

    `rp(obj)` shows func, file and line. (#2394)

    rp() macro for debug also shows file location and function name
    such as:

      [OBJ_INFO:rb_call_inits@inits.c:73] 0x000056147741b248 ...

  Notes:
    Merged-By: ko1

commit d10e28b875a58e2c4422b8df8f4bbcc2fb0362d0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-20 23:58:36 +0900

    Skip tests on Actions if [ci skip]

    It seems that we cannot easily apply job-level [ci skip].
    Therefore this commit skips only Tests step if it's [ci skip].

commit 235d810c2ecd1289c963f6dc6cce78ae2572d034
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-20 22:31:41 +0900

    Deprecate alerting multiple channels

    Some CIs report to two channels, and some others report to only one.
    This makes it consistent. Only alert channel should be alerted.

commit 9557069299ac3b96691040a541afa65761a724ad
  Author: Akira Matsuda <ronnie@dio.jp>
  Date:   2019-08-20 22:08:41 +0900

    Avoid creating Hash objects per each mon_synchronize call (#2393)

  Notes:
    Merged-By: amatsuda <ronnie@dio.jp>

commit af121720357e3bcf3d45c0f578d262770c7f45c9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-20 19:26:12 +0900

    Removed unused literal assignments [ci skip]

commit 7a07c54bef599b7b0ce1dd8a6c13021f03a8220d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-20 19:20:22 +0900

    Subjects may contain a comma [ci skip]

commit 73af1c4d0078dc3be0cbeca2445047be5c0d852b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-20 13:56:04 +0900

    [rubygems/rubygems] Use `RbConfig::CONFIG['rubylibprefix']`

    It is defined since ruby 1.9.2.

    https://github.com/rubygems/rubygems/commit/84981ca908

commit dd58c4ba3576d5dc1489767a25de9540b79b0ef9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-20 16:07:43 +0900

    Investigation of a sporadic error at Github Actions

commit 5a384e2c08704dc7af9d8d3bdfc475eb8c0723aa
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-20 09:46:31 +0900

    Fix some bundler specs (#2380)

    * These seem to consistently pass already

    * Show actual command when running `make test-bundler`

    Current the setup command that installs the necessary gems for testing
    bundler was printed, but not the actual command that runs the tests.
    That was a bit confusing.

    * Borrow trick from setproctitle specs

    * A title that long doesn't get set sometimes

    No idea why, but the test doesn't need that the title is that long.

    * Fix most gem helper spec ruby-core failures

    * Fix the rest of the gem helper failures

    * Fix version spec by improving the assertion

    * Remove unnecessary `BUNDLE_RUBY` environment var

    We can use `RUBY` when necessary, and `BUNDLE_RUBY` is not a good name
    because bundler considers `BUNDLE_*` variables as settings.

    * Rename `BUNDLE_GEM` to `GEM_COMMAND`

    This is more descriptive I think, and also friendlier for bundler
    because `BUNDLE_` env variables are interpreted by bundler as settings,
    and this is not a bundler setting.

    This fixes one bundler spec failure in config specs against ruby-core.

    * Fix quality spec when run in core

    Use the proper path helper.

    * Fix dummy lib builder to never load default gems

    If a dummy library is named as a default gem, when requiring the library
    from its executable, the default gem would be loaded when running from
    core, because in core all default gems share path with bundler, and thus
    they are always in the $LOAD_PATH. We fix the issue by loading lib
    relatively inside dummy lib executables.

    * More exact assertions

    Sometimes I have the problem that I do some "print debugging" inside
    specs, and suddently the spec passes. This happens when the assertion is
    too relaxed, and the things I print make it match, specially when they
    are simple strings like "1.0" than can be easily be part of gem paths
    that I print for debugging.

    I fix this by making a more exact assertion.

    * Detect the correct shebang when ENV["RUBY"] is set

    * Relax assertion

    So that the spec passes even if another paths containing "ext" are in
    the load path. This works to fix a ruby-core issue, but it's a better
    assertion in general. We just want to know that the extension path was
    added.

    * Use folder structure independent path helper

    It should fix this spec for ruby-core.

    * Fix the last failing spec on ruby-core

    * Skip `bundle open <default_gem>` spec when no default gems

commit aa03de8ba13e5ffa7049d3a881d2f5fe70dd4092
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-20 08:24:50 +0900

    Treat two types "do" correctly

    A "do" what has followed a token what has EXPR_CMDARG is for a block,
    and in other cases "do" is for "while", "until" or "for".

commit dc0e45e39b37556af8abf6cdb0180e2973041931
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-08-19 13:42:29 +0900

    Update moved objects in original_iseq

    Without doing this, enabling a TracePoint on a method could lead to use
    of moved objects. This was found by running
    `env RUBY_ISEQ_DUMP_DEBUG=to_binary make test-all`, which sets
    orignal_iseq then runs the compaction tests and the tracepoint tests.

    Please excuse the lack of tests. I was not able to figure out how to
    reliably trigger a move on a specific iseq imemo to make a good
    regression test.

    To manually confirm the problem and this fix, you can run:
    ```
    env RUBY_ISEQ_DUMP_DEBUG=to_binary make test-all \
      TESTOPTS="test/ruby/test_gc_compact.rb \
                test/gdbm/test_gdbm.rb \
                test/ruby/test_settracefunc.rb"
    ```

    Or the following script:

    ```ruby
    tp = TracePoint.new(:line) {}
    1.times do # put it in a block to not keep these objects alive
      objects = 10_000.times.map { Object.new }
      objects.hash
    end

    1.times do
      # this allocation pattern can realistically happen in an app
      # at load time
      beek = 10_000.times.map do
        eval(<<-RUBY)
          def foo
            a + b
            1.times {
              4 + 234234
            }
            nil + 234
          end
        RUBY
        Object.new
        Object.new
      end
      beek.hash
    end

    tp.enable(target: self.:foo) { 234 } # allocate original iseq

    GC.verify_compaction_references(toward: :empty)
    GC.compact

    tp.enable(target: self.:foo) { 234234 } # crash
    ```

    [Bug #16098]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2391

commit 19b0161b851ba32d5bc6c367db5b520d35905d6b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-20 01:58:45 +0900

    Check whether syscall(2) is deprecated by actual warnings

commit 588b74e8d84532d3eb0e4aa06372b7a6b171b9cd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-20 01:11:28 +0900

    Check for minimum required OSX version earlier

commit 9ee770a2ce57fce9a5dedf6c6c35ca8e02fd044b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-20 00:39:06 +0900

    Bail out if unsupported old MacOSX is required

commit af2c8d283665f741f82b4e16b06c520e702c012b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-20 00:18:07 +0900

    Fixed the check for OSX version

    Should compare minimum required version, and with the particular
    macro defined for each version.  Also made the error messages
    consistent.

commit e6b72e8cae786c9752cc34541b58b5635d5c76bb
  Author: David Carlier <devnexen@gmail.com>
  Date:   2019-08-19 23:36:47 +0900

    retrieve current path on macOS

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2390

commit 1408f15921a8a051055a68fb96e050a7d4cd35fb
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-20 00:21:17 +0900

    * 2019-08-20 [ci skip]

commit 8df25214de1a240ec6859415692b29955d2d423a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-20 00:17:26 +0900

    io.c: make ioctl_req_t int in Android

    The second argument of ioctl seems to be int in Android.
    Android is not a supported platform, but this one-line change allows
    ruby to build by Android NDK r20.

commit 45bed2850e5bf31c3528cf3559e76c3823bb4340
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-19 19:37:07 +0900

    Reduce sub-shell and use `&&` instead of `;`

commit 8882986d9701ef8be4cdd87e64a30321f1738cee
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-08-19 18:43:23 +0900

    Drop duplicated sample code (#2389) [ci skip]

    * Drop duplicated sample code

    * Drop another style sample

    https://github.com/ruby/ruby/pull/2389#issuecomment-522489520

    * Update sample list

commit 209ea85b54c9229f0c1e5c730dee05a096599eb0
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-19 18:37:22 +0900

    Make portable for standalone test-unit gem.

      * It can invoke test-unit with envutil.rb
      * refute_match of test-unit couldn't handle String instance.

commit 9b330200f8e180ca393cac25f811f6194990aaa4
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-08-19 18:16:45 +0900

    Remove unused variable to suppress warning (#2388) [ci skip]

    ```
    sample/observe.rb:30: warning: assigned but unused variable - clock
    ```

commit 97c377e2b1954b977b015f11183b201ad4a88bd6
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-19 18:11:51 +0900

    Mark Travis osx cron-only

    because it has often hanged like
    https://travis-ci.org/ruby/ruby/jobs/573691637,
    and we also have almost the same test suite on GitHub Actions now, which
    seems to be stable in `make check` so far.

commit cda8664471b5c2adb9d1ea9563ac38378621d0fd
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-08-19 18:00:29 +0900

    Update a sample code (#2387)

    Kernel#inspect does not call #to_s now

    To follow https://github.com/ruby/ruby/commit/fd7dc23d281f38a71fa7f9c32812cd468c4b1788

commit 355acbafde40c04b8586e1d9185b4965552e00fd
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-19 17:52:13 +0900

    Update the canonical repository url

commit 6dd9736c3a73ecd9b0dcf47348a81fb934eb88b3
  Author: David CARLIER <devnexen@gmail.com>
  Date:   2019-08-19 17:36:28 +0900

    crash report on mac little update

    displaying vm info as Linux and FreeBSD.
    checking libproc as it is present only from 10.5 version.

    https://github.com/ruby/ruby/pull/2384

commit 605d2ce9b98c4306505c8be05483e3d296db5f1e
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-08-19 17:30:59 +0900

    Accurate a sample to show having some ext (#2385)

commit 45454bdb8b25def782677dceb92cfd7b2d8b83c1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-19 16:37:29 +0900

    Prefer Regexp#=~ to Regexp#match when the RHS may be nil

commit b4daa442704204b93a586fb7b696998f33b29c72
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-19 16:32:57 +0900

    Use modifier for pid_t

commit 8108594f4701b02bfb7b90b7c2585a8214d8e64d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-19 16:18:54 +0900

    unsigned int should have enough bits for rb_thread_shield_waiting

commit 1bd60c66d385142d08f678f8a9563c311cfc3fe8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-19 15:55:53 +0900

    Fix FL_USER19

    * include/ruby/ruby.h: cast via `unsigned int` explicitly, to get
      rid of signed extension by implicit integer promotion.

commit 4515bcc922376771c56733745c7595e14449b6d8
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-08-19 15:37:28 +0900

    Omit version.h when merging

commit c5db4c28f9349eb296a360dc08d6b88be66916d1
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-19 15:01:48 +0900

    cont.c: remove unused STACK_GROW_DIR_DETECTION

    to suppress a warning for "unused variable"

commit 6c2aa8689ade82578e9e16be37e21e16eb7ce069
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-19 14:59:58 +0900

    Roughly retry `brew update`

    as it failed randomly https://github.com/ruby/ruby/runs/196712109

commit 39a43d9cd09f8c880d0a70d9cb8ede6d7e6ef583
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-08-19 14:51:00 +0900

    Make it as clear as possible that RubyVM is MRI-specific and only exists on MRI (#2113) [ci skip]

    * Make it clear as possible that RubyVM is MRI-specific and only exists on MRI

    * See [Bug #15743].
    * Use "CRuby VM" instead of "Ruby VM" for clarity.

    * Use YARV rather than "CRuby VM" for documenting RubyVM::InstructionSequence

    * Avoid introducing a new "CRuby VM" term in documentation

commit d76be10df11cf24d7a5a1f88a4aadc6d817db4a7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-19 14:43:15 +0900

    missing/memcmp.c: suppress a `-Wparentheses` warning

commit 1f3f50fb5eb08ede6cfaf450e0d7db797ec46c95
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-19 14:34:29 +0900

    * expand tabs. [ci skip]

commit 574a9edfb3c20165c919d447902d1052165b2132
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-19 14:34:13 +0900

    Set flag to allow unprivileged users to create symlinks (#2381)

    * [Win32] set flag to allow unprivileged users to create symlinks

  Notes:
    Merged-By: nobu <nobu@ruby-lang.org>

commit bc1e2271af54087cb3b9e4a0cdceeead56ee3a1a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-19 09:45:41 +0900

    lib/rdoc/markup/parser.rb: remove a unused variable initialization

commit 4c13368972366507b741be60602f314b85861f52
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-19 09:46:55 +0900

    Make AppVeyor notification colors consistent

    It was using the same one as original AppVeyor's notification, but it's
    just inconsistent with others like Travis and GitHub Actions.

commit d106f082915cbab454d5a7dc3661cea5136f42cf
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-19 09:41:51 +0900

    Stop reporting test-bundled-gems results

    by marking continue-on-error.

    I dropped it to test Slack notification, and I finished to test it.

commit c100e3856a624f10b461d202f07f49791aa29c89
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-19 03:40:33 +0900

    Workaround errors on multi-line commit message

    by using toJson with fields.

commit e139d27748a0548c0ae10fb483c7389caacd4b3d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-19 03:14:18 +0900

    Make Slack notification available

    for macOS / Windows as well.

    Docker-based GitHub Action does not work on these OSes.

commit aa5fbb5a7661fa5329881415e65a24151507e69a
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-19 01:50:18 +0900

    * 2019-08-19 [ci skip]

commit 2f6c8ed26eec4ad2d2fdaa0823cc63ba32f4c7a2
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-19 01:49:51 +0900

    Implement Slack notification for Actions

commit e4c43207f9c7c56ecc76bb941c08a686a242b1de
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-18 23:32:49 +0900

    Revert "Try notifying Slack from Actions"

    This reverts commit d8807e8b1a9d09ee1543e18618b4ef7e8203c616.

    We'd need more features. Reverting to customize this later.

commit d8807e8b1a9d09ee1543e18618b4ef7e8203c616
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-18 23:19:09 +0900

    Try notifying Slack from Actions

    https://github.com/8398a7/action-slack
    https://github.com/marketplace/actions/action-slack

commit 829b800c10086ee504995c6e088d87370c552c40
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-18 19:09:40 +0900

    Reorder Travis matrix.include

    to clarify what's running for every commit.

commit 51edcbad5be46af800961aabc7b45f0ce6509990
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-18 18:08:38 +0900

    Use master branch instead of trunk.

commit 9132153930b88b5ffeb95d42081c05d5eceb2d90
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-18 17:40:01 +0900

    Ignore tags on default gems from ruby core repository.

commit ad0ea708caec880c3f357fe761c215efc169fa55
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-18 15:48:52 +0900

    Drop before_test for mswin too

    for consistency. In the pull request, `before_test` was dropped only for
    msys2 to fix msys2-only failure. But there's no need to keep it
    inconsistent now.

commit cba8166cc198509f236e1e8ed2feb7a1304f6718
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-08-18 15:47:19 +0900

    Appveyor - vc120 use OpenSSL 1.0.2, vc140 use 1.1.1 (#1998)

    * appveyor.yml - OpenSSL vc120 -> 1.0.2, vc140 -> 1.1.1

    * Try just using build_script

commit 6b42b0c60ce51cc8228892e6a99c83fefb19f131
  Author: Masataka Pocke Kuwabara <kuwabara@pocke.me>
  Date:   2019-08-18 15:39:19 +0900

    Fix document of `GC.start` (#2382)

commit d3da1d57d3c184298b7f6fb5083a39bd22cc9a4f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-18 15:02:21 +0900

    Skip open_spec.rb:L95 because ruby repo doesn't have json as default gems.

commit a77b3b4476241b6b4246fc805ac5fc357f8c4e57
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-17 20:39:56 +0900

    [bundler/bundler] Remove unnecessary require

    https://github.com/bundler/bundler/commit/8ef571ed4e

commit 683f9e1dbf42aa4b326b244f1d4dbbbdcb9e8ceb
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-17 00:45:00 +0900

    [bundler/bundler] No need to activate the `fileutils` default gem

    The version we're vendoring actually relaxed this restriction back to
    2.3.0+, so we can always use the vendored version.

    https://github.com/bundler/bundler/commit/d366cbfe5d

commit 4756c5f7e79642484d01a7dbca17357eb8b08ef1
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 01:44:21 +0900

    [bundler/bundler] Remove unnecessary rubygems monkeypatch

    Instead, make sure we always load the local copy of bundler during
    specs, and never end up using the default copy.

    https://github.com/bundler/bundler/commit/ac655ffeda

commit 5a69a23afcc39a87bf808f484fa476978a9a0b4d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-17 00:54:12 +0900

    [bundler/bundler] Don't use system bundler on this spec

    If we use system bundler, when booting the "outermost" bundler process,
    bundler will save the path to the system bundler in BUNDLE_BIN_PATH, and
    use it again when booting the "innermost" bundler process (`bundle exec
    echo foo`).

    That means that second process will use the system bundler path again.
    However, we have `-rsupport/hax` in RUBYOPT, so that file will load from
    the local copy of bundler, and that file will load `bundler/version`
    from the project (not from system), because -Ilib is in the LOAD_PATH.

    That will end up causing redefinition errors because the same constant
    will be loaded from two different locations.

    In general, this is expected behavior, normally you will wrap the
    process with `Bundler.with_original_env` to reset the environment.
    However, the easiest fix here is to not use system bundler, because it's
    not really necessary and thus doesn't help the readability of the spec.

    https://github.com/bundler/bundler/commit/a3d72a34ab

commit 0653d8c6018dc9f52856c7b38188c88669be2c83
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-17 00:51:18 +0900

    [bundler/bundler] Fix spec using the deprecated `bundle config` mode

    https://github.com/bundler/bundler/commit/789dd1864f

commit c50c2354cf9a43978626e5573e72574516b28da9
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-02 21:08:28 +0900

    [bundler/bundler] Require relatively from exe/ when possible

    https://github.com/bundler/bundler/commit/e4cbb91b7d

commit 998204882b25f0cee5db1749a877ef9780c8925f
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-02 20:23:20 +0900

    [bundler/bundler] Last relative requires

    https://github.com/bundler/bundler/commit/fb587b9ebb

commit f753961611d286332e968f3b30f9b55b8590ef7d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-03 19:22:36 +0900

    [bundler/bundler] Remove a bunch of unneeded rubygems requires

    https://github.com/bundler/bundler/commit/f9cb39e614

commit 7659f00a8dd1df0e823cd5a47c6b4036c94e1321
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 22:56:19 +0900

    [bundler/bundler] Move local variable to only branch where it's used

    https://github.com/bundler/bundler/commit/3995b3345d

commit d80f5399adc3564d05339e6dff92ea1e95fb280a
  Author: Zehan Zhao <cnallenzhao@gmail.com>
  Date:   2016-08-15 23:44:19 +0900

    [bundler/bundler] Fix open default gem error

    https://github.com/bundler/bundler/commit/792d724752

commit 98841b2b19fc2d5c6aacda26019ff07d48d971ec
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-10 04:48:38 +0900

    [bundler/bundler] Wrap `open` specs with a context

    So I can add another context that doesn't run the `before` block.

    https://github.com/bundler/bundler/commit/06d0acc45a

commit e6e8d2d8c06336bfcd030a2d8cf69b980446dd40
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-10 04:47:09 +0900

    [bundler/bundler] Prefer `before` to `before :each`

    https://github.com/bundler/bundler/commit/6678747fae

commit cc644c7116c7e540809e381be9d16a2f29a45f43
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 21:02:03 +0900

    [bundler/bundler] Fix `bundle doctor` command

    Previously `bundle doctor` would fail on any bundle that does not
    include git gems or plugins. This is because the previously used
    `Bundler.home` does not exist unless the bundle includes git gems or
    plugins. For example, with `bundle config set path .bundle`, it points
    to which does not exist unless this kind of gems exist in the Gemfile.

    The name `Bundler.home` is really unfortunate, it should probably be
    have more descriptive name, and be private. But for now I just want to
    make `bundle doctor` usable.

    https://github.com/bundler/bundler/commit/5531a18c1e

commit a02dbcecb15bff9c2a21f5d5e021707a3b150a57
  Author: David Stosik <david.stosik+git-noreply@gmail.com>
  Date:   2019-08-15 14:47:57 +0900

    [bundler/bundler] Bundler displays a duplicate gem entries warning even if gems only appear once per group

    https://github.com/bundler/bundler/commit/d18a83109e

commit 3ecb5125c62bf68a7b74c5c48c659c0d165e624f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-18 13:25:13 +0900

    Gem::ConfigMap is deprecated now

commit a0e80c7cb75d9688a23872ce87ac0354a7b985ad
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-18 09:30:33 +0900

    Drop continue-on-error for make check

    Like macos.yml, we don't need to ignore `make check` failure.

commit 50623f3df0c1c82d6995053000285c208835efe8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-18 08:04:06 +0900

    Remove commented out debug print

commit 113a5c1e1dc8a16e4c8d19af3c9d091eb90826f3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-18 08:03:32 +0900

    The "exe" dir doesn't exist in this repostiroy

commit 0bbbe8298629a3acbf6c3dd84a302ff71edc80e8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-18 07:52:49 +0900

    Fix copy path of ruby/reline's test

commit e9f82585eed414ff090d9ef7b667d0f3c1561a01
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-08-09 07:38:40 +0900

    Don't crash when deleting at the end of the line

    To reproduce this bug, type one character into irb, then press the
    delete key on your keyboard.

commit 7bb0a7d7cba7bbeb03d531c13ccf73b6d4e688f6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-17 23:35:35 +0900

    Prefer exact ITEM to benchmark

commit 74ca6b88dd9673d2a47ce4bbfd9214dcea5ee366
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-17 23:33:12 +0900

    Omit a tag unless loading with a wrapper module

commit 1d11a8b1938d3310d6b573c2feb173661a82b6a6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-17 23:29:54 +0900

    Ensure non-OPT_GLOBAL_METHOD_CACHE code valid

commit 6db3051fcc08440fb1d80617dae90ae3f97db95c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-17 23:28:46 +0900

    Ensure VM_DEBUG_VERIFY_METHOD_CACHE code valid

commit aa00f7b8ec97b8ca6e2e2b8f31825dca4a2ae91b
  Author: git <svn-admin@ruby-lang.org>
  Date:   2019-08-18 00:33:13 +0900

    * 2019-08-18 [ci skip]

commit 8b8e7e6e9ec785ff49b3045ce06fa38b9f5cf809
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-18 00:25:48 +0900

    $LOAD_PATH elements should be real paths

    Installed path may contain symbolic links.

commit 765eb18a45c6fa8ebc55203bfe477e61c6a12490
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-17 23:14:52 +0900

    Make VM_DEBUG_VERIFY_METHOD_CACHE derived from VMDEBUG

    VM_DEBUG_MODE has been used only here.

commit 2a65498ca2311d8c632d4c7f925f17083347ed93
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-17 00:14:28 +0900

    Remove CI files from list

commit 15da2aad766616237c8cd798542a70a61b6a23a4
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-17 00:15:07 +0900

    Remove Travis CI workaround

commit e095803c379a3db3de4edd229dc4593a345d1cdb
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-14 21:21:45 +0900

    Removed formatter_test_case and text_formatter_test_case from Gem::Specification#files.

commit 3a06c11a7d913d824508f3d7e230703eb411db5a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-14 21:15:43 +0900

    Removed autoload from Markup.

commit 79fe84edf5da875daf240c9c11220ba89f3d49af
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-14 21:12:15 +0900

    Removed test_case files from lib directory.

commit 37d0e6e4711a2de9b4b460731fc3fd98799ce21c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 18:18:20 +0900

    Skip teardown with JRuby

commit 08c58e3c0db8aaa6b573fe6c34a6318a17a83c68
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 15:45:11 +0900

    [bundler/bundler] Extract a `gemspec_dir` helper

    https://github.com/bundler/bundler/commit/71a29e286a

commit a2d7c97a9187f3d88230e273756ed4836fa8ac19
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:58:07 +0900

    [bundler/bundler] Extract yet another helper method

    https://github.com/bundler/bundler/commit/948a863bd8

commit 43184056094af2495f05964c78bc517e07721802
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:54:15 +0900

    [bundler/bundler] Extract a `root_gemspec` local variable

    https://github.com/bundler/bundler/commit/a4beba4cbf

commit 09455301ef81bc6207e6d3ba1034c35851575e18
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:53:51 +0900

    [bundler/bundler] Extract a `with_root_gemspec` helper

    https://github.com/bundler/bundler/commit/f20c2bdf6a

commit 20c5154f0b79faf83c9c889f12da7da1ba9d6eb1
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:48:09 +0900

    [bundler/bundler] Only chdir when necessary

    https://github.com/bundler/bundler/commit/07161ebc1a

commit 580e093fddc2c10ff4e6cd33bfa0a7bfab76395c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:46:42 +0900

    [bundler/bundler] Make sure gem has been built before deleteng it

    https://github.com/bundler/bundler/commit/32520c7020

commit a56bf5bfdea991f3fb16a002da6284817e7867b8
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:29:23 +0900

    [bundler/bundler] Cleanup in a location independent way

    https://github.com/bundler/bundler/commit/5b503a4bf1

commit 9c0fcd1d0fc6287795f957465b596a288708ab90
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:29:15 +0900

    [bundler/bundler] Remove obvious comment

    https://github.com/bundler/bundler/commit/91e7fe1b2f

commit adfca752d6aa8f1828392cc1ae88063597376b5a
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:41:55 +0900

    [bundler/bundler] Remve another unneeded `to_s`

    `FileUtils.rm` supports a `Pathname` argument.

    https://github.com/bundler/bundler/commit/7d982a5be9

commit 9925e1a10f94f2a8c6d1b513d4546157ccecdc3f
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:25:56 +0900

    [bundler/bundler] Remove unneeded `to_s` calls

    They are implicit inside `gem_command!`.

    https://github.com/bundler/bundler/commit/6bdb13c899

commit f88237623f9131a9a07a4dd7ffde8c758e63e32c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 00:26:51 +0900

    [bundler/bundler] Consistently use `Path` over `Spec::Path`

    https://github.com/bundler/bundler/commit/a4cca66b79

commit aef5509139abd34f9983fa00895f91ea2801f088
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 00:07:48 +0900

    [bundler/bundler] Extract single gem installation logic

    https://github.com/bundler/bundler/commit/7888d621c8

commit 20af44c27727333b4cd3eef9d5b18daaa0445f0e
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 00:03:26 +0900

    [bundler/bundler] Unalias `install_gem`

    Since I plan to reuse it for something else.

    https://github.com/bundler/bundler/commit/5379382198

commit 6506993462af4f6c4f7ee2e0d3bc27deee989069
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 00:01:36 +0900

    [bundler/bundler] Use `join` consistently

    https://github.com/bundler/bundler/commit/096e53dfe6

commit 6a299906b4bebe1c86bc50a565f47348e735cb8e
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-15 23:59:08 +0900

    [bundler/bundler] Extract a `lib_tracked_files` path helper

    https://github.com/bundler/bundler/commit/028dc46f5a

commit 19dabfbe574f9a8298054eb417d299ec5fc18412
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 02:24:56 +0900

    [bundler/bundler] Rename a variable

    Otherwise I get conflicts when extracting the helper.

    https://github.com/bundler/bundler/commit/314c64cd07

commit c896f71577e17e7b89ad39463b82d8936f000480
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-15 23:48:42 +0900

    [bundler/bundler] Extract a `tracked_files` path helper

    https://github.com/bundler/bundler/commit/d35e31d2e0

commit b43f4bd2184989c5f47ee539e583c785dfadb8d0
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 02:18:01 +0900

    [bundler/bundler] Rename some variables

    I want to extract these to path helper methods, but the name `files`
    conflict with some builder methods that are also available at the same
    level.

    https://github.com/bundler/bundler/commit/7844096af0

commit 334e6150222703712ae6360de14f9a04b83daea9
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-15 23:47:44 +0900

    [bundler/bundler] Reconcile test

    The `:bundler` gem is not needed in the regular repo either.

    https://github.com/bundler/bundler/commit/ca5ce01a9b

commit 122bc65042bb53cd66ff681513ea7f5152536875
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:13:36 +0900

    [bundler/bundler] Reuse `gem_bin` helper inside `gem_command`

    The logic for choosing `gem_bin` should work here too even if it's not
    identical.

    https://github.com/bundler/bundler/commit/6ca0271b27

commit 30a4ec1fee1363f31f93970c3cd809a6fc139140
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:13:06 +0900

    [bundler/bundler] Always use `--backtrace` when invoking `gem` CLI

    For debuggability.

    https://github.com/bundler/bundler/commit/ac3e8db658

commit 91c63828f7b841df6b7b124acb752c0a3bca66c0
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 01:12:34 +0900

    [bundler/bundler] Extract a `gem_bin` path helper

    https://github.com/bundler/bundler/commit/8eedbecac0

commit e38994d2f70ac714f749f69833fce5c5e8461513
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-15 23:45:04 +0900

    [bundler/bundler] Reuse `gem_command!` helper

    https://github.com/bundler/bundler/commit/37d5dedffe

commit 63d78afc2d0520cff300494fd875c905349c12a0
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 00:59:48 +0900

    [bundler/bundler] Remove more dead code

    https://github.com/bundler/bundler/commit/17d4d0de8e

commit 2e6509498c1daf3335ac6343bf59441d42011b64
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 00:58:56 +0900

    [bundler/bundler] Remove dead code

    https://github.com/bundler/bundler/commit/cae948f514

commit 3bebdda649e60edb9df0728aa1859590693db335
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-16 00:58:34 +0900

    [bundler/bundler] Remove unnecessary rubygems require

    https://github.com/bundler/bundler/commit/039604ff95

commit 7af12a92c8593fffee42004a04d6886bbd863ff5
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-15 23:41:52 +0900

    [bundler/bundler] Use path helpers to find bundle bin

    https://github.com/bundler/bundler/commit/7985bb8e92

commit 63575409458f6b7b1bdaf038a562bc3f011e231e
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-15 23:40:33 +0900

    [bundler/bundler] Fix bundle bin location in core repo

    https://github.com/bundler/bundler/commit/9437568ab4

commit 7551117c70cdc33f4dd8a72a1a9151f23c73f902
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-08 17:41:56 +0900

    [bundler/bundler] Reuse more shared path helpers

    https://github.com/bundler/bundler/commit/79fdebd868

commit 9995ce64a251e51eabc6300d38980c4139f92d86
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-15 23:37:18 +0900

    [bundler/bundler] Remove unnecessary assignment

    https://github.com/bundler/bundler/commit/e483322519

commit a2ca3a12ba35d8991099cb23be4bdeb15e5cd459
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-06 20:16:44 +0900

    [bundler/bundler] Remove unnecessary `let`

    Use shared helper instead.

    https://github.com/bundler/bundler/commit/ef55470cc6

commit 745b2861617c62413357e27de9ded8098fcc031d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-06 20:16:15 +0900

    [bundler/bundler] Move `lib` helper together with path helpers

    https://github.com/bundler/bundler/commit/f2df73bdb4

commit 50a91fcd1061527a3543e3e713fc4222da68e438
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-03 21:07:11 +0900

    [bundler/bundler] Reuse `lib` method

    https://github.com/bundler/bundler/commit/4589a57852

commit ef2d4158028ab253fbd4b27d3cd3ffb4df5bffb7
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-03 21:06:58 +0900

    [bundler/bundler] Remove duplicated method

    https://github.com/bundler/bundler/commit/afdacd62ac

commit 7664b5cb6549d09935c4bf0fe67392708a9c19c2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 16:22:27 +0900

    Support the current stable version of Ruby like 2.5 and 2.6.

commit 221ba9b66c022a99227de8bf21db618666e17c42
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 17:01:19 +0900

    Revert "`Gem.load_path_insert_index always returns non-nil index after Ruby 1.9"

    This reverts commit 260ef51a73c067599826c8ab110c53994c1b6226.

      This broke the stable versions of Ruby like 2.4 and 2.5

commit d041c6cebbe7fe973789616bef43200213e1a001
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 12:35:30 +0900

    Added comments for extended require by RubyGems

commit 260ef51a73c067599826c8ab110c53994c1b6226
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 12:33:38 +0900

    `Gem.load_path_insert_index always returns non-nil index after Ruby 1.9

commit 06fcf88d695c8bfb6703966dd26629642ff7bf2d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 12:19:49 +0900

    Use the original require for test_race_exception

      The extension for require method with rubygems affects this test
      case. We need to keep this test for the original method.

commit d8148650f6b5d7855845cfa0d53b363366b5c460
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 11:30:01 +0900

    Try to continue on LoadError with gem_original_require

commit 22d9bd944d4aae1b682e0bd4eafab706ff5a981e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 11:05:29 +0900

    Keep the existence behavior with symlink path

commit 273f1f44982475f8c93805c9b9ec604846f3a5de
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 10:11:05 +0900

    Move fixture path to last path

commit dd16f8524c44f8802e634af2577fe5a149cd740e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 08:54:05 +0900

    Revert "Revert "[rubygems/rubygems] [Require] Ensure -I beats a default gem""

    This reverts commit 75d29db8f965893bb6ab38b9008abc80cdda246e.

commit 9d20d2b0f5096fab210464f9e16d876f9c5d319f
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-08-17 15:03:00 +0900

    Clean sample code biorhythm (#2375)

    * Standardize to load date library code

    > git grep 'require .date.' | wc -l
    179
    > git grep 'require .date\.rb' | wc -l
    1

    * Simplify

commit 72adc6cffbc41988aee728d74ab0bed2c5159948
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-08-17 14:56:57 +0900

    Simplify a sample code (#2374)

commit dce1e14e80c9c6d1e25c8aaf9075c80df610ddc3
  Author: Iain Barnett <github@strachanclan.xyz>
  Date:   2019-08-17 14:24:45 +0900

    Use more different arguments in Fiber.yield documentation to make it clear (#2170)

    https://github.com/ruby/ruby/pull/2170#issuecomment-489880700

    Documentation is for those who don't know, remember, or understand (to any degree) the language, it should attempt to be clear above all other things. The example given is needlessly unclear because if you use a block it's common for arguments to be reused on every entry to the block. In Fiber's case this is not so.

    First time round 10 goes in, 12 comes out.
    Second time round 14 goes in, 14 comes out was that because 14 is 12 + 2 or because it's "the return value of the call to Fiber.yield". It's the latter because it says so but why does the example need to make anyone think the former?

    Using different numbers makes it immediately clear what's happening whether the description is there or not.

commit 28267cea083408185de3e0aaafd14ec76c9a3157
  Author: David CARLIER <devnexen@gmail.com>
  Date:   2019-08-17 14:17:30 +0900

    NetBSD native support of explicit_bzero's like feature (#2145)

commit ccbfb054b1dcd06d30924c4a83af1bac75d78c31
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-17 13:57:12 +0900

    Fix typos

commit 2468466a1ae45944238901b532646a6cf3385815
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 12:08:07 +0900

    Added missing condition for test-bundler and test-bundled-gems.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2379

commit ea496e9fb2c930ac0c5ff8c12c4a10fac0ec3c7b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 11:36:12 +0900

    Added test check to ubuntu on GitHub Actions

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2379

commit dc020b06ffc85f3484fad0c5a014cbcae197bc40
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-17 12:32:29 +0900

    Hoisted out search_refined_method

    [Bug #16107]

commit 11a9f7ab9431b0f361e43b4ac2bd6ee44827d88b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-17 00:17:15 +0900

    Search refinement module along nested usings

    [Bug #16107]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2373

commit 042be439d92ea0910fe3bd0d5e9a1d4135257d2d
  Author: OKURA Masafumi <masafumi.o1988@gmail.com>
  Date:   2019-08-16 22:56:30 +0900

    Improve the doc example of `method_missing`

    Improvements are:
    * Use `symbol` instead of `methId`, described in doc
    * Add `*args` following method signature
    * Rescue error in `roman_to_int` and calls `super`, recommended in doc
    * Call invalid `foo` method to Roman object to raise NoMethodError

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2372

commit 045152df9e91c34a2785cb95e5964d7fc1b14df5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-17 09:43:05 +0900

    Disable fail-fast of GitHub Actions

    This is default: true
    https://help.github.com/en/articles/workflow-syntax-for-github-actions#jobsjob_idstrategyfail-fast

    When `make check` fails, we do not want to cancel `make test-bundler`.

commit 75d29db8f965893bb6ab38b9008abc80cdda246e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 08:52:13 +0900

    Revert "[rubygems/rubygems] [Require] Ensure -I beats a default gem"

    This reverts commit 00cd5d74cecb6aa4a184e57e2b8246ef6e45d458.

commit efd37f8fc3e021c93f37d1f7f08fcb6b909d6ecf
  Author: OKURA Masafumi <masafumi.o1988@gmail.com>
  Date:   2019-08-17 08:52:23 +0900

    Remove redundant each from `sum` example (#2190) [ci skip]

    It used to be `Enumerator#sum`, now it's range of string which calls
    `Enumerable#sum` and causes TypeError.

commit 7624154595eb71333a61b37f4c7388b6c031e878
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-17 08:44:31 +0900

    Fixed Insecure Operation in require

      Caused by 00cd5d74ce

commit e0fc9b7ccd9e14bd925cd46606ad201d0b57a423
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-17 07:49:00 +0900

    * 2019-08-17 [ci skip]

commit f30d38bdd08d241f8c3c1768069911e627f955f8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-16 21:30:32 +0900

    Move lib directory to the last of $LOAD_PATH on ruby repository.

      https://github.com/rubygems/rubygems/pull/1868 changes the behavior
      of require when it used with -I options. Therefore, the options of
      ruby repository was different from rubygems/rubygems.

commit ae3002b5401fb8b38d9a3a9b9e27e6a36ac79ff2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-16 16:02:32 +0900

    [rubygems/rubygems] Fixup #2844

    https://github.com/rubygems/rubygems/commit/5924286ae2

commit 56a28a8728dceb4bbcd6269c7ae3cb894c4ce512
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-08-16 01:43:50 +0900

    [rubygems/rubygems] installer.rb - fix #windows_stub_script

    use ruby_exe in heredocs instead of ruby.exe

    https://github.com/rubygems/rubygems/commit/9f1b7d6590

commit 25a327d41bcb881f27acfcc58f262986a8f4e5b4
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-08-15 04:00:27 +0900

    [rubygems/rubygems] Do not mutate uri.query during s3 signature creation

    https://github.com/rubygems/rubygems/commit/c0275ee537

commit c4f7c260f995778a40c6fc15107090fdb51d49a8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-31 12:46:09 +0900

    [rubygems/rubygems] Make deprecate Gem::RubyGemsVersion and Gem::ConfigMap.

    https://github.com/rubygems/rubygems/commit/1133c2f700

commit c78839902b47bf6a91226fbef00443e7d344033d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-01-11 01:08:59 +0900

    [rubygems/rubygems] Return `nil` to clarify return value is ignored

    https://github.com/rubygems/rubygems/commit/8702f59d32

commit 5998012a0c7244fe217c2d4f494e50f32ec85d29
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-01-07 20:00:35 +0900

    [rubygems/rubygems] Autoswitch to exact bundler version if present

    https://github.com/rubygems/rubygems/commit/bb02953a97

commit 3587824d710ffcfd1270be0a354a770a49312b6f
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-25 18:48:40 +0900

    [rubygems/rubygems] Don't unregister default specifications

    I think this should be more efficient?

    https://github.com/rubygems/rubygems/commit/a1de78104f

commit 1ac6890bd05a48e385f564d212765a3a60899659
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-25 22:58:45 +0900

    [rubygems/rubygems] Fix removing unresolved default spec files from map

    https://github.com/rubygems/rubygems/commit/7964917bbc

commit f42ad4a4250620ca64b2f668fed91d475934eaa7
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-25 22:57:41 +0900

    [rubygems/rubygems] Little refactor

    There's already a method called `suffix_pattern`, that's different from
    this local variable. So, move the local variable to a `suffix_regexp`
    that clearly differentiates from `suffix_pattern`.

    https://github.com/rubygems/rubygems/commit/4ec69c48b9

commit 89ad5df979727ab50eee6106550bf58b1888486e
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-26 14:54:06 +0900

    [rubygems/rubygems] Replace domain parameter in Gem::Command#show_lookup_failure with a parameter to suppress suggestions

    https://github.com/rubygems/rubygems/commit/760b7d834f

commit b8984370daaff4809b04330a6d7098f171568f79
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-20 00:31:17 +0900

    [rubygems/rubygems] Fix jruby issue

    https://github.com/rubygems/rubygems/commit/fc3f722164

commit 37abd2c390bb93fe1a306465bb5de35feb70a82a
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-04 01:00:02 +0900

    [rubygems/rubygems] Fix old rubies compat

    https://github.com/rubygems/rubygems/commit/41e60cdb6b

commit 00cd5d74cecb6aa4a184e57e2b8246ef6e45d458
  Author: Samuel Giddins <segiddins@segiddins.me>
  Date:   2017-03-15 02:34:03 +0900

    [rubygems/rubygems] [Require] Ensure -I beats a default gem

    https://github.com/rubygems/rubygems/commit/6fbda98eb3

commit d4feeb19361a4d7addf4779fb6bdc8e8c072093b
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-03 22:11:14 +0900

    [rubygems/rubygems] Make test also assert the gems that it should load

    https://github.com/rubygems/rubygems/commit/a6375920bf

commit bb2a65800d857149bbbacace7ed5dfbf7d20ecc2
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-03 22:06:29 +0900

    [rubygems/rubygems] Use `assert_require`

    For consistency with the other specs.

    https://github.com/rubygems/rubygems/commit/44b93aec4c

commit 229ae3269d622954295e4220fa7bc3298cad8b1d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-16 21:27:05 +0900

    lib/rdoc/store.rb: Use `Marshal.dump(obj, io)`

    instead of dumping obj to a string and then saving the string.
    It omits object creation.

commit 619f82bb6bd913d8dbb8ca5da15ca1fbb4508629
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-16 17:36:09 +0900

    Hoisted out unixsocket_len, trimming NUL chars from sun_path

commit 03f4a0b18e9417a82e23523be40ebf0c505faee9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-16 16:47:09 +0900

    [ruby/rdoc] Use assert_raise

    https://github.com/ruby/rdoc/commit/f2c63549f7

commit 02d0d424be04cb05ce56b7d21cc843345b0d9a2c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-16 14:52:03 +0900

    Revert "[bundler/bundler] Fixup #7297"

    This reverts commit b8d759806ff825e1b9344ba34b1a2bc4809d0988.

      It's accidentally picked from the upstream repository.

commit b8d759806ff825e1b9344ba34b1a2bc4809d0988
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-16 10:05:15 +0900

    [bundler/bundler] Fixup #7297

    https://github.com/bundler/bundler/commit/1a0161b970

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 8cf90a2f80866449a555c76eae6189b687fda7d6
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-16 07:11:14 +0900

    [bundler/bundler] Fixed rubocop error

    https://github.com/bundler/bundler/commit/9256177446

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit e8fd720434e270d1021a57607a377b0f0c7517dd
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-14 22:58:18 +0900

    [bundler/bundler] Remove mention to remembered options

    And instead educate users on the preferred, non deprecated, way.

    https://github.com/bundler/bundler/commit/9cd6238da2

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 502ad4d39103f91bea96be5c8247057dd39f21e2
  Author: Tomoki Aonuma <uasi@uasi.jp>
  Date:   2019-07-10 23:19:14 +0900

    [bundler/bundler] Document upcoming changes to remembered options

    https://github.com/bundler/bundler/commit/a1c97fd7c3

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 3b61019a89c366e50db908ccf25a9156bc500a5f
  Author: tommy <kazu9su@gmail.com>
  Date:   2019-08-13 22:53:33 +0900

    [bundler/bundler] Add initial Bundler::BuildMetadata Spec

    https://github.com/bundler/bundler/commit/c6458b2727

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit b587e8c7f1cd56f1c53156d7893ee0e581128a0a
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 19:24:55 +0900

    [bundler/bundler] Add `--[no-]git` option to `bundle gem`

    I think using `--no-git` can be useful when creating gems inside
    monorepos.

    https://github.com/bundler/bundler/commit/154c687310

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit cb71930351f8978d3c0b06acc14c98a8978f3abe
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-08 19:06:44 +0900

    [bundler/bundler] Remove unexistent folder from exemptions

    https://github.com/bundler/bundler/commit/0b6d973543

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit f48a61fb46304d35043d013c8cf4539c5be1ecab
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-11 00:26:55 +0900

    [bundler/bundler] Commit man pages to source control

    This has the benefit that:

    * Allows the installation of bundler as a default gem from rubygems to
    include man pages.
    * Removes the need to build man pages during our tests.
    * Makes working with the manifest easier, because we only have source
    controlled files, and not a mix of source control and generated files.

    To make sure they never fall out of sync, we replace the previous
    `man:build` CI task with a `man:check` task that makes sure the
    generated man pages are up to date.

    https://github.com/bundler/bundler/commit/23de1d0177

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 8f28ae65a861ba714be824ea3122817abe9f862d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-11 00:23:29 +0900

    [bundler/bundler] Remove misleading comment in Gemfile

    Since we no longer use `git` to find out the list of files, the comment
    is misleading.

    https://github.com/bundler/bundler/commit/54d85d5349

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit cd15d27d10d4f041cf4e60064dae96562c9bd83f
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-07 00:23:06 +0900

    [bundler/bundler] Stop printing deprecation messages during specs

    Previously under some circumstances (met during some specs), bundler
    would print deprecations to a separate UI different from "bundler's UI".
    This UI would not be captured by the specs, and thus would be printed to
    screen during the specs.

    This commit fixes that by making sure all deprecation messages always go
    through bundler's UI.

    https://github.com/bundler/bundler/commit/220c54b7fa

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 4af3665fd91aae87c9fe014778ed7c54245e2f9b
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-08 19:08:53 +0900

    [bundler/bundler] Use a newer debugging gem in docs

    So that the examples work in currently supported rubies.

    https://github.com/bundler/bundler/commit/b7d4556cde

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 4913c9b6bf78ae697689f89b99754e346603c68a
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-08 19:07:07 +0900

    [bundler/bundler] Remove unexistent file from exemptions

    https://github.com/bundler/bundler/commit/8601575490

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 6412121b0077cdad8f1fff3da75c2532cd67cd99
  Author: Masato Ohba <masato.ohba@quipper.com>
  Date:   2019-08-10 09:24:30 +0900

    [bundler/bundler] Fix typo in comment: attributes -> attributes
    https://github.com/bundler/bundler/commit/876545805e

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 94e26a97a153950e160445c7afc1e4c62e522740
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-09 00:27:23 +0900

    [bundler/bundler] Bump rspec dependency to 3.8

    Because we're using `config.bisect_runner` which is only available from
    3.8.

    https://github.com/bundler/bundler/commit/304a187f72

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 521a2d2beb945a2ce22b4788409f5fb475fea17a
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-26 20:37:51 +0900

    [bundler/bundler] Revert "make system_bundle_bin_path helper and resolve failing tests for ruby < 2.6"

    This reverts commit e63e844bc7444c6a489fcde0dc7011c6c4807edd.

    It was introduced to resolve some failing tests at the cost of making
    the intention of the spec much less clear.

    Thanks to the previous fixes we have added to this spec, we can revert
    that patch now.

    https://github.com/bundler/bundler/commit/b29a40820f

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 5bff72c912099bc9ac866d0c699ad4a2945d5827
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-08 03:37:50 +0900

    [bundler/bundler] Make sure spec fails if `bundle install` fails

    https://github.com/bundler/bundler/commit/2ed2bbfdec

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 7ff0b4fec4cbd763e9bb7be597b54217176a8d86
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-08 03:35:28 +0900

    [bundler/bundler] Fix installation of system bundler

    Previously it was being installed to the :bundle_path
    (`/tmp/bundled_app/.bundle`), but the `bundle` helper uses the
    `system_gem_path("bin/bundle")`. That means the first `bundle install`in
    the spec was actually failing, but not affecting the test status because
    of not being called as `bundle!`.

    https://github.com/bundler/bundler/commit/ad75f75539

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 6c6c4c7388c2f1c0f579de363bb0ec66ad851b5b
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-08 03:33:04 +0900

    [bundler/bundler] Use non deprecated way of setting bundler path

    https://github.com/bundler/bundler/commit/6013c93e81

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit ee1f3038f1657aa90d75e735e4262fe8d9b3d745
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-25 00:46:26 +0900

    [bundler/bundler] Clarify spec description

    https://github.com/bundler/bundler/commit/b2abde04aa

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 0aed0bd9ed521799c5d92c6c10ca8fa4476f8b66
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-06 23:59:02 +0900

    [bundler/bundler] Bump rack and sinatra to latest versions

    https://github.com/bundler/bundler/commit/09ecaf04fa

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 129657ab6aa3cc9496746a6eb780c0dc748e3d20
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-06 23:56:01 +0900

    [bundler/bundler] Normalize style with other artifice files

    https://github.com/bundler/bundler/commit/f11c9a2b3f

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 41534ce327efb56f3ddb136b5617fe47a89212b5
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-06 01:43:47 +0900

    [bundler/bundler] Make spec pass more resiliently

    Previously, if bundler-2.1.0.pre.1 would be installed globally, it would
    fail. Now we force that a locally installed version of bundler is used,
    so it always passed regardless of which bundler is installed globally.

    https://github.com/bundler/bundler/commit/764d8e8fd1

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 3c23bb29ecbc0c736e99d23a3c47892d67f3a322
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-06 20:59:39 +0900

    [bundler/bundler] Remove unnecessary exclusions

    https://github.com/bundler/bundler/commit/c189dfdde0

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 3f0e19c9fa566de3691b994ef6c2bea8cb5fdb83
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-06 00:20:34 +0900

    [bundler/bundler] Enable retries on flaky spec

    https://github.com/bundler/bundler/commit/da360659f7

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 2b0f3aa095a410902b9b2e4fb14f909e0630c1a1
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-08-04 21:52:15 +0900

    [bundler/bundler] Use the standard RUBY_ENGINE_VERSION instead of JRUBY_VERSION

    * RUBY_ENGINE and RUBY_ENGINE_VERSION are defined on every modern Ruby.
    * There is no such constant as TRUFFLERUBY_VERSION or RBX_VERSION.

    https://github.com/bundler/bundler/commit/f9d910403b

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 6711343d5a630cc857f0fa503b403edb68415f48
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-25 02:46:19 +0900

    [bundler/bundler] Fix inconsistent lockfile order

    When Gemfile would specify path sources as relative paths starting with
    "./", the lockfile would have inconsistent order on `bundle install` and
    `bundle update`.

    https://github.com/bundler/bundler/commit/c7532ced89

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit c11c8b69ea98e698e855b4b1f122a54929582dc7
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-25 02:48:10 +0900

    [bundler/bundler] Indentation tweak

    https://github.com/bundler/bundler/commit/5978a88f33

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit 500c3cb6a59eb991567714311e9301eeb377be9d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-25 02:45:53 +0900

    [bundler/bundler] Reuse `root` method

    https://github.com/bundler/bundler/commit/42363091da

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2366

commit cd41378ef906c279ee925a0f5d6ba3bf606953db
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-16 11:36:47 +0900

    lib/rdoc/parser/ruby.rb: Avoid `.chars.to_a.last`

    The code creates a lot of useless objects.
    Instead, using a regexp is shorter and faster.

commit 64bffddda1d57072a7879dfab9e5bc0286c1395d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-16 02:08:40 +0900

    exit accepts true and false [ci skip]

commit 12074ad01c02b4a6912fff64d69b659351bdf9e8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-16 02:08:02 +0900

    Use GNU make built-in function [ci skip]

commit 1b02f6c020e5d73cbe8e759ada7da908ce6a3f15
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-16 07:10:45 +0900

    Set IRB::Context#return_format on test clarify

commit a458317b914579c8a042ed02592af3a92aa41d1b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-16 06:45:36 +0900

    Use assert_raise and skip for test/unit

commit f71bd7477e84eb1cd10fa27e79b1e081ee51793a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-07 02:14:39 +0900

    RDoc::Parser::C: Integrate do_classes and do_modules by one regexp match

    The full scan of the C source code (`@content.scan`) is very slow.
    The old code invokes the scan six times in `do_classes` and
    `do_modules`.

    This change integrates the six scans into one by merging the regexps.
    The integrated regexp is a bit hard to maintain, but the speed up is
    significant: approx. 30 sec -> 20 sec in Ruby's `make rdoc`.

    In addition, this change omits `do_boot_defclass` unless the file name
    is `class.c`.  `boot_defclass` is too specific to Ruby's source code, so
    RDoc should handle it as a special case.

    Before this change:

         TOTAL    (pct)     SAMPLES    (pct)     FRAME
           858  (13.6%)         858  (13.6%)     (garbage collection)
           292   (4.6%)         264   (4.2%)     RDoc::Parser::C#do_define_class
           263   (4.2%)         250   (3.9%)     RDoc::Parser::C#do_define_module
           275   (4.3%)         241   (3.8%)     RDoc::Parser::C#do_define_class_under
           248   (3.9%)         237   (3.7%)     RDoc::Parser::C#do_define_module_under
           234   (3.7%)         234   (3.7%)     RDoc::Parser::C#gen_body_table
           219   (3.5%)         219   (3.5%)     Ripper::Lexer#state_obj
           217   (3.4%)         216   (3.4%)     RDoc::Parser::C#do_struct_define_without_accessor
           205   (3.2%)         205   (3.2%)     RDoc::Parser::C#do_boot_defclass
           205   (3.2%)         205   (3.2%)     RDoc::Parser::C#do_singleton_class

    The six methods take approx. 22.2%.
    `do_define_class` (4.2%) + `do_define_class_under` (3.8%) +
    `do_define_module` (3,9$) + `do_define_module_under` (3.7%) +
    `do_struct_define_without_accessor` (3.4%) + `do_singleton_class` (3.2%)

    After this change, the methods are integrated to `do_classes_and_modules`
    which takes only 5.8%.

         TOTAL    (pct)     SAMPLES    (pct)     FRAME
           812  (16.7%)         812  (16.7%)     (garbage collection)
           355   (7.3%)         284   (5.8%)     RDoc::Parser::C#do_classes_and_modules
           225   (4.6%)         225   (4.6%)     RDoc::Parser::C#gen_body_table
           429   (8.8%)         210   (4.3%)     RDoc::Parser::RubyTools#get_tk
           208   (4.3%)         208   (4.3%)     RDoc::TokenStream#add_tokens

commit b64911f4e262bef582557f6d11dc5cb35dae669c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-14 19:06:27 +0900

    Parser was replaced

commit bad937b00b328bbc3c2e374e40880f835d88f1af
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 12:53:49 +0900

    Gem::TestCase is based on Minitest

commit daf5ce3ba1545e295ba2efd0ee153638ae446e6e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 12:50:54 +0900

    Use omit instead of skip for test-unit.

commit e87e10e5e7b7bbb6f4e703981a75b9aaae588816
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 12:39:11 +0900

    Use test/unit instead of test-unit. Because test-unit is only provided standalone gem.

commit 2066dae991d89c481ab92586d1b2e9589211dde6
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 12:37:05 +0900

    Cleanup commented-out code.

commit 92186556602c10ce38197757402b2e06a8fc1f06
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 12:35:54 +0900

    Removed needless alias for capture_io.

commit 8a18a639b7497dd9f1929a38fc8449e8037e26c6
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-10 18:01:08 +0900

    Use Gemfile instead of add_development_dependency.

commit 71fd26b1957134588e150d1bfd7b831dc7864e8a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-09 01:43:51 +0900

    Fallback for older Rubygems

commit 787b437a2aaf8bfd60a9ac151f52cdb2638b7d8d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-08 23:04:32 +0900

    Use Gem.default_specifications_dir

    Gem::Specification.default_specifications_dir is deprecated.

commit 5555e3ef5777178a81625b54958c1fa14e3ef38e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-08 23:09:24 +0900

    Renamed minitest_helper.rb as helper.rb

commit 8045ebbf780d4eb35154111cb0d177b5fc7c486b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2018-12-02 11:46:13 +0900

    Use locale directory for the tests

commit 1a5304228a03139b55821985856628cfe7362966
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2018-12-02 11:36:45 +0900

    Use test-unit instead of minitest

    Minitest 6 will err `assert_equal` with `nil`.
    https://github.com/seattlerb/minitest/issues/779

commit 64f9f512c5837207436203c0ca47523cca2ecc62
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-08 16:35:34 +0900

    Treat linking to Markdown label correctly

commit 723a37d0386bc20efedf516656c2ccafa889c89d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-07 02:32:03 +0900

    Separate RDoc::TokenStream#add_tokens and #add_token

    The old version of `add_tokens` accepts an array of tokens, and
    multiple arguments of tokens by using `Array#flatten`.
    And `add_token` was an alias to `add_tokens`.

    I think it is unnecessarily flexible; in fact, all callsites of
    `add_tokens` (except test) passes only an array of tokens.
    And the code created a lot of temporal arrays.

    This change makes `add_tokens` accept only one array of tokens,
    and does `add_token` accept one token.  It is a bit faster (about
    1 second in Ruby's `make rdoc`), and it ls also cleaner in my point of
    view.

commit 0a0760aa632f05bc04df395d0173580042d9f730
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-07 01:53:56 +0900

    Refactor and improve performance of RDoc::Markup::Parser

    This change introduces a wrapper of StringScanner that is aware of the
    current position (column and lineno).
    It has two advantages: faster and more modular.

    The old code frequently runs `@input.byteslice(0, byte_offset).length`
    to get the current position, but it was painfully slow.  This change
    keeps track of the position at each scan, which reduces about half of
    time of "Generating RI format into ..." in Ruby's `make rdoc`
    (5.5 sec -> 3.0 sec).

    And the old code used four instance variables (`@input`, `@line`,
    `@line_pos`, and `@s`) to track the position.  This change factors them
    out into MyStringScanner, so now only one variable (`@s`) is needed.

commit 9d2fed2ccd1724d1cf42a3075c20dcc418082761
  Author: Steven Willis <onlynone@gmail.com>
  Date:   2019-03-21 03:50:05 +0900

    Don't echo results of assignment expressions

commit 74726691bada2f2061c57169f4c36a50a9f500ab
  Author: OKURA Masafumi <masafumi.o1988@gmail.com>
  Date:   2019-08-16 02:21:17 +0900

    Add details about parameters to define_method doc (#2165)

    When we use `define_method` and `define_singleton_method`,
    if we supply block parameters to a block then a generated
    method has corresponding parameters.
    However, the doc doesn't mention it, so this info has been added.

commit 409ce8c3da966ac8fb809bc6317990f2b5b6479d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-16 01:51:22 +0900

    Also clean up branch for worktree

commit d21616eeb0616095bb96408036a7548a30987e02
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-16 01:45:00 +0900

    Clean up temporary git resources

    after `make update-github`

commit 2665e5858f76e07ea8748a1931f500f961c5ceae
  Author: Espartaco Palma <esparta@gmail.com>
  Date:   2019-08-16 01:38:46 +0900

    Adding missing test for Net::HTTPGenericRequest initializer (#1835)

    A new exception is raised if an URI::HTTP is received and that object doesn't
    have a hostname property.
    Complementary to #1278

commit 2f919a92ba45d1174aa72498585ff7025142d9e3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-16 01:34:51 +0900

    Improve `make update-github` to avoid configure

    after doing it once.

commit 789f17665e87ddfe76ef2f7bf344163d7cbf98cf
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-16 01:18:26 +0900

    Make `make update-github` idempotent

commit d013d8e02e895e08f7feb0977c0ea88e6f00b580
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-16 01:11:18 +0900

    Fix crash on $(PULL_REQUEST) expansion

    by directly passing it to Ruby without passing a shell.
    Formerly it was broken when $(PULL_REQUEST) included quotes.

commit 7c46aa6911a859877522cd61a2805adca6f65b9c
  Author: Olivier Lacan <hi@olivierlacan.com>
  Date:   2019-08-16 00:42:17 +0900

    Avoid confusion in Array#- and Array#difference docs (#2070)

    My previous attempt to correct #2068 apparently failed and the confusing
    wording ("instances") was merged into trunk instead.

    This should address any potential confusion.

commit 7704bbd6401ad2261652fa8bf6f4bd45a0964ef7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-16 00:28:16 +0900

    Marked up command line options [ci skip]

commit d2070f2e454a6d2207fedf48525269ec04fbfa0e
  Author: songhuangcn <git@songhuangcn.com>
  Date:   2019-08-16 00:20:52 +0900

    Fix doc in Object#respond_to_missing? (#2239)

commit 715218c4306140ed9a62d993890de13e1d2ec572
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-16 00:02:38 +0900

    * 2019-08-16 [ci skip]

commit 40806793a97ef3efd4f249682c9cb397962a8cee
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-16 00:00:50 +0900

    Fixed class, module and method references [ci skip]

commit b1003301aff42a8c1d60bc435839502c4aa549ab
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-15 23:59:28 +0900

    Fixed a markup in different format [ci skip]

commit d5c33364e3c0efb15e11df417c925afee2cdb9c9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-15 23:25:37 +0900

    Fixed heap-use-after-free

    * string.c (rb_str_sub_bang): retrieves a pointer to the
      replacement string buffer just before using it, for the case of
      replacement with the receiver string itself.  [Bug #16105]

commit c4152b11a7fbc849a545b34e5b9d85f1fdc1a21f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-15 21:34:34 +0900

    Prepare to pull commits notes [ci skip]

commit fff2b231a31f1213d5bc1604ac5e12d8f1e82e57
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-15 21:26:32 +0900

    Simplified GITHUB_TOKEN argument [ci skip]

commit 53a55aeff3d409b4894d077f2b3b874fac53e387
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-15 13:48:58 +0900

    introduce RUBY_ON_BUG envval. (#2331)

    `rb_bug()` is called at critical bug, MRI can't run anymore.
    To make debug easy, this patch introduces RUBY_ON_BUG environment
    variable to specify the process which is called with pid.
    [Feature #16090] [GH #2331]

      RUBY_ON_BUG='gdb -p' ruby xxx.rb

    In this case, if ruby interpreter causes critical bug, and call
    rb_bug(), then "gdb -p [PID]' is called by system(3). You can
    debug on invoked gdb.

    This feature is limited on RUBY_DEVEL build.

  Notes:
    Merged-By: ko1

commit 132b7eb104ed2f5d9966adb2f0edacb2406f40fb
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-15 08:16:14 +0900

    * expand tabs. [ci skip]

commit 6954ff1dcb538ee6c042872088b64464a1ef6089
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-30 08:22:00 +0900

    Make Range#=== operate like cover? instead of include? for string ranges

    Previously, Range#=== treated string ranges that were not endless or
    beginless the same as include?, instead of the same as cover?.
    I think this was an oversight in 989e07c0f2fa664a54e52a475c2fcc145f06539d,
    as the commit message did not indicate this behavior was desired.

    This also makes some previously dead code no longer dead. Previously,
    the conditionals were doing this:

        if (RB_TYPE_P(beg, T_STRING)
            if (NIL_P(beg)) # can never be true

    This restructures it so at the NIL_P(beg) check, beg could possibly
    be nil (beginless ranges).

    Fixes [Bug #15449]

commit 082424ef58116db9663a754157d6c441d60fd101
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-09 12:35:56 +0900

    Fold to lowercase instead of uppercase for String#casecmp

    strcasecmp(3) and String#casecmp? both fold to lowercase.

commit d5c60214c45bafc1cf2a516f852394986f9c84bb
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-08 14:03:02 +0900

    Implement Range#minmax

    Range#minmax was previous not implemented, so calling #minmax on
    range was actually calling Enumerable#minmax.  This is a simple
    implementation of #minmax by just calling range_min and range_max.

    Fixes [Bug #15867]
    Fixes [Bug #15807]

commit 661927a4c55232bd070992d47670a7d411820111
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-15 03:19:16 +0900

    Switch to using a VM stack argument instead of 2nd operand for getconstant

    Some tooling depends on the current bytecode, and adding an operand
    changes the bytecode.  While tooling can be updated for new bytecode,
    this support doesn't warrant such a change.

commit 6ac6de84ac3a5bc4fae8e04d03084696080e1ab2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-15 01:59:27 +0900

    Use Qtrue/Qfalse instead of 1/0 for 2nd operand to getconstant

    Fixes error when using -Werror,-Wshorten-64-to-32.

commit d053a570141d3f60eb458a233ca964cf5aca8430
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-15 01:51:19 +0900

    * expand tabs. [ci skip]

commit fbcd0652944568c43a6ae427960d909d62ce6a8d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-14 14:44:36 +0900

    Remove support for nil::Constant

    This was an intentional bug added in 1.9.

    The approach taken here is to add a second operand to the
    getconstant instruction for whether nil should be allowed and
    treated as current scope.

    Fixes [Bug #11718]

commit 7d32cb7631677172d12010233432b7470046ec2a
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-15 01:00:46 +0900

    * 2019-08-15 [ci skip]

commit 938e075273feab804d0de840adec48ebe7508a60
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-15 01:00:26 +0900

    Add `make update-github PR=1234` to refresh PR (#2368)

  Notes:
    Merged-By: k0kubun <takashikkbn@gmail.com>

commit e173012f44dfef513c18d69abbd01b3354e897ed
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-14 23:41:30 +0900

    Drop obsoleted `make merge-github` task

commit 7da40d74e12cee72b96554a2d201965f1c7dedd7
  Author: Steven Harman <steven@harmanly.com>
  Date:   2019-08-14 23:35:47 +0900

    backtrace and backtrace_locations can be nil (#2358)

    Exception#backtrace and Exception#backtrace_locations can both be nil if
    not set. The former can be set via `Exception#set_backtrace`, but the
    later is only ever set at runtime via `setup_backtrace`.

commit 48e9155e659f332a82234831e1aa0d93a8b83a2a
  Author: Nikolai B <nikolai-b@users.noreply.github.com>
  Date:   2019-08-14 18:16:07 +0900

    Remove strange formatting from English [ci skip]

    \vref is not valid doc syntax

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2364

commit 9874dca3e7c03bcf6969747f06f5c696e518b332
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-14 23:00:09 +0900

    Mark bundler / bundled-gems as continue-on-failure

    because these tests have failed too often and it's false-positive for
    checking healthiness of the master branch.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2367

commit bf77f43b3991b63b832ff72cfc91b9761a32bdf8
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-14 22:36:41 +0900

    Update the description of check_branch

commit 8be521662d1b1b0e6f791f6d9d29d529bdc427e1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-14 22:21:15 +0900

    Rename check_branch.master to pull_request.check_branch

    because it's shown as just "master" on a pull request which does not
    have the check_branch.master job yet.

    "check_branch" would be easier to understand and now we can grep it from
    master branch.

commit c8f97596b7dd6ffbeb98970f9cc664b0a8a2336e
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-08-11 06:32:49 +0900

    Don't accidentally name anonymous module/class

    b00f280d4b9569e7153365d7e1c522b3d6b3c6cf introduced
    an accidental behavior change in that defining a module/class under
    `m` gives `m` a name when `m` is anonymous.

    `ruby -ve 'Module.new { class self::A; end; p name }'` outputs a name
    similar to `Module#inspect` when it should output `nil` like in Ruby
    2.6.x.

     * variable.c: Use `make_temporary_path` instead of `save_temporary_path`
       when getting the name of the parent module.

     * variable.c (rb_set_class_path): Delegate to `rb_set_class_path_string`
       instead of duplicating the logic.

    [Bug #16097]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2337

commit 1cffd5b4f0b88669bc2daff025ab0b1650961a43
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-14 16:30:30 +0900

    fix last commit.

commit 0971460e3113ea7dc3fd2a4ae80dd5947fd2dc55
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-14 16:25:32 +0900

    * expand tabs.

commit 182a408c2c4113eb316c2a87e35880144afb4498
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-14 16:25:15 +0900

    change Proc#to_s format ('@...' -> ' ...') (#2362)

    Now Proc#to_s returns
    "#<Proc:0x00000237a0f5f170@t.rb:1>".
    However, it is convenient to select a file name by (double-)clicking
    on some terminals by separating ' ' instead of '@' like
    "#<Proc:0x00000237a0f5f170 t.rb:1>"
    [Feature #16101]

commit 0623e2b7cc621b1733a760b72af246b06c30cf96
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-14 11:44:20 +0900

    Suppress Uninitialized variables by Coverity Scan

    Coverity Scan says:
    ```
    ** CID 1452284: Uninitialized variables (UNINIT)
    /eval.c: 223 in rb_ec_cleanup()
    ```

    ```
    >>> CID 1452284: Uninitialized variables (UNINIT)
    >>> Using uninitialized value "errs[1]".
    ```

commit c744b626985f5d78c6d8d8830b9aee2898412d7c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2016-06-10 08:01:39 +0900

    io.c: export rb_io_extract_modeenc

    * include/ruby/io.h (rb_io_enc_t): add typedef.

    * io.c (rb_io_extract_modeenc): export.

commit cad41bb6d35c09b0e5d9e50280e3bfcd1bd9bcc0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-14 10:43:46 +0900

    [ruby/stringio] Supported BOM

    https://github.com/ruby/stringio/commit/b249631c43

commit 22e942deb2580faae44176064a569a84bccb5028
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-14 10:42:46 +0900

    [ruby/stringio] Supported `mode:` option

    https://github.com/ruby/stringio/commit/53def32ba0

commit 8b44307894c3da6219e14693dc355ebb702310e0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-14 10:42:14 +0900

    [ruby/stringio] Allow bignum mode

    https://github.com/ruby/stringio/commit/d28927b561

commit e54d349a01043082169a88a2782e6739bdd52c4f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-14 03:02:30 +0900

    [ruby/stringio] Added support for older versions

    https://github.com/ruby/stringio/commit/c4a13d41cd
    https://github.com/ruby/stringio/commit/359c9f395c

commit c8f9e9a2a0788fff08824985a74748dbe7ff7b18
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2016-06-10 14:18:14 +0900

    [ruby/stringio] stringio: encoding support

    https://github.com/ruby/stringio/commit/7b20075ab0

commit 765d60315312a6a7068d9b24d7c6f38b778c4604
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-14 10:52:15 +0900

    Try to fix variable reference on Windows (#2361)

    https://github.com/ruby/ruby/runs/192869165

  Notes:
    Merged-By: k0kubun <takashikkbn@gmail.com>

commit 8a687b8a4ff4096d7783bed58642112cfa3256a0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-14 09:23:57 +0900

    Stop using official actions/checkout

    because it has been unstable, and also it sometimes does not work for a
    pull request like:
    https://github.com/ruby/ruby/pull/2358/checks?check_run_id=192685048#step:4:17

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2360

commit 216d23008098c358d3a57cddc6f5d44e0b2f1602
  Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
  Date:   2019-08-14 07:44:26 +0900

    Move some assertions to CoreAssertions. (#2354)

    They are used by default gems like forwardable.

        * assert_raise_with_message
        * assert_warning
        * assert_warn

  Notes:
    Merged-By: hsbt <hsbt@ruby-lang.org>

commit 930e637c0e2ffd6fcb46205d473b6f4c05607471
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-14 00:23:38 +0900

    * 2019-08-14

commit 8827697ec42ee3a6bac1a73ee6b59d869dc152c2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-14 00:23:19 +0900

    Compare actual result

commit 5b1bf8dd2d08ae7371ecf025967376bb794ed651
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 23:23:43 +0900

    UTF LE is fixed at least the first 2 bytes

    * io.c (io_strip_bom): if the first 2 bytes are 0xFF0xFE, it
    should be a little-endian UTF, 16 or 32.  [Bug #16099]

commit 79f9c626b63c2ce6ed1f3e767838a02a668145ba
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-13 23:36:31 +0900

    Use the official actions/checkout again (#2357)

    because clone does not checkout exact commit sha, and also we'd need to handle
    pull_request on fork, so I tentatively stopped to do this.

  Notes:
    Merged-By: k0kubun <takashikkbn@gmail.com>

commit c393734c95cea944d3d37da15b5600e41f75a740
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-13 23:00:56 +0900

    * expand tabs.

commit dd1344b81eeff9805067e633f60107f4019fa019
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-13 06:00:34 +0900

    Add compaction callbacks for Enumerator

    This commit gives Enumerator compaction support

commit 94ca848ca19081e47852dddb1a4ae09688d18c29
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-13 22:56:44 +0900

    Update the comment in check_branch [ci skip] (#2355)

  Notes:
    Merged-By: k0kubun <takashikkbn@gmail.com>

commit e75e548cf9ee57f4504eb75aa584e587c470c218
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 21:11:58 +0900

    spec/bundler needs the specific command [ci skip]

commit d0b2e6412e58fef052034962c047ce4dafbf88eb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 15:39:49 +0900

    Pass rb_execution_context_t* in ruby_run_node

commit ffab84fa3ee7c0a0c2919664113caae6fac02403
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-13 15:27:46 +0900

    Fix a typo [ci skip]

commit 75d9fa8b079c27c66ac1eabfae366df465244fc4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 12:24:55 +0900

    Detect VCS from the current directory by default [ci skip]

commit 0d1af9f942e391d8bf50a7ae2e6bb931542d541a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 12:24:15 +0900

    Push commits notes too [ci skip]

commit f78916e3c1fc10a7f9555129961194c7d6ba4f2d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-13 11:20:39 +0900

    * expand tabs.

commit c215a6f2822d2d0c09e90867baadb250fd31206c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 11:03:54 +0900

    Removed non-VM_OBJSPACE code

    It has not been used for 4 years, since r60856,
    e33b1690d06f867e45750bd8e3e8b06d78b5bc26.

commit 2f744f53c17cd1534c685d6c5f57af66ac5f8322
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 10:56:21 +0900

    Refactored `objspace_each_objects`

    As `rb_objspace_each_objects_without_setup` doesn't reset and
    restore `dont_incremental` flag, renamed the bare iterator as
    `objspace_each_objects_without_setup`.  `objspace_each_objects`
    calls it when called with the flag disabled, wrap the arguments
    otherwise only.

commit 0c1c42c43a8609e212db9ef64e43d5ca04101694
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 10:33:19 +0900

    Move rb_objspace_t* in objspace_reachable_objects_from_root to an argument

commit aec93417f04a1726ac4491dd33821a383e4bdb5c
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-13 09:50:34 +0900

    * expand tabs.

commit ac656bc2bda6c7879b4b2170b7c2386a08112689
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-13 09:43:11 +0900

    Hoisted out GPR_DEFAULT_REASON

commit 917d766508707ebf894244fe4624b064315a7ad7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-12 22:33:46 +0900

    Move rb_objspace_t* in gc_verify_internal_consistency to an argument

commit 0c2d81dada88b5a3946c3162187df4223bfe6b4f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-12 17:44:30 +0900

    Renamed ruby_finalize_{0,1}

    And pass rb_execution_context_t as an argument.

commit aac4d9d6c7e6b6b0742f3941b574f6006ccb5672
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-13 05:09:21 +0900

    Rename rb_gc_mark_no_pin -> rb_gc_mark_movable

    Renaming this function.  "No pin" leaks some implementation details.  We
    just want users to know that if they mark this object, the reference may
    move and they'll need to update the reference accordingly.

commit 404850e13446c79fb6142f1b32b219753e5cd726
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-12 11:42:59 +0900

    Remove documentation that fatal cannot be rescued [ci skip]

    You can rescue it:

    f = ObjectSpace.each_object(Class){|c| break c if c.name == 'fatal'}
    begin
      raise f
    rescue f
      2
    end # => 2

    It's not a good idea to rescue fatal exceptions you didn't generate
    yourself, though.

    Fixes [Bug #10691]

commit 3979f22cc1a224bad5b8f14610db253660aa974c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-13 01:45:10 +0900

    Explain the current status of branches [ci skip] (#2350)

  Notes:
    Merged-By: k0kubun <takashikkbn@gmail.com>

commit e688ab26c71c124ca1c466d9c5c669bd1ce61e6e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-13 01:34:36 +0900

    * expand tabs.

commit 6749682f8225b50bc91a45af0f27f20ff68d473c
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-10 08:27:43 +0900

    also unpin `final` on weak maps

commit 76a928bac2f37e7aa631a6b6dd5320920d6c1b42
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-10 08:05:42 +0900

    Unpin default value objects

    We're already updating the location of default values, so we may as well
    unpin them.

commit 4e418a6c0676271da3176116a62a2fc913ac4548
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-13 01:29:37 +0900

    Update check_branch description a little [ci skip]

commit 957bdfbab8e8095bab82fa2e32571196e1777e10
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-13 01:21:37 +0900

    Update docs to use more natural English

    Just a few updates to make the English sound a bit more natural

commit 0f10828fcfe4a0d082398da71992a7535a4fab52
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-13 01:03:14 +0900

    Fix a typo [ci skip]

commit 4d3fb247364a13e12ea41885511b944b0e37917d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-13 00:51:04 +0900

    * 2019-08-13

commit b8b5e7d5bea99190cf62190e020fea7f82209f0e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-12 19:39:04 +0900

    Stop rewriting message to include PR URL

  Notes:
    Merged: https://github.com/pull/2347

commit edd25382687c840f10eec23d72fa08ebd3515fbf
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 23:36:42 +0900

    Add a quick job to be used for branch protection

commit 8d302c914c15af4a29c8b8af801281fa117a7ad2
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-12 23:12:27 +0900

    string.c (rb_str_sub, _gsub): improve the rdoc

    This change:

    * Added an explanation about back references except \n and \k<n>
      (\` \& \' \+ \0)
    * Added an explanation about an escape (\\)
    * Added some rdoc references
    * Rephrased and clarified the reason why double escape is needed, added
      some examples, and moved the note to the last (because it is not
      specific to the method itself).

commit 3fc10eff1e6dd63bc0daa753108072954adc89ac
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2016-09-30 20:49:58 +0900

    date_parse.c: trim off

    * ext/date/date_parse.c (date_zone_to_diff): trim off by zone name
      length.

commit d96feee37c2d109d0103f08985e85641a23108bf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2016-09-30 20:38:23 +0900

    date_parse.c: avoid copying

    * ext/date/date_parse.c (date_zone_to_diff): get rid of copying
      the whole argument string.

commit e6a0a954c9ef5170b8b25088455106b3748c2187
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 20:40:13 +0900

    Add another test for frame omitted inlining

commit a5f9306065b8a50cca6cdb65003d0c36d1180c09
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 20:20:37 +0900

    Simplify sudo specification

commit 188381053cadc06c7c08dd03acb3fdff8de0e472
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 19:40:46 +0900

    added --disable-install-doc to Windows workflow of GitHub Actions

    Closes: https://github.com/ruby/ruby/pull/2346

commit ab3ab07b28ac58333d7bbf898ec7cf5973bd02a6
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 19:12:29 +0900

    Removed configuration of Azure Pipelines

commit 8d50bf40d9fc7015c0a8d52d9e4cf9efbf57ae3c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 19:08:51 +0900

    Try to nmake test

commit 0fd0f74508e1b6d26605a85066e18a4d00a02d84
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 18:56:01 +0900

    Try to merge windows 2016 and 2019

commit 040bf4c0a69cfcc4df6250f0241b9c7cc4a42ab6
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 18:33:22 +0900

    Added windows-2019 workflow

commit 981f0be6ffd082e9954263323ac149fbfa2e8c01
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 18:17:57 +0900

    Try to nmake

commit bbc5e97b959ba526036f0f6c95682c1721a87130
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 18:06:06 +0900

    Migrate Windows 2016 env to GitHub Actions from AzurePipelines

commit 1bec27f05bd40b03b6b7c8cd16a74d9096491e37
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 19:52:37 +0900

    Add exec to apt-get update

    to propagate exit status to travis_retry properly.

commit f9149c5596e1317687d6f58b14e6f3ee89bc7f2e
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 19:13:30 +0900

    Minor wording fix in NEWS [ci skip]

    pushing a trivial commit for testing post-receive hook

commit 066a3498c6b7d1218b51f19c4b26447a56523aef
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-12 19:01:57 +0900

    Include commits notes in ChangeLog

commit 5edf921e9bce453b6a68040340940489bf350cc4
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 17:55:57 +0900

    Revert "Roughly retry `brew update` on GitHub Actions"

    This reverts commit 5ee11a95ffbf194a73d1bea300a35f5d6250d203.

    Sorry, timeout(1) was missing.

commit 927a43a503bd846ab706ff40990ab4ecae8abdc3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 17:46:11 +0900

    Drop unused ccache

    unlike Travis, it seems not used.

commit 5ee11a95ffbf194a73d1bea300a35f5d6250d203
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 17:44:02 +0900

    Roughly retry `brew update` on GitHub Actions

    because it has failed often on Travis.

commit d5250808e1e06c4af7d441971e29096426611ab0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 16:36:56 +0900

    Try testing openssl@1.1 on GitHub Actions

    because somebody may want to remove the duplicated Travis osx usage
    later.

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2343

commit 765cc17c086024540bc09124bd3628c539faa7b0
  Author: Sho Ito <i.sho.0628@gmail.com>
  Date:   2019-08-12 00:11:34 +0900

    Update IRB man page

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2341

commit 0d0ff8277fcea4584aa33b8b180a4ade7b90590e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-12 15:13:09 +0900

    rb_trap_exec has been removed since 1.9

commit b1ef14176b3716e3900672a9563b94aa3abedb2d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 14:35:49 +0900

    We did not have tool/ before checkout

    anyway we don't need authorization here.
    Also retry does not seem to work in the original version, so let's
    extend this with retries as a separate github action later.

commit 4f10a61eaaf5bfe7e4c53edc79c5e27a7bd1ae33
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 14:30:42 +0900

    Stop relying on actions/checkout

    because it randomly fails on authorization like:
    https://github.com/ruby/ruby/runs/190887455
    Also the backoff seems too short. Maybe we need tool/travis_retry.sh for
    this too.

    Cloning ruby/ruby does not need authorization. We don't need to use
    actions/checkout.

commit 2b3d84d584e4a4cec5fe452db422c76048826c2b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-12 01:04:21 +0900

    Use rev-parse

    Use simpler rev-parse to check if pull request was fetched.

commit b1ad628cdfaef8da8d79d425b5012eb699ff9c1b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-12 13:45:55 +0900

    Resurrect travis_wait for test-all

    as we dropped -v.

commit 63d3c4fecd074790c7d9c6e561401cf512bd1d22
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-12 12:59:08 +0900

    * 2019-08-12

commit bf1f872991bcfcb86472873794bcef88749b95d0
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 12:08:42 +0900

    Removed duplicated jobs with GitHub Actions.

    Closes: https://github.com/ruby/ruby/pull/2340

commit ed9d59afc811ff738c4218a2edf71b3c9c49e370
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 09:01:00 +0900

    Added example filter for Linux of GitHub Actions.

commit 8a8f680f017d0d4c410f17ec74e06d0436dcbe83
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 08:23:27 +0900

    Re-use GITHUB_ACTION variables for filtering bundler examples.

commit e96321d006f822766bb4be969028f68096d76b39
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 07:25:11 +0900

    Removed make check

commit fc97aa93132de82a02f4f115de14e6478ec7a7b3
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-12 07:07:54 +0900

    Fixed the world writable dirs on Ubuntu environment.

commit cfb192a7b9b00c479abbbbe35d396cc5295285e5
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 19:33:03 +0900

    Added test-bundled-gems to GitHub Actions

commit 11a09d78c185848a179028a292f583bc356f6b25
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 19:12:38 +0900

    Port ubuntu workflow based on macos

commit 9fe7e042f50ba7bcd7b64e48b4e6077eeead2861
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-11 16:19:31 +0900

    Note the reference to the pull request [ci skip]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2339

commit 51d9d0f8887820ce52234c80d78388b002e6e628
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-11 15:42:16 +0900

    Use already fetched pull request [ci skip]

  Notes:
    Merged: https://github.com/ruby/ruby/pull/2338

commit 1c7eadf75447f10b62e6a93a9c0a90b01bf126e1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-11 14:15:48 +0900

    Debug which test hangs on mswin

    debugging failure of
    https://ci.appveyor.com/project/ruby/ruby/builds/26613960/job/nemi6pvc5s5843io

commit 053bee64cb872398c25467a77169853d8ce539d2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 10:49:22 +0900

    Cleanup the duplicated tasks on Azure Pipelines.

    Closes: https://github.com/ruby/ruby/pull/2336

commit 91fcd87f5c0375e36c22c1187edf3f5507572075
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 06:55:31 +0900

    Increase fetch-depth

commit bb2f24251f011d64d369d78f344e298cc9486473
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 08:10:40 +0900

    GitHub Actions does not support ANSI color code. Skip failing examples.

commit c685679e25f6a4547c3b48c290bfb905cde0b4ef
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 07:32:30 +0900

    Use check.

commit e7996e0fd6718fa13b5cd5328f1bb6393a45392c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 06:26:17 +0900

    Try to migrate test-bundler to Actions.

commit 6017e81b033d9eb8ab66dc1bd3402f51155761f1
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-08-11 11:00:24 +0900

    Update power_assert to 1.1.5

commit f731cc0984560d8dabd211e7b827617fe078cca1
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-11 10:15:05 +0900

    Use `end_with?` instead of Regexp with missing escape

commit 2990c2cc3e5a105013b829dad00fa43a26da8682
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-11 06:12:46 +0900

    Use capture_output instead of capture_io.

      It's preparation for migrating test-unit on upstream.

commit 7ee948c3a11c5fb79d6f3ec2878a64387e29ba7a
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-11 00:45:23 +0900

    * 2019-08-11

commit d29bccb39bfd2890b33a3fd943916d62527b6e6e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 23:47:31 +0900

    Adjust indent [ci skip]

commit 46df7fe91f84ce2b2033a784402d3e451d1ff1db
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 23:45:49 +0900

    prereq.status deals with removal of nmake VPATH notations [ci skip]

commit 0609087a6bac37b7fbf7a56db670094b214f7359
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-10 23:57:20 +0900

    Parallelize osx test-all too

commit c21c00173349cd9b0aeb899dd9fea5cfba984af4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 16:36:10 +0900

    Re-enable parallel build/test on OSX

commit 52bd4716b482337bd8f9f8389c5ab9d168fb11f8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 23:19:24 +0900

    rb_numeric_quo: support Complex

commit c1c8577088b1fa36a34ca8b885db441365b27aa7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-10 20:25:58 +0900

    Fix wrong pull_request filter

    The specification was not triggered on a pull request.

commit 00e7ef7e8d1a31d12f7117c07370d6d00cc5eaa2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 19:49:21 +0900

    Suppress flags messages [ci skip]

commit a6c5ce7a9bbf584a8b4b39d2ae51fb9b4a5b7f1f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-10 19:39:00 +0900

    Increase the fetch-depth of GitHub Actions

    because small numbers had made Azure Pipelines in the past and it's
    using 20 now. I heard GitHub Actions has more parallelism, so it should
    be okay.

commit b3903ef2a156a19de0c27a3e95cd7a4467cdce59
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-10 19:38:27 +0900

    Set more descriptive labels to workflow

commit 59a8003ac5273d65c1d7f39c158c675ce48f25ad
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-10 19:33:11 +0900

    Drop confusing label from workflow

    because it's doing more than test-all

commit 6205f95539f257adc6b3ab904ff26ff5ed2ff9d3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-10 19:29:39 +0900

    Escape asterisk on pull request paths

commit e43b3bb442836c8064637a7d46c05ad16a4e0115
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-10 19:28:07 +0900

    Skip running GitHub Actions on trunk

commit 9b203959d51b597075fe8bfcc07a24845bca4876
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-10 19:19:22 +0900

    Rename workflow.yml to macos.yml

    to allow having other workflows separately, and configure `name` to
    simplify a tooltip label on GitHub.

commit 5e3fb0b3572d64a82ed86af15d4adca50d71fd6b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 16:33:32 +0900

    Touch the checked out source to fix clock skew on all platform

commit c5fbe2a19fb8ffe8c64fc8f3810693dd3b4f7edd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 15:48:39 +0900

    Moved options to $travis_apt_get_options

commit d69ffa4d93b12ddfb0d77f146921eb5d2fd62919
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 14:30:34 +0900

    Expanded f_quo

commit 98c22c78e40d84678e7bac187236e049e9d8c211
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 13:56:18 +0900

    Expanded f_real_p

commit ffdef3674af921d7ddd550dc492dcdbed97f7ba5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 13:18:41 +0900

    Warn instance variable `E`

    It is not dumped, as it is a short alias for `:encoding`.

commit 3c3783ac88f8f8fbbad016a2daf3e35a682c4b3e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-10 11:43:07 +0900

    * expand tabs.

commit ab31693af109022ecc0a01107067d5c84675807a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 11:38:49 +0900

    Share caches for short encoding ivar name.

commit 07e42e88d9f2b7756dde0a2377990ebf3c5e1973
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 11:26:23 +0900

    Close created files [ci skip]

commit 690282472960ff070883bd2151a0728ee5a01eea
  Author: Masato Ohba <over.rye@gmail.com>
  Date:   2019-08-10 09:28:37 +0900

    Fix typo in comment [ci skip]

    s/Thtread/Thread

commit 49f88eb2f1e8c46a4a3b5f6ea3dfa5a5f9d32988
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-10 09:34:13 +0900

    Try building workflow on push

commit 789776be08830b53499db86ab33ade9db1111a79
  Author: iain barnett <iainspeed@gmail.com>
  Date:   2019-08-04 13:37:54 +0900

    Added some examples to the documentation for String#unpack1 because
    there are currently no examples and to contrast with String#unpack.

commit 9d298b9dab831f966ea4bf365c712161118dd631
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-06-27 01:52:30 +0900

    Allow Array#join to allocate smaller strings

    rb_str_buf_new always allocates at least 127 bytes of capacity, even
    when less is requested.

        > ObjectSpace.dump(%w[a b c].join)
        {"address":"0x7f935f06ebf0", "type":"STRING", "class":"0x7f935d8b7bb0", "bytesize":3, "capacity":127, "value":"abc", "encoding":"UTF-8", "memsize":168, "flags":{"wb_protected":true}}

    Instead, by using rb_str_new and then setting the length to 0, we can
    allocate the exact amount of memory needed, without extra capacity.

        > ObjectSpace.dump(%w[a b c].join)
        {"address":"0x7f903fcab530", "type":"STRING", "class":"0x7f903f8b7988", "embedded":true, "bytesize":3, "value":"abc", "encoding":"UTF-8", "memsize":40, "flags":{"wb_protected":true}}

commit b1678338e545589540b1dd85dee6a18fd98aa8ed
  Author: ohbarye <over.rye@gmail.com>
  Date:   2019-08-10 01:56:40 +0900

    Fix typo: duplicated the [skip-ci]

commit 162cf2879af592f8aa458311486749bed9a6bf55
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 01:39:36 +0900

    Init function is need to link statically

commit 53b3be5d58a9bf1efce229b3dce723f96e820c79
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-09 12:02:54 +0900

    Fix parsing of multiple assignment with rescue modifier

    Single assignment with rescue modifier applies rescue to the RHS:

      a = raise rescue 1 # a = (raise rescue 1)

    Previously, multiple assignment with rescue modifier applied rescue
    to the entire expression:

      a, b = raise rescue [1, 2] # (a, b = raise) rescue [1, 2]

    This makes multiple assignment with rescue modifier consistent with
    single assignment with rescue modifier, applying rescue to the RHS:

      a, b = raise rescue [1, 2] # a, b = (raise rescue [1, 2])

    Implements [Feature #8239]
    Fixes [Bug #8279]

commit cecae8593abb79213f818078ee0361277401f86c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 01:05:09 +0900

    Removed unnecessary headers

commit 88db6fa4793da3724c0128e53cfe1abead1774f8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-10 01:04:39 +0900

    Use ENC_REPLICATE to copy an encoding

commit 8d7e0159c0c9fa1a546b4fa324837beae5eea3ee
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-10 00:04:06 +0900

    * 2019-08-10

commit a8ba22cd323d481eb8bd08ebca0fab8f1dbfc2f9
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-10 00:01:36 +0900

    Revert "Removed unused includes"

    This reverts commit c9eb8f82e9febeb634a23bec6aeea915eb25fe26.

    The change caused "implicit declaration" warning and actual segfault.

    ```
    /tmp/ruby/v2/src/trunk-gc-asserts/enc/gb2312.c: In function Init_gb2312:
    /tmp/ruby/v2/src/trunk-gc-asserts/enc/gb2312.c:6:31: warning: implicit declaration of function rb_enc_find [-Wimplicit-function-declaration]
         rb_enc_register("GB2312", rb_enc_find("EUC-KR"));
                                   ^~~~~~~~~~~
    /tmp/ruby/v2/src/trunk-gc-asserts/enc/gb2312.c:6:31: warning: passing argument 2 of rb_enc_register makes pointer from integer without a cast [-Wint-conversion]
    <command-line>:0:19: note: expected OnigEncoding {aka const struct OnigEncodingTypeST *} but argument is of type int
    /tmp/ruby/v2/src/trunk-gc-asserts/regenc.h:231:12: note: in expansion of macro ONIG_ENC_REGISTER
     extern int ONIG_ENC_REGISTER(const char *, OnigEncoding);
                ^~~~~~~~~~~~~~~~~
    ```

commit 314b50d7c05e946e4e9bbc5fdb38ecb67180c139
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-09 23:10:06 +0900

    #include <> for system headers

commit c9eb8f82e9febeb634a23bec6aeea915eb25fe26
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-09 20:20:36 +0900

    Removed unused includes

commit 3ddbba84b5b1f001cd575a48cec56d7ce8e5fbb2
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-09 22:48:20 +0900

    gc.c: Double STACKFRAME_FOR_CALL_CFUNC (1024->2048)

    ef64ab917eec02491f6bf7233a4031a8c35385e3 didn't fix the issue, so the
    size seems not enough yet.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/osx1014/ruby-master/log/20190809T114503Z.fail.html.gz

commit 63384591e2c72b89f9d69d9acc6c8b80ca8432c3
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-09 17:48:47 +0900

    restore timeout

commit ef64ab917eec02491f6bf7233a4031a8c35385e3
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-09 17:31:19 +0900

    gc.c: Increase STACKFRAME_FOR_CALL_CFUNC

    On macOS Mojave, the child process invoked in TestFiber#test_stack_size
    gets stuck because the stack overflow detection is too late.
    (ko1 figured out the mechanism of the failure.)

    This change attempts to detect stack overflow earlier.

commit a4a2dd79420d1061ab1615a50b830f567e043d34
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-09 16:29:43 +0900

    Revert a6e32855d079e8f3806d8be8a5f5cf7b3a967133 partially

    Fix TypeError when typing `''.[TAB]`

commit 3cbd56d574a3ce6d5ddeb748462eb4dcdce4d166
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-09 16:08:15 +0900

    complement `test_` prefix.

    `make test-all TESTS=name` can specify running test files by name.
    name can be dirname ('dir/') or a file ('.../test_foo.rb'). This
    patch complement `test_` prefix for a test. So we only need to
    specify `TESTS=ruby/hash` which means `TESTS=ruby/test_hash.rb`.

commit 26cf4c91ad357fe6c8fc2247abe980dbf9a5b331
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-09 15:23:35 +0900

    extend timeout to debug.

commit 3b39cc6b038d419081a3d302a3cd73c3859613c7
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-09 14:11:24 +0900

    gc.h is required on mswin build.

    thread.c requires gc.h on mswin build. Sorry.

commit 6bf8db9a07e95820705f7ec119f4038a529182ef
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-09 13:57:47 +0900

    add rp() and bp() in internal.h.

    debug utility macro rp() (rp_m()) and bp() are introduced.
    * rp(obj) shows obj information w/o any side-effect to STDERR.
    * rp_m(m, obj) is similar to rp(obj), but show m before.
    * bp() is alias of ruby_debug_breakpoint(), which is registered
      as a breakpoint in run.gdb (used by `make gdb` or make gdb-ruby`).

commit cb390e87dc682a277579f44fac6aea57e16e5f7a
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-09 05:29:02 +0900

    Add more runners

    Closes: https://github.com/ruby/ruby/pull/2327

commit 54bdfe27f361c0cccb9d16f32e5796b47d017134
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-09 00:28:49 +0900

    Run macOS tests on GitHub Actions

    This commit sets up the CI integration on GitHub Actions.  We should
    give it a try because queue times are lower and I think we get more
    CPUs.

    Closes: https://github.com/ruby/ruby/pull/2327

    Co-Authored-By: John Hawthorn <john@hawthorn.email>

commit 37eefb11fbadca6198b081a0a89d5b265fe45de4
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-09 13:08:01 +0900

    remove useless include and dependency

commit a9fd57056cdbf041f8f0ad1350846a175028542a
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-09 13:02:31 +0900

    double memory limit on MJIT.

    On test with MJIT, sometimes it fails like:
    http://ci.rvm.jp/results/trunk-mjit-wait@silicon-docker/2189967

commit 0176e74d6c3de4a71424d9bc0bc63c408550b488
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-09 11:39:20 +0900

    Add missing dependency

    just fix CI failure
    https://travis-ci.org/ruby/ruby/jobs/569625233

commit 4e9382a82756ff92032b85f8ec0256b1cf5ac6ad
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-09 11:11:18 +0900

    * expand tabs.

commit 71efad1ed391ee0c5398a76306fdbaaadd4dc52e
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-09 11:00:34 +0900

    introduce RCLASS_CLONED flag for inline cache.

    Methods on duplicated class/module refer same constant inline
    cache (IC). Constant access lookup should be done for cloned
    class/modules but inline cache doesn't check it.
    To check it, this patch introduce new RCLASS_CLONED flag which
    are set when if class/module is cloned (both orig and dst).
    [Bug #15877]

commit c7acb37248d4cef76647f8bc7ebd7dc291d9a853
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-09 03:29:15 +0900

    Enable GitHub Actions on Ruby

    This just enables GitHub actions on our repository so we can try it out.

commit 57288f5dbd9a13c00a0ec5860b46c027f34df1ae
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-09 01:32:30 +0900

    * expand tabs.

commit 050b932152fb3004c78af223186afe1aa397f06f
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-08-08 11:15:45 +0900

    Iseq#to_binary: Add support for NoMatchingPatternError and TypeError

    Binary dumping the iseq for `case foo in []; end` used to crash as
    there was no handling for these exception classes.

    Pattern matching generates these classes as operands to `putobject`.

    [Bug #16088]
    Closes: https://github.com/ruby/ruby/pull/2325

commit 830fd0418170843f234ed82e07d2fd61d86153e7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-09 01:27:52 +0900

    C99 allows trailing comma in enum

commit c0f4943840948100b057ebb0ef6764ffd252cd5e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-09 00:16:24 +0900

    * 2019-08-09

commit ad3f7a3667d79a7d23c78e026d3eb5a42bd0b7b3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-09 00:06:08 +0900

    Should require without wrapper module

commit a206738762ea788830e8b3ac58b37d705595a6fb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-08 22:40:09 +0900

    Remove temporary directory [ci skip]

commit a9b9f9d157ac28e4818b3e6db0e4d924faf97649
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-08 22:35:11 +0900

    Revert "Drop -j from msys2 build for debugging"

    This reverts commit b1594ca3d6b72edb60927418482652ce93209499.

    Revert "Debug appveyor mingw failure"

    This reverts commit fa29f65416f1fb3d734a279855728bb0616dbb34.

    Though I preserved V=1 for future debugging.

commit 995c2e9536a7c0f0476d1f62ac3c9bcb68513c59
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-08 22:17:22 +0900

    Reduce unnecessary EXEC_TAG in require

commit 2a6d7fad133cd6e1e50de6b8627d19eecee5ed8f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-08 22:03:00 +0900

    Arrange installed packages like ruby-loco

    to fix a build error like:
    https://ci.appveyor.com/project/ruby/ruby/builds/26547644/job/4j7n41e7in97a9kx

    Basically copy-pasted what's currently done in MSP-Greg/ruby-loco.

    Co-Authored-By: MSP-Greg <greg.mpls@gmail.com>

commit 76bd0714cf1140ffd64bf564446c76c54f2c4870
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-08 21:26:31 +0900

    solve "duplicate :raise event" in require too [Bug #15877]

commit 3d87b774c4e38e0dbe3ef181183565c5987cd05f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-08 21:08:00 +0900

    Use `ec` instead of `th->ec` where the `th` came from the `ec`

commit b1594ca3d6b72edb60927418482652ce93209499
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-08 20:37:12 +0900

    Drop -j from msys2 build for debugging

commit 29bdfeb0c6d3490fbd7e5a7cc89598ca7340176e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-08 17:59:38 +0900

    * expand tabs.

commit b004d3e8300ba803d4a499148fa4fc6a690149e6
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-08 17:53:36 +0900

    solve "duplicate :raise event" [Bug #15877]

    Without this patch, "raise" event invoked twice when raise an
    exception in "load"ed script.
    This patch by  danielwaterworth (Daniel Waterworth).
    [Bug #15877]

commit 20cb8e8aeab916d659c0359a35687bb8df1f31a6
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-08 17:34:50 +0900

    main.c: Add doxygen mainpage

    The document is experimentally produced in:
    https://rubyci.s3.amazonaws.com/doxygen/modules.html

commit b39efb163dd97a6b2c92cac3d2b1c19f898d0c04
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-08 17:19:23 +0900

    Aliases capture_output to capture_io for test-unit compatibility.

commit 1ad0f4e593563d460e3015fc4a2542ce1bb80d6e
  Author: Gannon McGibbon <gannon.mcgibbon@gmail.com>
  Date:   2019-08-07 07:38:55 +0900

    Add *_clear methods to VM_COLLECT_USAGE_DETAILS API

    Add RubyVM::USAGE_ANALYSIS_INSN_CLEAR, RubyVM::USAGE_ANALYSIS_OPERAND_CLEAR,
    and RubyVM::USAGE_ANALYSIS_REGISTER_CLEAR to clear VM instruction hash constants.

    Closes: https://github.com/ruby/ruby/pull/2258

commit 1c7d3a13caa718ef52ec6b55988b1459a002f965
  Author: Gannon McGibbon <gannon.mcgibbon@gmail.com>
  Date:   2019-03-12 04:07:52 +0900

    Add *_start and *_running  methods to VM_COLLECT_USAGE_DETAILS API

    Add RubyVM::USAGE_ANALYSIS_INSN_START, RubyVM::USAGE_ANALYSIS_OPERAND_START,
    and RubyVM::USAGE_ANALYSIS_REGISTER_START to begin collecting VM instructions.

    Add RubyVM::USAGE_ANALYSIS_INSN_RUNNING, RubyVM::USAGE_ANALYSIS_OPERAND_RUNNING,
    and RubyVM::USAGE_ANALYSIS_REGISTER_RUNNING to check if VM instructions
    are being collected.

    Closes: https://github.com/ruby/ruby/pull/2258

commit 70fd099220446e39bb80eb0bb32870ce12134619
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-07 04:23:30 +0900

    Add a way to print debug counters without exiting

    I am trying to study debug counters inside a Rails application.
    Accessing debug counters by killing the process is hard because child
    processes don't get the same TRAP as the parent, and Rails seems to
    intercept calls to `exit`.  Adding this method lets me print the debug
    counters when I want (at the end of requests for example)

commit 2f3795113df23006f1f99dd5879a8a9acbc29c5c
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-08 00:11:34 +0900

    * 2019-08-08

commit fa29f65416f1fb3d734a279855728bb0616dbb34
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-08 00:10:26 +0900

    Debug appveyor mingw failure

    It has been unstable for recent builds:
    https://ci.appveyor.com/project/ruby/ruby/builds/26531442/job/0ycp7woekqqx97x9
    https://ci.appveyor.com/project/ruby/ruby/builds/26531687/job/xui3rctcvi7r49iv
    https://ci.appveyor.com/project/ruby/ruby/builds/26532019/job/1q0n46ci4g8dplwx

commit f82633b6a6053e6273e8795d3e91c50ab5c260d8
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-07 22:56:52 +0900

    array.c: gc.h is not needed

commit 3229e0583fba6a7f1c58a1dd8aa7d4ca9c5155d9
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-07 22:54:38 +0900

    hash.c: gc.h is needed when HASH_DEBUG mode

commit 0cf6bfca7866a0205ba6d603cca7c87f4db0065e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-07 22:42:42 +0900

    hash.c: gc.h is no longer needed

commit f5481e35abfc8d53cffe33246b4d5736798f4241
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-07 22:30:10 +0900

    Added separator for failing commits from default gems.

commit 67cde179c5b23f1e8da3cb7554d26c79ed1c3b97
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-07 22:29:02 +0900

    Skip merge commit created by bundlerbot.

commit 82527d9b50207607b2adb7fb6dded91d23749feb
  Author: Daniel Radetsky <dradetsky@gmail.com>
  Date:   2019-08-07 10:21:32 +0900

    fix spelling

    Closes: https://github.com/ruby/ruby/pull/2323

commit 58dec9625cc705fd9be6dc1ea20e232303e9c32d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-07 22:22:52 +0900

    enum.c: Remove unused #include

    transient_heap.h is no longer needed.

commit 0d2aa6fec952e78739e7f379df5a3f7547ce4f27
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-07 22:11:52 +0900

    Upgrade benchmark-driver version

    as I already started to use --runner=block introduced in v0.14.20 like:
    https://github.com/ruby/ruby/pull/2321#issuecomment-518638663

commit 330e3f19c32dc6b0c287b7845c796e7e4a3ed575
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-07 21:47:03 +0900

    Refactor .travis.yml by introducing travis_retry.sh

    Not using official travis_retry.bash, because it's not supporting to
    modify backoff seconds.
    https://github.com/travis-ci/travis-build/blob/0ad8f1886b2c31994d847e126dc5842b7b3513e3/lib/travis/build/bash/travis_retry.bash

    Not using official `travis_apt_get_update` function because it does not
    propagate exit status to be used by retries.
    https://github.com/travis-ci/travis-build/blob/0ad8f1886b2c31994d847e126dc5842b7b3513e3/lib/travis/build/bash/travis_apt_get_update.bash

    Co-Authored-By: Nobuyoshi Nakada <nobu@ruby-lang.org>

commit e6901cea741931906bacbb7c6afdafa621e50c0b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-07 10:41:12 +0900

    Fixed deprecation message

commit 1bf796c69dcc61977a105474d08bbe2a51c88e0e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-07 08:57:22 +0900

    Fix Date#step test

    The document states that "the limit should be a date object".

commit a0fe396555b164562f69e08e67b62d9904bcfaaa
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-07 09:39:46 +0900

    Simplify break logic of Travis retries

    Co-Authored-By: Nobuyoshi Nakada <nobu@ruby-lang.org>

commit b839721ae7814a6e74de59eb40586a32a398545f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-07 09:03:08 +0900

    .travis.yml: Use `-eq` instead `=` to compare integers

commit 8877dbe400d84c1f595cb4aa8a06fc71640a43c0
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-07 03:13:17 +0900

    ext/ripper/lib/ripper/lexer.rb: Consistently use `Array#push`

    instead of <<.  All the other callsites use `push`.

commit ef8c5161b4422783c8f736a099d97a9c868fe287
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-07 03:12:10 +0900

    ext/ripper/lib/ripper/lexer.rb: fix a wrong delegation

    The target method name is a typo.

commit 2d6b92c5f6b6343f34bb363604339f4bd7b951ac
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-07 01:26:02 +0900

    Retry ubuntu-toolchain-r-test apt source setup

    In 614c90fe21cf1d9cf6fb18684187d8c7e2f61de6, I assumed
    apt-add-repository has been stable recently, but I saw PR randomly
    failed for it today.

    This commit only deals with "ubuntu-toolchain-r-test" and does NOT deal
    with `llvm-toolchain-xenial-8` intentionally, because what it does
    (mainly curl from build.travis-ci.org) seems to be more reliable than
    "ubuntu-toolchain-r-test". Also `&clang-8` jobs are basically
    allow_failures and it's less important to be stabilized.

commit 66a13413eee3c4985e62e87addcdce84fc4540fe
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-07 00:07:06 +0900

    * 2019-08-07

commit e89d9f3debab353d1c5a5162752af8f201d98d49
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-07 00:02:21 +0900

    Deprecate Float::ROUNDS, which should not be a constant

    [Bug #16044]

commit 0ed298f382e0fc0f119f4896394aacf3b74f6687
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-06 23:39:14 +0900

    Refine time_to_r

    * time.c (time_to_r): get rid canonicalize and uncanonicalize
      one-denominator rational, by rb_time_unmagnify_to_rational.

commit a04e3585d3cd1d76c4ec61a39bd4f2bdcd6517a1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-06 23:00:29 +0900

    Extracted wmap_live_p

commit 3e6b9926b70d7df9424cf2a6472ba0cd33e61f48
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-06 20:59:41 +0900

    * expand tabs.

commit b5146e375aca25a15ec46978711cde28e5f761d6
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-06 12:56:18 +0900

    leafify opt_plus

    Inspired by 346aa557b31fe96760e505d30da26eb7a846bac9

    Closes: https://github.com/ruby/ruby/pull/2321

commit 43b52ac0a52807c415e9d24d25954f5055567c5e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-06 20:28:48 +0900

    Revert "Don't echo results of assignment expressions"

    This reverts commit 1ee88c51b3c319b74b69540e111e4a1c24833cad.

commit 1ee88c51b3c319b74b69540e111e4a1c24833cad
  Author: Steven Willis <onlynone@gmail.com>
  Date:   2019-03-21 03:50:05 +0900

    Don't echo results of assignment expressions

commit 842364792f03f99f4347d7dbce2a7bd39d1fcc33
  Author: Charles Oliver Nutter <headius@headius.com>
  Date:   2019-07-27 15:18:39 +0900

    Use host_os from RbConfig to detect host OS.

    RUBY_PLATFORM on JRuby is always "java", so it will not reflect
    the host operating system. This regex appears to be the consensus
    way to detect Windows based on a search of Ruby code on Github:

    https://github.com/search?q=%2Fmswin%7Cmsys%7Cmingw%7Ccygwin%7Cbccwin%7Cwince%7Cemc%2F&type=Code

commit d626ca1e98d32b67987adb64637a15adf0c977f0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-31 02:13:21 +0900

    Remove obsolete TODO comment

commit 81a15d636efafaeebe084dc03dae54264d91b875
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-08-01 00:39:30 +0900

    Update Unicode URL to 12.1.0

commit 4daff3a603d1a8b2656e82108e2f7d0abf8103c9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-06 11:56:37 +0900

    The value of rb_scan_args_verify is never used

commit 5cff9968aefe2f407731df705830888d9d61409d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-06 11:52:17 +0900

    Distinguish bad scan format from no argument variables

commit 146cf2f444c271cb2d4be9efa04053f4d66d16e6
  Author: Espartaco Palma <esparta@gmail.com>
  Date:   2018-10-14 14:36:57 +0900

    Removing duplicated assertions on test_array.rb - MINUS method

    Closes: https://github.com/ruby/ruby/pull/1790

commit 4f1a00a746b8c47dd32f06b249aad8c4d27cb934
  Author: Justin Collins <justin@presidentbeef.com>
  Date:   2016-09-11 18:09:43 +0900

    Improve same directory detection in FileUtils

    Closes: https://github.com/ruby/ruby/pull/1425

commit 96cec6b27741cbdeb51ea3acdeba0e813d51035f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-15 11:39:57 +0900

    Document that RubyVM::InstructionSequence methods are implementation and version dependent

    Fixes [Bug #6785]

commit 2b6441196ef32d93c7898764610a913f54f8bc32
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-06 08:10:25 +0900

    Remove documentation of %m in Syslog

    Fixes [Bug #6726]

commit 81252c5ccd15295155a8fe30b0b56117ba7c79e7
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-06 03:32:42 +0900

    Let prev EP move again

    The last time we committed this, we were asking the VM to write to the
    ep.  But VM assertions check if the ENV data is the correct type, which
    if it's a T_MOVED pointer it's not the correct type.  So the vm
    assertions would fail.  This time we just directly write to it from the
    GC and that bypasses the vm assertion checks.

commit c9192ef2e8793fd870a4af40f422bc939a135ef9
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-06 00:56:05 +0900

    * expand tabs.

commit 33d7a58ffb193cb2ca200ff5b3c649a72d190d21
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-02 05:44:54 +0900

    add compaction support to weak maps

commit 255e22a8272cd951a6cf8983b7720546e859d1eb
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-06 00:49:41 +0900

    Use gcc-8 for BASERUBY test

    as it failed https://travis-ci.org/ruby/ruby/jobs/567942969, unlike my
    fork CI.

    This just rollbacks a minor change in
    798474deaf10dbea70c02724b5acf4487bbed660.

commit e80f407ed4eafad4c544d7b2de507a0f4386f0a7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-06 00:43:46 +0900

    Give up stabilizing TestProcess on Travis osx

    They have been too unstable.

    Revert "Extend sleep before sending USR1 in TestProcess"
    This reverts commit aaf69a8ba866193863a7eafe5c6044844bd71bc3.

    Revert "Extend sleep before sending USR1 in TestProcess"
    This reverts commit 076f3fcf11a061394d3d5f8c671512df1e983023.

commit 48d460d9a6d326f4084dec0fd5d90b1cc4331e78
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-06 00:34:06 +0900

    * 2019-08-06

commit 614c90fe21cf1d9cf6fb18684187d8c7e2f61de6
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-06 00:01:05 +0900

    Control Travis apt retries on our own

    because Travis team does not do it for us:
    https://github.com/travis-ci/travis-build/pull/1712

    The retried part has failed often even in one day:
    https://travis-ci.org/ruby/ruby/jobs/567802384
    https://travis-ci.org/ruby/ruby/jobs/567802388
    https://travis-ci.org/ruby/ruby/jobs/567695879
    https://travis-ci.org/ruby/ruby/jobs/567666931

    For doing it easily, this also changes major aliases to
    compiler-specific ones, because partially updating `before_install`
    logic using `env` key was too hard and we needed to directly write
    `before_install` for each package set. As a bonus of it, it may also
    skip installing unnecessary packages when just `os: linux` is needed.

    I'll revert this if this patch does not contribute to stabilize CI.

commit fb9dd6182af1b0c1275d6d579cb53d6dac5eda5c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-05 13:43:22 +0900

    Use negative-sized array instead of zero-division

commit 4c15b241f8e83696ae104ad141ba990adf833309
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-05 13:29:53 +0900

    Unused macro argument `varc`

commit 86ac51c301e62abb4eb0962e04e587ba8298bf80
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-08-04 21:39:55 +0900

    [rubygems/rubygems] Use the standard RUBY_ENGINE_VERSION instead of JRUBY_VERSION

    * RUBY_ENGINE and RUBY_ENGINE_VERSION are defined on every modern Ruby.
    * There is no such constant as TRUFFLERUBY_VERSION or RBX_VERSION.

    https://github.com/rubygems/rubygems/commit/431d0aefdd

commit 2ea2108a9fb1460342226f54cbf54ddd79ea1cc2
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-08-04 21:16:42 +0900

    [rubygems/rubygems] Fix error handling of #with_engine_version

    * If settings constants fail, show that exception instead of getting
      another one due to variables being unset and hiding the real cause.

    https://github.com/rubygems/rubygems/commit/f38cd67874

commit f9dac1bd54af384e99fecf949cad9df9ceb09f0d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-01 20:20:58 +0900

    [rubygems/rubygems] Cleanup after testing `rake package`

    Sometimes it happens to me that my local tests start failing because I
    pull some file removals or renames into my local copy, and those are
    still present on my last copy of pkg/. In those cases, the test about
    `rake package` will fail with something like the following:

    ````

    Failure:
    TestRakePackage#test_builds_ok [/home/deivid/Code/rubygems/test/rubygems/test_rake_package.rb:13]:
    Expected `rake package` to work, but got errors:

    ```
    cd pkg/rubygems-update-3.1.0.pre1
    WARNING:  See http://guides.rubygems.org/specification-reference/ for help
    rake aborted!
    Gem::InvalidSpecificationException: ["test/rubygems/test_rake_package.rb"] are not files

    Tasks: TOP => package => gem => pkg/rubygems-update-3.1.0.pre1.gem
    (See full trace by running task with --trace)

     ```

    If you have added or removed files, make sure you run `rake update_manifest` to update the `Manifest.txt` accordingly.
    Expected: true
      Actual: false
    ````

    So, make sure, package is always built from scratch.

    https://github.com/rubygems/rubygems/commit/4e2cc9eb26

commit 42a9e27d845271002e09caf68d977990bd06a867
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-01 18:00:32 +0900

    [rubygems/rubygems] Use gsub with Hash

    https://github.com/rubygems/rubygems/commit/83eced0b39

commit 87bc29fe28654ed6b42e87337806ce40cecbe513
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-31 21:33:40 +0900

    [rubygems/rubygems] Revert cadb66037d9b58c80fc795f39384d533229a1f73

    https://github.com/rubygems/rubygems/commit/5c3158d975

commit 8eb2921f568f0ebc1a0f61b45297c77516f602b5
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-31 08:54:45 +0900

    [rubygems/rubygems] Fixed to warn with shadowing outer local variable.

    https://github.com/rubygems/rubygems/commit/b0588a87b1

commit 5a8d848849bf96de2d2a26db1d6c0cd0999b2078
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-30 09:39:17 +0900

    [rubygems/rubygems] Remove FIXME comment

    https://github.com/rubygems/rubygems/commit/5a1d3d618d

commit 58a478bce4a81e619dcef4436f437453d1a3cd89
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-05 14:37:53 +0900

    ext/psych/yaml/loader.c: Cast the difference of pointers to int

    instead of casting a pointer to int.
    Follow up of 39622232c7542d062f79277a11f6b8b6b6cfd994.

commit 2403f9ac3af170ce0107a709a9cb510fe0501648
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-08-05 12:52:14 +0900

    Expand the timeout of `test_pstore_files_are_accessed_as_binary_files`

    Sometimes causes timeout error on mswin CI

commit 6a265278b56eb3f0bab84fbed0c302f4c5ea8c6d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-05 12:16:03 +0900

    Check if signaled

commit dc0c04764fbd65c28337c37f70cbf71c0cadffe1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-05 11:55:21 +0900

    Refined assertion messages

commit 521e25baa42c31cc40e60c1da3a5e8e147255ef9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-05 11:47:25 +0900

    Fixed assertion

    The regexp should be expected to match the error message.

commit 8cfa3d861c393b7f2f35eaf30132edd8423ba59a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-05 10:51:52 +0900

    Do not expect RSTRING_PTR valid after rb_fstring

commit 29092d35d33d3a879634e173604edc9d201aa87a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-05 10:47:36 +0900

    Moved FailDesc to EnvUtil.failure_description

    So EnvUtil does not depends on test/unit.

commit 548cd6e2b51ee0ed7b59799950681d46a43c6c85
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-05 09:16:12 +0900

    Drop default leaf definition and obsoleted comments

    leaf is true by default. Other insns are not specifying it explicitly.
    Also the comment describing why it was not leaf is outdated.

commit 6bb3618f281e1cdbb28fe38ee88287da9b1838e8
  Author: Yaw Boakye <wheresyaw@gmail.com>
  Date:   2018-10-12 09:04:46 +0900

    n+1 to include n in range

    Python's range stop right before n, which means factL never returns the correct result.

    Closes: https://github.com/ruby/ruby/pull/1982

commit 253da5b2196ccef2a2bf66ca4e7305118f79198a
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-05 09:00:13 +0900

    * 2019-08-05

commit d6ac5c53d481b109cb684d818b14ff24afb5b4bb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-05 08:55:09 +0900

    Revert "Always evaluate the expression RUBY_ASSERT_MESG_WHEN just once"

    It caused a significant benchmark fall.  Some assertions seem to
    use expressions with side-effects which cannot be inlined.

    This reverts commit b452c03a14f943ae25338547bd680fce67399d85.

commit aaf69a8ba866193863a7eafe5c6044844bd71bc3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-04 23:41:33 +0900

    Extend sleep before sending USR1 in TestProcess

    just like 076f3fcf11a061394d3d5f8c671512df1e983023.

    This test also hanged on Travis osx
    https://travis-ci.org/ruby/ruby/jobs/567547060

commit 164f1ac0e994b3b2937ace5c77192c63a489a962
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-04 23:08:22 +0900

    Revert "Skip test_race_exception on MJIT for now"

    This reverts commit 7a75baa6e294473f02da512c99f7ef1f76b2d83c.

    Revert "Defer skip to avoid errors on ensure"

    This reverts commit adfc8d6dbadbccef27d6ec78022650840c7604cc.

    because 76e2370f132f83c16c9de39a0a9356579f364527 is hoped to fix the
    problem.

commit 7817a6fa09db7cbe2d79b3b6fc86aa4e7fea6d28
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-04 22:27:17 +0900

    * expand tabs.

commit 76e2370f132f83c16c9de39a0a9356579f364527
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-04 22:19:18 +0900

    Fix dangling path name from fstring

    * load.c (rb_require_internal): make sure in advance that the path
      to be loaded shares a fstring, to get rid of dangling path name.
      Fixed up 5931857281ce45c1c277aa86d1588119ab00a955.  [Bug #16041]

commit 346aa557b31fe96760e505d30da26eb7a846bac9
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-04 20:11:00 +0900

    Make opt_eq and opt_neq insns leaf

    # Benchmark zero?

    ```
    require 'benchmark/ips'

    Numeric.class_eval do
      def ruby_zero?
        self == 0
      end
    end

    Benchmark.ips do |x|
      x.report('0.zero?') { 0.ruby_zero? }
      x.report('1.zero?') { 1.ruby_zero? }
      x.compare!
    end
    ```

    ## VM
    No significant impact for VM.

    ### before
    ruby 2.7.0dev (2019-08-04T02:56:02Z master 2d8c037e97) [x86_64-linux]

      0.zero?: 21855445.5 i/s
      1.zero?: 21770817.3 i/s - same-ish: difference falls within error

    ### after
    ruby 2.7.0dev (2019-08-04T11:17:10Z opt-eq-leaf 6404bebd6a) [x86_64-linux]

      1.zero?: 21958912.3 i/s
      0.zero?: 21881625.9 i/s - same-ish: difference falls within error

    ## JIT
    The performance improves about 1.23x.

    ### before
    ruby 2.7.0dev (2019-08-04T02:56:02Z master 2d8c037e97) +JIT [x86_64-linux]

      0.zero?: 36343111.6 i/s
      1.zero?: 36295153.3 i/s - same-ish: difference falls within error

    ### after
    ruby 2.7.0dev (2019-08-04T11:17:10Z opt-eq-leaf 6404bebd6a) +JIT [x86_64-linux]

      0.zero?: 44740467.2 i/s
      1.zero?: 44363616.1 i/s - same-ish: difference falls within error

    # Benchmark str == str / str != str

    ```
    # frozen_string_literal: true
    require 'benchmark/ips'

    Benchmark.ips do |x|
      x.report('a == a') { 'a' == 'a' }
      x.report('a == b') { 'a' == 'b' }
      x.report('a != a') { 'a' != 'a' }
      x.report('a != b') { 'a' != 'b' }
      x.compare!
    end
    ```

    ## VM
    No significant impact for VM.

    ### before
    ruby 2.7.0dev (2019-08-04T02:56:02Z master 2d8c037e97) [x86_64-linux]

      a == a: 27286219.0 i/s
      a != a: 24892389.5 i/s - 1.10x  slower
      a == b: 23623635.8 i/s - 1.16x  slower
      a != b: 21800958.0 i/s - 1.25x  slower

    ### after
    ruby 2.7.0dev (2019-08-04T11:17:10Z opt-eq-leaf 6404bebd6a) [x86_64-linux]

      a == a: 27224016.2 i/s
      a != a: 24490109.5 i/s - 1.11x  slower
      a == b: 23391052.4 i/s - 1.16x  slower
      a != b: 21811321.7 i/s - 1.25x  slower

    ## JIT
    The performance improves on JIT a little.

    ### before
    ruby 2.7.0dev (2019-08-04T02:56:02Z master 2d8c037e97) +JIT [x86_64-linux]

      a == a: 42010674.7 i/s
      a != a: 38920311.2 i/s - same-ish: difference falls within error
      a == b: 32574262.2 i/s - 1.29x  slower
      a != b: 32099790.3 i/s - 1.31x  slower

    ### after
    ruby 2.7.0dev (2019-08-04T11:17:10Z opt-eq-leaf 6404bebd6a) +JIT [x86_64-linux]

      a == a: 46902738.8 i/s
      a != a: 43097258.6 i/s - 1.09x  slower
      a == b: 35822018.4 i/s - 1.31x  slower
      a != b: 33377257.8 i/s - 1.41x  slower

    This is needed towards Bug#15589.
    Closes: https://github.com/ruby/ruby/pull/2318

commit 39622232c7542d062f79277a11f6b8b6b6cfd994
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-04 20:12:43 +0900

    Suppress warnings of bundled libyaml.

commit 2d8c037e97e8120de254006f7d60ec9e42a7b6ae
  Author: Sutou Kouhei <kou@clear-code.com>
  Date:   2019-05-26 05:32:41 +0900

    [ruby/rexml] gemspec: update

    https://github.com/ruby/rexml/commit/404bd99a7c

commit 310a2a98601168aae8c071749b5cb572b55d5046
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-05-25 18:28:00 +0900

    [ruby/rexml] xpath: add missing value conversions for equality and relational expressions

    GitHub: fix #18

    Reported by Mirko Budszuhn. Thanks!!!

    https://github.com/ruby/rexml/commit/0dca2a2ba0

commit 39f275edf7284ef0c0f9b9391038ae9f2c019731
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-05-25 18:25:37 +0900

    [ruby/rexml] xpath number: fix a bug that false is converted to NaN

    GitHub: fix #18

    It must be 0.

    Reported by Mirko Budszuhn. Thanks!!!

    https://github.com/ruby/rexml/commit/b48f3afa3b

commit 643344dc9460626617c9ce88f07b3ae0fed49150
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-05-25 17:58:49 +0900

    [ruby/rexml] xpath local_name: fix a bug that nil is returned for nonexistent case

    It must be an empty string.

    https://github.com/ruby/rexml/commit/81bc7cd4f5

commit 5f78b138b10a6732676689f0f8690c1db16c1355
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-05-25 17:47:41 +0900

    [ruby/rexml] xpath boolean: implement

    https://github.com/ruby/rexml/commit/feb8ddb1ec

commit 6ef82943978ea5816a91c32e9ff822c73d1935f9
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-05-25 17:06:53 +0900

    [ruby/rexml] xpath: fix a bug for equality or relational expressions

    GitHub: fix #17

    There is a bug when they are used against node set. They should return
    boolean value but they returned node set.

    Reported by Mirko Budszuhn. Thanks!!!

    https://github.com/ruby/rexml/commit/a02bf38440

commit c46ba8e9a3b1b6c13232c1af3e9f2efd4a3eec98
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-05-25 15:54:02 +0900

    [ruby/rexml] Use PP

    https://github.com/ruby/rexml/commit/185062a4a4

commit 54525fbfd4bada3eb39428a83e9c337efcbeb4ce
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-05-25 15:14:05 +0900

    [ruby/rexml] xpath: add support for changing to debug mode by environment variable

    https://github.com/ruby/rexml/commit/59378a16ea

commit de55e0a008768b0b7c2ddb8d486f4e5a5e09e2fa
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-05-04 14:02:34 +0900

    [ruby/rexml] Bump version

    https://github.com/ruby/rexml/commit/54452c103a

commit f85caf40a69d322bde80a547e4b17568604746ff
  Author: ujihisa <ujihisa@users.noreply.github.com>
  Date:   2019-02-21 17:42:08 +0900

    [ruby/rexml] Message less confusing error to human (#16)

    * Message less confusing error to human

    * Problem: Following error message is not helpful, because you have to reason
      that '' actually means it's in the top-level, and the 'div' (not '</div>') is
      an end tag

            require "rexml/parsers/lightparser"
            REXML::Parsers::LightParser.new('</div>').parse
            #=> Missing end tag for '' (got 'div')

    * Solution: add a special case in error handling just to change the error message

            require "rexml/parsers/lightparser"
            REXML::Parsers::LightParser.new('</div>').parse
            #=> Unexpected top-level end tag (got 'div')

    * Refactor by removing unnecessary `md` check

    * Thanks @a_matsuda to review this at asakusa.rb!

    https://github.com/ruby/rexml/commit/f6528d4477

commit 33e4a59b4a051b853bc412cf8badfc26a7cb391a
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-02-10 05:37:28 +0900

    [ruby/rexml] test: compare with real element

    https://github.com/ruby/rexml/commit/9f2908de2e

commit ee8985ef0e35183d606af3a7360cd4713069e9b2
  Author: Alyssa Ross <hi@alyssa.is>
  Date:   2019-02-10 05:33:06 +0900

    [ruby/rexml] Fix crash with nil XPath variables (#13)

    Patch by Alyssa Ross. Thanks!!!
    https://github.com/ruby/rexml/commit/2a53c54f58

commit 982208c65069423b1bc90dafde7589872c452c21
  Author: FUJI Goro (gfx) <gfuji@cpan.org>
  Date:   2019-01-05 22:34:03 +0900

    [ruby/rexml] use #inspect to print meta-characters in error messages

    https://github.com/ruby/rexml/commit/a124a19b9a

commit 81354bbd1b2ef5f4660c9255eea1f99b26688efa
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-01-01 06:52:24 +0900

    [ruby/rexml] Bump version

    https://github.com/ruby/rexml/commit/c0e3f14564

commit 0f18bc7fca0668aa2ffeb15106525526e4f018ba
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-01-01 06:32:18 +0900

    [ruby/rexml] Fix attribute's default namespace behavior

    NOTE: It's a backward incompatible change. If we have any serious
    problems with this change, we may revert this change.

    The XML namespace specification says the default namespace doesn't
    apply to attribute names but it does in REXML without this change:

    https://www.w3.org/TR/xml-names/#uniqAttrs

    > the default namespace does not apply to attribute names

    REXML reports a parse error for the following XML that is described as
    a valid XML in the XML nsmaspace specification without this change:

        <!-- http://www.w3.org is bound to n1 and is the default -->
        <x xmlns:n1="http://www.w3.org"
           xmlns="http://www.w3.org" >
          <good a="1"     b="2" />
          <good a="1"     n1:a="2" />
        </x>

    If attribute doesn't have prefix, the attribute should return "" for
    both #prefix and #namespace.

    https://github.com/ruby/rexml/commit/9e4fd552bc

commit 9b36f0a787dfb1a2a3875b827b455b5a9a2f2680
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-01-01 06:02:37 +0900

    [ruby/rexml] Format

    https://github.com/ruby/rexml/commit/2384586811

commit 84c3742466fa78b48902d340345cddd04569b81f
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-01-01 05:39:37 +0900

    [ruby/rexml] Revert "xpath: remove needless nil check"

    This reverts commit 61b73c1bf8dc64d97fba7f0a8c503c24b11313f5.

    "*:local_name" becomes prefix=nil.

    https://github.com/ruby/rexml/commit/9e7dd4cd4e

commit 096e766355f36983676883b7cb83a1b5862be49a
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-01-01 05:36:39 +0900

    [ruby/rexml] xpath: remove needless nil check

    It must not be nil.

    https://github.com/ruby/rexml/commit/61b73c1bf8

commit 27c11892c829a249b997f896b29cdf26ac9f38f2
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2018-12-31 07:24:25 +0900

    [ruby/rexml] Add a TODO for Attribute#namespace

    https://github.com/ruby/rexml/commit/70310a06e5

commit 3583fa166c52aff1ac6fab310e9133c553efcc4a
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2018-12-31 07:21:37 +0900

    [ruby/rexml] xpath: fix a bug that no namespace attribute isn't matched with prefix

    [ruby-list:50733]

    Reported by Yasuhiro KIMURA. Thanks!!!

    https://github.com/ruby/rexml/commit/8f3c5c176a

commit f76cfb55d7612f1bb1648112e159646321d2aa2c
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2018-12-25 11:20:27 +0900

    [ruby/rexml] Bump version

    https://github.com/ruby/rexml/commit/0f79e71210

commit adfc8d6dbadbccef27d6ec78022650840c7604cc
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-04 11:05:50 +0900

    Defer skip to avoid errors on ensure

commit 7a75baa6e294473f02da512c99f7ef1f76b2d83c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-04 10:49:03 +0900

    Skip test_race_exception on MJIT for now

    somehow the test fails only on Wercker in CIs triggered by GitHub.
    Actually rubyci and ci.rvm.jp also have issues too, though.

commit a3188f43a812a8c3954391af66ed54352423ef60
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-04 10:08:17 +0900

    Revert "Revert "Fix dangling path name from fstring""

    This reverts commit 326c00b6f89e1c86e6fe29ab60da593eb6883a88.

    We also confirmed that test_gced_eval_location fails without the changes:
    https://travis-ci.org/ruby/ruby/builds/567417818
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/arch/ruby-master/log/20190804T000003Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/ubuntu1604/ruby-master/log/20190804T003005Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/icc-x64/ruby-master/log/20190804T000007Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10x/ruby-master/log/20190804T001806Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian9/ruby-master/log/20190804T003005Z.fail.html.gz

commit 2d189a6721c5e88973a53e385c0fb9eeb55fece9
  Author: David Carlier <devnexen@gmail.com>
  Date:   2019-07-10 06:08:31 +0900

    yaml few build warning fixes

    Closes: https://github.com/ruby/ruby/pull/2283

commit b6cfacc85d7607a86cb22e1f8eb00b82860014fe
  Author: Dmitry Petrashko <dark@d-d.me>
  Date:   2019-05-30 06:16:06 +0900

    Remove dependency on `openssl/conf_api.h`

    None of the functions defined in this header are actually used in Ruby.
    Fixes build against boringssl that does not have this file.
    Closes: https://github.com/ruby/ruby/pull/2210

commit 0f601df22c258c568f0c6f8263903eafa14ae238
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-06-24 17:03:49 +0900

    [Doc] Fix Array#to_h call-seq

    Closes: https://github.com/ruby/ruby/pull/2254

commit 84829392f5bb094b2cac117a67d37307ecc3640b
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-06-24 17:33:30 +0900

    [Doc] Fix Array#difference call-seq

    Closes: https://github.com/ruby/ruby/pull/2255

commit 4173258fd0413c49ef07d54bc9654bba7e497e89
  Author: Semyon Pupkov <mail@semyonpupkov.com>
  Date:   2017-11-13 18:48:29 +0900

    change call CGI methods from :: to .

    Closes: https://github.com/ruby/ruby/pull/1749

commit 8e7df4bbf991b9d605784225db0750bbfe681f23
  Author: Olivier Lacan <hi@olivierlacan.com>
  Date:   2019-03-20 02:46:27 +0900

    Use the word heredocs in Here Documents docs

    Two advantages:
    - higher relevance of the extremely common word "heredocs" which may
    help people find this page when searching for "ruby heredocs"
    - the anchor link becomes `#label-Here+Documents+-28heredocs-29`, which is
    ugly due to the parentheses but includes the word "heredocs" in the URL to
    this section

    If anyone knows a way to prevent RDoc from turning invalid characters into
    ugly and meaningless ASCII codes, I'm listening. I don't want to break existing
    anchor links but RDoc should really ignore these characters or turn them into
    dashes.

    Closes: https://github.com/ruby/ruby/pull/2103

commit 93116569145bbff34355e08722c6689487d8b858
  Author: Lars Kanis <larskanis@gmail.com>
  Date:   2017-05-12 03:40:57 +0900

    Better wording for __ENCODING__

    "locale encoding" is misleading since it doesn't mean Encoding.find("locale")
    but the encoding used to interpret the script file. It's therefore better to
    call it "script encoding" as in the paragraphs above.
    Closes: https://github.com/ruby/ruby/pull/1611

commit 636a4fad1617699350ec70d5523a92e8148d5c35
  Author: Will Binns <will@trek.io>
  Date:   2019-06-14 13:18:01 +0900

    README: Add smart URL for joining mailing list

    This adds a couple of parameters to the mailing list link in the README
    so that the subject line and body are automatically populated. The body
    is populated with the `subscribe` string so that all an individual has
    to do is perform the send action in their mail client.

    Closes: https://github.com/ruby/ruby/pull/2236

commit 7614cc5b241144bc47e8062e335fcf15dbf04e51
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-04-21 22:38:10 +0900

    Fix release post output for tool/format-release

    Different entries should be separated by an empty line.

    Closes: https://github.com/ruby/ruby/pull/2137

commit 326c00b6f89e1c86e6fe29ab60da593eb6883a88
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-04 08:38:37 +0900

    Revert "Fix dangling path name from fstring"

    This reverts commit 5931857281ce45c1c277aa86d1588119ab00a955 temporarily,
    leaving `TestEval#test_gced_eval_location` to see the impact for missing
    the changes.

    That's because too many CIs are failing for `require` behaviors:
    http://rubyci.s3.amazonaws.com/freebsd11zfs/ruby-master/log/20190803T063004Z.fail.html.gz
    http://rubyci.s3.amazonaws.com/unstable10x/ruby-master/log/20190803T051806Z.fail.html.gz
    http://rubyci.s3.amazonaws.com/unstable11x/ruby-master/log/20190803T052406Z.fail.html.gz
    http://rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190803T111909Z.fail.html.gz
    http://rubyci.s3.amazonaws.com/unstable11s/ruby-master/log/20190803T062506Z.fail.html.gz
    http://rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-master/log/20190803T052505Z.fail.html.gz
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5d4512c921ca08000857936a?step=5d451305c2809c0008a3da76
    https://app.wercker.com/ruby/ruby/runs/mjit-test2/5d4512c921ca080008579371?step=5d4513000421020007ca122d
    http://ci.rvm.jp/results/trunk_gcc4@silicon-docker/2177591
    http://ci.rvm.jp/results/trunk_gcc6@silicon-docker/2177596
    http://ci.rvm.jp/results/trunk_clang_60@silicon-docker/2178802
    http://ci.rvm.jp/results/trunk-theap-asserts@silicon-docker/2177555
    http://ci.rvm.jp/results/trunk-mjit-wait@silicon-docker/2178747

    Mostly `TestRequire#test_race_exception` failures, but in ci.rvm.jp
    `require` inside rubyspec hangs very often.

commit 7adc8c79eaf40521a290ecdc7aa0a8490a95f87a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-04 08:15:05 +0900

    [DOC] "nmake check" is preferable to "nmake exam" now [ci skip]

    [Feature #14187]

commit 9b38c845508a4184882580abb3b6cc4fcd1dd57f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-04 08:07:06 +0900

    [DOC] updated about icons in win32/README.win32 [ci skip]

    [Bug #13348]

commit 586e23c97de57d0d1779b957806d4188364df727
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-04 07:15:25 +0900

    * 2019-08-04

commit 9733b47eb80699e04a28dfee6fae727bfb27bc41
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-04 07:13:31 +0900

    [DOC] "nmake check" is preferable to "nmake exam" now [ci skip]

    [Feature #14187]

commit 6a1458caf2e4d15215e094cc4863e3a6f2648f6b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-04 07:12:16 +0900

    [DOC] Mark up path names to show a backslash [ci skip]

commit d569d721f978d2e0b5b331b3c3aa69c89f94d70b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-03 22:17:45 +0900

    Move assert_ruby_status and assert_throw to CoreAssertions for default gems.

commit 954223ebd4229d4ca18ee5b78249c4330473910e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-03 14:56:41 +0900

    [DOC] mentioned minimum versions of tools [ci skip]

commit 6623cde731c7624e26e0e1e1e51eada911783629
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-03 14:56:07 +0900

    Added more attributes [ci skip]

commit 4d75346187557ae59736ca5739bfae312c285e08
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-03 14:20:36 +0900

    Refine error message

    Highlight failed command and suggest installing the command.
    [Bug #16042]

commit ec0d742dd744b13e89d82ffc88d193f165942acf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-03 14:06:56 +0900

    Suppress warnings against locations in eval

commit cee394eb228efa4160501ef02a1cd6a696909972
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-03 13:51:23 +0900

    * expand tabs.

commit 5931857281ce45c1c277aa86d1588119ab00a955
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-03 13:41:55 +0900

    Fix dangling path name from fstring

    * parse.y (yycompile): make sure in advance that the `__FILE__`
      object shares a fstring, to get rid of dangling path name.
      Fixed up 53e9908d8afc7f03109b0aafd1698ab35f512b05.  [Bug #16041]

    * vm_eval.c (eval_make_iseq): ditto.

commit 688a59f8ac984a2f1d4d53005dbe0679dcd59ac3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-03 11:31:40 +0900

    Show the location of `eval` which uses `__FILE__`/`__LINE__`

commit fb96bea7ed8ed6765fda2a1db90a2cfce14e59b7
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-03 10:25:20 +0900

    * expand tabs.

commit 4ea5c5610aeadecf78fdd2b7d6faad8574953620
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-03 08:37:08 +0900

    Predefine some IDs

commit 0bd1cd677f769ac6128989bf1d021753698fdaac
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-01 09:46:32 +0900

    [bundler/bundler] Remove Bundler.rubygems.config_map because it was deprecated.

    https://github.com/bundler/bundler/commit/5215ae7fa3

commit b3b2b55f7b7ab035851176d28ecee4afaa3fe0cc
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-01 09:44:46 +0900

    [bundler/bundler] The keys for RbConfig::CONFIG was String.

    https://github.com/bundler/bundler/commit/ffc5e76335

commit aad7443e168880e382680d4c0be1757840b23c18
  Author: Adam Wanninger <ajwann@ajwann.com>
  Date:   2019-07-09 07:43:42 +0900

    [bundler/bundler] Point to CoC which contains the contributor covenant

    https://github.com/bundler/bundler/commit/a94f74682e

commit 220f6aa01c4b2552af0bdcbbc46518c1118ee91f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-03 07:23:58 +0900

    Explicitly ignored GEMRC environmental variable.

commit 4c72ca195d17fdbcb656e67c1c6ee7f591d306f2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-03 07:09:59 +0900

    Fixed up 365ee22d73ec73c119a842de271504e04bed6f45

commit 01d141938cfdc8cb0d370c659d976af7ed9623ae
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-08-03 06:29:36 +0900

    Fixed the broken example with ruby core structure.

commit 7ed1fc527e029f47c4ed17136fb1492c9fbdfdc9
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-08-01 06:56:05 +0900

    [bundler/bundler] Bump rubocop to 0.74.0

    And re-enable exclusion because the bug why we added them has been fixed.
    See https://github.com/rubocop-hq/rubocop/issues/6861.

    https://github.com/bundler/bundler/commit/bda63fcffc

commit dab944e6ca9ed92ce72d1db4834b32e924d87015
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-25 15:45:39 +0900

    [bundler/bundler] net-http-persistent 3.1.0 has been released

    https://github.com/bundler/bundler/commit/ffb7d6fa53

commit fcb58f65b1ff6204845b47ac810c32ee7a1aafe2
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-26 17:42:44 +0900

    [bundler/bundler] Adapt to the way my automatiek patch works

    https://github.com/bundler/bundler/commit/b8ee4aec0b

commit 1e63683795bf782db745dbad7889b2779f0573a5
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-25 23:55:35 +0900

    [bundler/bundler] Bump automatiek to 0.2.0

    https://github.com/bundler/bundler/commit/cd1abf8b3f

commit 97f3ceeaa5c66ad6a6a5f3f37339c4b1cbe71677
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-11 19:48:34 +0900

    [bundler/bundler] Bump net-http-persistent to 3.0.1

    * Adds an extra artifice task to vendorize new `connection_pool`
    dependency.

    * Cherry-pick's needed Windows fix not yet merged into master branch of
    `net-http-persistent`.

    * Update bundler usages to be compatible with the new version, and fix
    unit specs.

    https://github.com/bundler/bundler/commit/0575baa6bb

commit 2b7e39f364d76c74af6e04aa3d96888a6aeef1cd
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 00:32:33 +0900

    [bundler/bundler] Always set `cache_all` via config during tests

    So that the behavior is the same regardless of the tested bundler
    version.

    https://github.com/bundler/bundler/commit/664549427a

commit 267a72be800da0ec47f441d7d8210dc6aec137af
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 02:19:31 +0900

    [bundler/bundler] Enable `Style/UnneededInterpolation` cop

    https://github.com/bundler/bundler/commit/4c6a3c3cf7

commit e84e63230bd024b652451cb7d1a44b9d9e0449ae
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-03-29 00:46:13 +0900

    [bundler/bundler] Check for straneous quotes

    And use single quotes consistently.

    https://github.com/bundler/bundler/commit/8b9fbbb2df

commit 4dea1356c3ea97e9d0e98b1fbca69b01a6df2647
  Author: Samuel Giddins <segiddins@segiddins.me>
  Date:   2018-11-25 22:25:17 +0900

    [bundler/bundler] [CurrentRuby] Say we are ruby? when the generic local platform is Gem::Platform::RUBY

    This allows us to always say we're ruby? when force_ruby_platform is
    set, and fixes using gemspec & force_ruby_platform on windows.

    https://github.com/bundler/bundler/commit/3cb89b7e5c

commit 6fb73e6043015fcd999a2c4b9a52b9bb1d9c4173
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-03-22 00:32:35 +0900

    [bundler/bundler] Fully remove compatibility guard

    https://github.com/bundler/bundler/commit/2a7a5daba0

commit 452516f50f80e3bbb6dc9911dcdb133a2e16c170
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-08 22:32:18 +0900

    [bundler/bundler] Remove development dependencies from gemspec

    And refactor development setup.

    https://github.com/bundler/bundler/commit/f288806d02

commit 7255f55dba83aacbde76184aff965162e339ba2a
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-13 02:05:26 +0900

    [bundler/bundler] RUBY_ENGINE should always be defined after 1.8.7

    https://github.com/bundler/bundler/commit/d6c9196d18

commit d2d6d5c988b66cb110dbb07f92e08f231a31d6bc
  Author: Scott Tesler <ScottieT123@gmail.com>
  Date:   2019-07-30 05:15:37 +0900

    [bundler/bundler] Fix typo in binstubs documentation
    https://github.com/bundler/bundler/commit/88dbfa18b4

commit 56229c4e5d9856abdd39a51a5875a7d4d0076ce0
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-26 18:39:41 +0900

    [bundler/bundler] Fix `git` options examples

    https://github.com/bundler/bundler/commit/bda0fa02c4

commit 6015bbeeaf897c75065d0b18e119e2614e1d1f44
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-25 17:43:36 +0900

    [bundler/bundler] Fix incorrect sectioning in `gemfile` man page

    https://github.com/bundler/bundler/commit/428f53bef0

commit d4b1804b11310a3c2303367dcd4ec73aae419ee1
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-19 17:23:42 +0900

    [bundler/bundler] Removed the environmental variables that are BUNDLE_USER_*.

      It's affect with rspec examples and broke them.

    https://github.com/bundler/bundler/commit/355a922073

commit b855e33b655d9c0cfa07aab8e8622d68f0402ea0
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 20:00:46 +0900

    [bundler/bundler] Add exclamation mark to method

    To indicate that it can raise.

    Co-authored-by: Guillermo Guerrero <wolf.fox1985@gmail.com>
    Co-authored-by: David Rodrguez <deivid.rodriguez@riseup.net>

    https://github.com/bundler/bundler/commit/584e841624

commit 1fbd6a1fe0e298aef006cf1aa41e6e6f1ce7c7c5
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 20:00:30 +0900

    [bundler/bundler] Move `strict` to an attribute

    Co-authored-by: Guillermo Guerrero <wolf.fox1985@gmail.com>
    Co-authored-by: David Rodrguez <deivid.rodriguez@riseup.net>

    https://github.com/bundler/bundler/commit/7b68d86bdd

commit 1069139a339a6a7d0d6169c634e572659f749ea9
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 23:09:35 +0900

    [bundler/bundler] Extract some methods

    Co-authored-by: Guillermo Guerrero <wolf.fox1985@gmail.com>
    Co-authored-by: David Rodrguez <deivid.rodriguez@riseup.net>

    https://github.com/bundler/bundler/commit/027aba0cff

commit ee7ec87007862118cdf13815808999e73b9b98d3
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 23:03:46 +0900

    [bundler/bundler] Unfold message to single line for readability

    https://github.com/bundler/bundler/commit/d845a213ca

commit e1ccaa8782fa722b842ba59c955a212697afde9c
  Author: Guillermo Guerrero <wolf.fox1985@gmail.com>
  Date:   2019-04-13 01:59:35 +0900

    [bundler/bundler] Extract a `print_gems` method

    https://github.com/bundler/bundler/commit/0d8c8d207e

commit 759930dd11aedfd563d11bdef4b0a562b0f00ad9
  Author: Guillermo Guerrero <wolf.fox1985@gmail.com>
  Date:   2019-04-13 01:52:52 +0900

    [bundler/bundler] Less complexity

    https://github.com/bundler/bundler/commit/be9d6e7cfc

commit fd3411c73f35e3e8c0e1cd72eea434ca6e8d1744
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 20:38:47 +0900

    [bundler/bundler] Move more locals to attributes

    Co-authored-by: Guillermo Guerrero <wolf.fox1985@gmail.com>
    Co-authored-by: David Rodrguez <deivid.rodriguez@riseup.net>

    https://github.com/bundler/bundler/commit/4335df3e4c

commit a42478502c923978a0cf14e7e00efbc0149b07a9
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 20:34:52 +0900

    [bundler/bundler] Move `any?` logic to the attribute

    It's the only usage of the `options_include_groups` attribute and its
    name suggests a boolean, so it fits better now.

    Co-authored-by: Guillermo Guerrero <wolf.fox1985@gmail.com>
    Co-authored-by: David Rodrguez <deivid.rodriguez@riseup.net>

    https://github.com/bundler/bundler/commit/53c0fae760

commit 4e76aef280f8440a9e499a05a2d74e6f2ba7cdd6
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 20:30:56 +0900

    [bundler/bundler] Move `options_include_groups` to an attribute

    Co-authored-by: Guillermo Guerrero <wolf.fox1985@gmail.com>
    Co-authored-by: David Rodrguez <deivid.rodriguez@riseup.net>

    https://github.com/bundler/bundler/commit/832fb900f0

commit e33dd659d43ec2302648c04fcec208b1c0f98ed9
  Author: Guillermo Guerrero <wolf.fox1985@gmail.com>
  Date:   2019-04-13 01:32:42 +0900

    [bundler/bundler] Move duplicated code to `before` blocks

    https://github.com/bundler/bundler/commit/69bee117fb

commit c4a2a9a38165e6a4b54798d5d8edb6297275efaa
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 00:33:27 +0900

    [bundler/bundler] Remove now unused logic

    https://github.com/bundler/bundler/commit/5b285685a4

commit 322d4fe98dd5db50ed4088dc9966dfc8813d6672
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 02:03:19 +0900

    [bundler/bundler] Remove unnecessary indirections

    These specs are only run on bundler 2, so the compatibility method is
    not needed.

    https://github.com/bundler/bundler/commit/6cb28e3aeb

commit 30d10be036c2f57f6ba4d605f73c2ab9a07075b8
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 23:23:45 +0900

    [bundler/bundler] Prefer feature flag to hardcoded check

    https://github.com/bundler/bundler/commit/8c83921d08

commit 76d205c84041d8d186b632ec5f8f479be4e730aa
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 23:23:26 +0900

    [bundler/bundler] Restore `cache_all` flag removal

    https://github.com/bundler/bundler/commit/04a04719f0

commit 640dbdd155625cfbd30c3a00c702dd04ec66c8bc
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-24 02:48:20 +0900

    [bundler/bundler] Better info about spec exclusions

    https://github.com/bundler/bundler/commit/1ee77d9c55

commit 51aaed128a7949fffdc5847ee1949e4b2acc86ff
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 20:56:01 +0900

    [bundler/bundler] Skip specs using `Process.fork` on Windows

    https://github.com/bundler/bundler/commit/ebcb25a3c3

commit d7487d6c0845f89b0d640d1e22a4a10d1ffdb1a3
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 20:11:33 +0900

    [bundler/bundler] Try make some specs platform independent

    https://github.com/bundler/bundler/commit/b5900e57a4

commit 9d82962af3bc1c308ae0c2530b9fb162da825da2
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 20:01:33 +0900

    [bundler/bundler] Check for generic lockfiles

    https://github.com/bundler/bundler/commit/344a881592

commit bb50f87b69049d80117d40e194e91cb650a94f64
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 22:25:28 +0900

    [bundler/bundler] Add workaround from old rubygems

    In these versions, the `approximate_recommendation` method doesn't
    include the prerelease logic.

    https://github.com/bundler/bundler/commit/caf13e9e4f

commit cb6abf551ab091760ec2c834ff3718f83efd5426
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-16 20:34:57 +0900

    [bundler/bundler] Update error messages to be more precise

    https://github.com/bundler/bundler/commit/9ddeeb1fe1

commit f40914e3cf99181ccf69987fa8edded175a1019c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-16 18:50:56 +0900

    [bundler/bundler] Remove unnecessary method parameter

    https://github.com/bundler/bundler/commit/72194d1aac

commit a1c69991a5c618b4002a6222fca8cfe1f4718879
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-16 18:52:14 +0900

    [bundler/bundler] Use a consistent requirement in binstub

    https://github.com/bundler/bundler/commit/50ccdb32c2

commit bb6b9b49293378cb48510e27a98db152824658cd
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-16 19:42:39 +0900

    [bundler/bundler] Remove redundant begin-end block

    https://github.com/bundler/bundler/commit/1d017c3f36

commit bd0f19f137a952f5f8b838537f473385b204ed78
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-16 18:31:38 +0900

    [bundler/bundler] Don't need 1.8 compatibility

    https://github.com/bundler/bundler/commit/7ca4d4e83c

commit 3e10b4a0be0de22fc0871a6fab65139c43c69180
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 20:01:13 +0900

    [bundler/bundler] Indentation fixes

    https://github.com/bundler/bundler/commit/2a44090cb6

commit 3e83fbddfacafd1467bfcae818d595c6e29fca5c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 15:16:17 +0900

    [bundler/bundler] Add a comment to explain the initial reset

    https://github.com/bundler/bundler/commit/6d0a8f4128

commit 55831647fbea0005449f714eec7672fab50cf9d3
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 15:14:02 +0900

    [bundler/bundler] Move environment reset to the only test needing it

    https://github.com/bundler/bundler/commit/6d3b809695

commit 679472454832f4e9b5c72f282b2933c44ef35ffa
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 15:15:29 +0900

    [bundler/bundler] Remove unneeded bundler key

    It sounds like this was mistankenly added in
    4337a499d0108fc3748084934aaed7591b355a26. Then the forgotten MANPATH key
    was added in bf5bf106230772934602768bb31a68dc925691f0, but this one
    should've been removed I think.

    https://github.com/bundler/bundler/commit/a82ad111e5

commit 1b081cdd650964708c700a8051d37bf70e1a3880
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 15:15:15 +0900

    [bundler/bundler] Improve test to make it more independent from env

    https://github.com/bundler/bundler/commit/038f0d7c37

commit 26f651796c06c232b9887d2401f5e998d6dc654f
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-23 01:21:59 +0900

    [bundler/bundler] Remove unnecessary assignments

    https://github.com/bundler/bundler/commit/3e5d4b2c42

commit d6a2e082e647258400d0a9f75ebbd167aaa44848
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-07-21 11:59:43 +0900

    [bundler/bundler] spec/bundler/shared_helpers_spec.rb - fixup after 7248

    PR 7248 incorrectly changed a path calculation.  This reverts.

    After running Azure Pipelines CI in my ruby/ruby fork and checking  the  'bundler' jobs, the error was apparent...

    https://github.com/bundler/bundler/commit/811755b413

commit 432285c0040d547c24294611725edddb78560ac2
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-07-13 22:20:12 +0900

    [bundler/bundler] fix nested bundle exec's when bundler is a default gem

    https://github.com/bundler/bundler/commit/537c0ab712

commit 24062bd323ec9c5311bbf2c5f8f2822f15a38c62
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-07-17 01:39:24 +0900

    [bundler/bundler] build_metadata.rb - fix 'warning: instance variable @git_commit_sha not initialized'

    https://github.com/bundler/bundler/commit/37a1eec8c8

commit 7b7caf9b556aa026c732403d7b18910ebc070123
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-07-16 08:00:22 +0900

    [bundler/bundler] dsl_spec.rb - fix for Ruby core

    https://github.com/bundler/bundler/commit/33892e1ed2

commit a1549fba833d99590c128444ff5c4ac910b15870
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-16 03:48:05 +0900

    [bundler/bundler] Alias `cache` to `package` now

    The additions of the `package` command are not actually backwards
    incompatible, so we can do this transition without further care. All
    existing specs of `bundle cache` pass when using the `bundle package`
    implementation for it.

    https://github.com/bundler/bundler/commit/69497adf90

commit 4f5e1b6ebf4a122fe935c55224ce8e9937288582
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-16 02:17:11 +0900

    [bundler/bundler] Remove `cache_command_is_package` feature flag

    So that we handle the removal of `bundle cache` just like we'll handle
    the removal of `bundle show` and `bundle console`.

    https://github.com/bundler/bundler/commit/ff1a669efb

commit f73020d493ec2bf7c79fc118f83f328caee701d7
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-16 02:31:51 +0900

    [bundler/bundler] Always keep `bundle package --all` option

    Just change the default. The reason to do this is that the deprecation
    message talks about the default being changed, not the option being
    removed.

    https://github.com/bundler/bundler/commit/eca1757792

commit 33ce42dd5dd10cb86258e78010563f86f412ce01
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-16 02:31:10 +0900

    [bundler/bundler] Fix incorrect flag usage

    https://github.com/bundler/bundler/commit/4df9edef95

commit ad3cba02cfa9140e2318632e6cc40dad4e79f959
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-03-30 19:21:54 +0900

    [bundler/bundler] Remove redundant condition

    This is inside a code branch where the condition is already met.

    https://github.com/bundler/bundler/commit/8cdd6c37e6

commit 31541d738924e714e9b580b33eb44608ea248486
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-11 18:33:03 +0900

    [bundler/bundler] Drop rubygems 2.5.0 and 2.5.1 support

    https://github.com/bundler/bundler/commit/8ecd722b9f

commit fc42423b8df652e3f75436200e5bdfbacd167959
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-11 18:32:03 +0900

    [bundler/bundler] Correct a rubygems test filter

    It seems to pass under rubygems 2.5.2.

    https://github.com/bundler/bundler/commit/062cd2be7c

commit f5cd02f362142dcb3211e2e820b414c0eb2b4e2c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-11 18:31:19 +0900

    [bundler/bundler] Remove unnecessary test filter

    Since it covers the whole range we support.

    https://github.com/bundler/bundler/commit/c0b9d4e6c6

commit a6ce001babc5728cd3c29df91ef29e0e57d4f012
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-11 18:02:49 +0900

    [bundler/bundler] Change the refresh spec to not use `stubs_for`

    We plan to incrementally populate this array in rubygems, so that will
    break the test because the first time `find_by_name("rack")` is called
    will make the `rack` gem available in the array.

    We can test the same thing using some other way, which is more
    appropriate anyways, because `Bundler.rubygems.find_name` is only used
    inside `bundler` to look for the `bundler` gem itself whereas
    `Bundler.rubygems.all_specs` is used in more places.

    https://github.com/bundler/bundler/commit/49c519ef47

commit a181df75429a3c3db2eef387f7476b18c3893615
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-11 18:02:35 +0900

    [bundler/bundler] No need to make `Gem.refresh` a noop

    The rubygems integration sets up a `post_reset` hook that resets the
    specs back to what bundler knows after `Gem::Specification.reset` is
    called (which is what `Gem.refresh` calls under the hood).

    https://github.com/bundler/bundler/commit/3810f9945c

commit f399a2b7964dac890fd08bd78b62fbe8313319ea
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-03-29 00:45:31 +0900

    [bundler/bundler] Remove unnecessary line

    It contains a typo, so it can't be needed.

    https://github.com/bundler/bundler/commit/ef38c97fbf

commit 56fd027aa6cecaa6910ec6b96270299937f124c8
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-03-29 00:41:43 +0900

    [bundler/bundler] Tweak some quality specs to check more files

    https://github.com/bundler/bundler/commit/98023e25de

commit 812dfa44f0b35b6ee6446417e0e72f04270bdf85
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-27 20:01:30 +0900

    [bundler/bundler] Refactor setting the encoding in quality specs

    Instead of setting the encoding globally, set it when reading the files.

    https://github.com/bundler/bundler/commit/e2a5c45e4d

commit 6cbe818c668c07c0700b1281d629b92a9101c976
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2018-12-07 02:05:01 +0900

    [bundler/bundler] This seems to pass for me

    https://github.com/bundler/bundler/commit/e31880b1ea

commit d0c19d1f87afeb9459644f2b348354d19f3285c3
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-06 00:26:02 +0900

    [bundler/bundler] Use `tap` for `current_platforms`

    https://github.com/bundler/bundler/commit/78608acf83

commit 6e0dc5594ced353aabdb3f118667ca987720e624
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 01:44:44 +0900

    [bundler/bundler] Remove now unused method

    https://github.com/bundler/bundler/commit/3a2d2f0250

commit 6492f23d919589745fc90fd151b1ce7f5478d776
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 00:03:58 +0900

    [bundler/bundler] Remove now meaningless setting

    https://github.com/bundler/bundler/commit/52c5a0eede

commit dae6d303d5aa13eeeb482398eb748b3a8f4edcfa
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 00:02:55 +0900

    [bundler/bundler] Remove now meaningless warning

    https://github.com/bundler/bundler/commit/00b095b98f

commit c1ca77281d60e5b81dd4ba0df36f7ea6abf3f92a
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 00:01:36 +0900

    [bundler/bundler] Add all platforms to lockfile by default

    https://github.com/bundler/bundler/commit/3dc509e645

commit d8cd45cb1a459f8e82f055d8c2d335f57962dc31
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-19 22:49:39 +0900

    [bundler/bundler] Refactor some specs

    https://github.com/bundler/bundler/commit/785c7af1f3

commit ff908983be80f718497e32e60d24ac9b820df52c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-19 22:31:40 +0900

    [bundler/bundler] Extract `expanded_platforms`

    https://github.com/bundler/bundler/commit/60d720eb06

commit 3af9d8bb671cfdc474110af3f2db24e36954d38d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-19 22:29:02 +0900

    [bundler/bundler] Extract `current_platforms`

    https://github.com/bundler/bundler/commit/9f07207d64

commit ead2dc0ec998ef0453f99e24971a1d598f7522fe
  Author: Samuel Giddins <segiddins@segiddins.me>
  Date:   2018-11-25 22:23:55 +0900

    [bundler/bundler] [GemHelpers] Remove the special code path for ruby platform being its own generic

    https://github.com/bundler/bundler/commit/3b9abc8932

commit cef81eb8ccb38deaf5d0bd3c5d6c5fdbcc920d38
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-25 23:50:20 +0900

    [bundler/bundler] Make some specs more explicit

    https://github.com/bundler/bundler/commit/5e08e849ec

commit b2baf6bb0223bb52f9e5f861f860c61c3b6a5df1
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-08 19:58:24 +0900

    [bundler/bundler] Remove unnecessary begin-end block

    And freeze the resulting hash to appease rubocop.

    https://github.com/bundler/bundler/commit/f38ebff92f

commit f8c03b24ca6bb7e891a2303bd7c3d6094f3bd34c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-05 20:21:53 +0900

    [bundler/bundler] Bump rubocop to 0.72.0

    https://github.com/bundler/bundler/commit/babbc112c6

commit 0dad89c0fed944b3a4cb531a3ecb75586c40b057
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-03-28 02:22:09 +0900

    [bundler/bundler] Fix typos

    https://github.com/bundler/bundler/commit/1bd9660780

commit 8d9fc8466f639eb2740ac406947a047505fcdea6
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-07-05 05:14:19 +0900

    [bundler/bundler] Reuse `lockfile` spec helper

    https://github.com/bundler/bundler/commit/e6a03f1102

commit 2f1d52c266eae479576aa2accf6e13c8aa18e264
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-25 01:57:46 +0900

    [bundler/bundler] Remove unused filter

    https://github.com/bundler/bundler/commit/102d6229d4

commit aae244569b426367426b83ef3272810282f48ee5
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2018-09-26 03:36:56 +0900

    [bundler/bundler] Reuse `gemfile` spec helper

    https://github.com/bundler/bundler/commit/22de94d3b4

commit 05c3b7c8a9238186c4073f5ebb8c5ce6da7495f2
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-27 02:02:19 +0900

    [bundler/bundler] More specific assertion

    1.0.0 is such a common output, and it was hiding a crash in the test.

    https://github.com/bundler/bundler/commit/c688337e24

commit 13e5bf3454c1b13fdbb0c583fe68a73238cdffa2
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-27 02:02:03 +0900

    [bundler/bundler] Remove redundant assertion

    https://github.com/bundler/bundler/commit/7ac854dea1

commit 2c262d137c4f679ad1b6305d747e4d116b7c6959
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-27 00:09:06 +0900

    [bundler/bundler] Make spec easier to debug

    https://github.com/bundler/bundler/commit/156629291e

commit 81a84076c21e89d9e0e1df1b4cea8bf2047b960d
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-21 00:45:12 +0900

    [bundler/bundler] Don't persist the cache_all_platforms setting

    We only want it temporarily during the duration of the cache saving.

    https://github.com/bundler/bundler/commit/1e9818c0da

commit 82bf064375361f3d662389a634ef0541a0a1fc3b
  Author: Samuel Giddins <segiddins@segiddins.me>
  Date:   2017-10-21 04:36:52 +0900

    [bundler/bundler] [Package] Ensure uninstallable gems are _never_ installed

    https://github.com/bundler/bundler/commit/899aeeebb0

commit 215d846ea59ef0a20558ac7056f35998e9dc053e
  Author: Samuel Giddins <segiddins@segiddins.me>
  Date:   2017-10-21 04:24:48 +0900

    [bundler/bundler] [Package] Dont always update on --all-platforms

    https://github.com/bundler/bundler/commit/723611f6ee

commit d761a0f6ffd443b3440ac5144edcdd8054db9c7c
  Author: Samuel Giddins <segiddins@segiddins.me>
  Date:   2017-10-21 04:19:32 +0900

    [bundler/bundler] [Package] Always resolve remotely for --all-platforms

    https://github.com/bundler/bundler/commit/e45d2272ea

commit 2ccb3db5fbd642f7e70c38aca946b2e010ce338b
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2018-09-06 07:08:46 +0900

    [bundler/bundler] Add missing mock

    I'm not sure this test is useful but since it's there, it should be
    complete.

    https://github.com/bundler/bundler/commit/3e350089db

commit 5a56f4a541a07bb8eb600078236727e6837082e3
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2018-11-21 19:18:10 +0900

    [bundler/bundler] Remove unnecessary `order_matters` param

    https://github.com/bundler/bundler/commit/0b40b5b784

commit a375a4518f95dbd8f6c32840041d2847c79c3e98
  Author: Ivo Wever <ivo.wever@gmail.com>
  Date:   2019-07-03 18:33:42 +0900

    [bundler/bundler] Correct default cache path

    The default cache path is `vendor/cache`, not `vendor/bundle`.
    https://github.com/bundler/bundler/commit/49256bb3d2

commit e6dc7b5b5b8e73f01b24d86a9c7b6026ae012b76
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-28 18:06:03 +0900

    [bundler/bundler] Improve spec to be more realistic

    https://github.com/bundler/bundler/commit/ca96316b97

commit 4b1395ab4ae7b6b9e22362ccb08d103bdec744f4
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-10 18:58:30 +0900

    [bundler/bundler] Clearer MissingRevision git errors

    https://github.com/bundler/bundler/commit/b47d23edf5

commit e405aede09c090c7356bd2986793e0328f498e04
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-26 23:37:19 +0900

    [bundler/bundler] Not sure how much this buys us, remove it

    https://github.com/bundler/bundler/commit/f8584fb864

commit ed37de1c8201a00eeb40468543313f078469e6af
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-26 23:42:38 +0900

    [bundler/bundler] Inline `expanded_deps`

    It's now only used once, and doing it like this is consistent with the
    previous line.

    https://github.com/bundler/bundler/commit/7d27330fc7

commit bdcd1990adbbbdb7baa26ca7a0fd6e56efb05143
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-26 23:35:49 +0900

    [bundler/bundler] Generate new gem development dependencies in Gemfile

    https://github.com/bundler/bundler/commit/02177d0e10

commit 86757abd250bc84c7eedbd3bd65176b9f979f667
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-26 23:35:37 +0900

    [bundler/bundler] Fix local variable name

    https://github.com/bundler/bundler/commit/3df138318f

commit f2cc018adbcd054977e3e7b2410bd289f530684e
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-03-20 01:08:17 +0900

    [bundler/bundler] Reuse `execute_bundle_gem` method

    https://github.com/bundler/bundler/commit/773203ec5a

commit 27717893020d8d3e1bb8e40f30c1c78f4cb23bde
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-18 21:36:58 +0900

    [bundler/bundler] Don't re-resolve locked platform specific gems

    https://github.com/bundler/bundler/commit/7da2bf75f5

commit 33fdd87227ac90063f8ed08de8cf36c8a257b461
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 19:37:26 +0900

    [bundler/bundler] Revert "Migrate requires from exe/ to also be relative"

    This reverts commit d9d2bf6d522dd36d1ef2732e87cef8b7cba729fd.

    https://github.com/bundler/bundler/commit/eeb2ff1561

commit df011b02384a85de17ae73b0aa20799c0632d18c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 20:27:31 +0900

    [bundler/bundler] Lock rubocop-performance to 1.4.0

    https://github.com/bundler/bundler/commit/595dd6af6c

commit 1a8d9a0d5dbce163fce3bed54265d6e3dad65ee7
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 20:26:23 +0900

    [bundler/bundler] Bump rubocop to 0.71

    https://github.com/bundler/bundler/commit/efa69583dd

commit 72daf37deefd1a798577be9b05bbb9406245ee89
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 19:35:55 +0900

    [bundler/bundler] Fix a typo on a spec comment

    https://github.com/bundler/bundler/commit/1a853ad6ac

commit 884f948a90389782c29bab8a0d28f8f2b58286d6
  Author: robuye <rulejczyk@gmail.com>
  Date:   2019-05-02 09:00:21 +0900

    [bundler/bundler] bundler/inline should always install gems to system path

    As discussed in the P/R, when `BUNDLE_PATH` env is set Bundler should
    still install gems to the system path. `GEM_HOME` can be used to provide
    different location if needed.

    The test is added to document expected behavior of `bundler/inline`.

    https://github.com/bundler/bundler/commit/ae419fd6f8

commit 4089f8df1e985ec9b5347078214646be946229cc
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-17 20:17:54 +0900

    [bundler/bundler] Use real paths for `bundle clean`

    https://github.com/bundler/bundler/commit/0646f9e286

commit e59b57a3a7d7d22baf80754e1ec069cc8cd4d561
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-13 16:48:23 +0900

    [bundler/bundler] Fix thread leak in compact index specs

    This spec was not stopping threads after itself. That would cause the
    previous spec in the file (that checks that no threads are left behind)
    to fail.

    https://github.com/bundler/bundler/commit/81ad85b92d

commit a12557dbfdb63282b844f35ad0c8804bf182dfbf
  Author: Miklos Fazekas <mfazekas@szemafor.com>
  Date:   2016-03-26 19:47:43 +0900

    [bundler/bundler] Add `required_ruby_version` to gemspec template

    https://github.com/bundler/bundler/commit/f47421f92d

commit b014a2157f3b43d7ac85b27ad2cc47705487251e
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-17 17:23:47 +0900

    [bundler/bundler] Factor out gemspec call inside `let`

    https://github.com/bundler/bundler/commit/ae0ac190aa

commit 10c0271f970d1133685d91e786cf25f7160ffd50
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-17 17:23:24 +0900

    [bundler/bundler] Remove duplicated `let`'s

    https://github.com/bundler/bundler/commit/43ffaab796

commit cad71f70892f262b6912f4087d3800aa772cb117
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-03-20 15:52:08 +0900

    [bundler/bundler] Migrate git proxy helpers to use Open3

    https://github.com/bundler/bundler/commit/4a37d66f3f

commit a685a8643f3897913aa0aeeca3f1392bb9da1cf8
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-11 18:45:09 +0900

    [bundler/bundler] Fix `rake release` not prompting for OTP code

    Co-authored-by: Colby Swandale <me@colby.fyi>
    Co-authored-by: Kevin Deisz <kevin.deisz@gmail.com>

    https://github.com/bundler/bundler/commit/1b2bbc7364

commit 51bdc9433b92b60806ac535e291bf3fffd243e47
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-28 18:41:47 +0900

    [bundler/bundler] Normalize usages of `Gem::Util` in rubygems integration

    https://github.com/bundler/bundler/commit/b35d7fc74a

commit 81779e22469d89c38ee653e3de032144af0891f7
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-28 15:45:27 +0900

    [bundler/bundler] Use rubygems utility if available

    https://github.com/bundler/bundler/commit/7eccba0e52

commit e111f38f34ea6b48446a0c29e142ccf44cfff282
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-06 02:00:47 +0900

    [bundler/bundler] Fix file:// handling under Windows

    Windows paths do not start with a slash, so we add an extra slash to
    separate the host from the path in file:// urls. Otherwise "D:" is
    parsed as the host segment in the URI.

    The path for those URLs now starts with "/", so we ignore that leading
    character when using the URI's path.

    This reduces Windows CI spec failures from 429 to 355.

    https://github.com/bundler/bundler/commit/1b7e274cbc

commit c3ddd47ce7b546530e2241b0ea6a96817977886a
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-07 01:06:21 +0900

    [bundler/bundler] Normalize file:// handling in specs

    https://github.com/bundler/bundler/commit/5946d62ad0

commit d8d5e16305ee071f7cf16980788cabcc44799c2e
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-31 18:03:11 +0900

    [bundler/bundler] Use a clean gemspec for gem helper specs

    https://github.com/bundler/bundler/commit/f694fe7f67

commit 1c070c9c2908736d610773a980a73395f5188cf2
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-11 18:44:19 +0900

    [bundler/bundler] Move "on releasing" to a RSpec context

    So we can later add more tests with the same setup.

    https://github.com/bundler/bundler/commit/21b4b6c49c

commit a27198f64850441688ae77d329eab66049d0f5e5
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-09 04:41:04 +0900

    [bundler/bundler] Migrate requires from exe/ to also be relative

    https://github.com/bundler/bundler/commit/d9d2bf6d52

commit 9596f432505a8282473b5a011eaaa5de6fa101ef
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-09 04:30:30 +0900

    [bundler/bundler] Migrate two more requires to be relative

    https://github.com/bundler/bundler/commit/80217bfe0b

commit c5737a9ae19509de56c04a587756c0b9831cadca
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-09 04:29:44 +0900

    [bundler/bundler] Migrate thor to use relative requires

    https://github.com/bundler/bundler/commit/ca28a04668

commit 1a4bb80cd79dcae1b2be418e70e1f5a5bcd36887
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-25 03:32:45 +0900

    [bundler/bundler] Skip specs that need coloring on Windows

    ANSI codes don't work there.

    https://github.com/bundler/bundler/commit/4f05417ca7

commit 38df9e18da1bbb4c74b572c51db64745e6bee853
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-25 03:31:19 +0900

    [bundler/bundler] Add missing no-color source specs

    For consistency.

    https://github.com/bundler/bundler/commit/279603ab42

commit 214e992556bffa1443e024e63385c5c76ac2f15f
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-25 03:30:43 +0900

    [bundler/bundler] Be explicit about coloring in specs that need that

    https://github.com/bundler/bundler/commit/a4d04506ab

commit 580e165873c727b9248e1ba7d3ac0af9b121a235
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-25 03:28:25 +0900

    [bundler/bundler] Respect color option when instantiating shells

    Thor's base shell will be memoized the first time it is set. So if we
    instantiate a no-color shell first, further instantiations of a bundler
    shell will be initialized with a no-color shell by default. This is
    caused some sources specs to fail, depending on the order they run.

    See for example https://travis-ci.org/bundler/bundler/builds/500328994.

    What we do to fix it is to reset the shell unless no-color is explicitly
    specified. That way, further instantiations will rerun thor's internal
    logic to choose the default shell.

    https://github.com/bundler/bundler/commit/786b5d9894

commit b95756c7a998311a2d4bbee94530c6ad83ab7d06
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-05-25 03:27:09 +0900

    [bundler/bundler] Remove unnecessary condition

    The builtin thor's color shell already checks this before printing, and
    if not a tty, prints just the string without added color codes.

    https://github.com/bundler/bundler/commit/4f62611c87

commit 4c2255fd5cd83799bd88ca3b8002000df54a5431
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-02 19:24:30 +0900

    [bundler/bundler] Added Ruby 2.6 to dsl.

    https://github.com/bundler/bundler/commit/1892626858

commit c6837638657429034825d5c9e2a29c340898afb8
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-03 07:44:44 +0900

    Use source_location instead of eval(__FILE__,binding) in Binding#irb

    e9e17cbc051e894dfd27eda5feca2939f65552db (enabling the warning by
    default) caused a warning in test-spec:
    ```
    /data/chkbuild/tmp/build/20190802T213005Z/ruby/spec/ruby/core/binding/irb_spec.rb
    Binding#irb
    - creates an IRB session with the binding in scope/data/chkbuild/tmp/build/20190802T213005Z/ruby/spec/ruby/core/binding/fixtures/irb.rb:3: warning: __FILE__ in eval may not return location in binding; use Binding#source_location instead
    ```
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian/ruby-master/log/20190802T213005Z.log.html.gz

    ref: [Bug #4352]

commit 44ddfec0bd366cd2337fd34847cddedd0a7b6775
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-03 01:07:40 +0900

    Add missing backslash

commit 60ac8ad194075d5a2e8ea790c79087460fa7973d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-03 00:55:56 +0900

    * 2019-08-03

commit 4eb54c49f762031df71addd525f015e5e25ffa0c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-03 00:55:11 +0900

    Stop using homebrew addon

    to control errors on our own.

commit 536ba7c81e72c365e92b9db3a80065b89b8b535b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-02 23:29:58 +0900

    Revert "Remove opt_nil_p test to remove warning for now"

    This reverts commit a1727e43af18c122c4d7adfa603f895fdc8f3df1.

commit 086ffe72c711179c30a773027e0b4113e908d399
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-02 23:25:38 +0900

    Revert "Revert "Add a specialized instruction for `.nil?` calls""

    This reverts commit a0980f2446c0db735b8ffeb37e241370c458a626.

    Retry for macOS Mojave.

commit e9e17cbc051e894dfd27eda5feca2939f65552db
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-02 23:16:02 +0900

    parse.y: make a warning for __FILE__ in eval by default

    [Bug #4352]

commit 247b06d40095e3dfe16b94ea88976e39e83e2463
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-02 23:01:54 +0900

    Revert "Give up `brew update` on Travis"

    This reverts commit e05f397f08e98fb170e3aca885d6028b344e833c.
    Failed... https://travis-ci.org/ruby/ruby/jobs/566961111

    We should talk to Travis people instead...

commit a1727e43af18c122c4d7adfa603f895fdc8f3df1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-02 22:46:15 +0900

    Remove opt_nil_p test to remove warning for now

commit eb638b75b33c7be30021d1de57f44498c6b5f6d6
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-23 16:09:46 +0900

    It can be share to use CoreAssertions for default gems.

      ref. https://github.com/ruby/logger/pull/35

commit 9921b63ac48ca7c195bc8b9db96eb1f434ce9e8a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-02 19:04:38 +0900

    Make float_decode_internal mantissa int

commit 6640eeb6dbcf2c5d721ebd005001f3f43f03ab53
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-02 18:11:05 +0900

    Deduplicate common code

commit ee1334189b95cb5e7785e3415b332a7a76879ac3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-02 17:51:45 +0900

    Fix uplevel

commit e03b3b4ae046785278b9188c83b2338f0f550526
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-02 14:59:29 +0900

    add debug_counters to check details.

    add debug_counters to check the Hash object statistics.

commit a0980f2446c0db735b8ffeb37e241370c458a626
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-02 15:03:34 +0900

    Revert "Add a specialized instruction for `.nil?` calls"

    This reverts commit 9faef3113fb4331524b81ba73005ba13fa0ef6c6.

    It seemed to cause a failure on macOS Mojave, though I'm unsure how.
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/osx1014/ruby-master/log/20190802T034503Z.fail.html.gz

    This tentative revert is to check if the issue is actually caused by the
    change or not.

commit 19006b711d8649b69d6f9dafad073a2f57201dd7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-02 11:28:24 +0900

    Expanded f_quo

commit f9a0492b76956b545c746ab0d3ec0e555e77dfcd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-02 11:25:41 +0900

    Expanded f_ceil

commit ffe4a6ebf93166544c4265271f7b8cffa2208af6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-02 11:22:56 +0900

    Use RB_INTEGER_TYPE_P

commit 6de61fb9edf77d69e93cca8e4166b51b07c71c06
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-02 11:19:29 +0900

    Expanded f_mod

commit 8ba8ccc3ccdea943acbb12149578edd92e5164d4
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-02 00:55:03 +0900

    * 2019-08-02

commit ef45a57801a2ae8621b0cde59f11159f89f0a8dc
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-08-01 09:03:11 +0900

    Make attr* methods define public methods if self in caller is not same as receiver

    Previously, attr* methods could be private even if not in the
    private section of a class/module block.

    This uses the same approach that ruby started using for define_method
    in 1fc33199736f316dd71d0c551edbf514528ddde6.

    Fixes [Bug #4537]

commit b8e351a1b9a16ce27f53d15051a1d1f83911b8cb
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-01 21:09:59 +0900

    ext/-test-/bug-14834/bug-14384.c: fallback for MAYBE_UNUSED

    __unused__ is unavailable on Sun C.
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-master/log/20190801T112505Z.fail.html.gz

commit 8b162ce9d1003e4e469d8f48cb9a2076fd45b47c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-01 20:08:22 +0900

    Fix assertion failure when VM_CHECK_MODE

    Some VM frames (dummy and top pushed by `rb_vm_call_cfunc`) has
    iseq but has no pc.

commit 2eec526053186f05e8b73003d5212c871724a309
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-01 20:34:10 +0900

    bootstraptest/test_insns.rb: test opt_nil_p

commit 076f3fcf11a061394d3d5f8c671512df1e983023
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-01 20:19:18 +0900

    Extend sleep before sending USR1 in TestProcess

    because the test seems to hang there forever:
    https://travis-ci.org/ruby/ruby/jobs/566409880

commit cb84824481f205d5c057fe2e31776d40a6b06c7c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-08-01 19:42:48 +0900

    Add a test for opt_nil_p

commit 1549fbfda561759879f16e5d7b2451fe9ac03147
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-01 16:40:03 +0900

    Use predefined idTo_proc

commit d488464106c0a65c892a8785d577ce8011e6e277
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-08-01 15:17:52 +0900

    Use predefined idOr

commit fd0e3bd2497d4e796b719c7b7154dc3c945f87b1
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-08-01 16:18:45 +0900

    fix VC 2013 compile error

    It seems the compiler does not support VLAs.
    See also: https://ci.appveyor.com/project/ruby/ruby/builds/26392589/job/px6nuiuw4e78weg1

commit 3a6f51ee35da5d49973aba8f7d8128a65a9d8c4a
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-01 16:04:40 +0900

    introduce ar_hint_t.

    Hash hint for ar_array is 1 byte (unsigned char). This patch introduce
    ar_hint_t which represents hint type.

commit e18e7852536a42434b7b25fa08846fe161290d46
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-01 16:04:09 +0900

    * expand tabs.

commit 19d3c80e8136402a26b52c8da46eee071ec413d6
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-07-31 23:15:56 +0900

    calc_lineno(): add assertions

    This function has a lot of assumptions.  Should make them sure.

commit 5d33f787169bcc3594d2264726695d58c4a06899
  Author:  <shyouhei@ruby-lang.org>
  Date:   2019-07-31 23:00:15 +0900

    fix tracepoint + backtrace SEGV

    PC modification in gc_event_hook_body was careless.  There are (so
    to say) abnormal iseqs stored in the cfp.  We have to check sanity
    before we touch the PC.

    This has not been fixed because there was no way to (ab)use the
    setup from pure-Ruby.  However by using our official C APIs it is
    possible to touch such frame(s), resulting in SEGV.

    Fixes [Bug #14834].

commit d2f8e03f346424553f3081896c91dd7d6fdf5db0
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-01 14:27:19 +0900

    * expand tabs.

commit f45bb760fb0a751915a9eac5f7dc4075e88e0cfc
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-08-01 14:25:15 +0900

    signal.c: make signame_prefix a nul-terminated string

    gcc 9.1.0 warns this.

    ```
    signal.c:258:46: warning: '%.*s' directive argument is not a nul-terminated string [-Wformat-overflow=]
      258 |  rb_raise(rb_eArgError, "unsupported signal `%.*s%"PRIsVALUE"'",
          |                                              ^~~~
      259 |    prefix, signame_prefix, vsig);
          |            ~~~~~~~~~~~~~~
    signal.c:200:19: note: referenced argument declared here
      200 | static const char signame_prefix[3] = "SIG";
          |                   ^~~~~~~~~~~~~~
    ```
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/ubuntu/ruby-master/log/20190801T033009Z.log.html.gz

commit 746386710646f93a5b9e0c408b00408041645091
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-01 11:20:37 +0900

    use internal_id.

    "hash_iter_lev" can be exported by Marshal.dump and it will
    introduce inconsistency. To avoid this issue, use internal_id
    instead of normal ID. This issue is pointed out by Chikanaga-san.

commit 67f7e5a224bc31e1625023ce1ed5cfbd54ea1d8f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-08-01 09:12:08 +0900

    Compact ensure clause and rename variables to fix alignment

commit 31ec475ad8ac13b1390ce09f74f577fff13c65b1
  Author: Aaron Patterson <tenderlove@github.com>
  Date:   2019-06-08 01:11:33 +0900

    Update object.c

    Co-Authored-By: Takashi Kokubun <takashikkbn@gmail.com>

commit 714924fd34c025f151aba6833009a5733bf4ccf9
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-01 08:21:58 +0900

    * expand tabs.

commit 9faef3113fb4331524b81ba73005ba13fa0ef6c6
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-06-05 08:29:08 +0900

    Add a specialized instruction for `.nil?` calls

    This commit adds a specialized instruction for called to `.nil?`.  It is
    about 27% faster than master in the case where the object is nil or not
    nil.  In the case where an object implements `nil?`, I think it may be
    slightly slower.  Here is a benchmark:

    ```ruby
    require "benchmark/ips"

    class Niller
      def nil?; true; end
    end

    not_nil = Object.new
    xnil = nil
    niller = Niller.new

    Benchmark.ips do |x|
      x.report("nil?")    { xnil.nil? }
      x.report("not nil") { not_nil.nil? }
      x.report("niller")   { niller.nil? }
    end
    ```

    On Ruby master:

    ```
    [aaron@TC ~/g/ruby (master)]$ ./ruby compil.rb
    Warming up --------------------------------------
                    nil?   429.195k i/100ms
                 not nil   437.889k i/100ms
                  niller   437.935k i/100ms
    Calculating -------------------------------------
                    nil?     20.166M ( 8.1%) i/s -    100.002M in   5.002794s
                 not nil     20.046M ( 7.6%) i/s -     99.839M in   5.020086s
                  niller     22.467M ( 6.1%) i/s -    112.111M in   5.013817s
    [aaron@TC ~/g/ruby (master)]$ ./ruby compil.rb
    Warming up --------------------------------------
                    nil?   449.660k i/100ms
                 not nil   433.836k i/100ms
                  niller   443.073k i/100ms
    Calculating -------------------------------------
                    nil?     19.997M ( 8.8%) i/s -     99.375M in   5.020458s
                 not nil     20.529M ( 7.0%) i/s -    102.385M in   5.020689s
                  niller     21.796M ( 8.0%) i/s -    108.110M in   5.002300s
    [aaron@TC ~/g/ruby (master)]$ ./ruby compil.rb
    Warming up --------------------------------------
                    nil?   402.119k i/100ms
                 not nil   438.968k i/100ms
                  niller   398.226k i/100ms
    Calculating -------------------------------------
                    nil?     20.050M (12.2%) i/s -     98.519M in   5.008817s
                 not nil     20.614M ( 8.0%) i/s -    102.280M in   5.004531s
                  niller     22.223M ( 8.8%) i/s -    110.309M in   5.013106s

    ```

    On this branch:

    ```
    [aaron@TC ~/g/ruby (specialized-nilp)]$ ./ruby compil.rb
    Warming up --------------------------------------
                    nil?   468.371k i/100ms
                 not nil   456.517k i/100ms
                  niller   454.981k i/100ms
    Calculating -------------------------------------
                    nil?     27.849M ( 7.8%) i/s -    138.169M in   5.001730s
                 not nil     26.417M ( 8.7%) i/s -    131.020M in   5.011674s
                  niller     21.561M ( 7.5%) i/s -    107.376M in   5.018113s
    [aaron@TC ~/g/ruby (specialized-nilp)]$ ./ruby compil.rb
    Warming up --------------------------------------
                    nil?   477.259k i/100ms
                 not nil   428.712k i/100ms
                  niller   446.109k i/100ms
    Calculating -------------------------------------
                    nil?     28.071M ( 7.3%) i/s -    139.837M in   5.016590s
                 not nil     25.789M (12.9%) i/s -    126.470M in   5.011144s
                  niller     20.002M (12.2%) i/s -     98.144M in   5.001737s
    [aaron@TC ~/g/ruby (specialized-nilp)]$ ./ruby compil.rb
    Warming up --------------------------------------
                    nil?   467.676k i/100ms
                 not nil   445.791k i/100ms
                  niller   415.024k i/100ms
    Calculating -------------------------------------
                    nil?     26.907M ( 8.0%) i/s -    133.755M in   5.013915s
                 not nil     25.319M ( 7.9%) i/s -    125.713M in   5.007758s
                  niller     19.569M (11.8%) i/s -     96.286M in   5.008533s
    ```

    Co-Authored-By: Ashe Connor <kivikakk@github.com>

commit 117241b3c73f8f7f1bcfee34e9d627c41bb19cc9
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-01 05:59:04 +0900

    make inline functions from macros.

commit bd1052d55da94b5503ff00c10e1cdcc04a6f9608
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-01 05:50:58 +0900

    use hash_ar_table_set() directly

commit deddc8047647792e27e1b9829bc917ef73504320
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-01 05:48:22 +0900

    HASH_ASSERT() respects HASH_DEBUG

commit 43d74776a1465095ab6b420809cc278d4f95f7bc
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-08-01 05:21:42 +0900

    check hash_hint is different.

commit a1a198d03af6b285dbee552da5e40e7c3061e6c9
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-31 18:00:33 +0900

    File.realpath can raise ENOTDIR

commit 5ad2dfd8dce00f9fb4908adc786f12baaaf2b273
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-08-01 02:34:23 +0900

    Revert "Let prev EP move"

    This reverts commit e352445863588b90f7af6cdf6c1b6dc432ee33ab.

    This is breaking CI and I'm not sure why yet, so I'll revert for now.

commit 8d138e9702e814353574cf6092b0929879e110af
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-08-01 01:43:23 +0900

    * 2019-08-01

commit e352445863588b90f7af6cdf6c1b6dc432ee33ab
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-07-02 19:02:11 +0900

    Let prev EP move

    This commit allows the previous EP pointer to move, then updates its
    location

commit c94cc6d968a7241a487591a9753b171d8081d335
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-31 20:46:01 +0900

    run single spec [ci skip]

commit 835fa9e54ac1d3bbee9b816275e7ea28e9dac313
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-31 19:55:16 +0900

    test/ruby/test_hash.rb: remove a unused vrible

    to suppress a warning

commit 4562c1309333ab08c2fa5e975ded8524122a2b55
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-31 19:51:58 +0900

    lib/bundler/shared_helpers.rb: remove require "rubygems"

    Because it causes circular require.

commit e432f5dafd3ec777e552631a2d3f14887b0562df
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-31 18:06:54 +0900

    Split in two spec examples

commit eab6c534adb381b81291e871cd57c957cf786503
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-31 18:04:35 +0900

    Attempt to fix Hash#rehash spec

commit 14eede6e530f58bc22fb6d89ecf910eb1cfcf240
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-31 17:45:43 +0900

    Fix `Leaked thread`

    Sometimes `Leaked thread: Rinda::TestRingServer#test_ring_server_ipv6_multicast` happens
    because `Rinda::TupleSpace#start_keeper` runs after stopping `@keeper`.

commit 40651cf1f567ae728c8d2cc908017c31e1000b6e
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-31 15:12:57 +0900

    delete a check on bad assumption.

    If object was modified, but there is a case that
    hash values (#hash) are same between before modified
    and after modified objects.

commit 5f95edb7af68ce03732da4d49eee8d6ee87ef544
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-31 15:10:16 +0900

    check SystemStackError

    This recursive iteration test can cause SystemStackError so
    check it correctly.

commit cac44def0b0f0fdcd1aa8cf610e16a5506d2726b
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-31 15:01:19 +0900

    backtrace can be nil.

    Surprisingly, on SystemStackError#backtrace can return nil.

commit efac0a2384ed6cb1572490b36566e2e37509d7df
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-31 14:53:14 +0900

    Revert "add debug code"

    This reverts commit e83ec207cd5fda973c41d6629d8504b515522b12.

commit 06574ad945dcce0bf626b3af020810230b169b56
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-31 14:35:21 +0900

    test/ruby/test_float.rb: suppress an overflow warning

    ```
    warning: Float 0xf.fp10000000000000... out of range
    ```

commit e83ec207cd5fda973c41d6629d8504b515522b12
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-31 12:46:15 +0900

    add debug code

commit 816e5055c90de327d99fe7f1d2cc4cfe86acd887
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-31 11:52:59 +0900

    test/ruby/test_io.rb (test_binmode_pipe): close all pipes explicitly

    to suppress the leak checker.

commit 1d02832bcff7ea45604da3a626b7983f9efe484d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-31 11:45:28 +0900

    test/rdoc/test_rdoc_rubygems_hook.rb: suppress deprecation warning

commit 823adea954b7d197301867e70c1aae74e4d81eff
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-31 11:44:20 +0900

    test/ruby/test_file_exhaustive.rb: suppress method-redefined warning

commit 312879693ffa88c0778baba2b6697f6e5f2f6116
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-31 11:30:23 +0900

    move macro to internal.h for documentation.

    13e84d5c0a changes enum to macro, but the flags usage information
    are lost in internal.h. It should be same place with other flags
    information.

commit 4979ba38fa070b4b9480f0da4b7c827e9eb768ab
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-31 11:27:59 +0900

    test/rubygems/test_gem_remote_fetcher.rb: suppress deprecation warnings

commit 13e84d5c0a53ad013aa0093f179115bcf88417e9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-31 11:08:05 +0900

    Moved RHASH_LEV_MASK and turned into a macro

    Get rid of "ISO C restricts enumerator values to range of 'int'"
    error.

commit e315f3a1341f123051b75e589b746132c3510079
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-31 10:22:47 +0900

    * expand tabs.

commit 72825c35b0d8b9d566663de961fddbf4f010fff7
  Author: Koichi Sasada <ko1@cookpad.com>
  Date:   2019-01-18 01:53:10 +0900

    Use 1 byte hint for ar_table [Feature #15602]

    On ar_table, Do not keep a full-length hash value (FLHV, 8 bytes)
    but keep a 1 byte hint from a FLHV (lowest byte of FLHV).
    An ar_table only contains at least 8 entries, so hints consumes
    8 bytes at most. We can store hints in RHash::ar_hint.

    On 32bit CPU, we use 4 entries ar_table.

    The advantages:
    * We don't need to keep FLHV so ar_table only consumes
      16 bytes (VALUEs of key and value) * 8 entries = 128 bytes.
    * We don't need to scan ar_table, but only need to check hints
      in many cases. Especially we don't need to access ar_table
      if there is no match entries (in many cases).
      It will increase memory cache locality.

    The disadvantages:
    * This technique can increase `#eql?` time because hints can
      conflicts (in theory, it conflicts once in 256 times).
      It can introduce incompatibility if there is a object x where
      x.eql? returns true even if hash values are different.
      I believe we don't need to care such irregular case.
    * We need to re-calculate FLHV if we need to switch from ar_table
      to st_table (e.g. exceeds 8 entries).
      It also can introduce incompatibility, on mutating key objects.
      I believe we don't need to care such irregular case too.

    Add new debug counters to measure the performance:
    * artable_hint_hit - hint is matched and eql?#=>true
    * artable_hint_miss - hint is not matched but eql?#=>false
    * artable_hint_notfound - lookup counts

commit ebd398ac5a4147a1e652d6943c39a29a62f12e66
  Author: Koichi Sasada <ko1@cookpad.com>
  Date:   2019-01-16 19:48:30 +0900

    remove RHash::iter_lev.

    iter_lev is used to detect the hash is iterating or not.
    Usually, iter_lev should be very small number (1 or 2) so
    `int` is overkill.

    This patch introduce iter_lev in flags (7 bits, FL13 to FL19)
    and if iter_lev exceeds this range, save it in hidden attribute.
    We can get 1 word in RHash.

    We can't modify frozen objects. Therefore I added new internal API
    `rb_ivar_set_internal()` which allows us to set an attribute
    even if the target object is frozen
    if the name is hidden ivar (the name without `@` prefix).

commit 4afd8975242917d319cfb20c7ed635b979ad48d5
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-30 22:38:00 +0900

    File.exists? is deprecated.

commit 3e4e8dbe20da5de9d26665159626f553318b39a8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-30 21:40:37 +0900

    Uninstall ntlm-http and plist for failure of osx test.

      It contains too old configuration that is autorequire. It will be
      removed at the RubyGems 3.1.0.

commit 77c0e23b0c28f543e1fb4fbf20cae216be0398f9
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-28 10:59:07 +0900

    [rubygems/rubygems] Partly reverted be962ca0c411f3b4bcfebfb6e714c78cbad12775

      * `Gem::ConfigMap` is still used by Bundler.
      * `Gem::RubyGemsVersion` is also still referred by the old gems.

    https://github.com/rubygems/rubygems/commit/249c3ff44f

commit 2a81d3a26a1b9512efb394ec87f73463496d830d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-27 16:45:45 +0900

    [rubygems/rubygems] Skip integration test for rake package task.

    https://github.com/rubygems/rubygems/commit/ca8afc01a3

commit ab8d9a53250acfab04bed322c9c9b342d95195fb
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-28 23:37:02 +0900

    [rubygems/rubygems] Initialize '@ran_rake' correctly, so we don't have to set it up later and cause confusion

    https://github.com/rubygems/rubygems/commit/6ec3ba983c

commit 5824981d98a61b071c216749c7dcdd40fdf61673
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-28 23:06:01 +0900

    [rubygems/rubygems] Remove extension 'double pipe equals' assignment since is not needed anymore

    https://github.com/rubygems/rubygems/commit/930de86a24

commit b73ad4999a1182fe5f06501f81cb58b44ae7e9c2
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-28 23:03:01 +0900

    [rubygems/rubygems] Move 'build_for' to handle extension type before the extension is used

    https://github.com/rubygems/rubygems/commit/2a32c5ef0a

commit 9dc0f39de556c384783fb112d0561c0df391dcc4
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-28 22:58:03 +0900

    [rubygems/rubygems] Do not pass +build_dir+ argument to build_error

    https://github.com/rubygems/rubygems/commit/107fea3432

commit d97fc48e92dbee041a476f7dca65f3d466c8ca91
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-28 22:50:11 +0900

    [rubygems/rubygems] Remove useless param +build_dir+

    https://github.com/rubygems/rubygems/commit/0402974149

commit a51661d378c26ae5bd4b608de4948887e70bcacc
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-10 22:16:57 +0900

    [rubygems/rubygems] Drop support for 'gem env packageversion'

    https://github.com/rubygems/rubygems/commit/be962ca0c4

commit 62e2b2e66f4fefa493c4ac91c121c7484f67b7be
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-27 22:32:21 +0900

    [rubygems/rubygems] Improve `rake package` test error message

    https://github.com/rubygems/rubygems/commit/be962ca0c4

commit 61893ddf75760c35d5c676914cc50c7e4f9a64ae
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-05 00:32:45 +0900

    [rubygems/rubygems] Get `rake package` tested

    https://github.com/rubygems/rubygems/commit/006cdd4084

commit bb6bd7e9855cd17f004fd4ef3300a4c0b529f45f
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-04 17:40:54 +0900

    [rubygems/rubygems] Generate a licenses.rb file with correct style

    https://github.com/rubygems/rubygems/commit/469fceeb2f

commit 497efa0ec924b5124309b99a5c5b8f848fc5a632
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-04 17:40:30 +0900

    [rubygems/rubygems] Enable `Layout/AlignArray` cop

    https://github.com/rubygems/rubygems/commit/1ea674d8f7

commit 0817d95714bc73cef7a4eb6cdfc50a1c5ea4a6c1
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-04 17:21:14 +0900

    [rubygems/rubygems] Enable `Layout/EmptyLinesAroundAccessModifier`

    https://github.com/rubygems/rubygems/commit/41b1cebc33

commit 3cc814bdf629c457cc3899675c4cb1418594d47e
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-26 14:02:46 +0900

    [rubygems/rubygems] Remove warning: shadowing outer local variable - spec

    https://github.com/rubygems/rubygems/commit/70c5c17a5f

commit 33025d976865859744535edb63063a102bec73f5
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-26 13:11:37 +0900

    [rubygems/rubygems] Make error code a constant and remove TODO comment

    https://github.com/rubygems/rubygems/commit/3d6c7c92e4

commit a3b784b3a068ddd9a395b8951e9977035eca5066
  Author: Vt Ondruch <vondruch@redhat.com>
  Date:   2019-07-22 21:31:10 +0900

    [rubygems/rubygems] Move default specifications dir definition out of BasicSpecification.

    This was never the right place. The method got there just by evolution,
    not by design. Move it within default methods, where it suits better.

    Since this method is presumably used just internally, it should be safe
    to deprecate it and remove later.

    https://github.com/rubygems/rubygems/commit/0c0dd9458a

commit d1806bd8da963c597ccd8c0b63ceac4dbe3ff3ae
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-21 10:17:26 +0900

    [rubygems/rubygems] There is no usage of @orig_env_* variables in test suite.

    https://github.com/rubygems/rubygems/commit/2adef51dc9

commit a3c0ea55f8cfd634db6ce623599ea3ad9750f11e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-21 09:58:41 +0900

    [rubygems/rubygems] Ignore GEMRC variable for test suite. It affects with some test case.

    https://github.com/rubygems/rubygems/commit/4a0ca2583a

commit 1eaacb1ef538fe5af2fe231bb340fc39fef67547
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-17 09:50:36 +0900

    [rubygems/rubygems] Use File#open instead of Kernel#open

    https://github.com/rubygems/rubygems/commit/bfb3f67494

commit 41dd9f7e67c1d767a7d040cd79f26985e3996821
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-17 09:39:40 +0900

    [rubygems/rubygems] Deprecate Gem::RemoteFetcher#fetch_size

    https://github.com/rubygems/rubygems/commit/c2049c3276

commit a34168f2ac674b2660fa895271faea258389a614
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-07-17 09:07:07 +0900

    [rubygems/rubygems] Autorequire was used by old RubyGems, it is neither supported nor functional.

    https://github.com/rubygems/rubygems/commit/cadb66037d

commit a2f0331c4e1c47425ec6042f41f4f4b1b63e557f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-11 10:24:01 +0900

    [rubygems/rubygems] Simplify #to_ruby code

    Separate #add_runtime_dependency and #add_development_dependency
    availability condition from #specification_version availability,
    which is not related to directly.
    Also check if the former method is available, instead of comparing
    the version.

    https://github.com/rubygems/rubygems/commit/5cccc2b836

commit 5947ea31ca7cd6a5aa7969088ef38ff9eb9be2da
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-07-10 11:14:29 +0900

    [rubygems/rubygems] Missing dependency

    https://github.com/rubygems/rubygems/commit/79b62c233a

commit 0d596c1ab2013f0db2a374adc71c25ba886ed49b
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-07-10 10:52:54 +0900

    [rubygems/rubygems] Making Gem::S3URISigner.sign method smaller with helper methods

    https://github.com/rubygems/rubygems/commit/2a96494d91

commit 74419711ad548c7f38c247ab1d8d1fbb9087b8ba
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-07-07 05:05:43 +0900

    [rubygems/rubygems] Use default value for expiration in the method signature

    https://github.com/rubygems/rubygems/commit/1372e50c17

commit aa9015dd8430522318714eee0de562ade845ce7c
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-07-05 09:16:25 +0900

    [rubygems/rubygems] Moving rubygems/request dependencies into ec2_metadata

    https://github.com/rubygems/rubygems/commit/6a1856517f

commit 4a8c2dd4192517fa030b6585ae82bf925c80516a
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-07-04 08:35:59 +0900

    [rubygems/rubygems] Extracting sign_s3_url & s3_source_auth into a separate S3URISigner class

    https://github.com/rubygems/rubygems/commit/c30d21ec7a

commit 1dfe132aa5138a5664b353739fc2ad32d6cd68dd
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-30 14:59:31 +0900

    [rubygems/rubygems] Move TODO comment to an information comment

    https://github.com/rubygems/rubygems/commit/853ecdd417

commit 7081185664d438661a312eb3a12adcc84568b07e
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-30 14:50:40 +0900

    [rubygems/rubygems] Remove unused 'raise' from test_case

    https://github.com/rubygems/rubygems/commit/2481efcb37

commit eb35124ccac0f3498c4152349f71978ad86ffad5
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-30 14:38:46 +0900

    [rubygems/rubygems] Remove TODO comment, there's no Gem::Dirs constant

    https://github.com/rubygems/rubygems/commit/4bacf577f1

commit 60d3f9ef9f9385f09a52584b74cc04adf48a25d1
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-30 14:23:44 +0900

    [rubygems/rubygems] Remove useless TODO comment

    https://github.com/rubygems/rubygems/commit/44bc809dc8

commit bd78eabcf37f498d41939716cc4cba39bf3e509e
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-06-29 02:21:12 +0900

    [rubygems/rubygems] Addressing PR comments

    https://github.com/rubygems/rubygems/commit/fb62d3043c

commit b2a54744f252f18bc5a8b04fca9a2cb18132e1a8
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-27 08:51:22 +0900

    [rubygems/rubygems] check_version_conflict don't have a 'dep' variable available for use

    https://github.com/rubygems/rubygems/commit/1783cf0fd3

commit 56801d4532f55e09ec1947c336934917c04af7b3
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-26 07:42:47 +0900

    [rubygems/rubygems] Remove misleading comment, no reason to move Gem.host to Gem::Util

    https://github.com/rubygems/rubygems/commit/e12c98aa72

commit ff214e92321b2dab169f23e7996500ec8505b59b
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-25 10:01:33 +0900

    [rubygems/rubygems] Remove useless comment in exceptions.rb

    https://github.com/rubygems/rubygems/commit/d7ad696fa2

commit 6bd7772361685f861c6917462f9dead6254f2216
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-24 11:08:34 +0900

    [rubygems/rubygems] Rename Gem::Package.metadata to Gem::Package.raw_spec

    https://github.com/rubygems/rubygems/commit/a76f25dff0

commit 38daeded66afb4a7beafa47d82625a4eb40c112b
  Author: Alexander Pakulov <apakulov@stripe.com>
  Date:   2019-06-25 09:36:31 +0900

    [rubygems/rubygems] Upgrading S3 source signature to AWS SigV4

    https://github.com/rubygems/rubygems/commit/f289788ca5

commit 688ccc96020258acb4c02a2f8c5ff6e5a0bbc966
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-24 11:03:50 +0900

    [rubygems/rubygems] Move metadata method to Gem::Package

    https://github.com/rubygems/rubygems/commit/2c9cfcb666

commit 8103d46a4d9591ae95f9a3c31619d1b12031cf3c
  Author: Daniel Berger <djberg96@gmail.com>
  Date:   2019-06-19 21:39:39 +0900

    [rubygems/rubygems] Add a package attr_reader to Gem::Installer.

    Add some basic specs for the package attr_reader.

    https://github.com/rubygems/rubygems/commit/68af2a0ee3

commit 6be927ff4abd9cbcad545d05d8e93810ffa2da9e
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-23 22:43:23 +0900

    [rubygems/rubygems] Remove misleading TODO comment. Can't use @parser.accept since not
    every class where this is used has a parser available. i.e lib/rubygems/install_update_options.rb

    https://github.com/rubygems/rubygems/commit/519fd4dcc0

commit c421ef11423742b62a22efa8d0df449cb7364491
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-23 14:42:21 +0900

    [rubygems/rubygems] Move gemcutter utilities code to Gem::Command

    https://github.com/rubygems/rubygems/commit/f296645033

commit 5eacb4c52ed52185d78aa1437c0a69ed986a95f6
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-23 07:58:55 +0900

    [rubygems/rubygems] Remove conflict.rb code that was supposed to be removed in Rubygems 3

    https://github.com/rubygems/rubygems/commit/6d5f743a89

commit a7bce01175762ba763148fe29f5cbadf5d0f6250
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-23 07:41:07 +0900

    [rubygems/rubygems] Remove unnecessary &&= operator

    https://github.com/rubygems/rubygems/commit/a10b5265d7

commit 8b91a6d0a0b8b2f1aaebf9636139f3f933c6f86d
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-23 07:39:17 +0900

    [rubygems/rubygems] Remove unnecessary TODO comment

    https://github.com/rubygems/rubygems/commit/ad7e379f79

commit df0b41fc7219f9f4900e117591dd8331dc4a10b0
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 19:16:58 +0900

    [rubygems/rubygems] Explicitly deprecate `rubyforge_project`

    https://github.com/rubygems/rubygems/commit/9094740109

commit 0ca494fc80ad66a299e012378794632b6734ee5c
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-06-20 20:10:06 +0900

    [rubygems/rubygems] Silence deprecations when gemdeps is used in tests

    Because we can't control 3rd party gems using deprecated rubygems
    behavior, and thus outputting warnings to the screen.

    https://github.com/rubygems/rubygems/commit/6912ebf20a

commit 05ae2c11fa0464b258d40ff330839a303fbdfd67
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-06 22:54:17 +0900

    [rubygems/rubygems] Do not replace the cache entry if there is already one

    * That way, multiple lookups for the same file always return the same object.

    https://github.com/rubygems/rubygems/commit/50a431b6db

commit 2453d16f5e44f67a50e1be9b08504a14960610ef
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-06 22:52:44 +0900

    [rubygems/rubygems] Synchronize access to the Gem::Specification::LOAD_CACHE Hash

    * It's accessed concurrently, notably when installing a gem with a C extension.

    https://github.com/rubygems/rubygems/commit/543294d7dd

commit 89bd1df895265a3756928b0ab863f01ecb3abd71
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-05 10:51:08 +0900

    [rubygems/rubygems] Add a blank line after private to be consistent with the current style

    https://github.com/rubygems/rubygems/commit/df7c0e4223

commit 673ef894ac7318a7e078ed43629a6473cfa36067
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-06-01 06:37:12 +0900

    [rubygems/rubygems] Return early if filename is empty

    https://github.com/rubygems/rubygems/commit/1b9ab33083

commit d74ea2eeb22e9db8a8003804ca48bd84629e72c7
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-05-31 11:34:44 +0900

    [rubygems/rubygems] Simplify config_file_name assignment

    https://github.com/rubygems/rubygems/commit/1b3154f905

commit 6c5170634af21ff90c2d80604ae5c2808a597a9e
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-05-30 08:34:47 +0900

    [rubygems/rubygems] Lazy require stringio

    https://github.com/rubygems/rubygems/commit/82f0d4ca69

commit 7990d8dc50007b04118cb36c9f200efcddb0295f
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-05-29 14:07:01 +0900

    [rubygems/rubygems] Set config_file_name to the value of ENV["GEMRC"] if available

    https://github.com/rubygems/rubygems/commit/471239f1fa

commit 6f60ead7565e02901db63f005008860b65b4a15e
  Author: bronzdoc <lsagastume1990@gmail.com>
  Date:   2019-05-29 13:41:54 +0900

    [rubygems/rubygems] Move config_file_name logic to its own method

    https://github.com/rubygems/rubygems/commit/ac4596aace

commit d64cc80b660c30577945f3cac452ca16db44ce9f
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-29 16:07:16 +0900

    [rubygems/rubygems] Migrate extension builder to use Open3

    Since it works on jruby.

    https://github.com/rubygems/rubygems/commit/5229e00df4

commit 4e27319c2c0a58ed5ee7276f5f69946161fb6367
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-29 08:45:18 +0900

    [rubygems/rubygems] Remove unused method

    https://github.com/rubygems/rubygems/commit/f2dbf242ea

commit a4c09342a2219a8374240ef8d0ca86abe287f715
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-31 05:49:04 +0900

    * expand tabs.

commit ebc99e026d0ae770b297a93d1f1c1ceeffd13bfc
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-26 05:47:08 +0900

    Do not change IO.pipe encodings if encodings explicitly given

    This commit makes it so that if the binmode option is given with
    any encoding arguments, the reader and writer IO objects are
    not set to binary encoding.

    Fixes [Bug #12989]

commit d8562ab2a40658db0e6a44ce07cfbe616b9b4078
  Author: Aaron Patterson <aaron.patterson@gmail.com>
  Date:   2016-11-29 07:22:12 +0900

    Passing `binmode: true` to `IO.pipe` should behave like `binmode`

    When passing `binmode: true` to `IO.pipe`, it should behave the same way
    as calling `binmode` on each of the file handles.  It should set the
    file to binmode *and* set the encoding to binary on the file.

    Before this commit, passing `binmode: true` to `IO.pipe` would make
    `binmode?` return `true`, but the file's encoding would remain the same
    as the default encoding.  Passing `binmode: true` should make `binmode?`
    return `true` *and* set the encoding to binary.

commit 369c36ef15c15ddc297e216522cc21599ed6a8e1
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-31 04:00:46 +0900

    * 2019-07-31

commit a50bc9f3c8e0696ede25305c03eadecc543b863b
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-21 03:50:22 +0900

    Do not always taint the result of File#path

    The result should only be tainted if the path given to the method
    was tainted.

    The code to always taint the result was added in
    a4934a42cbb84b6679912226581c71b435671f55 (svn revision 4892) in
    2003 by matz.  However, the change wasn't mentioned in the
    commit message, and it may have been committed by accident.

    Skip part of a readline test that uses Reline.  Reline in general
    would pass the test, but Reline's test mode doesn't raise a
    SecurityError if passing a tainted prompt and $SAFE >= 1. This
    was hidden earlier because File#path was always returning a
    tainted string.

    Fixes [Bug #14485]

commit ceb9e276b934a8a63299b0b96d2c430c9854de7f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-30 21:15:49 +0900

    Shorten dependency hint [ci skip]

commit f3b0ed3f264201137c5841c46ec3ee61d3b14034
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-30 21:15:10 +0900

    Try giving up `brew update` in Azure as well

    homebrew-cask fetch fails too often.
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=1917

commit e25088488bbf7b4bf1be19e57ee5fba41ad6f21c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-30 17:23:42 +0900

    Hint for the dependency update [Bug #16000]

commit 47144f91a176f263f870e05347d5b426efc40293
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-30 16:44:29 +0900

    Separate VCS::GIT#upstream

commit 2e6f777f9efa8ba15dcd1b7c1bb1917e5d31d6f8
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-30 12:44:38 +0900

    `/o` should not use with instance variable

    for example:
    ```
    class C;def initialize(pat);@pat=pat;end;def re;/#{@pat}/o;end;end
    C.new('1').re #=> /1/
    C.new('2').re #=> /1/
    ```

commit 3805ef7fb57136be46fceb693340981c75eb8ec1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-30 12:39:28 +0900

    Separate test_set_lineno_gets

commit 1da3a31a5f0211db121e0df4ca456838a437537f
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-30 11:59:54 +0900

    Use lowercase letters for IPv6 addresses.

    Reported by chucke (Tiago Cardoso).
    Patch by jeremyevans0 (Jeremy Evans).
    [Bug #14612]

commit 6eab49a40abcc743ddffcd5fc7103acbea06b215
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-30 04:10:15 +0900

    Revert "Do not always taint the result of File#path"

    This reverts commit 1a759bfe5d554c22571d2e6e4e5998cf06a7b98f.

    This fails on some operating systems.

commit 177731aadf0d2b2fb293e221728252c73446235a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-30 03:03:32 +0900

    Document that Timezone argument for Time uses dst? if available [ci skip]

commit 9170646f130be8a66bd1ea84a7bed59a353afd12
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-30 02:48:25 +0900

    * 2019-07-30

commit 1a759bfe5d554c22571d2e6e4e5998cf06a7b98f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-21 03:50:22 +0900

    Do not always taint the result of File#path

    The result should only be tainted if the path given to the method
    was tainted.

    The code to always taint the result was added in
    a4934a42cbb84b6679912226581c71b435671f55 (svn revision 4892) in
    2003 by matz.  However, the change wasn't mentioned in the
    commit message, and it may have been committed by accident.

    Skip part of a readline test that uses Reline.  Reline in general
    would pass the test, but Reline's test mode doesn't raise a
    SecurityError if passing a tainted prompt and $SAFE >= 1. This
    was hidden earlier because File#path was always returning a
    tainted string.

    Fixes [Bug #14485]

commit aa97410b0a85cb4ceb956ab943b5eee92a128411
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-27 07:14:49 +0900

    Warn if using return at top-level with an argument

    Fixes [Bug #14062]

commit c2428b8bf6f3646f575c21d0c89192d79130f7cc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-29 23:04:04 +0900

    Erase only on tty

commit e62a60927e5477380db34c381e142bce812232dd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-29 22:56:48 +0900

    Should match the beginning/end of string

commit 3ee63cfe881c9ac52a52344ea83131b88875d14c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-29 22:54:58 +0900

    Match suffix for content type more precisely

    Suffix needs a dot and should match the end of string.

commit bef398eb87ac14fffc7fe19df9ec6b07ddff17cd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-29 22:51:01 +0900

    Chomp html suffix literally

    Unescaped dot does not mean a suffix.

commit 968c7b4398ea82f764ced57f1d38606ef4b0c8e6
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-29 23:03:59 +0900

    Fix unused variable

commit a5ea55feb4ef8c482b4639936dd828e0ec27262f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-29 20:57:57 +0900

    Actually remove travis_wait

    I forgot to amend again... Details are explained in
    f6a6b21f09b24955a44622e1767bf5b6630525be

commit f6a6b21f09b24955a44622e1767bf5b6630525be
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-29 20:55:18 +0900

    `travis_wait` silences any output

    and thus it does not work with `-v` for investigating hangs well.
    This seems to be by design: https://github.com/travis-ci/travis-ci/issues/4190

    Also I simplified a comment about `homebrew.update`.
    I had this in-flight change while editing e05f397f08e98fb170e3aca885d6028b344e833c
    but forgot to amend this.

commit e05f397f08e98fb170e3aca885d6028b344e833c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-29 20:25:22 +0900

    Give up `brew update` on Travis

    No `brew update` causes "Error: Your Homebrew is outdated" like https://travis-ci.org/ruby/ruby/jobs/547485832,
    but doing `brew update` is also problematic like https://travis-ci.org/ruby/ruby/jobs/564916879.

    Hoping that the former case is more rare, let's try no `brew update`
    again.

commit 5af28fec2f2f75be70d0c40a92ac9d8b77c8e822
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-29 19:49:19 +0900

    Resurrect -v to debug osx problems

    Formerly we did f432fd6ea595ef854e15d6dd65ef0ccb24a70456, but it did not
    eliminate our problems: https://travis-ci.org/ruby/ruby/jobs/564804923

commit 4b4d8a662b4b5125ada85720f26cead3180a3f06
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-29 19:45:25 +0900

    Stop isolating test_gc_compact on CI

    I think it's been stable these days.

commit 8c6f1715f03e0322c96d614a42c30bee0b7790eb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-29 13:29:42 +0900

    Removed unused variables and methods

commit 630eb04bc4e275b6eaea6fffd35d72ad974f56ed
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-29 13:29:35 +0900

    [ruby/rdoc] Removed unused variable

commit f811a5e9109ff25e485edfcaddce68fa8f3c5262
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-29 12:06:13 +0900

    * 2019-07-29

commit 61f0f71e5bd60bd6ea6153034e72b723dddcbe2e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-29 11:38:15 +0900

    Moved osx_image

    Set osx_image under each configuration, as it decides the OS (and
    kernel) version not only Xcode version, and the configuration name
    contains the kernel version.

commit b40589802b6fe6ba5cbb783a43f513cb2e597844
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-28 09:52:07 +0900

    [reline] Do not compile regexp for each line

commit a6e32855d079e8f3806d8be8a5f5cf7b3a967133
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-28 09:43:26 +0900

    [reline] Do not escape and compile regexp for each byte

commit bce348204f7f4105500397cacb709498e15d9857
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-28 07:37:35 +0900

    * 2019-07-28

commit 1d1f98d49c9908f4e3928e582d31fd2e9f252f92
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-28 07:33:21 +0900

    Reuse match data

    * string.c (rb_str_split_m): reuse occupied match data.  [Bug #16024]

commit adf13625aeb86961123911cba85c993417a5762a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-27 23:46:39 +0900

    Extend travis_wait to 50min for osx

    but shorten --timeout-scale for now to avoid finishing with timeout
    if possible.

    timeout: https://travis-ci.org/ruby/ruby/jobs/564370175

commit f1b76ea63ce40670071a857f408a4747c571f1e9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-27 21:54:34 +0900

    Occupy match data

    * string.c (rb_str_split_m): occupy match data not to be modified
      during yielding the block.  [Bug #16024]

commit e3b613a66986306950fc69d426d947a349b9fc8b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-27 21:34:34 +0900

    Include travis osx timeout

    for failures like https://travis-ci.org/ruby/ruby/jobs/564351066

commit 73530a961918c4039a4c44865a89742b7b693a0b
  Author: nagachika <nagachika@ruby-lang.org>
  Date:   2019-07-27 20:15:53 +0900

    tool/merger.rb: execute 'svn update' after 'svn ci' to update revision info on working copy.

commit 7b727e30fcbdf6ae4ac0b0b84f1d32c747d8525a
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-27 19:57:46 +0900

    Update to ruby/spec@0526d8f

commit 5c276e1cc91c5ab2a41fbf7827af2fed914a2bc0
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-27 19:40:09 +0900

    Update to ruby/spec@875a09e

commit a06301b103371b0b7da8eaca26ba744961769f99
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-25 03:13:09 +0900

    Ignore history file without saving if permissions cannot be changed

    Fixes [Ruby Bug 13907]

commit f9f02e82166643c1e12f10ac51a0d367ee26ac31
  Author: Charles Oliver Nutter <headius@headius.com>
  Date:   2019-07-26 14:37:11 +0900

    Use JRuby equivalent of RubyVM.compile.

    RubyVM is specific to CRuby and not supported on JRuby. This is
    the equivalent operation.

commit 58bb7f0ca1468629a379c74f637bdb04e1e5dfe7
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-27 12:31:07 +0900

    Skip the some of commits when sync default gems from upstream.

      * Skip failed to sync commits because it needs to pick manually.
      * Skip empty commit.

commit 012d39c4e658f251f691c8a1dba462c937dbac67
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-27 11:23:47 +0900

    Added ignore files to sync_default_gems_with_commits and make constant them.

commit 149e414ed529d27aaeb0543bc133e08c782d8d41
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-23 13:09:34 +0900

    Initialize DST flag

    * time.c (zone_timelocal): initialize DST flag by asking the
      timezone object.  [Bug #15988]

commit 8bccbf3cfea8c1059d40db5b5e61900cf6cf29d3
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-27 09:04:13 +0900

    Add more documentation on #eql?/#hash relationship [ci skip]

    Fixes [Bug #14263]

commit 6279cf8b2b2a683cb9e4f6422e6f6f9351cff37b
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-27 08:57:42 +0900

    Restore documentation for Object#hash [ci skip]

    Object#hash documentation was removed (probably by accident) in
    7b19e6f3fdf8b0238752cb1561dfe42a283f5308.

commit bd3283338250827e0f9e2fd1785bd1fd4151e66d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-27 06:26:59 +0900

    Document behavior when mixing named captures with parentheses [ci skip]

    Fixes [Bug #13716]

commit 5fef46ae0dedaab359f55bc3680f4278eb7da98d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-27 01:56:53 +0900

    Test SecureRandom.uuid format

    SecureRandom uses v4 UUIDs, which are completely random except for
    6 bits, 4 in the version field and 2 in the clk_seq_hi_res field.
    Add a test that those bit patterns are set correctly for v4 UUIDs,
    per RFC 4122 section 4.4.

    Fixes [Bug #13603]

commit 4f978a1c995ec565f72095415f4d2fb298188fae
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-27 00:18:35 +0900

    * 2019-07-27

commit b1a2eddbfcb883c363bd67858a4dc739f4755775
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-27 00:13:34 +0900

    Document acceptance of negative pid in Process.kill [ci skip]

    Fixes [Bug #13501]

commit 4b7d7d007fa5a06d237be6f379106feea25fca79
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-25 07:07:00 +0900

    Document and add spec for delegating to constants in Forwardable

    Fixes [Bug #13142]

commit 21ce8b3298bd3b2c8afa7fd747a958e70b55b708
  Author: Maxime Lapointe <hunter_spawn@hotmail.com>
  Date:   2019-05-15 00:52:36 +0900

    [ruby/rdoc] Fix image links in rdoc.css

    Every image in the rdoc.css that use url has the wrong one. They end up pointing to `css/images/zoom.png` instead of `images/zoom.png`.

    Just open this page https://ruby.github.io/rdoc/RDoc/CodeObject.html on chrome and you can see in the console the spam of the failed GET queries.

    This fixes it.
    https://github.com/ruby/rdoc/commit/daf36f9894

commit 8bb48923761e0e3689ea61fec05b2c36faf9d899
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-04-01 17:16:57 +0900

    [ruby/rdoc] Update jQuery to 3.3.1

    https://github.com/ruby/rdoc/commit/17df871ee

commit 3b0f952ec810c08eac01ce2377dfbb252026760b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-01-25 23:58:30 +0900

    [ruby/rdoc] Support nesting text page URL

    RDoc::Servlet#documentation_page replaces "/" in URL with "::" for class
    or module but it's also used for the replaced name on text pages. This
    causes a bug when text pages are in nesting directory.

    This commit fixes #615.

    https://github.com/ruby/rdoc/commit/d73b915b1e

commit a86d4eef4b4551a48a5329bb993c3c6c39a1b1f3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-01-22 04:46:46 +0900

    [ruby/rdoc] Normalization of comment should check language

    RDoc::Text#normalize_comment that is included RDoc::Comment always
    remove Ruby style comment indicator "#" and C style comment indicator
    "/**/", but should check language and remove only the language's comment
    indicator.

    https://github.com/ruby/rdoc/commit/ca68ba1e73

commit f7cbbc707413f7e1c71ac1839b0c8834550451e6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-01-20 13:18:22 +0900

    [ruby/rdoc] ClassModule#add_comment should receive RDoc::Comment

    https://github.com/ruby/rdoc/commit/3fb03bf399

commit 95aa60f6cde1ab7bc5cfe33c95c4fd2d2154cd52
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-26 18:14:32 +0900

    Ignore Merge commit and insufficiency commit for ruby core repository.

commit 071bf889706d13879c323d61fd2e757ff32c8bda
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-26 17:06:54 +0900

    Improve the commits list for cherry-picking from default gems.

      * Ignore Merge commit from the commit lists before trying to
        pick commit.
      * Show the commits list at first.

commit 348c9687bf0454fce787e0d4886fe244831b0a84
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-26 16:45:18 +0900

    Escape parentheses for syntax highlighting for VScode.

commit 51f22deadba35ed57b794339fd19889ed0cc8dc8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-26 16:34:15 +0900

    Adjust the test directory structure of rdoc.

commit 82b02c131ee1a87ac1b95443c85c6c8f7b30644f
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-26 11:37:02 +0900

    pass to obj_info().

    obj_info() has a routine to show SPECIAL_CONST_P() objects so
    we don't need to check it here.

commit 300de6aec29b1d220b961a287820a32a89940882
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-26 10:46:31 +0900

    * 2019-07-26

commit 957a29fc6eb5e4e4ad562d5cafb393f62c9f05db
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-26 09:03:34 +0900

    Bump osx_image on Travis CI to xcode11

    Also Homebrew is up-to-date and "Updating Homebrew" takes less
    than one minute.

commit 7e33f324e1d1de31a69d16dc9f27ec223523c6e8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 20:57:32 +0900

    Get rid of failures about coverage

    Run test suites explicitly instead of auto-running, to get rid of
    failures when simplecov is not installed but COVERAGE is set.

commit a50c844645c337742584560abc2e2b63bf566e79
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 17:15:48 +0900

    Initialize vm_throw_data::throw_state as int

    As `struct vm_throw_data::throw_state` is initialized as `VALUE`
    by rb_imemo_new, extended MSW part is assigned to it on LP64
    big-endian platforms.

    Fix up 1feda1c2b091b950efcaa481a11fd660efa9e717

commit 0f9ec4a877496278534e5956b640ed43a02229ad
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-25 17:19:11 +0900

    Check whether multibyte character is split

commit 8e53d18e6724211bd0597ec5852869e6bf9679f1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 11:07:15 +0900

    Separated tool/test/runner.rb and test/runner.rb

    As `make test-tool` does not use gems, and no Rubygems stuffs is
    needed, so moved such things to test/runner.rb.  Also no longer
    needs `--test-target-dir` option.

commit 46771abfe53d95e8cecf917a5c999e32388be184
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 16:52:03 +0900

    Use libraries in the base directory if given

commit 4c1db84d1748b56334da8293ee328186fcb08162
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 16:45:18 +0900

    Added --base-directory option

commit f5ea05481017d34a1ebdc0eec32ef10254420ee5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 14:29:15 +0900

    Moved NoMemoryError hook

    Moved NoMemoryError hook from AutoRunner.run to Runner#run, so
    it will work even in non-autorunning mode.

commit d8e90f555817146d17ec82a55360b6d69c649d67
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-25 16:39:28 +0900

    Fix a typo in inspect

commit a850be68a57dce65449766654aa1912b5fa660cb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 11:04:26 +0900

    Moved NoMemoryError hook to Test::Unit::AutoRunner

commit 82ae46211341f926d79c6e2e26f4b9097625443c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 08:19:03 +0900

    Do not fetch remote tags

commit 077c28887a68c08f84d91e104fd9ac9c39810482
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 05:00:33 +0900

    [ruby/io-console] Do not use add_development_dependency

    https://github.com/ruby/io-console/commit/bc77f46391

commit 414d6cf1d310de8f9eed1263116ad568b05a98ec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 03:29:41 +0900

    [ruby/psych] Get rid of C90 feature

    For ruby 2.6 and earlier.

    https://travis-ci.org/ruby/psych/jobs/562435717#L245-L248

    ```
    ../../../../ext/psych/psych_parser.c: In function make_exception:
    ../../../../ext/psych/psych_parser.c:87:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
         VALUE ePsychSyntaxError = rb_const_get(mPsych, rb_intern("SyntaxError"));
         ^
    ```

    https://github.com/ruby/psych/commit/aa457443b8

commit 698dde525ad3df1444276ccd28c6349c81af2a19
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 22:21:49 +0900

    [ruby/psych] Suppress uninitialized instance variable warnings

    In verbose mode, `test_delegator` in `test/psych/visitors/test_yaml_tree.rb` shows following warning.

    https://travis-ci.org/ruby/psych/jobs/562435717#L268
    ```
    /home/travis/build/ruby/psych/test/psych/visitors/test_yaml_tree.rb:10: warning: instance variable @obj not initialized
    ```

    This is because `Psych.load` bypasses #initialize with the #init_with method.

    https://github.com/ruby/psych/commit/f99523388f

commit 6ca7dc69effddeb63a8fb8f759e29ff8649907ec
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-07-22 19:02:23 +0900

    [ruby/psych] Deduplicate hash keys if they're strings

    https://github.com/ruby/psych/commit/0414982ffd

commit 50076903ab06e2301051e459925afea20325ba7c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-21 12:21:27 +0900

    [ruby/psych] Drop to support fat gem support.

      ref. https://github.com/ruby/bigdecimal/pull/149

    https://github.com/ruby/psych/commit/25ae263252

commit 938032a790b22a1b49c1b112ede2da4597b4e75c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-21 12:16:56 +0900

    [ruby/psych] Do not use add_development_dependency.

    https://github.com/ruby/psych/commit/939754237f

commit 0a63c4d5fbbbfae9aba92c78e39b1521b90f1b06
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 06:39:40 +0900

    Fix errno at seeking socket/pipe on Windows

    [Bug #12230]

commit efa380b006aeafbad90b2d4e795a602404fec3c5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-25 05:54:38 +0900

    Use PRIuSIZE instead of "%zu"

commit da76c4460f754baabc7a8db16d2e1b5f1c3eb264
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-25 03:54:07 +0900

    Clarify Thread exception handling documentation [ci skip]

    From djellemah (John Anderson).

    Fixes [Bug #12252]

commit 48b4deb418b374c6433fb346ea4550db46843fca
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-25 02:36:25 +0900

    * 2019-07-25

commit 3556cba5038530e728eb6309dcf5d4d1a96a02ac
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-25 02:30:56 +0900

    Document that Range#cover? returns false if <=> returns nil

    Fixes [Bug #12090]

commit 1cce4303247110d94eab8326f187a2a80130b324
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 22:07:10 +0900

    Suppress deflateParams() warnings

commit 538ba984c8e3c6ae33cbc87a5090725af24caf2e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 21:07:12 +0900

    Split ls line

commit 96b0d7cd6fcff7cb2f42315e39a961d84c630e9d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 21:03:01 +0900

    GNU ls -T has different meaning

commit 65a9d4b0f7ae07c026622392e06fc70dbcc5bfc1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-24 20:51:29 +0900

    Fix typo [ci skip]

commit 7b1893c771d21876884e17e8281c737bfc1c4643
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-24 20:50:50 +0900

    Resurrect timestamp debug log

    because it failed again https://travis-ci.org/ruby/ruby/jobs/563026412
    even after 676df311d90990a4666adb5b1db4c7aa6b080e57.

commit dc954cbb75381149970e45927153829a88cbe0b5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 20:08:40 +0900

    @@project_dir in Gem::TestCase is no longer used

commit 99fb637c41c6301286042afbc9edaea71cd7643b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 13:57:59 +0900

    [rubygems/rubygems] Make `@@project_dir` constants per files

    https://github.com/rubygems/rubygems/commit/955174658f

commit 99680f81e832506792cf32d830d09954acd220fc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 13:24:18 +0900

    [rubygems/rubygems] Resolve `@@project_dir` from test file paths

    `Dir.pwd` may differ from the source path.  Test directories and
    files should be resolved from test file paths.

    https://github.com/rubygems/rubygems/commit/e18e7c81b4

commit 3a227b99e78927cdd53e4c1b6b1e5f1af004ca41
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 12:25:02 +0900

    Adjusted test runner

commit 5108a5dd7f8d29043354f7ad923f3d670a01d0a5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 12:13:07 +0900

    test-bundled-gems-run: Respect -k option

commit a39f218f22e8ec205291022f9b748d51daa8df3b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 11:51:04 +0900

    Reduced duplicate commands in test-bundled-gems-run

commit df317151a5b4e0c5a30fcc321a9dc6abad63f7ed
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-24 05:32:09 +0900

    should not free local hook_list here.

    exec_hooks_postcheck() clean executed hook_list if it is needed.
    list_exec is freed if there are no events and this list is local
    event (connected to specific iseq). However, iseq keeps to point
    this local hook_list, freed list. To prevent this situation,
    do not free hook_list here even if it has no events.

    This issue is reported by @joker1007.
    https://twitter.com/joker1007/status/1153649170797830144

commit a4e5690760c9177bc4234fdc5152d82ba73d26d0
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-24 04:49:51 +0900

    transcode.c (rb_econv_open0): remove unused code

    Coverity Scan found this.

commit 9aba971e42c78bb9e446f28c0402bad55147a863
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-08 09:58:25 +0900

    Make Object#singleton_methods work correctly for singleton classes of objects

    Fixes [Bug #10901]

commit 11662c70b073da21dcd5213b61434bce2ed6af8f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 01:42:35 +0900

    Test missing Content-Type warnings

commit afea8db8c7a6bca9042002dd305d45494eb2656f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 01:42:05 +0900

    Test invalid offset warnings

commit f295e23e54dd000806e252798e352f327606cd86
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-24 00:32:43 +0900

    * 2019-07-24

commit c9826c20d204d4b8894e6fd51e5913959676776d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-24 00:24:12 +0900

    Show the caller's location

    * lib/net/http/header.rb: show the caller's location instead of
      the current lines.

commit 325f7b6008a4a10e9b0f1c69ee4518b0669461be
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-08 12:16:57 +0900

    Make pkg_config in mkmf include -I cflags in return value

    This was the historical behavior, it was modified unintentionally
    by 097c3e9cbbf23718371f08c24b2d2297b039f63f, which started storing
    these flags in a different global variable.

    Also, include the incflags when logging, and document that the
    method modifies $INCFLAGS.

    Fixes [Bug #10651]

commit b6f07f748a95f1d5dc0d21e821320564776c744d
  Author: Jess Burgos Maci <jburmac@gmail.com>
  Date:   2019-07-20 04:59:21 +0900

    Document that non-blocking mode isn't always supported on Windows [ci skip]

commit 676df311d90990a4666adb5b1db4c7aa6b080e57
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-23 20:51:23 +0900

    Reset mtime of all files on osx

    Often checked out files are in the future on OSX image.

commit 03958a0c0d0140a2c27f8e3175f9c118425c762c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-23 18:22:25 +0900

    Relaxed target_os matching

    When target_alias is not empty, `-gnu` suffixed is not stripped.

    [Bug #16015]

commit e8d4f0cbc78b0e06806394a93ba73b7d04eba14d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-23 17:59:43 +0900

    Show seconds and in the modified time order

    [ci skip]

commit 0338c44bde4fe55f0507a82fe470dce2ac70127a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-23 17:39:03 +0900

    Retry to update Unicode timestamp

commit 009ec37a47e2f2b5e7f928004fbc3403f0bd8abe
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-04-14 01:39:05 +0900

    Let the index boundary check in rb_enc_from_index be flagged as unlikely

    [Misc #15806]

    Closes: https://github.com/ruby/ruby/pull/2128

commit 6546aed4757be07f4932326e1eb41a5d69141acf
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-04-14 01:05:58 +0900

    Explicitly initialise encodings on init to remove branches on encoding lookup

    [Misc #15806]

    Closes: https://github.com/ruby/ruby/pull/2128

commit c25ff7bb5d8e8d2985ec8fd32a7211a06ad4eca0
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-23 16:42:20 +0900

    check iseq is executable

commit 33f54da15ba137fc1569016f5caa492c1a57eb4d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-23 16:18:40 +0900

    Support memsize of AST

commit 90c4bd2d2bd10b19c2b09834396553742bc7e8a4
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-04-23 07:24:52 +0900

    Let memory sizes of the various IMEMO object types be reflected correctly

    [Feature #15805]

    Closes: https://github.com/ruby/ruby/pull/2140

commit ab087ecb4dd21ea5f7d1cbadd8298f2f1a3c9ce9
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-23 13:34:35 +0900

    Added the upstream repositories to default gems.

commit 73d56d6fe7dd387342ddfcefbaff402f7dcaa232
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-23 13:32:21 +0900

    reline is default gems now.

commit 44cfabddbe8f62ce247118b12e75f4d2294d50b8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-23 11:20:08 +0900

    Removed duplicated entry for racc.

commit 01995df6453de45ba0d99835e26799260517657c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-23 07:07:22 +0900

    Document BasicObject does not implement #object_id and #send [ci skip]

    Fixes [Bug #10422]

commit 32ec6dd5c7cb89979d48100acf8971ac09e0d02e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-23 06:43:36 +0900

    Document encoding of string returned by Regexp.quote [ci skip]

    Also, remove documentation about returning self, which makes no
    sense as self would be the Regexp class. It could be interpreted
    as return the argument if no changes were made, but that hasn't
    been the behavior at least since 1.8.7 (and probably before).

    Fixes [Bug #10239]

commit c1ad6321b03bcf9f96f975bcba7ff1d205990149
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-23 06:02:39 +0900

    Adjust documentation for Kernel#raise [ci skip]

    Mention how each of the arguments are retrievable from the generated
    Exception object.

    Fixes [Bug #10110]

commit d2710ba86677380f016b6a84d81e5cb39837c04d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-23 05:21:41 +0900

    Split test/ripper/test_files.rb to run in parallel

commit 11f3da8e9dd98cb6b0c2c2fd22220f8508af32f2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-23 05:20:04 +0900

    Stop packing rb_method_definition_t

    By using `BITFIELD`, `type` field should not be forced to align.

commit 6b62aa7aec1c8beffafc5e321419cba408bf3c24
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-23 04:10:42 +0900

    * 2019-07-23

commit 2f6cc00338826dbaa439a18e4b4f7a19c1f5987a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-10 13:33:01 +0900

    Fix documentation for Array#pack m directive count specifier [ci skip]

    Fixes [Bug #10025]

commit 9f9a6dbc1491fa9407bf3da70646dc8636c566f5
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-22 18:00:37 +0900

    Always fetch the latest commit from default gems repository.

commit 1feda1c2b091b950efcaa481a11fd660efa9e717
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-22 17:44:58 +0900

    constify again.

    Same as last commit, make some fields `const`.

    include/ruby/ruby.h:
    * Rasic::klass
    * RArray::heap::aux::shared_root
    * RRegexp::src
    internal.h:
    * rb_classext_struct::origin_, redefined_class
    * vm_svar::cref_or_me, lastline, backref, others
    * vm_throw_data::throw_obj
    * vm_ifunc::data
    * MEMO::v1, v2, u3::value

    While modifying this patch, I found write-barrier miss on
    rb_classext_struct::redefined_class.

    Also vm_throw_data::throw_state is only `int` so change the type.

commit 9095ff53cf6c25154c7f80910aab8d1af45c42ec
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-27 08:36:52 +0900

    [ruby/date] Describe what is meant by valid in the Date.valid_date? rdoc

    https://github.com/ruby/date/commit/8eca79d1f0

commit f75561b8d455e1cf92dac8ac8838fdafc88cba71
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-22 17:01:31 +0900

    constify RHash::ifnone.

    RHash::ifnone should be protected by write-barriers so this field
    should be const. However, to introduce GC.compact, the const was
    removed. This commit revert this removing `const` and modify
    gc.c `TYPED_UPDATE_IF_MOVED` to remove `const` forcely by a type cast.

commit d1c2b1969814fee14a01296aa2867abd07f70d04
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-22 13:51:14 +0900

    Fixed exception message

commit f6461fa890fa12501fe1696a36ab2cca036477ff
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-22 12:31:40 +0900

    Only the first argument can be --test-target-dir option

    Raise the proper exception when that option is not given but
    non-option argument is.

commit 463092b84da7933f307cc8747f948f68ef19f5fd
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-22 11:05:34 +0900

    Update rake-12.3.3.

commit f6a7b10afa6f90a43df0bb336dfac05d38accf1e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-22 10:10:51 +0900

    * 2019-07-22

commit 28ae30b6ac0616ce3a7742d311d22909ee200dd8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-22 10:10:28 +0900

    Run test-tool in the order of the tests

commit 08ea9240437bd866ae1169a91010d7767a22c9c1
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-21 22:30:15 +0900

    common.mk: `make check` now includes `make test-tool`

    And `make test-tool` includes `make test-testframework`.

    This change may be arguable because I'm unsure who is an intended user
    of `make check`: a normal user, or Ruby-core developer.  Normal users
    don't have to run `make test-tool` for testing their installation, but
    Ruby committers should run it before they commit anything.

    In this case, I'd be conservative; `make check` includes `test-tool`.
    If normal users often report a failure of `make test-tool`, then we can
    consider to split `make check` for two sets of target users.

commit 24712eeec39f5e9a11cfc2b940358403cda4f2b6
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-21 19:19:08 +0900

    tool/test/runner.rb: support --test-target-dir option

    tool/test/runner.rb had been copied from test/runner.rb.
    test/runner.rb was for `make test-all`, and tool/test/runner.rb was for
    `make test-testframework` and `make test-tool`.
    But I want to avoid the code clones.

    This change makes tool/test/runner.rb support --test-target-dir option
    which allows tool/test/runner.rb to run `make test-all`.
    Now we can remove test/runner.rb.

commit 523fec8a4baec1e2a9c1adc0095646b12aa6c76c
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-21 09:47:57 +0900

    * 2019-07-21

commit d285579ea796c0a9132cade07de4ffb6bae137e9
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-21 09:46:49 +0900

    Update simplecov and doclie to the latest version.

commit c584dd8460bdbb78b0e5ab47a1c15b2df2c45ded
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-20 16:44:49 +0900

    Move travis coroutine check to cron only.

commit e7b5b9144a8931af7510c7bc95c798df75af9499
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-20 15:44:10 +0900

    --debug was not functional either

    Even after 19d592dc82a31adf0bb6f027392cae69615c2394, the retry seems not
    functional. Let's just add --debug from the beginning because an output
    of each step is collapsed and we don't see `make up` output so often.

commit 81fc3becc7b883571e5c716f4fdc490d107ad990
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-20 15:42:59 +0900

    file.c: add a NORETURN declaration for statx_notimplement

    clang complains the lack.

commit 1392b821b99dacb4d4da5081640cfe7a4fb866f4
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-20 15:32:36 +0900

    Explain what's benchmark/lib/load.rb [ci skip]

    I'm actually not using this, but ko1 is.

commit 56b957e88a015a6feb9401a57634d72f367df3be
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-20 15:27:57 +0900

    Upgrade benchmark-driver.gem again

    because v0.14.18 was actually not working with `make run`.
    In `make run`, `Gem` is defined but `Gem::Version` isn't.
    v0.14.19 checks `defined?(Gem::Version)` instead of `defined?(Gem)`.

commit 8a38eff2bd6338be412c8ef82e1bc50032c9f88f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-20 15:13:02 +0900

    Upgrade benchmark-driver.gem version

    This is to make `make run` with benchmark/lib/load.rb work for ko1
    https://github.com/benchmark-driver/benchmark-driver/compare/v0.14.17...v0.14.18

commit 77bb79b8cf69f6504bf0abe2e07a1a631cc4ef32
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-20 09:08:34 +0900

    array.c: factor out a complex condition of assert

    ARY_SHARED_P and ARY_EMBED_P included:

       assert(!FL_TEST((ary), ELTS_SHARED) || !FL_TEST((ary), RARRAY_EMBED_FLAG)),

    The two predicate macros are used in many other assert conditions,
    which caused memory bloat during C compilation.
    This change factors out the assertion above to a function.
    Now gcc consumes 160 MB instead of 250 MB to compile array.c.

commit d304f77c585c42a2e8b008d170ac153b7d8e5243
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-07-20 07:12:02 +0900

    Only disable GC around reference updating

    This is the only place that can change the size of the object id tables
    and cause a GC.

commit c945d115a55710089ac23027c74ed32a40cd9e50
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-20 03:36:12 +0900

    Document use of ensure and else at method level [ci skip]

commit ceeb1535dd6f618ac6069415a69be6d8b2916450
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-20 03:23:00 +0900

    Remove section on performance advantage of not using a block parameter [ci skip]

    Improvements in Ruby 2.5 and 2.6 make this section no longer
    accurate.

commit 7e2677675d76551a8a7abdba3fed350056640492
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-20 03:20:08 +0900

    Remove mention of Proc.new with implicit block [ci skip]

    This support is now deprecated and will be removed in Ruby 3.

commit bf2f84b2ff298583d3efbecb88da271e99fa7930
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-20 03:18:23 +0900

    Document evaluation order of arguments [ci skip]

    Fixes [Misc #8905]

commit 71d21f3c750f41ab44e618162515bd9e4a9f289e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-20 01:58:20 +0900

    Document required keyword argument syntax [ci skip]

    Fixes [Bug #8952]

commit 57b7bfad9e6421fb8387698908e06dcf363df213
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-20 02:54:41 +0900

    * 2019-07-20

commit de18328192de61be6f510c7402e1d7bd23efef6a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-20 02:53:40 +0900

    Some keywords, "true", "false", and "nil" should be treated as a variable

commit 0a16ff9f8366fd0d751191bd9c6eaa47f0ae33c8
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-19 23:50:30 +0900

    array.c: use assert in macro instead of in a function

    The old code lost information of lineno.  Now, an assertion error will
    output a correct lineno (but now gcc 8 requires 250 MB, unfortunately).

commit 3e8d4ff3e571bd556898efd94badb66a5dadf4d2
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-19 23:41:24 +0900

    array.c: factor out `assert(RB_TYPE_P(ary, T_ARRAY))` to a function

    The assertion blows up gcc 8 by consuming approx. 1.8 GB memory.
    This change reduces the amount of memory required to about 200 MB.

    A follow-up of ae750799c1b28b06d02e50cd26450b9903516526.

commit 0a7093a8e9277d9f459b2c14f2eade02eed15e28
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 17:18:42 +0900

    Add documentation to `fiber_pool_allocate_memory`.

commit 517f7f9b578f8f48ce80dfbe5c8e61b4f8ebd1d4
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 17:09:03 +0900

    Fix 32-bit build and typo.

    "Therefore, `fiber_pool_stack_free(&vacancy->stack)` can do the wrong
    thing..." should be "... `fiber_pool_stack_free(stack)` ...".

commit e004afd46d3bd27bda4c4922eadcf11c7e4bfc55
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 16:42:00 +0900

    Ensure that madvise does not clobber vacancy data.

    After calling `fiber_pool_vacancy_reset`, `vacancy->stack` and `stack` are
    no longer in sync. Therefore, `fiber_pool_stack_free(&vacancy->stack)` can
    do the wrong thing and clobber the vacancy data.

    Additionally, when testing using VM_CHECK_MODE > 0, use MADV_DONTNEED if
    possible, to catch issues w.r.t. clobbered vacancy data earlier.

commit fba3e76e3fded3534a34b21412c17af2b02a5f3d
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-19 16:24:14 +0900

    fix debug counter for Hash counts.

    Change debug_counters for Hash object counts:

    * obj_hash_under4 (1-3) -> obj_hash_1_4 (1-4)
    * obj_hash_ge4 (4-7)    -> obj_hash_5_8 (5-8)
    * obj_hash_ge8 (>=8)    -> obj_hash_g8  (> 8)

    For example on rdoc benchmark:

    [RUBY_DEBUG_COUNTER]    obj_hash_empty                         554,900
    [RUBY_DEBUG_COUNTER]    obj_hash_under4                        572,998
    [RUBY_DEBUG_COUNTER]    obj_hash_ge4                             1,825
    [RUBY_DEBUG_COUNTER]    obj_hash_ge8                             2,344
    [RUBY_DEBUG_COUNTER]    obj_hash_empty                         553,097
    [RUBY_DEBUG_COUNTER]    obj_hash_1_4                           571,880
    [RUBY_DEBUG_COUNTER]    obj_hash_5_8                               982
    [RUBY_DEBUG_COUNTER]    obj_hash_g8                              2,189

commit ae750799c1b28b06d02e50cd26450b9903516526
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-19 14:37:59 +0900

    Use FL_TEST_RAW() to check flags.

    FL_TEST() uses FL_ABLE() which test data types. However,
    in array.c we don't need to check it (all of them should be
    T_ARRAY), so I changed from FL_TEST() to FL_TEST_RAW() which
    does not check FL_ABLE(). Instead of FL_ABLE(), add assertion
    to check given object is a T_ARRAY object.

    For example, rb_ary_free() becomes slim:

    with FL_TEST():
    0000000000006a30 <rb_ary_free>:
        6a30:       40 f6 c7 07             test   $0x7,%dil
        6a34:       48 8b 07                mov    (%rdi),%rax
        6a37:       75 09                   jne    6a42 <rb_ary_free+0x12>
        6a39:       48 f7 c7 f7 ff ff ff    test   $0xfffffffffffffff7,%rdi
        6a40:       75 1e                   jne    6a60 <rb_ary_free+0x30>
        6a42:       a9 00 00 00 02          test   $0x2000000,%eax
        6a47:       74 07                   je     6a50 <rb_ary_free+0x20>
        6a49:       f3 c3                   repz retq
        6a4b:       0f 1f 44 00 00          nopl   0x0(%rax,%rax,1)
        6a50:       48 8b 7f 20             mov    0x20(%rdi),%rdi
        6a54:       e9 00 00 00 00          jmpq   6a59 <rb_ary_free+0x29>
        6a59:       0f 1f 80 00 00 00 00    nopl   0x0(%rax)
        6a60:       89 c2                   mov    %eax,%edx
        6a62:       83 e2 1f                and    $0x1f,%edx
        6a65:       83 fa 1b                cmp    $0x1b,%edx
        6a68:       74 d8                   je     6a42 <rb_ary_free+0x12>
        6a6a:       f6 c4 60                test   $0x60,%ah
        6a6d:       74 d3                   je     6a42 <rb_ary_free+0x12>
        6a6f:       eb d8                   jmp    6a49 <rb_ary_free+0x19>```

    with FL_TEST_RAW():
    0000000000006a30 <rb_ary_free>:
        6a30:       48 f7 07 00 60 00 02    testq  $0x2006000,(%rdi)
        6a37:       74 07                   je     6a40 <rb_ary_free+0x10>
        6a39:       f3 c3                   repz retq
        6a3b:       0f 1f 44 00 00          nopl   0x0(%rax,%rax,1)
        6a40:       48 8b 7f 20             mov    0x20(%rdi),%rdi
        6a44:       e9 00 00 00 00          jmpq   6a49 <rb_ary_free+0x19>

commit a44ad9a1451eb86385339cfd72713ff764f1c820
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-19 13:10:08 +0900

    * expand tabs.

commit 182ae1407b3f6597cdbf6872f788c1ed3aa22a35
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-19 13:02:38 +0900

    fix shared array terminology.

    Shared arrays created by Array#dup and so on points
    a shared_root object to manage lifetime of Array buffer.
    However, sometimes shared_root is called only shared so
    it is confusing. So I fixed these wording "shared" to "shared_root".

    * RArray::heap::aux::shared -> RArray::heap::aux::shared_root
    * ARY_SHARED() -> ARY_SHARED_ROOT()
    * ARY_SHARED_NUM() -> ARY_SHARED_ROOT_REFCNT()

    Also, add some debug_counters to count shared array objects.

    * ary_shared_create: shared ary by Array#dup and so on.
    * ary_shared: finished in shard.
    * ary_shared_root_occupied: shared_root but has only 1 refcnt.
      The number (ary_shared - ary_shared_root_occupied) is meaningful.

commit 547f574b639cd8586568ebb8570c51faf102c313
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 13:03:47 +0900

    In some situations, `vm_stack` can be NULL, but `cfp` is valid.

commit e14f5762c532241706ad5bd8f81b520c46d97654
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 12:55:34 +0900

    Add assertions to `coroutine_initialize_main`.

commit dd0e33f0839124a910f4eb0bb67423e041036645
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 12:53:47 +0900

    Split assertions to check which one fails.

commit cf93f98a609d8a48e3b69790bc38ae9edf8aa687
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 12:45:44 +0900

    Better usage of `rb_ec_clear_vm_stack` to maintain invariants.

commit 6eef80d824aa4aca91ff13ea215f5cd053d16906
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 11:54:31 +0900

    Improve ec assertions.

commit 63160a84b42cd3a7924e5abe94bbb08bb566f24b
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-19 12:04:32 +0900

    respect NDEBUG.

    ruby/ruby.h includes ruby/assert.h, and RUBY_NDEBUG is defined
    by checking NDEBUG. In other words, NDEBUG is only seen just
    after ruby/ruby.h. This patch also checks NDEBUG just after
    including ruby_assert.h.

    Without this patch, assertions in array.c are always enabled.

commit e644e2de85d0d76e1c28d45710f765757a22f5c6
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-19 09:00:55 +0900

    Remove doc/etc.rd.ja [ci skip]

    [Feature #16003] [ruby-dev:50814]

commit 4ec5b39ce8bd3b13dec0ac290b2d7d29c640b304
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-19 08:53:19 +0900

    initialize only Fiber's cfp.

    fiber->cont.saved_ec.cfp should be initialized by NULL
    because no vm_stack is allocated. However, cont_init()
    captures current Fiber's cfp for continuation, so it should
    only initialize fibers.

commit 8ca32020b03a4f3e69c8f0b15e015eb7ad5d8e05
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 08:32:40 +0900

    Revert "Ensure cfp is initialized to NULL."

    This reverts commit d7fdf45a4ae1bcb6fac30a24b025d4f20149ba0a.

commit c8ee44f44c0c7d333a33c62c811d1d0cdbc3554a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-19 08:23:37 +0900

    Fix showing doc of "nil.to_s", nil doesn't have #name

commit d7fdf45a4ae1bcb6fac30a24b025d4f20149ba0a
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 08:09:52 +0900

    Ensure cfp is initialized to NULL.

    `cont_init` didn't initialize `cont->saved_ec.cfp`. Calling `cont_mark`
    would result in an invalid `cfp` in `rb_execution_context_mark`. Because
    fibers lazy-initialize the stack, fibers that are created but not resumed
    could cause this problem to occur.

commit 9dda0a03cc19d0ca20fc8fc220760e37cb5b9f02
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-19 08:00:58 +0900

    Remove `rb_vm_push_frame` as it is no longer used.

commit fd461dea06b1a56eca9d1c662c3dc0c416c9e495
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-19 07:55:40 +0900

    Ripper#validate_object: check if the object is hidden

commit 0b826418af2a96b0e3a24a8b871996962efb6127
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-19 07:51:48 +0900

    Update before commit

commit 59d6ce4f4bf2d77dfd07975fed6a49609c2df97e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-19 07:48:55 +0900

    Moved RIPPER_DEBUG methods to Ripper from Kernel

commit 18bce998ddbcf1266d53071a5d46a9e71950f0ea
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-19 07:48:30 +0900

    Fixed build error with RIPPER_DEBUG

commit d4c4029597d575aa9820698b5be7594b642b024f
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-19 06:40:24 +0900

    * 2019-07-19

commit a036a8a038820660a6903af60376a2df502d0266
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-19 06:15:47 +0900

    Adjust styles and indents

commit a027c4b5b0bc1d6786852249847e8a2f56404d1a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-19 06:15:05 +0900

    Use Qnull instead of 0 and Qundef

commit d40d8b3caf40e0b1769bb4a196aa7740aef4737e
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-18 22:59:44 +0900

    check saved_ec.cfp

commit 9790b778a339f36f9b29517a1d762cf02a2f0293
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-18 21:33:03 +0900

    Ensure we don't have dangling cfp.

commit 78bc6cd8dff9ee584a447251490c88ee035d218d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-18 17:55:22 +0900

    * remove trailing spaces.

commit 38e3c65a33aa7bcd4cee922487e259a8da699831
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-18 16:02:16 +0900

    Improve `fiber_pool_expand` allocation strategy.

    If `mmap` fails to allocate memory, try half the size, and so on.

    Limit FIBER_POOL_ALLOCATION_MAXIMUM_SIZE to 1024 stacks. In typical
    configurations this limits the memory mapped region to ~128MB per
    allocation.

commit 311007bf403160b978e015997ad5076a229290da
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-16 13:35:55 +0900

    Add experimental `RUBY_SHARED_FIBER_POOL_FREE_STACKS` to control madvise.

commit 56fcf988495ec1b36655534f4cc2ae786e2ab8c5
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-16 13:35:27 +0900

    Add note about setting `vm.max_map_count` for Linux.

commit 001f187ed6539f320421d8893d2f3c8f584cc3a5
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-16 13:11:55 +0900

    Make fiber_pool more conservative on platforms with limited address space.

    We use COROUTINE_LIMITED_ADDRESS_SPACE to select platforms where address
    space is 32-bits or less. Fiber pool implementation enables more book
    keeping, and reduces upper limits, in order to minimise address space
    utilisation.

commit 385ea910fc28f0e46c72669a260e44d4f3f37d9e
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-16 13:00:35 +0900

    Add `struct fiber_pool {int free_stacks;}` to control usage of madvise.

    `madvise(free)` and similar operations are good because they avoid swap
    usage by clearing the dirty bit on memory pages which are mapped but no
    longer needed. However, there is some performance penalty if there is no
    memory pressure. Therefore, we do it by default, but it can be avoided.

commit 4d60a5820ae2c7bc2ce5bee441b834129a3a56e1
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-16 09:49:14 +0900

    Add FIBER_POOL_ALLOCATION_FREE to control allocation/free strategy.

commit 8ac9a7be0fea95d9fc17cce53c0d18d70cc8d091
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-12 10:42:34 +0900

    Limit expansion of fiber pool on 32-bit platforms.

    On 32-bit platforms, expanding the fiber pool by a large amount may fail,
    even if a smaller amount may succeed. We limit the maximum size of a single
    allocation to maximise the number of fibers that can be allocated.

    Additionally, we implement the book-keeping required to free allocations
    when their usage falls to zero.

commit 77f3319071e600a2aafaa9863b892dfd3c1da343
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-11 16:17:34 +0900

    Enable `madvise` to release stack space back to OS.

commit 47c0cab248ca09deb9508ff29edfd1dfc11b5f31
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-01 13:24:39 +0900

    Add details of fiber pool and coroutine selection to NEWS.

commit b8242bce2301e33d3ba1fae95b68a291cc3004b5
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-29 21:21:19 +0900

    Add `ucontext` and `copy` coroutine implementations to test matrix.

commit 7291fef55c90b9ab6b3c22018b16972861b98c9d
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-29 10:07:07 +0900

    Improve build process and coroutine implementation selection.

commit 91aae651bf90be46773a246e4c46b9e221353fbd
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-27 15:59:25 +0900

    Stack copying implementation of coroutines.

commit 8779382da44723438eb6cae23bd7267990157433
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-19 21:13:49 +0900

    Remove unused vm_stack recycling.

commit 14cf95cff35612c6238790ad2f605530f69e9a44
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-02 09:49:58 +0900

    Implement fiber pool for reduced fiber allocation overhead.

    Replace previous stack cache with fiber pool cache. The fiber pool
    allocates many stacks in a single memory region. Stack allocation
    becomes O(log N) and fiber creation is amortized O(1). Around 10x
    performance improvement was measured in micro-benchmarks.

commit 1b82c877dfa72e8505ded149fd0e3ba956529d3f
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-01 14:48:25 +0900

    Make FIBER_USE_NATIVE the default and reformat code.

commit 97808e29cd5691092ad9004078852b3f16592cf2
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-18 08:15:46 +0900

    * 2019-07-18

commit 9b28eefeb2cea9690b897aeb3a1e1de2cbc19137
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-18 08:13:49 +0900

    Add benchmark to help diagnose performance regression.

    See https://bugs.ruby-lang.org/issues/16009 for more details.

commit bdec1ad9a96700eb00ab953ea6ee2168449827d9
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-17 23:42:21 +0900

    * expand tabs.

commit 416ead4cdaf849fe1f3dcda26d6ba04c80e36746
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-17 08:24:25 +0900

    compile.c: add NO_CHECK for the calls to COMPILE whose result is unused

    to suppress many warnings of Coverity Scan

commit 0e23e0c3a0c1053c230205117b82cc8156f3a26a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-17 15:55:50 +0900

    Adjust indent [ci skip]

commit cd372f8db2e050241abf1d7360b7b29ac614ceec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-17 14:45:33 +0900

    Get rid of LoadError with $DEBUG

commit af07e07ac9331ec9c2f16b2329a0471ea663dd95
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-17 11:56:40 +0900

    Separate pull-github from merge-github [ci skip]

commit 0965bb6091a70d5237a8afd88d414b2d7fc9f5a8
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-17 10:53:00 +0900

    * 2019-07-17

commit f487e5b7a4b13d23a8bb7807e4f5cc3f9b2a30e3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 21:47:32 +0900

    Expanded buf to copy at once

    Build dumped string from base packed data and extended year at
    once.  Although currently ruby_marshal_write_long() never writes
    more than 5 bytes per its format specification, allocate
    `sizeof(long)+1` for the sanitation.

commit ed2f2b4f98800540024b9c4a5ebde98674889013
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 22:39:39 +0900

    Named the backward compatible dump size

commit 6ab95fb741168895f9aebe8d6c45e5242cc81f2b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 22:00:54 +0900

    Removed twisted tests

    Why does only Process.daemon have these tests?

commit d45d448d71bfe9db4a71e06289e7b4d640bbd55c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 21:38:25 +0900

    nil as the default of optional parameters

commit d8e23a67c3869c70ef82b4337499367632ce911a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 19:27:22 +0900

    nil as the default of optional parameters

commit e988048e2589b6f517c11430d568e2ccf118e901
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 18:47:35 +0900

    Moved the check for `exception` to rb_execarg_addopt

    Check for `exception` option in rb_execarg_addopt, as well as
    other options.  And then raise a particular ArgumentError if it is
    not allowed.

commit 8deabcd3280f6042ea1ed14b629d70680e081fec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 18:42:56 +0900

    Constified afamily functions

commit 19d592dc82a31adf0bb6f027392cae69615c2394
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 18:41:11 +0900

    Somehow `if` didn't work

commit 76c6cf2cbc549dead57725ccd934a42df5bc150d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 17:23:43 +0900

    Print debugging information when updating failed

commit 75fb0a9afad1685cedee9c7665a7f30ec95068fc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 09:30:58 +0900

    Allow mday in Date.iso8601 to be omitted

    [Bug #12285]

commit e2f987e65461bff85be2146dda93655b7d13a537
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-16 09:22:11 +0900

    * expand tabs.

commit 00dc0dae0d7b247a917f5b676a777db86cdf1f3a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 08:48:57 +0900

    Removed intermediate local variables

commit 8e37ef76f6f640178ffaea4d7c0d36a17e6ca171
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 08:46:38 +0900

    Fixed the library path for tools

commit 71d5b4c32e892d1771d73ca869da3a59f5d0b4d1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 08:25:39 +0900

    Fixed the library path for tools

commit ca524bcd494e2f284c3211cad8e8dde70e8aa86a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 08:15:05 +0900

    Expanded f_numerator

commit 34019a22eb41206e3d5d1ac29b3874275aa7f71c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-16 07:58:47 +0900

    Expanded f_denominator

commit 325d546d627f3cfb50c0371775f671cd88521c49
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-16 07:19:56 +0900

    * 2019-07-16

commit a8e4b7b12f348d5fdde4ba360a68d10c0f2689bf
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-16 07:19:52 +0900

    * expand tabs.

commit c184a1c261209da403db553eef7f7353f7ee5edd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-16 07:18:54 +0900

    compile.c: add NO_CHECK for the calls to COMPILE whose result is unused

    to suppress many warnings of Coverity Scan

commit 6aab77a7a3e29a82006878f87e24ed30fa985a1f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-16 07:17:57 +0900

    Add a /* fall through */ comment

commit 0c6c937904aafc1809386bd892a2d114d22d01fe
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-15 19:31:48 +0900

    Removed duplicate highlighting

commit b452c03a14f943ae25338547bd680fce67399d85
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-15 17:45:37 +0900

    Always evaluate the expression RUBY_ASSERT_MESG_WHEN just once

commit c20445ab561b6b74bc60787b7c7f69795986e4a3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 17:20:48 +0900

    Require Ruby 2.4 or later because needs lex_state from Ripper

commit c781b1b7a3d112c6f9b2521c4ff2c5408a429a72
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-15 17:06:35 +0900

    update-deps for dependencies

commit 5a42dca6887203ebba3532f4430c17d3a73a6169
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-15 16:51:18 +0900

    * expand tabs.

commit 5e0d27a32f2b3f1242c9990acf83b7970b37bbce
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-15 16:44:07 +0900

    Removed dead code

    If `emesg` is `Qundef`, it is not a message string and then `elen`
    (the length of the message) is 0.  So `emesg` cannot be `Qundef` in
    the `elen != 0` block.  Pointed out by Coverity Scan.

commit de0f192444e3822968d04cdea6e868bd42ccfa7f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 16:25:50 +0900

    Add features of IRB to NEWS

commit 574e8a6812aea072acbf55970f7ff2e32ed4e599
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 15:49:59 +0900

    Add Reline section to NEWS

commit 3a1d3556e2ae5f6083dbd8b97e5b3009eaceaab3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 15:45:51 +0900

    Fix a typo of Markdown of NEWS

commit f73ea3342b5abd3136a1fb27fc0fdbe4039bc3bf
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 15:07:26 +0900

    Fixed ruby/spec for Logger::LogDevice changes.

commit 5349aa23c8ad23786d25c1e18a3f541de06f4700
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 14:47:29 +0900

    Also fixed up with 036039c8a29d3d8045207c111f9bbc481c904998

commit 036039c8a29d3d8045207c111f9bbc481c904998
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 14:45:05 +0900

    Fixed LoadError of version file.

commit f103ed8b7dae9ba9cb1d8dcc71164c972a4ebccd
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-15 14:43:39 +0900

    * expand tabs.

commit 4b345f9d4bbff2cfc9895155fb0e8f90d1cac816
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 14:42:22 +0900

    compile.c: ignore the result of COMPILE by marking with NO_CHECK

    to suppress many warnings of Coverity Scan

commit 0eafa1dce86be0e2f86a029271ec24cf6b577fad
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 14:41:22 +0900

    Fixed inconsitency locations of default gems.

commit 1b59ed9b494104d3a571bb222ee843cd82d1c9ba
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 14:39:10 +0900

    Move helper file of logger to under the test/logger.

commit 58065b87018a9d1ed972b8c856004bf75728da02
  Author: Rafael Mendona Frana <rafaelmfranca@gmail.com>
  Date:   2019-06-05 07:07:26 +0900

    [ruby/logger] Add option to set the binary mode of the log device

    Without binmode strings with incompatible encoding can't be written in
    the file. This is very common in applications that log user provided
    parameters.

    We need to allow changing the binnary mode because right now it is impossible to use
    the built-in log rotation feature when you provide a File object to the
    LogDevice, and if you provide a filename you can't have binmode.

    https://github.com/ruby/logger/commit/9114b3ac7e

commit f4064a0a0c24734b1ec98e6e2dbdf5e38e856c41
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-17 09:35:21 +0900

    [ruby/logger] Set filename when initializing logger with a File object

    This should allow reopen to work.  Requested in ruby issue #14595.

    https://github.com/ruby/logger/commit/bd367aff12

commit 2c22051b4b54482531e43915f5edef0c3d3a053b
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-03-21 12:58:17 +0900

    [ruby/logger] Enable `frozen_string_literal: true` in `logger.rb`.

    https://github.com/ruby/logger/commit/2dc832e901

commit 3fdb963827fde7fbe1837763cb834842b8336fee
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-03-21 08:35:29 +0900

    [ruby/logger] Prefer require_relative, it's a little bit faster.

    https://github.com/ruby/logger/commit/1e2aab4bea

commit 7ef08562871ca6d209415f16f942f6cd2a67df54
  Author: sonots <sonots@gmail.com>
  Date:   2019-03-18 20:56:29 +0900

    [ruby/logger] Update logger.gemspec

    https://github.com/ruby/logger/commit/1335a71d98

commit 7f10da9d2762d1b6d0f3c45df4a23bbdc2d78e4c
  Author: sonots <sonots@gmail.com>
  Date:   2019-03-18 21:02:02 +0900

    [ruby/logger] require 'logger/errors' just for compat

    https://github.com/ruby/logger/commit/255a51dc10

commit bbe157f34046ec9ef81e6ad9ed37c86a0d9155e4
  Author: Colby Swandale <me@colby.fyi>
  Date:   2018-12-12 12:08:35 +0900

    [ruby/logger] split logger classes/modules into separate files

    https://github.com/ruby/logger/commit/f10ce9fff2

commit 136196785b10f7cffa1e4d557bc3bcc0e863813a
  Author: sonots <sonots@gmail.com>
  Date:   2019-03-18 19:34:01 +0900

    [ruby/logger] Fix to use logger and test-unit in this repo with

    `ruby test/logger/test_xxx.rb`

    https://github.com/ruby/logger/commit/d3c2402340

commit 47500f2055467d0c72c7ce53b2535d7610347fb0
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-03-15 08:12:11 +0900

    [ruby/logger] Add support for changing severity using bang methods.

    https://github.com/ruby/logger/commit/ae4c6dfcbb

commit 310198d6be1ca5dc2f1279096d7134a02ee3d8ec
  Author: Samuel Giddins <segiddins@segiddins.me>
  Date:   2019-01-18 03:13:20 +0900

    [ruby/logger] Add missing closing "
    https://github.com/ruby/logger/commit/b4b3caae40

commit 227eae79acde90e7c3ba171dbf4bdcedbb39a9f2
  Author: Samuel Giddins <segiddins@segiddins.me>
  Date:   2019-01-18 02:59:55 +0900

    [ruby/logger] Say that logger requires ruby >= 2.3

    Since it uses `&.`, it can't be used on older rubies
    https://github.com/ruby/logger/commit/b872f90ab9

commit b9ba07a05c48176bfbba44133a9f3a43f387bedd
  Author: Colby Swandale <me@colby.fyi>
  Date:   2018-12-13 18:45:08 +0900

    [ruby/logger] dont lock bundler to a specific version in travis

    https://github.com/ruby/logger/commit/eb5ac229a5

commit 99c14fb69491d52c474c3f303405e6f59b41034f
  Author: Colby Swandale <me@colby.fyi>
  Date:   2018-12-12 09:27:26 +0900

    [ruby/logger] remove files that dont need to be included in gem releases

    https://github.com/ruby/logger/commit/9a3be8650f

commit 3dc212896c422add43c850ee1d1a613c7cc96737
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-15 13:52:25 +0900

    check return value of blocking_region_begin().

    blocking_region_begin() can return FALSE if it fails to acquire
    GVL, so check it.

commit e4c1b199961cc5fa34c02b2225bbc14b75259fd2
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-15 14:17:27 +0900

    add tests for orphan/not-orphan proc/lambda.

commit 711dfec3fa9623c5e8ef6f5ce3627f8f1a85f19d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 14:07:22 +0900

    parse.y (here_document): remove dead code

    str is always zero when evaluating the branch.
    Found by Coverity Scan.

commit 5353401c254a926426d9a289606fad18a755fcd2
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 14:02:45 +0900

    thread.c (rb_thread_shield_waiting_{inc,dec}): prefer long to int

    `(unsigned int)(THREAD_SHIELD_WAITING_MASK>>THREAD_SHIELD_WAITING_SHIFT)`
    is 0xffffffff, and w > 0xffffffff is always true.
    Coverity Scan pointed out this issue.

commit 62f34bd1fe9630b0e760860017955cec2d5fbd0a
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-15 13:57:43 +0900

    doc/globals.rdoc: Add deprecated to TRUE,FALSE,NIL [ci skip]

    They are warned since 2.4.0.

commit 9c38904ead89df7c41243f7a23dde3d07f22bd86
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 13:56:32 +0900

    Use consistent fetchDepth for all jobs

    a7dd6763bd1dac7952ace46be58083dbea332a0a was not applied for all jobs.

commit d1e2650aca8ba340d98af22a08be20baf0abde0e
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 13:47:28 +0900

    Force-fetch unicode update only when it's needed

    nobu said that we could be banned if we aggressively downloaded unicode
    file from Travis.

commit 929fa856ef8a9217b58dc43c9883c3202603c18e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-15 13:44:50 +0900

    Add tool/leaked-globals to .gitattributes [ci skip]

commit b401fb35a4196ba0229622a1bcdc5966f10e8e5d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 13:42:37 +0900

    Removed needless LOAD_PATH modification.

      We can use require_relative now.

commit 99afea5328c61d3f212bbb684b33abf0d814f080
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-21 02:21:34 +0900

    Add bug triaging guide

    Implements [Misc #15943]

commit badfbdf32c26f44b93687698b4dca9dd95f70a75
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 13:15:13 +0900

    Move vpath.rb into tool library directory.

commit bd494ae79b18e260b0123bf40ddc1c694d7b25b8
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-15 12:59:53 +0900

    add tests for "break" in lambda.

commit 8ac1c6eb4837f5d088b7fc0a6ee51a5723f728a9
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-15 12:05:55 +0900

    respect RUBY_DEBUG too

commit 76bad330aae4ee867585dda3e547e5db740fc0f3
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 12:00:12 +0900

    encoding.c (enc_table_expand): prefer xrealloc to realloc

    And raise an exception when failed to register an encoding

commit c23e5976744f1984b309f0af724fbd8ddea2c56a
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-15 11:27:38 +0900

    respect RUBY_DEBUG.

    see RUBY_DEBUG for each debug options.

commit d02f2fc3e2b4d14793c3b25079787a8972ce49c8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 11:19:13 +0900

    Added help message for test-tool target.

commit ac6d137157121381fb57e3febd34c84cb7ca47b2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 11:16:05 +0900

    Added test-tool target for the test suite of tool/test files.

commit 41c5f9a166637bf9e49af19b3fa94163b51db64d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 10:43:12 +0900

    Put jisx0208.rb to under the library directory.

commit 73346823e1119a8e72baefab381dbe822c4c01f7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 11:04:12 +0900

    Try to prevent random build failure on Travis osx

commit 226d569e5729bc9ffa5a516f88251d99f404c7c7
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-15 11:01:57 +0900

    doc/irb/irb.rd.ja: Update options from `irb -h` [ci skip]

commit a7fdb22373442bb25e687a8f2df36fb5b85d2846
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-15 11:00:16 +0900

    Enable RUBY_ASSERT_MESG_WHEN when RUBY_DEBUG is turned on

commit 05cc87df1b5f7a125e24d64058d9ad1f75cdfd3f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-15 10:51:58 +0900

    [DOC] Struct::Passwd#uclass renamed from #class at r2500 [ci skip]

commit e2512cff05b1d1cc60a03ef4388cab07531877ca
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 10:39:44 +0900

    Move a test file of Reline to test/reline/

commit f326b4f4af4963e252d24c4f7d7099fc607db859
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-15 10:39:28 +0900

    simplify around GC_ASSERT()

commit dd4f128ac5fa26e3d8c4d003c770e69f9ed9a91e
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 10:38:59 +0900

    Handle failure of opening a null device

    This issue is detected by Coverity Scan.

commit a191009a266e97453971f9b24f750861855aaa7b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 10:29:39 +0900

    Simplify start_process by exploiting C99

    Having a block for mixing a declaration was confusing.
    Also I moved `dev_null` and `pid` to limit their scope.

commit b78964883037470f25755db740c09e835eadb5c9
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-15 10:26:50 +0900

    Change PROMPT_S of simple-prompt

    When input `"` or `/` with simple-prompt,

    Before:
    `"` or `/`
    (prompt disappeared and indent is changed)

    After:
    `"> "` or `/> /`
    (indent is unchanged since `>> `)

commit f6f09cbc76c3e47aec23898e024ff5bb5f061bc4
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-15 10:19:25 +0900

    introduce RUBY_ASSERT_ALWAYS(expr).

    RUBY_ASSERT_ALWAYS(expr) ignores NDEBUG (we cannot remove this
    assertion).

commit 0af897ab59dfa3d06724f898f17bbf8a1970abd1
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 10:20:07 +0900

    Simplify history saving code

commit eed9db39e51f08fa84cbc20ffc7496f93828c06d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 10:11:07 +0900

    Followed up e8ddbc0239.

commit 223854ebe858a96560faac239f4c0e40d1af3943
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-15 09:58:26 +0900

    catch up e8ddbc0239.

commit 08b340d2f68daf6bbaba9be77ee7c17150bd7adb
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 09:39:22 +0900

    Separate the assertions of ruby core tests from test/unit/assertions.

commit e8ddbc0239b9dfa32787e93c6942f085e5c42b49
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 08:54:34 +0900

    Put colorize to library directory.

      Same as 66299e7ca83d379d13abaa5411f3e0419334cabb

commit 0a711b0edff6eaf978cfc17cdd6a7cc6c17c6686
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 08:34:24 +0900

    Put vcs .rb to under the lib directory.

      Because it's the common library for tool files.

commit 8f7884761e30c453287d73de6ea733d565635ebc
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-15 09:36:52 +0900

    The default charset of text/* media type is UTF-8.

    Thanks for the patch  gareth (Gareth Adams).  [Bug #15933]

    -------

    Combines two small, but very related changes

    1: Treat HTTPS the same as HTTP

    Previously, OpenURI followed guidance in RFC2616/3.7.1:

    > When no explicit charset parameter is provided by the sender, media
    > subtypes of the "text" type are defined to have a default charset
    > value of "ISO-8859-1" when received via HTTP.

    However this RFC was written before TLS was established and OpenURI was
    never updated to treat HTTPS traffic the same way. So, HTTPS documents
    received a different default to HTTP documents.

    This commit removes the scheme check so that all text/* documents
    processed by OpenURI are treated the same way.

    In theory this processing gets applied to FTP URIs too, but there's no
    mechanism in OpenURI for FTP documents to have Content-Type metadata
    appended to them, so this ends up being a no-op.

    2: Change default charset for text/* to UTF-8

    Replaces the default ISO-8859-1 charset previously defined in RFC2616 (now
    obsoleted) with a UTF-8 charset as defined in RFC6838.

    Fixes: https://bugs.ruby-lang.org/issues/15933

commit 00a97d94122c256f4abe9375d19eaeb0f2eca201
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 09:35:45 +0900

    Always call va_end in form_args()

    This issue is detected by Coverity Scan.

commit ff3704031a6c23ae2020576c4fecbdc6b1c91246
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-15 09:26:57 +0900

    Insert a newline before `=end`

    For a certain editor which cannot handle here-document properly.

commit a1975790731e1e9081e41e05b43516065b7d950a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 08:36:57 +0900

    addr2line.c: clarify the type of integer expression

    to suppress Coverity Scan warning.
    This expression converted uint8_t to int, and then int to unsigned long.
    Now it directly converts uint8_t to unsigned long.

commit 0a417248a0ba6e4e5093f916dbf9b31e22f24078
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 08:38:07 +0900

    Fix unaligned help output

    1f99274ccf31ba1f2a4b3ac20a9c6cdc5ae81152 was indenting details with a
    hard tab, but other lines are using spaces.

commit 02c4ed4a7f44a80d50c2d3e27f451b20c4360899
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 08:36:51 +0900

    Stop consuming 2 entries for goruby

    similar to 364f43ab7fc5920247fc73423c1428208cf78a4a and
    13cb9e6bd2c88d04fc9b21b8f8c1d192c67cd5a2

commit 17ccda54131e3e8f59fc5bc5be044aef78e2854c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 08:32:50 +0900

    Use #to_a for Readline::HISTORY directly

commit 9da969cae73b88a9e7acd761f184bd5275febdf7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 08:32:45 +0900

    Revert "Dummy Makefile.in for CIs"

    This reverts commit c55de95ff1c4ea6313c2863037703a0e5f0d0f4f.

    Probably this is not needed for CI anymore.

commit 1f99274ccf31ba1f2a4b3ac20a9c6cdc5ae81152
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-15 08:19:49 +0900

    Added the bundled gems target to make help.

commit 13cb9e6bd2c88d04fc9b21b8f8c1d192c67cd5a2
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 08:18:30 +0900

    common.mk: remove "make exam" from help

    Currently it is completely the same as "make check".
    I think it is not worth mentioning now.

commit 2b78a93bcfdc8884646cae88dffe06da6bdb6213
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 07:58:15 +0900

    Add lib/irb/color.rb to destribution file list

commit c9a59f491d0851c30e2f371eafcec486ce8ba27b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 07:59:11 +0900

    Add a /* fall through */ comment

commit 772dae8bef36e3111b8e03fc6297cc99a959ae4b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 07:56:53 +0900

    Add a /* fall through */ comment

commit 266f6cd8a1dbf93ab5a99d3508f7f1cb5d348be1
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 07:54:47 +0900

    Remove debug print

commit 4b7a04a5b8a583e7e818155a73069a9e58a1a246
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 07:51:57 +0900

    Support multiline irb_history

    A history line ends with "\" to escape newline if it's a continuous
    line.

commit d37da601289d13396b1e986b81d51b05bcfdddd5
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 06:42:55 +0900

    time.c (time_mdump): use another buffer for year_extend

    ruby_marshal_write_long may write 9 bytes, but buf has only 8 bytes.
    So the buffer cannot be reused.  This issue was found by Coverity Scan.

commit ea711285737faac6471fc22f0b8f9e9365e7e6ed
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 06:22:22 +0900

    Unify documentations of `make benchmark`

commit e8b6f6303999fd39d367d3eb114193faad13bbca
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 06:17:29 +0900

    Drop `make change` and tool/change_maker.rb

    because we're not writing ChangeLog anymore.

commit 364f43ab7fc5920247fc73423c1428208cf78a4a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 06:11:40 +0900

    Reduce the number of make help entries

    We've added some more things recently. It seems not worth having almost
    the same two entries there anymore.

commit 0ee105f3f0a3b409bc08e6a1336c898038c1088f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-15 06:08:55 +0900

    Mention SPECOPTS variable in make help

commit 10d7b39d5d3141073221d4e53a8e81b7808a11b6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 02:58:28 +0900

    Check whether prompt_i is nil

commit 078e50c5e9c53d935bdea6ca3ae156c0edcea467
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 01:16:18 +0900

    Save history in IRB is enabled by default

commit 6d573691058b353840c504d16cc2df1eb0bb517c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 01:07:37 +0900

    Auto indent in IRB is enabled by default

commit 82b058ff6067269c04265844c7df08a2971b0335
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 00:43:16 +0900

    Version 1.1.0.pre.2

commit d0b1a8d5fb56a20198c69d77d9ce65740d0ddcc2
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 00:42:45 +0900

    Need reline-0.0.1 or later for some features

commit cd7b99bbfccd69b6cd75421b738bcda36f920e0d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-15 00:15:01 +0900

    Version 0.0.1

commit 04e6b90d5be8f13344066de0d64ba11020e2c094
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-06-29 23:51:24 +0900

    Remove unused method.

commit 423feb53a20f323d6b7e27e132e68b70b888ffe9
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-01-04 08:07:34 +0900

    [ruby/matrix] Add Matrix::VERSION constant

    Add Matrix::VERSION for the gem version, use it in the gemspec,
    and make it also available for library users.

    https://github.com/ruby/matrix/commit/65c2bb1fa1

commit 4403130193ac895820d9ccc8ec2ab13de37bfea6
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-01-04 08:00:06 +0900

    [ruby/matrix] Add missing `lib/matrix/' files to file list in gemspec

    https://github.com/ruby/matrix/commit/2bbb9be233

commit 3201062adf7f98f645b659852bd9fa6f566cb1dd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 00:31:07 +0900

    Add a /* fall through */ comment

commit 970c12551efed86074d9c3440f82551795cbde6a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 00:30:35 +0900

    Add a /* fall through */ comment

commit 9e3971c3ade4a2fd5c5d3123f9437fa3af352655
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 00:29:56 +0900

    Add a /* fall through */ comment

commit deb5e582308950cdceb510807f498a7733dc076f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 00:19:41 +0900

    ext/stringio/stringio.c (strio_read): "binray" is always zero here

    Remove unused conditional expression to suppress Coverity Scan warnings.

commit e6f188ea031db9bd7ac0d2931242eebc83b5aac7
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-06-25 22:08:15 +0900

    Rename to Reline::History::Test.

commit 073cc52dcc5f0945e56877c703688517f58c6a65
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-06-23 13:29:09 +0900

    Add `class Reline::History` and test.

commit 9806da50f49843c6983e3110a23ab7822c2e089d
  Author: Masataka Pocke Kuwabara <kuwabara@pocke.me>
  Date:   2019-06-13 16:09:02 +0900

    Suppress warnings

commit 83171b0ee8dc8000819259bde764ea9ca3489290
  Author: aycabta <aycabta@gmail.com>
  Date:   2018-12-27 07:09:56 +0900

    [ruby/rdoc] Bump version to 6.1.1

    https://github.com/ruby/rdoc/commit/55c0627fe0

commit 312d72000a5b49064670c1a7f4c2ad5e167d292b
  Author: poloka <greg.howdeshell@gmail.com>
  Date:   2018-12-27 04:06:23 +0900

    [ruby/rdoc] Correction to include regexp_handling in list of loaded files

    https://github.com/ruby/rdoc/commit/1940b2318c

commit 09187c64b8dcea6a6ed6134e939a2e0ca88a2bd6
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 00:10:39 +0900

    Add a /* fall through */ comment

commit 517c8a532425a28ee2641fc100a91a691b501fe8
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 00:08:34 +0900

    dir.c (dir_each_entry): remove unnecessary check

    I guess that this check was to detect re-entrance (maybe callcc?).
    But currently it does not work as intended.

commit 721fc849370d88b87703b00ed1442295c1a94027
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-15 00:08:33 +0900

    * 2019-07-15

commit b4975693ed1ac46be081e02d82a6dfb7aea0e1c0
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-15 00:07:32 +0900

    process.c (p_sys_setregid, p_sys_setresgid): remove unused tmp buffer

    To suppress Coverity Scan warning

commit 80da68db1e770c877782cdf571d96fd89e7774dd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 23:36:23 +0900

    Add a /* fall through */ comment

commit 43c337dfc18676e95f9fb9b1d6bf3beb3ec6b306
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 23:04:48 +0900

    string.c (str_succ): refactoring

    Use more communicative variable name

commit 3fd086ed565e6156db5e64a5c42469db331a6237
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 23:04:16 +0900

    string.c (str_succ): remove a unnecessary assignment

    This change will suppress Coverity Scan warnings

commit 198281a71d95c1a48445dc6e913bc1bd62350054
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-04-23 05:54:44 +0900

    [ruby/csv] Fix a bug that strip: true removes newlines

    https://github.com/ruby/csv/commit/5540d35a30

commit 8c0edbd79d59789b9543d00322d6bde72f86bfda
  Author: kawa_tech <49791334+kaerunote@users.noreply.github.com>
  Date:   2019-04-20 16:37:52 +0900

    [ruby/csv] add options doc :quote_empty (#89)


    https://github.com/ruby/csv/commit/5ca8d79f60

commit 75620c804ea47de040016ccf9766c016f2934df2
  Author: Masafumi Koba <473530+ybiquitous@users.noreply.github.com>
  Date:   2019-04-20 00:42:40 +0900

    [ruby/csv] Add options doc: :write_converters, :write_nil_value, :write_empty_value (#87)


    https://github.com/ruby/csv/commit/5923ee08b7

commit fe40841bfb031d278daea5b05fb13084f887fec5
  Author: hayashiyoshino <twinklestaryoshino@gmail.com>
  Date:   2019-04-19 20:59:38 +0900

    [ruby/csv] add document of strip (#88)

    * add document of strip

    * modify typo

    https://github.com/ruby/csv/commit/de0257dc31

commit c8b82998d4fbbb8988b0f2458327697918a9e1a2
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-04-17 22:05:12 +0900

    [ruby/csv] Bump version

    https://github.com/ruby/csv/commit/3976985008

commit 8392592a0a33bb9103a7aa968389fe50e304e062
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-04-17 22:02:40 +0900

    [ruby/csv] Don't raise on eof?

    GitHub: fix #86

    Reported by krororo. Thanks!!!

    https://github.com/ruby/csv/commit/5a8d9d9297

commit 9171f833054cd47842e12fc0fd3cc1df704a9192
  Author: Kazuhiro NISHIYAMA <znz@users.noreply.github.com>
  Date:   2019-04-15 12:12:26 +0900

    [ruby/csv] Refactor range in delete_suffix (#85)


    https://github.com/ruby/csv/commit/7ff57a50e8

commit 864e2a95d90d547fe83c847c01daa1c3ba4503de
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-04-15 11:05:20 +0900

    [ruby/csv] Bump version

    https://github.com/ruby/csv/commit/312f844693

commit 85497744305fcd7ff2b7768867f68c8fac03c8a0
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 22:05:39 +0900

    Tweak upstream information of upstream commit.

commit 0bf829c17b92c608bc374f03a63b89a940d61955
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 23:02:23 +0900

    transcode.c (rb_trans_conv): remove unnecessary assignments

    This change will suppress Coverity Scan warnings

commit 36f2d9bac2c0e6dacc0488448c05dfde6ef2b23a
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 22:46:34 +0900

    numeric.c (fix_cmp): remove a unreachable return statement

commit 49362ddac60bb9d348cbcd8b7c003f52f5ffa1f5
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 22:20:47 +0900

    Add a /* fall through */ comment

commit d0f113f6c169a618c41a857d2536c89b86c58d75
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 22:05:22 +0900

    doc/globals.rdoc: Add RUBY_REVISION [ci skip]

commit ab31e13e7513ffb08af41b0fc5f779c8d4a78fc2
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 22:03:52 +0900

    doc/globals.rdoc: Add RUBY_PATCHLEVEL [ci skip]

commit 9a402cf61f5ab86944c52466ae2e4db95bcc5f90
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 21:57:44 +0900

    doc/globals.rdoc: Add RUBY_COPYRIGHT [ci skip]

commit 5d606b5174a8842a6cf6397ee9c9e07736d6af8f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 21:56:45 +0900

    doc/globals.rdoc: Add TOPLEVEL_BINDING [ci skip]

commit 7ac7685fa7a266e74102ac8ed067035ebfebe6e6
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-14 22:12:33 +0900

    Simplify link_o_to_so arguments

    by C99 compound literal for array and non-constant array initializer

commit b7ec77f3614d7a89a47466f240d53abc0f967d19
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-14 22:04:27 +0900

    fix typos.

commit 085d0e5ccb7cecb1f761c1d3c72caeeedafc7d04
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 21:56:39 +0900

    ruby.c (name_match_p): remove unnecessary condition

    It always returns immediately when len was decremented to zero.
    So len is always positive.  This change will suppress Coverity Scan
    warning.

commit a3493521a55e32081520be805a764fd2ad43fe7b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 21:52:49 +0900

    abort sync commit history when it failed to modify commit message.

commit 8e6a68c18edeb8dfef494862093539d987b6ad6a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 21:49:10 +0900

    Use force flag for filter-branch.

commit c8e1be6f1fed7f4f54d5ac1f7ae1ebe2c0f60dbe
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 17:53:14 +0900

    Skip merge commit with rubygems and bundler.

commit 46491af74ca2266aae0157b79a44898a2f4b728d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 21:31:16 +0900

    Modified commit message with upstream repository name.

commit 265e94a7fa96c918c4278ae58bf6e5cdb018906d
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 17:15:06 +0900

    Added chrry-pick feature from upstream repository.

commit be082e28003543eff5ff07cf5261dbf7b6278a50
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 16:56:39 +0900

    Try to sync with commit history for default gems.

commit d8cc41c43be65dd4b17e7a6e38f5a7fdf2b247d6
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-14 21:48:22 +0900

    Fix a wrong buffer size to avoid stack corruption

    [Bug #15986]

commit 20a3fb3c4b7c564ee7809ac1ed036b4874e47e26
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 21:34:32 +0900

    Add a /* fall through */ comment

commit e8700b596b907ed0db80ccd398d9dfe1f0fe6dd1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 20:52:49 +0900

    Check the result of String#-@

commit 4900a10689036211da79c8189ff7eba11c8c81ee
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-14 20:46:51 +0900

    socket: use frozen string buffer when releasing GVL

    Thanks for the patch by normalperson (Eric Wong) [Bug #14204].

commit 5bd83909b961546ff6203ad088bfffeb8c19fceb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 18:02:02 +0900

    Expand f_arg to use particular functions directly

commit 1464f7a149264b02637fdd444f8a431f1692981a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 18:01:24 +0900

    Expand f_abs to use particular functions directly

commit 0df4a813ca8f9cb4d081c45ad91be3dd17bb06f1
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 20:33:41 +0900

    NEWS: RubyVM.resolve_feature_path moved [ci skip]

commit 41e09ca4becff3d573a5c8049624c664311492ae
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 20:23:29 +0900

    addr2line.c (binary_filename): extend the buffer for NUL terminator

commit a7dd6763bd1dac7952ace46be58083dbea332a0a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-14 20:17:03 +0900

    Increase fetchDepth to prevent checkout failure

    like https://dev.azure.com/rubylang/ruby/_build/results?buildId=1637

commit 45dfd4c09d399124ddc7abd1ae24e1e64019b333
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-14 18:08:47 +0900

    Make export declaration place more consistent

commit 2553608c3b8dde72e8255e2306b5208813fff461
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 17:59:24 +0900

    Removed binop macro which has not been used

commit d30d404bc4b848f84959799b543de4bdbd8eef2b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-14 18:04:14 +0900

    MJIT Support for getblockparamproxy

commit 043e3d2cdc02a3571e3e2c3b9252a65d3c049740
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 17:58:25 +0900

    [DOC] Add missing headings [ci skip]

commit 08c2a9dc599021668e11dee2f099a204122eab90
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 14:44:59 +0900

    Introduce RUBY_DEBUG flag macro

    When RUBY_DEBUG is turned on, all RUBY_ASSERT() macros will be
    enabled regardless RUBY_NDEBUG.

commit 715955ff27206351dcf509eb3c60e0927ad9a708
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 13:06:22 +0900

    Include ruby/assert.h in ruby/ruby.h so that assertions can be there

commit db64093f512d93eb300131f52b7ddbd2d11f0aec
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 17:54:22 +0900

    [DOC] Fix a typo [ci skip]

commit db1c30b37fb0a837724cf5813e8684edc2639222
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 17:53:45 +0900

    addr2line.c (main_exe_path): avoid SEGV when /proc is not available

    readlink would return -1 if /proc is not mounted.
    Coverity Scan found this issue.

commit 47e571c9510a6d6e3f7d98a8a8800f391694bd19
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-14 17:48:11 +0900

    complement '.rb' on `test-all TESTS=test_xxx`

    for test-all rule, we can specify a file with TESTS option like
    `TESTS=test_xxx.rb`. However, we can eliminate last '.rb' suffix
    so this patch try with '.rb' suffix if the given path is not available.

commit b67b07bd5bd94433051b5e0a5db800f8b22361b4
  Author: Maxime Lapointe <hunter_spawn@hotmail.com>
  Date:   2019-05-31 05:46:18 +0900

    Fix links to headings
    A previous change made the header's id be fully referenced (for the sidebar I believe) but this broke links to them.
    This fixes the issue.

commit 73904abb951ad60483124fa620b5561015906a79
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-14 17:45:52 +0900

    * expand tabs.

commit 32f013514460574eed03aa678f87ed7ca9600872
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 13:05:16 +0900

    Split RUBY_ASSERT and so on under include/ruby

commit 5786df12f5c07510f9f15e984c564179afae33c0
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-14 17:44:33 +0900

    Describe about Pathname.glob.

commit 4d9504fe13c6470d9da74540f92a247e8c1d9b99
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-14 17:39:21 +0900

    Delegates 3 arguments for Pathname.glob.

    Thanks for the patch by pocke (Masataka Kuwabara) [Feature #14405].

commit 61577fa53bd1ce949912c3b1281668e0ccbcda37
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 17:32:49 +0900

    Add a /* fall through */ comment

commit 6bca4437dea5da28b8b7e5f1cb87561f2772a03d
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-14 17:22:13 +0900

    Describe warning of open-uri.

commit 05aac90a1bcfeb180f5e78ea8b00a4d1b04d5eed
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-14 17:18:17 +0900

    Warn open-uri's "open" method at Kernel.

    Use URI.open instead.

    Thanks for the patch by jeremyevans0 (Jeremy Evans) [Misc #15893].

commit 9987296b8b5b7c02fca92761e498764dfeb584cf
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-14 17:16:35 +0900

    * expand tabs.

commit 934e6b2aeb495686f7fe0d8b1c69d863e6fca072
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 17:15:44 +0900

    Prefer `rb_error_arity` to `rb_check_arity` when it can be used

commit 10de5f149acc620e12be5943e4e29f4f555b7551
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 16:31:36 +0900

    Calculate float complex division per each part

    Arguments to f_complex_new2 should not be Complex, or violate the
    assertion.

commit 83153bbb149f5c827c4ce537722d3169d24b9de9
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-14 16:18:48 +0900

    * expand tabs.

commit 73fab16e76d3879d2a099e2ce949b6b03f227d86
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 16:17:49 +0900

    compile.c (defined_expr): return void instead of int

    It always returned 1.

commit 95de69df9906cde96d30aa2fbc6f5ed4891fdb9f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 15:23:15 +0900

    io.c (rb_file_open_internal): initialize all the fields

    Just for case.  This will suppress the warning of Coverity Scan.

commit 2618db3011edb07fffb9250137ea3a3a6c87cec4
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 16:00:34 +0900

    [DOC] Fix typos [ci skip]

commit f2d99fd8209058e75d5d1c56d179509c06486107
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 15:41:45 +0900

    [DOC] Fix indent [ci skip]

commit 3163a07878dfcefe7914067e58de78049b056624
  Author: Luke Gruber <luke.gru@gmail.com>
  Date:   2019-06-09 03:55:41 +0900

    fix issue with 'SIGINT' handling in LineEditor#reset

    @old_trap is the string "DEFAULT" and not a callable object (Proc)
    if there are no other signal handlers for SIGINT signal to chain.

commit 47b04557b01dc109ccafc33db8e80148f07457a9
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-14 15:42:55 +0900

    Method#inspect with source location.

    Method#inspect shows with source location.
    [Feature #14145]

commit 4ce935cd5dde69b39bb98b8948d41e3afba81e33
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 15:22:12 +0900

    Removed FileUtils for file manipulations with module inclusion.

commit a73f45247652d563e4043af8d14964b9d911fe81
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 15:21:27 +0900

    Use FileUtils.mkdir_p instead of mkdir command directoly.

commit e91ff4dbaf0bdbf7185b485b43cd9393419efd11
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 15:20:25 +0900

    Use FileUtils.cp_r instead of cp command directoly.

commit d25f355c655704d483ca402d0ac2644adb5733b0
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 15:07:17 +0900

    Fixup dccb0e1ec94e7b9c13c715939ae7e0ccc4ffb23e

commit 7d24a7ed7bae3adec131920d98c0b321e9d3e286
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 14:29:38 +0900

    Use FileUtils.rm_rf instead of rm command directly.

commit 7504d676c8ee245bb3b117e743fb3921a3ab56f7
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-14 14:17:06 +0900

    Do not use hard-coded file path of default gems upstream.

commit 357f295a0e97a105e51d0b3a4b5c062c55dffe92
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-14 15:01:39 +0900

    Describe lambda-ness of Proc more.

commit dda2c860d97ce3149361b143c9ccc5ed1a2f1af2
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 14:59:34 +0900

    [DOC] Fix link to feature [ci skip]

commit 6da539be3ec9e9ba7a45877108d095dcb349cabe
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 14:52:31 +0900

    Fix typos [ci skip]

commit 4f351111b811a7437f8356172a6cc59d8fb37022
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 14:40:38 +0900

    NEWS: warning of flip-flop is reverted [ci skip]

commit 421dd3114579f90ecced6cf221828a730357b50f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-14 14:33:28 +0900

    [DOC] Fix experimental marker [ci skip]

commit 219643c075d9f5641307853cae052383bb289a11
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 14:27:45 +0900

    Add a /* fall through */ comment

commit 34b3ef29b60f1351130f2ccc8adf3d174861233c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-14 14:09:32 +0900

    Drop obsoleted mjit_cancel_ivar debug_counter

    ivar_cancel label is handling mjit_cancel_ivar_inline instead.

commit ff5b149435f6ae167df6cc8a17ad49b4c92209f1
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-14 14:04:34 +0900

    * expand tabs.

commit ba94404f7021fae41a827e080be6d5dd0bbac8e4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 14:03:44 +0900

    Add /* fall through */ comments

    to suppress some Coverity Scan warnings

commit 1d46642487d5340cf6c1f17b36ff0f64b0c1595c
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-14 13:57:57 +0900

    * expand tabs.

commit 315d3adf0f9660568bdca01fd6ddd196c92973d2
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-14 13:49:39 +0900

    Avoid io_tell whose return value is not used

    In this case, flush_before_seek is enough.
    This change will suppress a warning of Coverity Scan.

commit 18603e9046c0baa23560268e16ead6bbc27726c2
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-14 12:55:57 +0900

    Update dependencies for 369ff79394765ce198ac7cee872a8c739d895aaa

    Just copy-pasting diff from
    https://travis-ci.org/ruby/ruby/jobs/558407687

commit 4402c669785e7343cd65e4e90e436a3f8a3e00b5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-14 12:53:39 +0900

    Refactor mjit_worker command line with C99

    Mostly non-constatnt array initializer, and mixed declarations and code.

commit 369ff79394765ce198ac7cee872a8c739d895aaa
  Author: Martin Drst <duerst@it.aoyama.ac.jp>
  Date:   2019-07-14 10:58:50 +0900

    add encoding conversion from/to CESU-8

    Add encoding conversion (transcoding) from UTF-8 to CESU-8
    and back. CESU-8 is an encoding similar to UTF-8, but encodes
    codepoints above U+FFFF as two surrogates, these surrogates
    again being encoded as if they were UTF-8 codepoints. This
    preserves the same binary sorting order as in UTF-16. It is
    also somewhat similar (although not exactly identical) to an
    encoding used internally by Java.

    This completes issue #15995.

    enc/trans/cesu_8.trans: Add encoding conversion from/to CESU-8
    test/ruby/test_transcode.rb: Add tests for above

commit ac2866005b96baf986072f86ecd3dfd887f2bda3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 01:41:55 +0900

    Add empty depend file if extconf.rb only exists

commit 69a66e8a8b492610eba77123de44e97d25012a41
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-14 01:32:27 +0900

    * 2019-07-14

commit dcb8c41a1e2146cc67c638ec391436e1ab2323d2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-14 00:50:12 +0900

    Added depend files

commit 1a4f7c9bfae484bd9806efc8d1d8074b23e382bf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-13 23:32:18 +0900

    [DOC] Markup code in globals.rdoc

    Look forward to further improvements in RDoc to automatically mark
    up global variables and global constants.

commit 6ef73c14725b90ae1fb0ec017564d560d05d8c01
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-13 22:47:37 +0900

    Improve documentation in doc/globals.rdoc

commit 237b3e00c72bff89b97d04d0a15200949ac1ee56
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-13 22:39:54 +0900

    Document $~ before dependent global variables

commit b1ee7148f8f9007d7154bf147daecc8c70dc44a3
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-13 22:35:16 +0900

    Improve documentation of $LOAD_PATH

commit 0a5463f7645f6366e2239268de5bc56c0dfea9d1
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-13 22:26:47 +0900

    Add $LOAD_PATH.resolve_feature_path in NEWS

commit 4a935bc6f66fda448fb430c7627a2f175dcd0650
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-13 22:23:49 +0900

    Document $LOAD_PATH.resolve_feature_path in globals.rdoc

    * RDoc does not seem to support documenting singleton object methods,
      and making $LOAD_PATH a class as a workaround is too weird.

commit b0f6f33094606e50296cb525184708454420e860
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-13 22:16:26 +0900

    Document a few more RUBY_* constants

commit 43677a2c58c82ddd630eb5267d1683e1c651c529
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-07-13 22:07:19 +0900

    Document the long form of global variables and mention aliases on the same line

    * The longer forms are self-explanatory and I believe more often used.
    * Same for ARGV and ARGF, describe them there and mention $* and $< just refer to them.

commit e2bee86dc4ec60c8834b976b83491358c4cb5f00
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-13 09:48:12 +0900

    Relaxed delta of nanosec from Float time

commit 331eccf3fea016f074f08f8215a9120e0a30468c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-12 07:25:06 +0900

    Removed useless `freeze`s from gemspec files

commit fd9f26df005824f5b1f1f41adaf63f2ff57062a7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-10 17:16:01 +0900

    Drop fossil rubygems support

commit 143581cf4e8dec363b9636fdcd215153d94673c5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-12 07:23:00 +0900

    Removed stub lines from gemspec files

commit cbe623f1c787ff2117045c7c4f03a294dfdb9370
  Author: Masatoshi SEKI <m_seki@mva.biglobe.ne.jp>
  Date:   2019-07-13 07:22:55 +0900

    change default value of load_limit (ignore load_limit)

commit 10d7419eb43969de209c1bbcd56b052679cfa8d1
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-13 06:10:07 +0900

    * 2019-07-13

commit 1ee17782e108222d07a1c6b58cf1c7521d188b32
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-10 17:15:18 +0900

    Removed binary line

commit ae599db22fa46d3c04329e09294ff0a31d7ebfbb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-12 17:57:28 +0900

    * remove trailing spaces.

commit 00b34b05921da35a97d78d17133ff94abd0ae22b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-12 17:52:12 +0900

    Fixed duplicate test name

commit a9ff21a282845f81527b18607d246be90ea6701e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-12 15:02:29 +0900

    * 2019-07-12

commit b9ad62ea13bfaf0cad2ffc48d724b342ee55c7c8
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-12 15:02:25 +0900

    * remove trailing spaces.

commit a2adcd40df96acd1218cc60dc1810e83dbc124d8
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-03 18:35:03 +0900

    Add note about `STACK_GROW_DIR_DETECTION`.

commit 5c8061a9e2a34df975846d724273cb5be7d74a7c
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-07-07 19:58:55 +0900

    Make `stack_check` slightly easier to use in debugger.

commit 012e954b472d2e47b03647ac0c8f745416d7db58
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-02 10:48:47 +0900

    Improved fiber benchmarks. Increase number of iterations.

commit 8745fa2ff0fbff67031bdecfdeea684b15515a2c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-11 21:05:25 +0900

    Default to true when no exception flag [Bug #15987]

commit f74e23af32525b5f2db1729586c930e2becdae30
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-11 20:21:50 +0900

    Fixed argument in the fallback function [Bug #15987]

commit c2723e59c2a66a3d2fc8849b3b25c04c9333230a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-11 20:19:53 +0900

    Removed wrong argument in the fallback function [Bug #15987]

commit 4018eee4311a610dfaa2b2dca02c6f026b71eab7
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-11 20:14:57 +0900

    * expand tabs.

commit 3e7d002118a92fad5934e11c75be6768a1476c1b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-11 19:20:53 +0900

    Check exception flag as a bool [Bug #15987]

commit cd069df36596d9bf7a6db8aaa0dcefdafb233a91
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-11 19:45:03 +0900

    File::Stat uses Time#inspect

commit 71ead0787283b469f5e834cb1868a8caa78702f1
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-11 17:21:00 +0900

    Add arg check to Reline.dig_perfect_match_proc=

commit 4e038a7e64a9d52eed59b8f05647d4e58d265ec3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-11 14:29:35 +0900

    Revert "parse.y: Deprecate flip-flops"

    This reverts commit bae638ad5b782c44c80efe33834cb9039279af46.

    [Feature #5400]

commit d77b84ca82e1cef10ef06776a207151ef864b3ca
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-11 14:05:34 +0900

    $LOAD_PATH.resolve_feature_path

    Moved from RubyVM.  [Feature #15903]

commit d34303ad109b93445b01d0420c9a5bfeffafac38
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-11 13:04:07 +0900

    remove an unused variable.

commit 26d674fdc73cec3777d1a719b42ccbe54c18a966
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-11 11:58:35 +0900

    Suppress warning on x64-mingw

commit 50d85436f8f194aa78cd0e819471fe20767a5993
  Author: Tanaka Akira <akr@fsij.org>
  Date:   2019-07-11 09:18:41 +0900

    WEBrick::HTTPResponse create tempfile if required.

    WEBrick::HTTPProxyServer implements HTTP proxy using
    WEBrick and Net::HTTP.
    WEBrick accepts HTTP/1.0 clients and
    Net::HTTP uses always HTTP/1.1.

    However HTTP/1.1 supports chunked transfer coding HTTP/1.0 doesn't.

    Chunked transfer coding doesn't require that
    content-length before the content is sent.
    But non-chunked transfer coding require content-length before
    the content is sent.

    So, when HTTP/1.0 clients connects WEBrick::HTTPProxyServer and
    origin server returns chunked response,
    WEBrick::HTTPProxyServer needs to store whole content to
    know the length of it.

    This patch do it using tempfile.

commit d57ce99b7d187eb3af7749a056edeea443da93f6
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-11 03:37:22 +0900

    * 2019-07-11

commit 12762b76cba8ac4623a6c16e1fe60efafa3b7d1c
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-07-11 01:12:28 +0900

    Don't manipulate GC flags directly

    We need to disable the GC around compaction (for now) because object id
    book keeping can cause malloc to happen and that can trigger GC.

commit f91879a7b548284c93743168acfd11e3d2aeefac
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-07-10 15:49:10 +0900

    handle_interrupt to defend monitor state [Bug #15992]

    If an exception is raised from another thread for example Timeout
    and this thread is just after `mon_exit`'s `@mon_owner = nil`,
    the exception breaks the state of MonitorMixin. To prevent that situation,
    it need to block interruption in mon_enter and mon_exit.

commit 1d2ec4b21647089598d0be3a8bc5f56a71b5e892
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-10 12:33:29 +0900

    Added Etc::VERSION

commit 612b7b6224db7965e1b11463a8a83569afda101f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-10 12:32:35 +0900

    Removed unused files

commit cc936402eb60fc0ccdafd47dc1e4f6f8ae0c4b9c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-10 03:02:01 +0900

    C90 for old versions

commit de4889ce5c5177ed276dfc840a5c07f69317096c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-10 02:07:13 +0900

    Use the found version number

commit 9c48472b1e895156c4a577cab4f06b74f4844fe5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-10 01:57:18 +0900

    Removed useless `freeze`s

commit db844749af2da9cc06d90db0cb317ec379582afa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-10 01:21:05 +0900

    Added StringIO::VERSION

commit 49cad676351120927a9eda5fea58334c3d32f858
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-10 00:20:00 +0900

    Removed duplicate assignment

    This `last_state` is set to `lex.state` just before the `switch`
    statement, and `token_flush` nor `nextc` never change the state.

commit 57b8ca21f122108ca832f94b4b0f6f8367e3a4fc
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-10 00:09:43 +0900

    * 2019-07-10

commit d0ef5c21fb91f7a82910fc71d4d8e1a801266232
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-09 22:54:34 +0900

    Check dependencies on Travis-CI

commit b1be349bfb327753d9f971c9ef692896fac7df08
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-09 21:21:00 +0900

    Make symlink to "ruby" only from the install-name

commit 9f275f7971ee7e659e0965122b2bb57e785d0181
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-09 21:16:49 +0900

    Restore support library for only test files that are digest and csv.

commit f9a2440866a2df05fcbacf31c4f4e5e18b996e15
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-09 21:04:07 +0900

    Restore support library for only test files.

commit d905ff61e69ce4f9bc134285f3ac1859e1eb74a6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-09 13:47:07 +0900

    Update dependencies

commit 8a831e5cb6de530502e22be06f19b30afd64635c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-09 13:10:08 +0900

    Do not make Unicode tables timestamp phony

commit 515e106fb73a1a3bc69b6f1670bbaaebf45fee30
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-09 13:00:34 +0900

    [DOC] Add link to Enumerable#grep from Enumerable#select

commit 4cda2e5013b1351b9da087fe534907fcd7e52770
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-09 10:58:12 +0900

    Moved error messages

commit 9b18cb341f08c725d74f667ef3724c4cc852fdbd
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-09 08:39:30 +0900

    * 2019-07-09

commit 2a8be8ec33a238410e58864f59b6ffccfd0cc19d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-09 08:31:27 +0900

    Suppress uninitialized instance variable warnings

commit ad38f026457304d677fde5dfa0d4d256fd4d6509
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-08 20:31:40 +0900

    Adopt the directory structure of ruby repository for racc extension.

commit 995ae6d529d6bef62ca756d4b1dbc1e01f062b8a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-08 17:09:59 +0900

    Check indent of `end` against `else` if present

commit e0a3c547dd2690e5bfa4a03f59aed5315d926a82
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-08 16:05:04 +0900

    Get rid of toplevel methods

commit 93c9405e0e4879fe83937547daefb7e303b22b04
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-08 16:00:29 +0900

    * expand tabs.

commit 663d58ffde9a57ae52a5aa3492098c72f7b4f32e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-08 15:13:59 +0900

    Fix indent

commit a8c54932ba4ba002e7046d36af85f940212df9d1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-08 14:59:28 +0900

    Renamed fib to fiber

commit 612cad5d202cec168bcbfec0f148a577dbd98e8d
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-07-03 08:29:33 +0900

    Let struct dump_config in objspace fit in a single cache line

    Let dump_config boolean members roots and full_heap be bit flags
    instead

    Closes: https://github.com/ruby/ruby/pull/2274

commit e9907122ed6d71de4601b0be22e39e4486636c69
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-08 13:03:50 +0900

    Suppress a warning when `write_headers: true`

commit a2e0aaea1b240d7df57dd7f7bece8effa539a5cb
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-08 10:59:04 +0900

    * 2019-07-08

commit 3fcffceafd2bce7186851bf4899484c545a9ace8
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-08 02:49:53 +0900

    Fix default argument values for OptParse::Switch#summarize

    The documentation describes these arguments being hashes, and the method
    is called with hashes, so a hash default makes more sense.

    The method would fail previously if called without arguments and @short
    or @long contained a non-integer value.

    Fixes [Bug #10928]

commit c1ebb384fdc222b58398d89a877a06b7efd5e290
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-07 20:16:15 +0900

    Fix a typo

commit fc4dd7d3e20b4eaf02d1dd59787abdc4c6c24e3a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-07 19:05:33 +0900

    Git branch name can contain `#{}` too

commit 19a4c42d6124aa3bcdf2cd53d510b22acb2b5104
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-07 18:54:17 +0900

    Unescape #{} in the last commit title

    Get rid of unknown escape sequence warning, as `#` is not a
    special character in C.

    ```
    version.c:126:26: warning: unknown escape sequence '\#' [-Wunknown-escape-sequence]
        fputs("last_commit=" RUBY_LAST_COMMIT_TITLE, stdout);
                             ^~~~~~~~~~~~~~~~~~~~~~
    revision.h:4:42: note: expanded from macro 'RUBY_LAST_COMMIT_TITLE'
                                             ^~
    ```

commit 68e580402272cea7f98145c3c562cab565a37046
  Author: Lars Kanis <lars@greiz-reinsdorf.de>
  Date:   2019-07-06 21:32:39 +0900

    Add coroutine context switch for i386-mingw32

    It's essentially a translation of Context.asm from Intel
    to AT&T syntax.

commit a13636e756662e563e4c4dc802c6fa21cb6d7b52
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-07 18:17:51 +0900

    Message to pipe should end with a newline

commit a33948f40a64d038ef848783dcfb33d801bc7018
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-07 15:50:58 +0900

    * 2019-07-07

commit d548073f68ae719933c328686df224f74a60d366
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-07 15:45:10 +0900

    Enable indentation warning against `if` just after `else`

    ```ruby
    if false
      puts 'false'
    else if true
      puts 'true'
    end # -:5: warning: mismatched indentations at 'end' with 'if' at 3
    end
    ```

    [Feature #15990]

commit 789e49dc7e36f2c19a3df6dfa348e95b7105061c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-07 14:43:54 +0900

    Renamed column in token_info to indent

commit 9d8855b6820a53020d034756f6ec523fc14f663b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-06 18:46:00 +0900

    Added assertions for Unicode escaped CHAR scanner events

commit f296c260ef3b2d1a9299dbb4a84df567972453f2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-05 05:47:43 +0900

    Fix segfault when using method reference operator without using result

    Fixes [Bug #15985]

commit 688cef2169a438c1402a8870887a6406f29a824b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-06 12:31:11 +0900

    Refactored width calculations

commit 44aae5fee666e6767415c214e25e90f6ad565550
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-06 12:11:12 +0900

    Simplified

commit 833cfeb2260c460d05c75cc6d16fa992d881ec54
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-06 07:20:29 +0900

    * 2019-07-06

commit 89e178c7cb3b6ba196cfef76d9604e45849c64fc
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-06 07:13:51 +0900

    Fix showing document of ClassName.method_name in IRB

    In IRB, Time.new is split as "Time", ".", and "new". The receiver "Time"
    is processed by #class method but it means that "Time" changes to
    "Class". This commit fixes it.

commit d746a41e85b746a90eef20c46d24880fe084ffc5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-05 22:18:08 +0900

    Multiple codepoints are not allowed at single character literal

    It has unintentionally passed since 2.5.

commit 0a2f598d23ef54ce906ebe302cc06e07a16f9022
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-05 19:01:15 +0900

    * 2019-07-05

commit fae4489a3a70b7620716c76b53c87fd3171a7571
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-05 19:00:37 +0900

    Fix a typo

commit 6c2b59f9237843a4570d0ab932705b3fa5c18524
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-04 20:58:11 +0900

    Support Control- and Meta-

commit d9f8b88b47c141e7dcbc50eb10812acaeca2a325
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-04 19:34:08 +0900

    Move a comment to proper place

commit 6fa7ed453e81ef3e74b2699db0533eb79e815dbb
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-04 19:29:07 +0900

    Check commented out line in inputrc correctly

commit 265b9a0edf48e96d053724c9676af953e920246c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-04 18:54:50 +0900

    Parse key sequence more strictly

commit 12e06d32f55dff7f35c66842e5d6901857132060
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-04 18:49:42 +0900

    Use lstrip instead of gsub which can match only once

commit ee861e43f70d827abd1f8d26b2e97920237348b4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-04 18:46:34 +0900

    Skip indented comment lines [Bug #15981]

commit 0c3e6e86bdcb708d283dc57ed3c18ed1b40e4a17
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-04 18:12:08 +0900

    Suppress uninitialized instance variable warnings

commit f19e048d244c709e2990ddbb0f986e8b51357bd2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-04 15:43:33 +0900

    Do not dispatch a nil token in ripper

    As a comment token includes the newline, so delayed newline token
    just follows it should not be dispatched.  [Bug #11485]

    Co-Authored-By: Jeremy Evans <code@jeremyevans.net>

commit 23c92b6f820f670994026423d4c7b5abcf51eafa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-03 14:44:20 +0900

    Revert self-referencing finalizer warning [Feature #15974]

    It has caused CI failures.

    * d0cd0866d82a58933e5dccd073c753c0c2ad4eb5

      Disable GC during rb_objspace_reachable_object_p

    * 89cef1c56b3a0f9c5e6ccc22a5044477a4fd16c1

      Version guard for [Feature #15974]

    * 796eeb6339952d92ae1b353d450c7883e589852d.

      Fix up [Feature #15974]

    * 928260c2a613bbdd4402c300e0bf86ae7562e52a.

      Warn in verbose mode on defining a finalizer that captures the object

commit 5d9e91afe08c470485333f6c6e034d05ea3ee908
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-04 01:04:47 +0900

    * 2019-07-04

commit c62aac108666e0c74a4a24d6b4200c3326b21b64
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-04 01:04:44 +0900

    * expand tabs.

commit d0cd0866d82a58933e5dccd073c753c0c2ad4eb5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-04 00:58:52 +0900

    Disable GC during rb_objspace_reachable_object_p

    Try to fix CI breakage by [Feature #15974].

commit 9f1d67a68f55fe7a16840960e0817d362b16d5b2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-03 23:52:52 +0900

    Renamed to rb_objspace_reachable_object_p

commit 7b9bb6f44a0dc891f41c06804e828790ba5fec6d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-03 23:37:46 +0900

    Check code_block_open for whether code continues

commit 6bd49b33c859e3893318b8ceb1f3e0dd0988144f
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-07-03 21:52:51 +0900

    Ensure that GC is disabled during compaction

    Various things can cause GC to occur when compaction is running, for
    example resizing the object identity map:

    ```
        frame #24: 0x000000010c784a10 ruby`gc_grey [inlined] push_mark_stack(stack=<unavailable>, data=<unavailable>) at gc.c:4311:42
        frame #25: 0x000000010c7849ff ruby`gc_grey(objspace=0x00007fc56c804400, obj=140485906037400) at gc.c:4907
        frame #26: 0x000000010c78f881 ruby`gc_start at gc.c:6464:8
        frame #27: 0x000000010c78f5d1 ruby`gc_start [inlined] gc_marks_start(objspace=0x00007fc56c804400, full_mark=<unavailable>) at gc.c:6009
        frame #28: 0x000000010c78f3c0 ruby`gc_start at gc.c:6291
        frame #29: 0x000000010c78f399 ruby`gc_start(objspace=0x00007fc56c804400, reason=<unavailable>) at gc.c:7104
        frame #30: 0x000000010c78930c ruby`objspace_xmalloc0 [inlined] objspace_malloc_fixup(objspace=<unavailable>, mem=0x000000011372a000, size=<unavailable>) at gc.c:9665:5
        frame #31: 0x000000010c7892f5 ruby`objspace_xmalloc0(objspace=0x00007fc56c804400, size=12582912) at gc.c:9707
        frame #32: 0x000000010c89bc13 ruby`st_init_table_with_size(type=<unavailable>, size=<unavailable>) at st.c:605:39
        frame #33: 0x000000010c89c5e2 ruby`rebuild_table_if_necessary [inlined] rebuild_table(tab=0x00007fc56c40b250) at st.c:780:19
        frame #34: 0x000000010c89c5ac ruby`rebuild_table_if_necessary(tab=0x00007fc56c40b250) at st.c:1142
        frame #35: 0x000000010c89c379 ruby`st_insert(tab=0x00007fc56c40b250, key=140486132605040, value=140485922918920) at st.c:1161:5
        frame #36: 0x000000010c794a16 ruby`gc_compact_heap [inlined] gc_move(objspace=0x00007fc56c804400, scan=<unavailable>, free=<unavailable>, moved_list=140485922918960) at gc.c:7441:9
        frame #37: 0x000000010c794917 ruby`gc_compact_heap(objspace=0x00007fc56c804400, comparator=<unavailable>) at gc.c:7695
        frame #38: 0x000000010c79410d ruby`gc_compact [inlined] gc_compact_after_gc(objspace=0x00007fc56c804400, use_toward_empty=1, use_double_pages=<unavailable>, use_verifier=1) at gc.c:0:22
    ```

    We *definitely* need the heap to be in a consistent state during
    compaction, so this commit sets the current state to "during_gc" so that
    nothing will trigger a GC until the heap finishes compacting.

    This fixes the bug we saw when running the tests for https://github.com/ruby/ruby/pull/2264

commit e44c9b11475d0be2f63286c1332a48da1b4d8626
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-03 19:25:05 +0900

    Try to avoid `not delagated` error

    ```
    .../ruby/lib/delegate.rb:405:in `__getobj__': not delegated (ArgumentError)
    ```
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian9/ruby-master/log/20190703T063006Z.fail.html.gz

commit 89cef1c56b3a0f9c5e6ccc22a5044477a4fd16c1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-03 15:22:16 +0900

    Version guard for [Feature #15974]

commit dcedf0a008f07f38e570c70b3872fa37e837be4a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-03 14:16:36 +0900

    Fix order of tests

    `check` includes `test-testframework`, `test-short` and its
    preceding tests, but `test-all` does not.

commit 10cc6bc4d9276023db21db1014969381de813ff8
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-03 10:00:50 +0900

    Just disable inlining with local variable for now

    This partially reverts commit 712a66b0741605f5b2db670a292b9bb352f8a716.

    The previous fix made CI strange like:
    http://ci.rvm.jp/results/trunk-vm-asserts@silicon-docker/2124178

    Let me just downgrade the behavior for now and deal with it later.

    [Bug #15971]

commit 07e9a1d9986b36d9702b480de549c1301dd897e0
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-03 10:20:51 +0900

    Debugging failures on x86_64-darwin17 of travis-ci

    https://travis-ci.org/ruby/ruby/jobs/553346285

commit 9f26242411fe56c661644d63a9be11530889ebe3
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-03 04:26:53 +0900

    * expand tabs.

commit 796eeb6339952d92ae1b353d450c7883e589852d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-03 04:12:20 +0900

    Fix up [Feature #15974]

    * Fixed warning condition
    * Fixed function signature
    * Use ident hash

commit 928260c2a613bbdd4402c300e0bf86ae7562e52a
  Author: Chris Seaton <chris@chrisseaton.com>
  Date:   2019-07-02 22:19:15 +0900

    Warn in verbose mode on defining a finalizer that captures the object

    [Feature #15974]

    Closes: https://github.com/ruby/ruby/pull/2264

commit efde19ce440f8656c3ce631a1d2a56e830961e9d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-03 03:53:20 +0900

    Revert expansion of test-all

commit 712a66b0741605f5b2db670a292b9bb352f8a716
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-03 03:37:25 +0900

    Revert "Avoid corrupting VM stack on inlined setlocal"

    This reverts commit ea30dd702512ff9df34fe8c71c825f8f901bf5b1.
    because it fails when VM_CHECK_MODE=1.

commit c07165be1d2bccc9e1c67a90d16259a9c929b56d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-03 02:13:25 +0900

    * expand tabs.

commit bdddaa9f56702e1d3a58a14607e9881052424b53
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-03 02:09:01 +0900

    Use rb_ident_hash_new instead of rb_hash_new_compare_by_id

    The latter is same as the former, removed the duplicate function.

commit 0f283054e7f568f09fbfc952d57ea6daf4abbd88
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-20 02:44:54 +0900

    Check that String#scrub block does not modify receiver

    Similar to the check used for String#gsub.  Can fix possible
    segfault.

    Fixes [Bug #15941]

commit 7582287eb27e6b649789ce31ffdcbbb9ffcaf726
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-19 10:59:49 +0900

    Make String#-@ not freeze receiver if called on unfrozen subclass instance

    rb_fstring behavior in this case is to freeze the receiver.  I'm
    not sure if that should be changed, so this takes the conservative
    approach of duping the receiver in String#-@ before passing
    to rb_fstring.

    Fixes [Bug #15926]

commit a4b5aaa9a7225693168e43455de2e10c3721b789
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-18 07:48:44 +0900

    Remove Changelog section from doc/contributing.rdoc [ci skip]

    Replace it with a section on commit message formatting.  Also,
    move the section on rebasing to the bottom, since that only
    applies to committers and not most contributors.

    Fixes [Bug #14886]

commit 40d31073b7e9e14e5169cffca82a424e35b71b95
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-03 00:19:03 +0900

    * 2019-07-03

commit ced640951b0e7164a12ea1770330eba3e6109fc2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-18 03:33:44 +0900

    Implement Array#minmax

    Array#minmax was previous not implemented, so calling #minmax on
    array was actually calling Enumerable#minmax.  This is a simple
    implementation of #minmax by just calling rb_ary_min and
    rb_ary_max, which improves performance significantly.

    Fixes [Bug #15929]

commit 649753b7f5410552c70931e32c193d83df3af97e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-07-02 23:45:13 +0900

    Fix timezone issue for logger period's tests

    This is a retry of 181b966e7553ac53d034266a7cdc18664d080814.
    "Revert "Add a missing tests for Logger::Period module"" is also
    reverted.

commit f1043090a2361019ea4f6832512ef47de3627cb2
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-07-02 23:36:27 +0900

    Revert "Add a missing tests for Logger::Period module"

    This reverts commit 181b966e7553ac53d034266a7cdc18664d080814.

commit ea30dd702512ff9df34fe8c71c825f8f901bf5b1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-02 23:32:09 +0900

    Avoid corrupting VM stack on inlined setlocal

    setlocal relies on cfp->ep, and frame-omitted method inlining introduced
    in Ruby 2.7 kept it wrong.

    This change might slow down frame-omitted method inlining for cfp->ep
    manipulation, and it obviously complicates the implementation more. By
    introducing an optimization that changes Ruby's local variable to C
    local variable, we could optimize it and simplify the cfp->ep
    manipulation later.

    [Bug #15971]

commit 181b966e7553ac53d034266a7cdc18664d080814
  Author: Anton Davydov <antondavydov.o@gmail.com>
  Date:   2019-07-02 22:33:12 +0900

    Add a missing tests for Logger::Period module

    Closes: https://github.com/ruby/ruby/pull/2266

commit e9ea494171745cc22f458952b0aaf4443820caa9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 22:10:11 +0900

    The behavior of statx(2) depends on the filesystem

    birthtime may not be supported on some filesystems, and
    NotImplementedError can be raised.  [Bug #15972]

commit e8a2521abecc6738c3480ec9b3d8c7b341cb576f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-02 21:39:22 +0900

    Adjust memory_status.rb under the tool directory.

commit 4d6c35d33a3f8a2ab29b3aabcf74be0bd9e7bf98
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 15:22:22 +0900

    Fix test-all substitution

commit 6ffef8d459e6423bf4fe35cccb24345bad862448
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 14:41:34 +0900

    Clean up temporary expired cert file

commit 92dcee393acc33075b533a2e8f5ea24ee8a5f579
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 14:10:50 +0900

    Clean up temporary directory for racc

commit eb043c88881bfa968a289b095518ec196edd47ad
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 11:46:58 +0900

    ${} does not work with nmake.exe

commit 0b858425e1e4f2de40dc0d8e5dd105a2fd93e478
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-02 10:40:17 +0900

    Use GitHub ruby.git for make-snapshot

    Previously @hsbt disabled https git clone from git.ruby-lang.org.

    Using git.ruby-lang.org for non-commit purposes is discouraged. GitHub
    mirror is actually recommended because it's reliable than single-hosted
    git.ruby-lang.org, the mirror is almost always well-maintained, and its
    latency is very small (usually about 10s).

    So we should just use GitHub here.

    [Bug #15969]

commit 7f3bc3529b3edb5512a32cda0ae8fe108af0beed
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-02 09:48:17 +0900

    Adjust jit_support file path.

commit c6a131da64a949c3148565f0bfd7777f5a4a309c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 09:49:57 +0900

    Removed test-almost from TEST_TARGETS

commit 6e7e0bf25782644b4093e9bc957cbb08ca7ba99c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 09:45:29 +0900

    Now test-almost equals to test-all

commit 580b7600c726c5293351e695bf6cf50339ef939b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 09:44:37 +0900

    Substitute autoconf variables by prereq.status

commit 832b5094722477598c7f720584fb54c4b2f18228
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 09:43:33 +0900

    with_different_ofs.rb has been moved too

commit 83fed5a4edc56f045ca698118af5ba58fce155a0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 09:37:10 +0900

    Adjust minitest file path

commit 934a3a926cfbed57bede5ffd018feda9a110381a
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-02 09:34:08 +0900

    Prefer master rather than trunk in doc/contributing.rdoc [ci skip]

commit 73923bf58305204d77c929670ee5dace2c95a6da
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-02 09:26:18 +0900

    [DOC] Add LibreSSL [ci skip]

commit b7fdeedbfd5d9f5250df7769837aee35a2362faa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 09:31:32 +0900

    Renamed to get rid of name clash

commit 5aed62454cec6556d476347f13947f83f6f7de4b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 09:26:11 +0900

    Adjust minitest file path

commit 4adfd5227f4f62c4e571d31e8bb07c40402f73b8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-02 09:20:18 +0900

    Removed needless exclude option related testframework.

      They are moved under the tool directory now.

commit f47254d2162a95174ab7d1659bf6ec5a933bd0ca
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-02 09:19:38 +0900

    colors file has been moved from test to tool

commit 897b1e05623996ea1003c812e7705a2d197464b3
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-02 08:00:29 +0900

    Fixed the wrong path for COVERAGE.

      ref. c3c0e3f5c9444c197779cb242de46dfffda79dec

commit c68781e9181cb43af1bac29b3c974887205c3bf3
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-07-01 21:05:55 +0900

    Split test files for test-framework that are test-unit and minitest to tool directory.

commit c3c0e3f5c9444c197779cb242de46dfffda79dec
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-29 19:43:47 +0900

    Move to tool/lib from test/lib.

commit 142617c8e1cad65fa483c5beb78ab40a99626a87
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-02 07:33:13 +0900

    Don't use native realpath(3) on Solaris

    CI shows it does work on Solaris 11, but does not work on Solaris
    10.  However, until I figure out a good way to differentiate
    between Solaris 10 and 11, this should get CI passing on both.

commit f53d7e4bfd604be6f8131c5460c29f4af16da117
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-15 08:53:42 +0900

    Raise TypeError if calling ENV.freeze

    Previously, you could call ENV.freeze, but it would not have
    the desired effect, as you could still modify ENV.

    Fixes [Bug #15920]

commit 93328b5237c515878dacfa7350688b016333225d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-02 04:14:17 +0900

    * expand tabs.

commit 11c311e36fa6f27a9144b0aefe16bdffea651251
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-28 12:18:55 +0900

    Use realpath(3) instead of custom realpath implementation if available

    This approach is simpler than the previous approach which tries to
    emulate realpath(3).  It also performs much better on both Linux and
    OpenBSD on the included benchmarks.

    By using realpath(3), we can better integrate with system security
    features such as OpenBSD's unveil(2) system call.

    This does not use realpath(3) on Windows even if it exists, as the
    approach for checking for absolute paths does not work for drive
    letters.  This can be fixed without too much difficultly, though until
    Windows defines realpath(3), there is no need to do so.

    For File.realdirpath, where the last element of the path is not
    required to exist, fallback to the previous approach, as realpath(3)
    on most operating systems requires the whole path be valid (per POSIX),
    and the operating systems where this isn't true either plan to conform
    to POSIX or may change to conform to POSIX in the future.

    glibc realpath(3) does not handle /path/to/file.rb/../other_file.rb
    paths, returning ENOTDIR in that case.  Fallback to the previous code
    if realpath(3) returns ENOTDIR.

    glibc doesn't like realpath(3) usage for paths like /dev/fd/5,
    returning ENOENT even though the path may appear to exist in the
    filesystem.  If ENOENT is returned and the path exists, then fall
    back to the default approach.

commit 81fe82be4e5040b314717e8d6f9ba12de222b6e6
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-07-02 03:44:12 +0900

    Enable native fiber coroutines on i386-openbsd

commit 005dadf3c113226d18b6c63ffbe9cb00419bf797
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-02 03:35:08 +0900

    * 2019-07-02

commit 776759e300e4659bb7468e2b97c8c2d4359a2953
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-02 03:34:08 +0900

    Keyword token that follows EXPR_FNAME must be a method name

commit 7ff2bfed92f8017184963eaac13e75cfb5ce5d4a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 23:16:47 +0900

    Alias "master" and "trunk"

commit f2769ae2c9f5c5a902584282f1e512437db1f395
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 23:04:26 +0900

    Default branch name to "master"

commit acee9384840e8c75b0fd406180671df58d049c88
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 21:32:02 +0900

    Default ASMEXT

commit f28450c118beadc636db9edd150695a8d237fd0f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 21:31:18 +0900

    Substitute suffixes with dot

commit 76851381cb18a62f3a75720f868ac147e4c1c51c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-07-01 21:14:50 +0900

    Show "-" if indent level is negative

commit 90c51ca39170030b2ea0611bcbb435b76915a287
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 20:45:53 +0900

    New indent must be non-negative number

commit babaad1065b1e45614d03e30f82c9007cc115b7c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 20:05:06 +0900

    Use configured ASMEXT

commit 7f4f40ab31f79e0ab0196b9c11b942d475ff1fcd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 17:09:08 +0900

    bootstraptest/runner.rb (show_limit): defer messages unless verbose and a tty

commit 70dcf5b368bfeee9bc054895fc046bf69d32aa91
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-01 16:25:56 +0900

    * expand tabs.

commit 78ee2c245331e353e218b8fac9ca722a2bcd8fea
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 16:20:03 +0900

    marshal.c: check instance variable count

    * marshal.c (w_ivar_each): ensure that no instance variable was
      removed while dumping other instance variables.  [Bug #15968]

commit 0b1e26398e018116180bf41cb63887f77d5d1b82
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 16:18:51 +0900

    Hoisted out w_ivar_each

commit c9423b016cfeab852bc5a829e55e0a11f80b3ab7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 15:02:27 +0900

    marshal.c: check instance variable count

    * marshal.c (w_obj_each): ensure that no instance variable was
      added while dumping other instance variables.  [Bug #15968]

commit 77a073239c207933e8a2562b51a206aa58dc66b4
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-01 14:00:37 +0900

    * expand tabs.

commit 99dc885974bfe637f3e74f52efdbbf77d66d0d68
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 13:56:55 +0900

    Fixed inadvertent ID creation in rb_iv_get

commit 6982a9049ede1386fdfa10734f953867824ebe05
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 13:01:31 +0900

    Assert obsolete method warnings in IPAddr

commit fe03bbaf3405b9e45bb3504fab5f4195ec6c3630
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-07-01 10:16:47 +0900

    bootstraptest/runner.rb (show_limit): show dots only when printing to a tty

commit dbe834ab5ac4f90df5db9fc314b45890726cca3b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-01 01:04:40 +0900

    Prefer master rather than trunk in README [ci skip]

commit d3d903cb5ff8a154d14aac1416815ce61affb335
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-07-01 00:47:55 +0900

    [DOC] Fix typos [ci skip]

commit 3d1536e61812dab1f4c226eb60356fd238ab6bb8
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-01 00:24:10 +0900

    Build AppVeyor only on master

commit f13fb814e0343b5c09afe0c6d3114ee24b84d295
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 22:49:56 +0900

    Return the result of the block given to assert_warning/assert_no_warning

commit 51b2b605e78a160790c6d751b2907b836b39561c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 22:49:10 +0900

    Call deprecated method only inside assert_warning block

commit 9cb58f1698b4a11af24d1129eb6b85d27e0a7145
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 22:48:39 +0900

    Suppress unused variable warning

commit fc4abbfcd014d9bd281bea7ebec30aabe243b410
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-07-01 00:15:04 +0900

    * 2019-07-01

commit 35cf3e8904efa54098c1f904de93167a17d8d313
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-07-01 00:14:11 +0900

    The default branch is changed to master

    and now Travis should run on master, instead of trunk.

    (this is testing git push to master branch)

commit c5eb24349a4535948514fe765c3ddb0628d81004
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 21:23:54 +0900

    [DOC] update target_thread to TracePoint#enable

commit 8640153e59a106ab2331effc33dcf03415a7e89c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 21:21:06 +0900

    Added test for require-return hook

commit 1eca2f3ca936cfdbce7b82342f5903b7d16e9bc1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 21:20:16 +0900

    TracePoint#__enable requires 3 arguments now

commit 62e66b8e180e17475a79fbdbdc36a33e488e4fe9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 21:15:56 +0900

    Allow dtrace without pty, i.e., with miniruby

commit b89f6ac843d9abbe8488bd329e0ff0cccf5caaa3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 21:12:15 +0900

    Check for the privileges by the current process groups

    Group membership of login user is not activated until login after
    adding to the group.

commit 3b86ec22515853665c353f2fb14e5bdb10b2e65b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 18:41:17 +0900

    dtrace: check for the command availability with sudo

commit 126cf11d338d6ca8b78a5a425652167d8aacc222
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 20:19:21 +0900

    Producer threads check is the primary condition

commit 75129c62ebfcd67f08262a6f755e5c899e8ebaee
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:56:30 +0900

    Suppress "statement not reached" warning

commit cc680846529b1bb00cded40705e0de696f78b0f9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:55:50 +0900

    Suppress method redefinition warnings

commit 5f736d431951baa2c6e5113322092f7f85d03ae4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:54:21 +0900

    Suppress "literal in condition" warnings

commit 4a063546e7de9ddb424fdf822e69bb3ffeb50631
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:52:31 +0900

    Suppress unused literal warnings in verbose mode

commit 3620568d3ac0533b050985d7c3c4ca871d464fd6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:51:09 +0900

    Suppress void context warnings in verbose mode

commit c400c0b4a00706a0da33664c1898e15f1aba0eec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:46:58 +0900

    Skip instead of return

commit b43d6e570980a4f5d6f4c20de29024dc5df93472
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:46:21 +0900

    Fixed non-working test

commit 8fe359086484cd322704e57fce25ef8c41d949a8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:44:15 +0900

    Fixed ClosedQueueError by a timing issue

commit 44eca1b22f96a3140d11d95f89948cbdae08daee
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:40:55 +0900

    Reset the result between assertions

commit ad3820886b8bd13bb6dbb784ba999b26ac65461c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:40:23 +0900

    Fixed an assertion

commit 409b0ec4c3c4878c0ba164d1303de67787157808
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:34:41 +0900

    Suppress unused variable warnings

commit 84837e6d16cb0e588b1acc2691cb1048b9a89989
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:33:24 +0900

    Wait for the helper thread to terminate

commit 41012f2e2b71fddc9acf8a50d887707c44ad8f88
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 09:30:21 +0900

    Add parentheses to suppress warnings

commit 78a8888c3eb6377218e8d3ec94a162c2c20eef82
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-30 10:56:42 +0900

    Hoisted out f_rest_marg

    * parse.y (f_rest_marg): extract named and unnamed rest parameter
      in parenthesized method arguments, and should not be warned as
      unused.

commit 81e8830a76303db80499d44b9c600a575f86d4df
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-30 08:50:35 +0900

    * 2019-06-30

commit 45ba027d086a04e09ed6ad48c5ac78e61f1174c4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 21:19:01 +0900

    Removed unused variables

commit 9f648262f9372cbf21754a411a68e178f0fd8feb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 21:45:59 +0900

    Fix predicate to assert if object is same

commit cbb7dc21a823e8b09341860d8737ed24ee1ce1b8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 19:17:51 +0900

    Fix predicate to assert if object is same

commit 792d1deb949e8416d7a76d66771b286d35c8278d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 19:07:25 +0900

    Escape control codes in regexp warning message

commit 27723b699b5fbad49a7bb16936d5a7d8e80376ba
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 18:45:24 +0900

    Should not warn massign parameters as unused

commit a17fba6989d6f183275f0d9fa9dc0e43781bfe54
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 17:55:22 +0900

    Remove old TestTimeTZ::TZ#abbr attribute

commit 7ba14b029c64c7f9ef080f5b22065b662145d5d5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 17:52:57 +0900

    Add max option to TestProtocol#create_mockio

    * test/net/protocol/test_protocol.rb (TestProtocol#create_mockio):
      max option to limit maximum writable size at once, and unify
      mock method in test_write0_multibyte.

commit a88107c44dd08b02ed1c1b5951882b070a1eab93
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-29 10:17:37 +0900

    * expand tabs.

commit 2f6cc15cdb3d64135b29cfd5ee376a5a03ebbee7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 10:10:17 +0900

    Fixed String#grapheme_clusters with wide encodings

    * string.c (get_reg_grapheme_cluster): make regexp from properly
      encoded sources for wide-char encodings.  [Bug #15965]

    * regparse.c (node_extended_grapheme_cluster): suppress false
      duplicated range warning for the time being.

commit 8aecc90974ab1ac87056f77e2cb3406c5c041504
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 10:02:04 +0900

    Hoisted out WIDE_ENCODINGS

commit 14da3009f029b9bec5591fb1557c13de8b708c18
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-29 08:12:36 +0900

    * 2019-06-29

commit ede056909bf20356928a28a6165b31e6c8cb6687
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 01:31:52 +0900

    Set file name and line number

commit d12d53a6c8d959687d4ecec54501f3b13a806941
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-29 01:30:43 +0900

    Adjust caller's line number, expect the next line as here-doc

commit 2bb217bfb7703ba923d0e1d69b2f2dddb66cc7d6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 18:31:42 +0900

    Removed unused variables

commit d233f9175cdb869a1928234f9c24a9d5d13f437f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 23:17:19 +0900

    [DOC] Re-apply r11000, 41256fd43275c8bf66460510da7ab958a802e2a2

    * eval.c (rb_thread_kill): fix Thread#kill docs, which returns
      the thread object in all cases.

    From: why the lucky stiff <why@ruby-lang.org>

commit c718f56ed9e07f66b6d476d16c2eea81e15c37d2
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-28 22:25:35 +0900

    Remove auto indent of continuation line

commit 8ec877d18361054d943fdf57f89b68f4e201d2c4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 17:09:18 +0900

    Add parentheses to suppress a warning

commit 3dba16a5d6195a673537519edb024ef1d29f7715
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 17:08:47 +0900

    Test string content

commit 5331932cd22f4dab84196eca55a05264dc0b84d7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 17:08:21 +0900

    Removed unused variables

commit 8d04f90da486a34f54589c2835518b1d720a4253
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 17:07:17 +0900

    Fixed a variable name

commit e9bce55c12f87d783c651d415b6b79beeeb79737
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 16:02:47 +0900

    Removed excess spaces

commit 566e6b0546633f3da4f868c3a217bc3167008fdf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 16:02:03 +0900

    Fixed name conflict between helper classes

commit 35b7e8eed8ad8ac111d099eafd5a6ac1561fbf44
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 15:26:54 +0900

    Skip instead of return

commit f8b528ba92b5cc4b84e8966dd5d5a072d076c1d1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 15:26:25 +0900

    Suppress unused variable warnings

commit 11571b0e95346691e634781f281b92c75608955c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 15:25:12 +0900

    Use assert_separately instead of invoke_ruby

commit e0c4cb2ea1ac648bdd0850dd1621f5e13382b760
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 15:22:27 +0900

    Define singleton method on each new objects

commit a0c141b6d04482ebfc4b3abf3f00a476d073226a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 15:09:14 +0900

    Suppress redefinition and void context warnings

commit f8b64e5f2cea508d1ea93966e2039b394715bae7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 15:04:25 +0900

    Use assigned local variable

commit c52dad0ecf0b8d87afb570d7dde508fe78d145d4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 14:51:23 +0900

    Wait for the helper thread to terminate

commit 023360ee4b1954a54b4d87d21cfc0eb5d662d5c5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 14:37:52 +0900

    [DOC] Singleton.instance [ci skip]

commit 2d1728b9cede877ac45f5760ebf214d25685b285
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 14:23:22 +0900

    Moved Singleton.instance to get rid of redefinition

commit 951f80f2dde2f22eab3acf53101e4c912cb60bb2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 14:09:02 +0900

    Removed unused variable

commit ef45fd53e47975f94661ea71ce78a1c1fa442bcb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 14:08:29 +0900

    Fixed the test-case class name for zsh

commit be14f62cafff30a6127c6ff533fec6de232ba7dd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 12:41:03 +0900

    Default @debug to $DEBUG

commit 4562dad94c6af3db5af8704b0aec64119456275d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 12:36:03 +0900

    Removed unused variable

commit 7eaedda557f689087861e6c0e7c9abca8cd92fc1
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-28 12:37:36 +0900

    Use block instead of explicit close

commit 5627f744ccb5fe5f9611f99e641d35e844e0851c
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-28 12:37:07 +0900

    Add `require 'test/unit'`

commit 3120252f010b979b633f0757ea7e145ccdc224fd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 12:33:24 +0900

    Suppress void context warning in verbose mode

commit dc7da30bedd48d2ba38ce9cac05e378f0c823b50
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 12:31:21 +0900

    Close leaked file descriptor

commit c9bbcaccf28c2a374f6530a36355b6d6f16e25cc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 12:27:11 +0900

    Suppress unused variable warning with RUBYOPT=-w

commit ff7f71b28889e043798dddfec568083cc7db204a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-28 12:02:33 +0900

    O_EXCL has no meaning for fdopen

    "exclusive access mode is not supported" exception has resulted in
    empty "rubyheap-*.json" files after test/objspace/test_objspace.rb.

commit 14b0c94ac38c40459d908fd4c5778efa60e4689f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-28 08:57:19 +0900

    Fix documentation for Net::SMTPServerBusy

    Fixes [Bug #11628]

commit a2091c3023a6741049d20beffbe8c94c2d5f4732
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-28 04:21:33 +0900

    Update to ruby/spec@94d98ff

commit 632a97227e0821bd7bedcf3f053b16e6b0b753fa
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-28 04:04:45 +0900

    * 2019-06-28

commit d80e44deec77678fe2d72f94c17b2409b3e794d5
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-28 04:02:36 +0900

    Update to ruby/spec@8d74d49

commit c940397116c5aef76b1c0d05561c11d43ef596a7
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-28 04:02:33 +0900

    Update to ruby/mspec@ca2bc42

commit 310a42e89c431f9650c6727f934f35c5e6f9a6cc
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-27 22:32:26 +0900

    Explain rubyspec Travis job in job name

    Eregon did not want https://github.com/ruby/ruby/commit/7b9dd379bfe4d597acfe4c26365feff61dabd488
    because people only see Travis job name and don't see .travis.yml.

    I believe the new job name is simple and informative enough to explain
    why it exists.

commit 1f7cb4bee9f711d07a5b31f439f621a2557e7505
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-27 17:18:24 +0900

    Omit `EXPR_` prefix to show lex_state

commit 9247f6fcc066280ca62f2fdf2902bb72c7880f44
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-27 19:06:39 +0900

    Expand and clarify documentation about version guards for specs

commit 2c02d5714e401159f0221d3c2d461bc79db61e3a
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-27 18:57:23 +0900

    Add a comment explaining what to do if specs fail on Ruby 2.4

commit 7b716bc52a5d4d000a0cee0841109c243cfcf6db
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-27 16:57:31 +0900

    Show the parser states in pretty_print too

commit 2fd03fd7e651d5f0bf78e315eafdde5468c1de53
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-27 16:03:43 +0900

    EXPR_LABEL also indicates non-continuation line

    Example:

      [
        1, # this is not continuation line
        2
      ]

commit 097554855c1a9404f3220bcc5c1906cc62399b59
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-27 15:16:15 +0900

    Fix ripper fatal

    * parse.y (parser_yylex): return END_OF_INPUT at unterminated here
      document instead of an error.  [Bug #15962]

commit 2a56702eeea5a571eaa2af15967c6535395e83a2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-27 15:13:45 +0900

    Test for unterminated here-docs

commit c86a9e6592c2cb37734cf29d81a8f9d26a4340b3
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-27 11:17:03 +0900

    bc mode is already removed [ci skip]

commit d6bcf367936e92b8662dce969bc6b48ae2112d45
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-27 10:59:08 +0900

    EXPR_CMDARG also indicates the end of an expression

commit 7172ab0ec523fd190f661f52e999307d2e34429f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-27 07:21:59 +0900

    Use native coroutine implementation on OpenBSD-amd64

    When using native fibers, do not load ucontext, as it isn't needed.

commit 24c4e6dec109e105c13bd4c1b7f7cd51e534a3c3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-27 01:25:22 +0900

    Increase indent of continuation line

      v =
        3 # auto indent

commit df3c94712be83982301abaf49942052f0e6ae0fe
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-27 01:21:53 +0900

    * 2019-06-27

commit 72bfc52de67d774316ca872a036476aa51886ab0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-27 01:20:44 +0900

    Decrease indent by closing token correctly

commit d004989ac6355bcf2840ed190aae139c3a852848
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-26 23:53:54 +0900

    Do not attempt to use ucontext for fibers on OpenBSD

    OpenBSD does not support ucontext.

    There may be a more generic way to handle this, using the result
    of AC_CHECK_HEADERS(ucontext.h).

commit 1235e054eb100fcd75f03d2f22dbbd4952bbaf31
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-26 21:44:42 +0900

    [DOC] Add spaces [ci skip]

commit d9a055a721f838fb5ed159fdd14497407dfad765
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-26 21:44:20 +0900

    [DOC] Fix svn account [ci skip]

commit acb67472c7da459812aa9008cf8cfbedcdddea67
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-26 19:02:19 +0900

    Restore updated implementation of arm32 coroutine code, but prefer ucontext.

commit ba17127e992a4d1fb1fbd58869cbb4f12ff76227
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-26 18:41:42 +0900

    Decrease nesting level when closing token comes at a non-first token of line

commit 28eeaed8a9ec2557e8f8d42d8ab3e7cad310a8a9
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-26 17:22:46 +0900

    Revert "coroutine/arm32/Context.S: save/restore the registers via stack"

    This reverts commit 6df1814c08df93bbc0b3e7a73649bcf82e126064.

    It caused a SEGV again:
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190626T051707Z.fail.html.gz

commit 6c6bf9ffcbfeb8be9d9c342e7604b74ec819e88a
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-24 20:54:19 +0900

    Add `ucontext` coroutine implementation for generic fallback.

commit a84a99ffabf04d90be64ff28cf2e11766f6cce52
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-26 16:01:45 +0900

    test/ruby/test_array.rb (test_sort_with_replace): run in a subprocess

    This test invokes GC.start 100 times, which takes approx. six minutes in
    Solaris.  This change runs the test in a separated process, which makes
    GC.start faster.

commit 04bc4c0662344238a556aa92f5f8f6d42586bab3
  Author: John Hawthorn <john@hawthorn.email>
  Date:   2019-06-26 01:01:57 +0900

    Resize capacity for fstring

    When a string is #frozen, it's capacity is resized to fit (if it is much
    larger), since we know it will no longer be mutated.

        > puts ObjectSpace.dump(String.new("a"*30, capacity: 1000))
        {"type":"STRING", "class":"0x7feaf00b7bf0", "bytesize":30, "capacity":1000, "value":"...
        > puts ObjectSpace.dump(String.new("a"*30, capacity: 1000).freeze)
        {"type":"STRING", "class":"0x7feaf00b7bf0", "frozen":true, "bytesize":30, "value":"...

    (ObjectSpace.dump doesn't show capacity if capacity is equal to bytesize)

    Previously, if we dedup into an fstring, using String#-@, capacity would
    not be reduced.

        > puts ObjectSpace.dump(-String.new("a"*30, capacity: 1000))
        {"type":"STRING", "class":"0x7feaf00b7bf0", "frozen":true, "fstring":true, "bytesize":30, "capacity":1000, "value":"...

    This commit makes rb_fstring call rb_str_resize, the same as
    rb_str_freeze does.

    Closes: https://github.com/ruby/ruby/pull/2256

commit fe0ddf0e58e65ab3ae3d6e73382c3bebcd4541e5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-26 15:01:01 +0900

    `ensure` is not a continuous line

commit 6df1814c08df93bbc0b3e7a73649bcf82e126064
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-26 14:08:10 +0900

    coroutine/arm32/Context.S: save/restore the registers via stack

    Retry of 518adcca0a and dbe232e24e

commit 51361272f9efca3eb0e1acb620ac62b576ddbb04
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-26 02:59:26 +0900

    Respect --dest-dir when removing old default gems

    Before this, tool/rbinstall would try to remove a gem file that
    it may not have access too.

    Fixes issue introduced in f550da512cefbe0283106ca839c4836a98efaf3a.

commit a3d1cacda634b83032f79774d9a0e9e0c9c24cc8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-26 08:43:08 +0900

    Decrease indent at "elsif" too

commit ea8bc6822da742f5818b13f444b5670a0e041dae
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-26 08:37:14 +0900

    Remove other debug prints

commit e478671e19e09bf50ceb52efa720a8c520d87704
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-26 09:23:02 +0900

    Added version guard for backtrace printing feature of psych to ruby/spec.

commit cfa1a1843167e9dc8404403d3a64a506c3d6ce92
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-26 08:07:58 +0900

    Remove debug print...sorry

commit 0f28094201d86d4bf8d5ecb6061abbbf5cea5076
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-26 03:18:08 +0900

    Improve wording of Local Variables and eval section

    As pointed out by nobu, "defined" should be used instead of "assigned".

commit 0aa8c3d88bb2f59bede47164a5da20600cce399e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-26 01:53:22 +0900

    * 2019-06-26

commit dd57442f74024af465a16b7e19a34d0fc8533a53
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-26 01:53:19 +0900

    * remove trailing spaces.

commit 0bd5f846df2f6268f653773e0cd4a20e2a944646
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-25 05:55:31 +0900

    Document local variable interactions with eval

    Fixes [Bug #13337]

commit 730aeb2523fadd816b07e0e5322fb79841efc709
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-25 23:31:49 +0900

    Revert 518adcca0a and dbe232e24e

    518adcca0a: "Try using arm32 implementation for fibers."
    dbe232e24e: "Order of arguments might be incorrect in arm32 coroutine implementation."

    It seems to cause SEGV consistently on Ubuntu armv7l eabihf:

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190625T081710Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190625T111708Z.fail.html.gz

commit 57e1a69ea38d30bc249553e5fe15295ae0f5af81
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-25 22:07:32 +0900

    Treat auto indent with newline correctly

commit 0b57f9b25d43c2efec8ac17c0c03ce9fa461937a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-25 22:00:29 +0900

    Decrease indent when "else", "rescue", "ensure", "when", or "in" come

commit 1cbc4f987656ac8d8ede6c7cd178ac8e6c2a909b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-25 17:20:01 +0900

    test/net/imap/test_imap.rb: use Thread#stop? to wait for server thread

    Still timeout occurs.  Retry for 5dd8fdd3f328f741fae4abba00c478e8a51d2a7e.
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-master/log/20190625T032405Z.fail.html.gz

commit d7887b05d810e7e3188d25ed91364d5850d92cd7
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-25 16:46:42 +0900

    Fixed broken ruby/spec related a53ab897c35586a836710a8afeb1e8c1abd9b087

commit 746812ee9645ff821a039136f9576b7c8f18b920
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-04-27 02:38:43 +0900

    Do not allocate a string to check if a scalar is an integer

commit 5a4d2b9f2f1cb5124a4dccc103c7bbe8d27554d5
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-04-27 01:57:03 +0900

    Remove string_cache in ScalarScanner

commit 63f78bbaaea4bb0b7009e50a938ef146416c53c2
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-04-26 20:26:14 +0900

    Reduce string allocations in scalar_scanner

commit 00d0ede84593aa18203fe33d1056ffb1b1aedf99
  Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
  Date:   2019-02-27 08:44:33 +0900

    Removed CHANGELOG from rdoc files.

commit 3c4fc830dd3f2c3e1e642f83072bead8189aec63
  Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
  Date:   2019-02-26 15:56:55 +0900

    Retired to write CHANGELOG.rdoc. Because It has no update from 2015.

commit 03dac55f90bd6b842ffe90b6bfa98af5c0897513
  Author: Aaron Patterson <aaron.patterson@gmail.com>
  Date:   2019-01-17 03:46:34 +0900

    Dump Hash ivars before elements

    When the Hash is revived, the ivars will be set before elements.  This
    is for the case when the hash setter depends on ivars set on the hash.

commit 0016edbead23f2a9b4fa17bcec2798b5bf6a4c07
  Author: Jordan Owens <jkowens@gmail.com>
  Date:   2019-01-16 14:29:12 +0900

    Add test to demonstrate issue deserializing hash with ivar

    Currently the elements of a hash are revived before any ivar values.
    This causes an issue when the `[]=` method references an instance
    variable.

commit a53ab897c35586a836710a8afeb1e8c1abd9b087
  Author: Aaron Patterson <aaron.patterson@gmail.com>
  Date:   2019-01-10 06:34:51 +0900

    Round trip exception backtraces

    This commit allows exception backtraces to round trip

commit f770a5be66412fcbdb238db950c80367100a257e
  Author: Aaron Patterson <aaron.patterson@gmail.com>
  Date:   2019-01-10 06:28:08 +0900

    Refactor exception dumping

commit 4bd190942710725a79ca61fb30cff152888b55d0
  Author: Aaron Patterson <aaron.patterson@gmail.com>
  Date:   2019-01-10 06:25:09 +0900

    Dumping the backtrace never worked, so remove it

    Dumping the backtrace for exceptions never worked, so lets remove it.

commit d118c84b0b9110462e479487ffaf175a75e5718e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-15 09:50:31 +0900

    Fix IO#scanf on pipes on Windows

    IO.seek on a pipe on Windows raises Errno::EINVAL instead of
    Errno::ESPIPE.

    Fixes Ruby Bug #15199

commit e572ff2f953b774c372e31894f7bf9e86b3ea6fa
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-30 23:21:45 +0900

    Require version file relatively

commit 083fda8490210e5fb0bcfb7c0b49ac3df8f49452
  Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
  Date:   2019-03-27 16:53:54 +0900

    Bump version to 1.2.0.

commit 9b23aab290c9f0cbbc795282c5e90b6581452b58
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-25 11:51:25 +0900

    Fixed the wrong path for io-console.

commit dbe232e24e56cb200b8e5b78062c8a2784a792e9
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-25 14:04:04 +0900

    Order of arguments might be incorrect in arm32 coroutine implementation.

commit e09afd15b797bc61a6ba93e3d1d32be11707404a
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-25 00:19:49 +0900

    * 2019-06-25

commit 9c19cd5222a09481f0dd2d6470db38717e551989
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-24 23:58:50 +0900

    Refactor calculation of corresponding token depth

commit 518adcca0a2c611c4a94eaa778f9dcec4aff03f9
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-24 16:09:16 +0900

    Try using arm32 implementation for fibers.

commit 4275f09015295a3f58dbe0aedede0d039f262499
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-06-24 15:56:18 +0900

    remove UNREACHABLE

commit 97b4fe2ff6bffe8728952236f2027aa6242f8f40
  Author: Luke Gruber <luke.gru@gmail.com>
  Date:   2019-06-24 04:28:22 +0900

    array.c: Wrong heap size given to ruby_sized_xfree when freeing shared roots

    Fixes [Bug #15953]

    Closes: https://github.com/ruby/ruby/pull/2253

commit 7f64a0b4db7ee27a04579236950d88301c7bcabb
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-06-17 08:50:44 +0900

    Add new encoding CESU-8 [Feature #15931]

commit 0e6396d2ac8bc3803742655896bb0fad70007dda
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-24 12:13:10 +0900

    Try using arm64 implementation for fibers.

commit abdbfebad11471e76e1e9756de7f9bc14bd30355
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-24 12:12:21 +0900

    Use spaces for indentation in `configure.ac`.

commit 5d4dfcd808c49c9542a5ccaa5ada58a81c4e9ae9
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-24 11:25:17 +0900

    * remove trailing spaces.

commit a071bed7a5041e3d3e7029f73c3f09a9f6cdfd98
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-24 11:24:49 +0900

    Print warning if not using native coroutine.

commit 0b36c90e122a3687ce1049eedae623d77fa808bd
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-24 10:24:51 +0900

    * 2019-06-24

commit edbad4adcc080fc7eada5ea367f0a61035a8d7cf
  Author: masakazutakewaka <takewakamma@gmail.com>
  Date:   2019-06-20 03:22:52 +0900

    httpstatus.rb 100% coverage

commit c6229e7c692056940b1aec8af133e87883a76890
  Author: Rob <mail@robfors.com>
  Date:   2019-03-31 02:28:22 +0900

    Adds WebAssembly MIME type

commit 11a60f9bdb486b5173946a7eb11b41e5f75a28cd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-03-09 19:53:51 +0900

    Remove extraneous spaces at the end of status line

    Remove extraneous spaces after the status code that is
    non-compliant with RFC, i.e `HTTP 200 OK `, to unnecessary
    confusion for WEBrick users, by a risk that WEBrick instances in
    the wild will have server responses flagged as suspicious or
    malicious due to a similar bug in [Cobalt Strike
    misconfiguration].

    Reported by Matt Tennis <mtennis@paloaltonetworks.com>

    [Cobalt Strike misconfiguration]: https://blog.fox-it.com/2019/02/26/identifying-cobalt-strike-team-servers-in-the-wild/

commit 97a7f463f683774f054f9d7dafc3756aad39dd1c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-23 23:12:47 +0900

    Max length of UNIX socket path is 104 bytes on macOS

commit 50b2807a7cc74dc1772496986ee2f3efef85a5db
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-23 23:10:16 +0900

    Do not lengthen UNIX socket path

    * spec/ruby/library/socket/unixsocket/recvfrom_spec.rb: do not
      lengthen UNIX socket path, which is very stricted.

commit bdcfba547df70d61abb8db10c32f56f9508f6da5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-23 18:28:32 +0900

    vcs.rb: handle --dryrun option

commit 096a45d3d2c6ab0c40ec2d41bdb3a26cda091e6b
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-23 22:28:23 +0900

    Update NEWS.

    - Add note regarding IA64 removal.
    - Add note about Thread allocation performance improvements.

commit 5a187e26adc8aa32367f294c1496935c7356d386
  Author: Luke Gruber <luke.gru@gmail.com>
  Date:   2019-06-23 11:22:23 +0900

    array.c add back shared array optimization to ary_ensure_room_for_unshift

    Bug fix in commit ec8e5f5aa64e2a [Bug #15952] disabled an
    optimization in this function.

    Closes: https://github.com/ruby/ruby/pull/2252

commit ec8e5f5aa64e2a54cf1e303f2b012c98e8d521ba
  Author: Luke Gruber <luke.gru@gmail.com>
  Date:   2019-06-23 07:37:08 +0900

    array.c: always check frozenness in Array#unshift. Fixes [Bug #15952]

    Closes: https://github.com/ruby/ruby/pull/2251

commit 3840791b7ebb2442724d96c69a791d0e678fbc6c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-23 07:56:43 +0900

    Get rid of error with frozen string literal

    [Bug #14194]

commit bebe8d13f8e14dffa9d1828f6e9805773dc30518
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-23 07:42:11 +0900

    Disable frozen-string-literal to disable deduplication

    [Bug #14194]

commit 2ad7a7f801c07f18150116b819530840eeefebf8
  Author: MSP-Greg (Greg L) <Greg.mpls@gmail.com>
  Date:   2019-06-23 07:33:15 +0900

    Get rid of error with frozen string literal

    [Bug #14194]

commit aa2f505825a914d1c5480d4e92696a1fa1ad0887
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-23 02:49:39 +0900

    Make autoloading_const_entry static

commit c5c3486340b67b6f6f6f980f2c3fa76780561767
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-23 01:47:40 +0900

    * expand tabs.

commit ef524c13d96c645fd00c17267a553275adb0b106
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-23 01:44:07 +0900

    NEWS: Module#constant_source_location

    [Feature #10771]

commit 93843830198ba436e2ea21a60a11758d47cf521b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2018-12-13 21:49:05 +0900

    Module#constant_source_location [Feature #10771]

commit 5084233b88cc48a74b58690423df1129668d5706
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2018-12-13 18:27:32 +0900

    Split global search for module

commit 151843b9816b52b1ddb1e9b2040991a7de4173c6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2018-12-13 18:12:07 +0900

    Hoisted out autoloading_const_entry

commit c033dc3073839e3578f1ba25d53b837974b56474
  Author: Luke Gruber <luke.gru@gmail.com>
  Date:   2019-06-23 00:25:52 +0900

    Fix issue with Array#rindex when rb_equal modifies receiver array

    Fixes [Bug #15951]

    Closes: https://github.com/ruby/ruby/pull/2250

commit fd9ac1e76bc8b347ad55fdf5991839c1df4e891a
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-23 00:37:11 +0900

    * 2019-06-23

commit f3c81b4e90ec492382e299573f2c3ac272adbb5f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-23 00:31:16 +0900

    Frozen objects in WeakMap

    * gc.c (wmap_aset): bypass check for frozen and allow frozen
      object in WeakMap.  [Bug #13498]

commit f5e29044710e74249e89bbb0f112dc22e5b91398
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-22 23:44:19 +0900

    Use EXEEXT

    * test/lib/minitest/unit.rb (MiniTest::Assertions.diff): use
      `EXEEXT` configured value instead of switching by hard coded
      `host_os`.

commit f738eeabc251c556feda1f9f22c060dac85054e1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-22 23:38:07 +0900

    golf_prelude.rb: suppress the redefining warning

commit bad66f3e369810e1cca90493830d5e06485c3c30
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-22 18:39:06 +0900

    Show timed out threads

    * test/lib/test/unit/assertions.rb (assert_join_threads): kill and
      show timed out threads.

commit 4d650bc25737a4d2c0dcc9d4c845688cb5dc85ce
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-22 09:29:33 +0900

    Fix over-expansion

    * test/lib/minitest/unit.rb (MiniTest::Assertions#mu_pp_for_diff):
      do not expand escaped backslash followed by 'n'.

commit d01fd821875b989affc36e54e98f5dd67f47062e
  Author: Kenichi Kamiya <kachick1@gmail.com>
  Date:   2019-06-21 12:28:28 +0900

    Alias ENV.merge! as ENV.update

    [Feature #15947]

    Closes: https://github.com/ruby/ruby/pull/2246

commit 3b2d11ad90fcb64b41acc9006dfd1e40b4bd9000
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-22 01:21:16 +0900

    Use different names for autoload constants in specs for clarity

commit e5e811e4a04482a5ad764fbb2b792ee5fbdd7195
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-05-07 19:52:24 +0900

    Add extra spec from https://github.com/ruby/ruby/pull/2173

commit 2f2fc939eb13af9baa325f154872f60cdeff973c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-22 01:16:23 +0900

    Always define RUBY_RELEASE_DATETIME

commit c79131df283b6291029e96fbb5d1943aa26dc1c1
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-22 00:31:30 +0900

    Treat closing token with starting token at head of 2nd line correctly

      v =
      if true # starting token at head of 2nd line
        3
      end # closing token

commit 5e2088665b938cd68587999f4d105331cd1feeea
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-21 21:57:19 +0900

    Do auto indent only when closing token at first of line

      if true
        3; end # this isn't auto-indented

commit d1fa0f61918063717bba6bab15932ec69c655b81
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-22 00:03:27 +0900

    * 2019-06-22

commit 8a1dd9b84b02737cf43e62439730caec678cccf5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-21 23:45:39 +0900

    Revert RUBY_RELEASE_DATE to date only

commit 1c7e303b26090205f393595f15dadddd4b2d31b6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-21 23:03:36 +0900

    Constified unusable chars

commit 551ef27490bf380e46453846c040b48596f34a6a
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-21 22:48:50 +0900

    * expand tabs.

commit 8f51da5d41f0642d5a971e4223d1ba14643c6398
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-21 22:42:14 +0900

    Get rid of undefined behavior

    * string.c (rb_str_sub_bang): str and repl can be same.
      [Bug #15946]

commit 50841eca43d2840df54804392afa67bca5f53c0f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-21 21:31:56 +0900

    Support irregular auto indent

      v =
        if true
          3
        end # this "end" is auto-indented correctly

commit 38ccb8f74753c6c3d3e47ab612691bd01148eb90
  Author: Shugo Maeda <shugo@ruby-lang.org>
  Date:   2019-06-21 18:02:24 +0900

    Remove a duplicate test

commit 16729f64306941a2662c8361d452e86998fc1239
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-21 17:53:32 +0900

    Remove duplicate functions

commit 432b28af9017c91a8032c532e9ddbe11c2d33845
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-21 17:43:21 +0900

    * expand tabs.

commit 702cf3ec9051914c8ef5a353580e0e74f7ec7005
  Author: Shugo Maeda <shugo@ruby-lang.org>
  Date:   2019-06-21 17:27:20 +0900

    Enumerator::Lazy should support filter_map

    Fixes [Bug #15949]

commit 35392ff0a00934ec02558305b7be8dffe6420d30
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-21 17:40:28 +0900

    Fix an example [ci skip]

commit c997f7daaa833ec02a852913925b361cd94fd2e8
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-21 17:29:08 +0900

    * expand tabs.

commit 5b7cc63d114fbca641ce2d93c7b3f2117e38af60
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-21 17:21:34 +0900

    Turned `recur` into `int` [Feature #15777]

commit fb85a428605265a8fd449b0702a4dd88cb6f3b20
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-05-07 19:52:24 +0900

    Add an optional `inherit` argument to Module#autoload?

    [Feature #15777]

    Closes: https://github.com/ruby/ruby/pull/2173

commit 887163beb8f27c5400cd04dbf98c474ed035526f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-21 17:08:42 +0900

    Fix call-seq of lazy.filter_map [ci skip]

commit 0174285e8cfea1ab7fa8dbbb6ab7607d74c20b9d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-21 16:31:42 +0900

    * expand tabs.

commit 06a622b76e20b8996cd6d66c11ac7819a0996fae
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-21 16:28:39 +0900

    Lazy filter_map

commit 4149fd60786527121d42e3d6f12d1447505d22fa
  Author: Espartaco Palma <esparta@gmail.com>
  Date:   2019-06-21 14:46:24 +0900

    Fix small typo on block_scanf example [ci-skip]

    Closes: https://github.com/ruby/ruby/pull/2247

commit fde842fec06b39f95eeed9ce095065d294fd2a65
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-21 03:19:42 +0900

    Clean coroutine and timestamp directories

commit 2ee1c762064d0ef78a22ca7e0eb63be4e0a93fa3
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-21 02:28:27 +0900

    * 2019-06-21

commit 4a5e07d8e17a0f62810f983114a88cb1011f971b
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-21 02:22:01 +0900

    Avoid verbose warning when using Net::POP3 with SSL

    Patch from Jos Kamphorst.

    Fixes [Bug #14822]

commit 93356576fec17b1c7cafd56fc4a633776cb8169f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-20 22:27:06 +0900

    Revert "Removed needless file with the upstream repository."

    This reverts commit 5bbfca7b1d4be89d4728203b4610de17bccbefd7.

commit 1f0762ad2194aef6457c6687e2e536bb695193bf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-20 19:27:27 +0900

    Suppress messages from mkmf

commit 9e7a8a4351de0690b3d531c4be4fbb6fc8f4f813
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 20:12:42 +0900

    Only ignore build directories.

commit f607e433520218ac2adc93fcf32bc3b797219a60
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 17:29:35 +0900

    Transition root fiber into state FIBER_TERMINATED.

    During fork, it's possible that threads with root fibers are terminated,
    but fiber state is not updated. `fiber_verify` will subsequently fail. We
    forcefully enter the FIBER_TERMINATED state when terminating the root
    fiber.

commit 3077cb6912033d18f4d34fd64011e9f8e9502b99
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-20 18:20:38 +0900

    Restore $VERBOSE

commit e31602b78d975741532b9e04a83fa5b67f85c31c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-20 17:41:01 +0900

    Suppress warnings

commit e6fbdde229fa07a59f372e4c9c297f9cb29cc0a8
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-20 17:40:08 +0900

    Fix a typo [ci skip]

commit 3aa8691d521519f0dc23d56be3b1fe633632720e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-20 16:10:24 +0900

    Added and update the racc entries on doc/*.

commit 557bcd877490092c826a56789d78dc73f8ad0321
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-20 15:59:20 +0900

    Added racc entry to NEWS.

commit 5bbfca7b1d4be89d4728203b4610de17bccbefd7
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-20 15:00:54 +0900

    Removed needless file with the upstream repository.

commit 71ebf6d8e5fa6ebc2f5f25c59c73a50f4c611b6a
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-20 15:00:40 +0900

    Update sync task for the directory structure of cparse and ignore JRuby files.

commit 45e939f5adcb3f16682e7a957d7ecf91edc005e4
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-20 14:31:41 +0900

    Added gemspec of racc generated from upstream for the default gems.

      1.4.16.pre.1 is the teemporary version. It may be changed 1.5.0 or others.

commit c4c47b792dc8360f2541a399e9fcf417d068eee3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-20 15:56:10 +0900

    Disable auto indent when move cursor up or down

    This commit suppresses a strange behavior below:

      if true
        1[cursor]
      end

    and press down key

      if true
      1
      end

commit e4cafa393f8fd4aa207f20b1d122884b4de99cf1
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 08:31:22 +0900

    Ensure that vm_stack is cleared in `thread_cleanup_func_before_exec`.

    If `vm_stack` is left dangling in a forked process, the gc attempts to scan
    it, but it is invalid and will cause a segfault. Therefore, we clear it
    before forking.

    In order to simplify this, `rb_ec_clear_vm_stack` was introduced.

commit c26c51449461e3c8ee9bb4e1800933fb3d3caf67
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 12:30:29 +0900

    Revert failed attempt at fixing invalid usage of vm_stack.

commit 7d9d1ed463323fe28f24d0b94212c2cb7ad109bd
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 11:55:43 +0900

    Don't clear cfp, it causes problems.

commit 15c4f6aed29b4f9f8d2c911548ac87756239b592
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 11:16:08 +0900

    Skip `rb_ec_clear_vm_stack` for now.

commit 199310997f40e0989f218d109b56d2e592494791
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-20 10:41:46 +0900

    * remove trailing spaces.

commit dbc2b89bc042d73e60aeb7d56686aa28d82e2622
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 10:41:18 +0900

    Ensure `vm_stack` is cleared after fork.

commit 6bf1285b2069ff736e283a1f8328852e3175fccc
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 09:07:15 +0900

    Fix typo in VM_ASSERT.

commit 626483721ae297ecb641a36b7bb39fc6d6490c82
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 08:56:06 +0900

    Set `cfp` to null (along with vm_stack) in `rb_fiber_close`.

commit 25049a6e818d879aecb88379753f1e215b915f93
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 08:32:08 +0900

    Extra assertions around thread.

commit 91c4ef01512d1ba285ccb3c3cb03e611257790e8
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-20 08:31:22 +0900

    Don't try to dereference NULL cfp.

commit a0af60c7f2d852faa6d3263874224dd7950bda43
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-13 23:55:26 +0900

    Remove spec testing undefined behavior

    Fixes [Bug #15432]

commit 208cc6e3d03cb95ec62a8515e4e79db183d30567
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-20 04:07:35 +0900

    * 2019-06-20

commit fdfe51d16984b80fe782cb434bba7aeb629c279f
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-20 04:07:31 +0900

    * expand tabs.

commit b9ef35e4c6325864e013ab6e45df6fe00f759a47
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-05 13:41:02 +0900

    Implement Complex#<=>

    Implement Complex#<=> so that it is usable as an argument when
    calling <=> on objects of other classes (since #coerce will coerce
    such numbers to Complex).  If the complex number has a zero imaginary
    part, and the other argument is a real number (or complex number with
    zero imaginary part), return -1, 0, or 1.  Otherwise, return nil,
    indicating the objects are not comparable.

    Fixes [Bug #15857]

commit 65944e96d39a8ae3602751f49cb337335b2c6c45
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-19 23:10:40 +0900

    test/racc/test_racc_command.rb: Extend the timeout

    test_opal, test_ruby18, and test_ruby22 are slow tests.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-ad7f67/ruby-master/log/20190619T105405Z.fail.html.gz

commit 2abe548f356756788db7f893b221938a5f775ccd
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-19 23:05:04 +0900

    Don't change vm_stack/cfp without acquiring gvl first.

commit ab6d8d0b65d42cb872707b330d6172beb8579e8b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-19 20:40:49 +0900

    Adjust indent

commit 659eda7f83a1c27e887f96c2e1bee687d363a187
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-19 20:33:24 +0900

    * expand tabs.

commit d17344cfc56edc4599252041b3ec0d46af0851fd
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-19 18:06:57 +0900

    Remove IA64 support.

commit 40f8c82b960041d29aba028cc9fe01177bdc4f84
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-19 18:35:09 +0900

    Partly revert directory structure for cparse.

      It break the some build environment.

commit b93508b32c8f11bd468a885745338eab259bd2cd
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-19 18:19:20 +0900

    * remove trailing spaces, append newline at EOF.

commit 754df262100cc5febda728111e134e0098bb05ac
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-19 16:08:55 +0900

    Added binstub for racc executables.

commit 2b4024da32018c7d63f3d051e8ece63ca3573077
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-19 12:34:34 +0900

    Temporary disabled to invoke assert_output_unchanged.

      Because some environment created the different results from test fixtures.

commit e892c2f924bb229ce4782d01ea0a5e2db5761f82
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-19 12:06:41 +0900

    Restore ruby/ruby change for extconf.rb.

commit d71032180021f4977978030b04a8d11ae5fb7337
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-02 20:50:42 +0900

    Workaround for the external file for racc test

commit 8a3bd06d277328cab362b0dffe99720fa5b09515
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-02 20:18:24 +0900

    use TEMP_DIR.

commit 4cca8c4d2021c90e351d0ee9000d448a9ed85e83
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-02 20:11:24 +0900

    Use Test::Unit instead of Minitest and fixed test error with ruby repo.

      Co-authored-by: Nobuyoshi Nakada <nobu@ruby-lang.org>

commit 2272d6ae24d4a059d57bd1b0c01587a934258084
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-02 19:56:57 +0900

    Restore test_dir and update prefix for Dir.mktmpdir.

commit 9ea1fc27a93c9a7a8f9aa2f8f61bc2529e93abb2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-02 19:17:38 +0900

    Try to use Dir.mktmpdir.

commit 4e218282d284c7d0ea1bf3db7e5febb2dd5884f8
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-14 21:36:59 +0900

    Added sync task for racc

commit c110b59af5d1b1065c9e247260579e6212cb7fab
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-14 21:18:57 +0900

    Fixed path for ruby core repository.

commit 1a2546c2be839baa7d0a50dc056d4d6987d26852
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-13 21:25:22 +0900

    Backport racc-1.4.15 from upstream.

commit cbe06cd3501fdadd0e6e63094da2973484d70b0b
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-19 17:39:58 +0900

    * remove trailing spaces, expand tabs.

commit 3e5b885cd271e42ba4cb39dc8e612714f88ec889
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-19 16:09:48 +0900

    Rework debug conditional.

commit cb5da39f20a17bd73e791dca1e7e1832f0adbc53
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-19 15:47:15 +0900

    Use shared implementation of `rb_ec_initialize_vm_stack`.

commit 714703805370767efb859078d5095a014417a692
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-19 14:07:15 +0900

    Update `stack_start` and `stack_maxsize` according to stack direction.

commit dee0cfbb4757ca954853de48814367c51f255933
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-06 12:02:35 +0900

    Specify that size is non-committed memory.

commit 561c9bcf3a1ce33e51c2c03e88aa3103d42f5af9
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-06 08:04:24 +0900

    Make sure `alloca` fast path is used (inline assembler).

commit 7cc7269b3d3e3aff518a6cd05971422351253957
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-06 07:25:08 +0900

    Use default stack size for worker thread (no th pointer available).

commit 9cb4e7725f668318d08cb79b1459a04eadf2f925
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-06 06:54:29 +0900

    Handle (empty) backtrace when thread is not born yet.

commit 5855af73b8d7233bcdb18b6dda5c0058cbc315bf
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-06 06:54:07 +0900

    Basic assertions for thread initialization.

commit 8121a523c3ea68898016ab3984b6c0240ff66995
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-06 06:53:25 +0900

    Use stack size defaults for win32 threads.

commit b8e4bea7806f481efab42f8d88ecba783c709042
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-05 20:39:17 +0900

    Track how stack was allocated for `cont_free`.

commit 4b3b781c66c48604a013557172540effd929f96a
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-05 17:52:07 +0900

    Ensure execution context is cleared after thread is finished.

commit 38791145ebc6890b97ea55ee490084c63b67f3cc
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-05 15:23:04 +0900

    Better handling of root fiber.

commit 7c7a1c221281cdba1f48d5e42ee2f9af306d27f8
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-05 10:53:19 +0900

    Fix handling of vm_stack_size and avoid trying to deallocate it.

commit b24603adff8ec1e93e71358b93b3e30c99ba29d5
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-05 08:18:50 +0900

    Move vm stack init into thread.

commit 69195fd9b26d4585ad0d13d45ce9fd7b7ebac154
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-19 14:53:52 +0900

    Show thread and fiber limits as part of bootstrap tests.

commit 3fd83cb6fcc483d2eac0795bc139c521a3a59bd2
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-05 13:32:27 +0900

    Improve benchmarks and tests for threads.

commit a6a4e86029f16415767b579e62691f09b1fb6075
  Author: Samuel Williams <samuel.williams@oriontransfer.co.nz>
  Date:   2019-06-05 13:32:06 +0900

    Ignore `/build*`.

commit e690df1f1ef4f791295448f9192d6e027400ee72
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2018-09-27 18:17:28 +0900

    Marshal distant past/future

    [Feature #15160]

commit 8797f48373dcfa3ff8e748667732dea8aea4347e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-19 14:03:02 +0900

    New buffer for shared string

    * string.c (rb_str_init): allocate new buffer if the string is
      shared.  [Bug #15937]

commit 148f50fc789d59319113a1fd2897dbe552e73e73
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-19 10:09:35 +0900

    Update homebrew on Travis

    because Travis is crashing like "Error: Your Homebrew is outdated.
    Please run `brew update`."
    https://travis-ci.org/ruby/ruby/jobs/547485832

commit 28678997e40869f5591eae60edd9757334426ffb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-19 09:44:26 +0900

    Preserve the string content at self-copying

    * string.c (rb_str_init): preserve the embedded content when
      self-copying with a capacity.  [Bug #15937]

commit d009e321a08d2ca401fceefa638e7e50872f5f54
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-19 09:19:41 +0900

    Use IRB.conf[:AUTO_INDENT] setting in multiline mode

commit c9729329862a979f2d07d7907c7a515dfcfb2ba4
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-19 08:29:23 +0900

    * 2019-06-19

commit 85ff2d74a217a02d050492e607b3a2764645107b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-19 08:28:00 +0900

    Avoid auto indent in prompt when dynamic auto indent

commit 84903b31c87b98083cec406745dc7e3088ba643b
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-18 21:56:41 +0900

    Fix auto indent crash when blank input

commit 32e65e9e5adbfb8b3d67e0ec0865a3f90d2e82dd
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-18 21:55:40 +0900

    Print starting debug message with RELINE_STDERR_TTY

commit af800b8ca25fc453da4e73b9e4628299605b5289
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-18 21:22:06 +0900

    Now test-bundler is not working on macOS either

    Let's stop reporting the failure until it gets stable.
    We can see the build status on console with this config anyway.

commit 235e72f17e2c02074721150035ffc30e339c307f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-18 20:57:58 +0900

    Implement auto indent for multiline

commit e6aa0a61fac94f16250412b8ac80657dd9d6d572
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-18 17:30:01 +0900

    [DOC] non-nil `$,`,`$;` will be deprecated [ci skip]

    ```
    % ruby -e '$,=""; $;=""'
    -e:1: warning: non-nil $, will be deprecated
    -e:1: warning: non-nil $; will be deprecated
    ```

commit 8b3774be3dd9f472bddd99e84e3c9fe2ff99d7ac
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-18 13:27:05 +0900

    Fix memory leak

    * string.c (str_make_independent_expand): free independent buffer.
      [Bug# 15935]

    Co-Authored-By: luke-gru (Luke Gruber) <luke.gru@gmail.com>

commit c770c98ac42ee20129f1296d9f7c4dad2ae45124
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-18 12:21:38 +0900

    * expand tabs.

commit 9dec4e8fc3a6018261834b5ac9b9877f787b97ca
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-05-13 09:22:37 +0900

    String#b: Don't depend on dependent string

    Registering a string that depend on a dependent string as fstring
    can lead to use-after-free. See c06ddfe and 3f95620 for details.

    The following script triggers use-after-free on trunk, 2.4.6, 2.5.5
    and 2.6.3. Credits to @wanabe for using eval as a cross-version way
    of registering a fstring.

    ```ruby
    a = ('j' * 24).b.b
    eval('', binding, a)

    p a
    4.times { GC.start }
    p a
    ```

     - string.c (str_replace_shared_without_enc): when given a
       dependent string, depend on the root of the dependent
       string.

    [Bug #15934]

commit 39a8c7142400d582ac4bb02a1804a5949f8da9bc
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-18 06:05:43 +0900

    * 2019-06-18

commit c8edf70cd20b9ff72ebd1e9402a556089f6ff204
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-12 04:05:04 +0900

    Update documentation for File.executable{,_real}? to mention Windows issues

    Fixes [Bug #15664]

commit 801d0d9dd72209dab238e3d580ad1ab8116fd8fe
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-17 23:25:47 +0900

    Support Bison 3 in ripper

commit c8e9e0b74b7fb2e225af8708426389db88f80683
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-17 22:30:52 +0900

    Fix wrong "void value expression" error

    * parse.y (value_expr_check): `then` or `else` only `if` is not a
      void value expression, as the counterpart is evaluated as `nil`.
      [Bug #15932]

commit 01b3a3804334be19d013526d3edde2b84399ae43
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-17 21:36:41 +0900

    Fix wrong "void value expression" error

    * parse.y (value_expr_check): if either of `then` or `else`
      statements is not a void value expression, the whole `if` is not
      also a void value expression.  [Bug #15932]

commit 09a846085c2e675aa8397e9351c52d68215d7fa4
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-17 19:56:35 +0900

    * 2019-06-17

commit a064e46762ec0bfd40e6a04242d9e62fdd21e1f0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-17 03:09:52 +0900

    Support Bison 3

commit 53e9908d8afc7f03109b0aafd1698ab35f512b05
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-16 23:41:06 +0900

    Fix memory leak

    * string.c (str_replace_shared_without_enc): free previous buffer
      before replaced.

    * parse.y (gettable): make sure in advance that the `__FILE__`
      object shares a fstring, to get rid of replacement with the
      fstring later.
      TODO: this hack may be needed in other places.

    [Bug #15916]

    Co-Authored-By: luke-gru (Luke Gruber) <luke.gru@gmail.com>

commit d4929f518562b4e346af57f724232595b674f2b0
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-16 23:01:46 +0900

    * expand tabs.

commit 1ff26dc4c706cd6e8f227d159a2b23cba5f6de77
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-16 23:00:05 +0900

    Revert "Make constant assignments more conforming to JIS X 3017:2013 11.4.2.2.3"

    This reverts commit 44caca11cfa6bea01a1ef738846183f1a56d5658.

    The change caused a build failure.
    http://ci.rvm.jp/results/trunk-vm-asserts@silicon-docker/2102153

commit 11f8c89171ff0b260891dec064cf69d9400a0704
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-16 22:48:23 +0900

    * expand tabs.

commit 44caca11cfa6bea01a1ef738846183f1a56d5658
  Author: Yuki Yugui Sonoda <yugui@yugui.jp>
  Date:   2019-06-16 22:28:34 +0900

    Make constant assignments more conforming to JIS X 3017:2013 11.4.2.2.3

    compile.c (NODE_CDECL): Evaluate the module before the value
    test/ruby/test_const.rb (test_evaluation_order): added a test case

commit 2fb1564c02899c73519164ddf3f2430dfbc8f3d6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-16 14:46:22 +0900

    Implement line_no correctly

commit 17e6536fe0c6a7d213f500827346cacc210c536e
  Author: nagachika <nagachika@ruby-lang.org>
  Date:   2019-06-16 11:59:52 +0900

    tool/redmine-backporter.rb: Change redmine git revisions URL path.

commit 72cc5cf0190618c67a0f697e91c61be07eadd5c5
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-16 11:46:37 +0900

    * 2019-06-16

commit ee7999bb8453201f895e6154b9169c4e5b5b9ef6
  Author: nagachika <nagachika@ruby-lang.org>
  Date:   2019-06-16 11:39:12 +0900

    tool/redmine-backporter.rb: Add parens to fix condition for svn revision search.

commit 5d7905490659b9b4f4604e9fd479563fcd103b34
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-15 12:04:16 +0900

    Revert github/pull/2230, commit miss

commit 6fa4c904483588d2aa08d1fd84e2b8efc95227df
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-15 11:58:02 +0900

    Prefer `enum yytokentype` to int

commit 46527e1bf4a66a42ac4729e23f12bdfec8ae953e
  Author: Josh Cheek <josh.cheek@gmail.com>
  Date:   2019-06-15 11:13:27 +0900

    Test for blank lines between leadinig dot method chains

commit b8730f1251d94c0992db663f119df0a2bb31dca1
  Author: Josh Cheek <josh.cheek@gmail.com>
  Date:   2019-02-06 16:10:23 +0900

    Multiline method chain with leading dot works for blank lines

commit 2240de98c0b174c2d0e61dd647776f5d5c404639
  Author: Josh Cheek <josh.cheek@gmail.com>
  Date:   2019-02-06 15:58:50 +0900

    Remove blank line I accidentally added

commit 162bfa1c7cf325f6efce6f6e080d29db91fbcf78
  Author: Josh Cheek <josh.cheek@gmail.com>
  Date:   2019-02-06 15:43:27 +0900

    Test comments between multiline method chain

commit cc180e937100c72b7ce849602c9d93d8e8a3d2aa
  Author: Josh Cheek <josh.cheek@gmail.com>
  Date:   2019-02-06 15:43:16 +0900

    Rename LINEND to EMPTYLN

commit 5af5dd463929837f7684d1e0865ac2d9394e19a5
  Author: Josh Cheek <josh.cheek@gmail.com>
  Date:   2019-02-06 13:11:30 +0900

    Omg, it works!

    I'll rename it and squash this commit later,
    just wanted to make sure I couldn't lose it
    (took a long time to come up with).

commit e6aefe2a135102095bcaec379251dff2f4e843d6
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-15 11:09:33 +0900

    * 2019-06-15

commit 5dd8fdd3f328f741fae4abba00c478e8a51d2a7e
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-15 11:06:39 +0900

    test/net/imap/test_imap.rb: wait for the server thread to start

    In some slow CI environments, the invocation of a thread seems very
    slow.  This causes a test failure to attempt to connect a server that
    does not start yet.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-master/log/20190615T002420Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-master/log/20190611T022407Z.fail.html.gz

commit d365fd5a024254d7c105a62a015a7ea29ccf3e5d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-14 18:09:45 +0900

    An operator is not allowed just after `|>`

    https://twitter.com/yukihiro_matz/status/1139454774640726019

commit d780c3662484d6072b3a6945b840049de72c2096
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-14 17:29:51 +0900

    Pipeline operator is experimental [ci skip]

commit aa32465ab36a56655d214313b828422563e109af
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-14 15:31:03 +0900

    irb.rb: [DOC] the default prompt includes :PROMPT_N [ci skip]

commit 50bb8b6052a1fdec72ac46f9736719438fd5002c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-14 08:15:39 +0900

    Use Exception#full_message for traceback

commit 9402d019a51cf74cd6fceab534d4f1bde23a75e7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-14 08:45:52 +0900

    Remove debug print

commit d0e5564140356ac6546a41d8a236287d952d563d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-14 08:45:35 +0900

    Set allow_escape_code for prompt

commit f80771f0a989efdde2276d4d6d213cb096843e92
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-14 08:26:06 +0900

    Use Reline.prompt_proc in IRB

commit 3757e492fb815656341dd430465e0f069e1bd562
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-14 07:46:01 +0900

    * 2019-06-14

commit 64310b2573a9e1e83cd405aed4a5c3351793e09d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-14 07:42:53 +0900

    Add Reline.prompt_proc

commit 56d595198b607d2abbb0f60ef0d9e1217d08d1af
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-13 23:04:41 +0900

    test/webrick/test_ssl_server.rb: Use EnvUtil.timeout for timeout scale factor

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190613T091708Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190612T011708Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190611T211707Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190604T171708Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190529T091707Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190528T031708Z.fail.html.gz

commit e75c278183306d28f0210673905437c2f6350b26
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-13 22:44:01 +0900

    test/lib/test/unit/assertions.rb (assert_cpu_usage_low): tweak the wait

    It still fails randomly.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/amazon2/ruby-master/log/20190613T093003Z.fail.html.gz
    https://rubyci.org/logs/mswinci.japaneast.cloudapp.azure.com/vc12-x64/ruby-master/log/20190613T051547Z.fail.html.gz

commit aa7211836b769231a2a8ef6b6ec2fd0ec882ef29
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-13 22:19:47 +0900

    Continue to the next line beginning with a pipeline

commit 043f010c28e82ea38978bf8ed885416f133b5b75
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-13 22:03:10 +0900

    parse.y: moved pipeline to expr

    To allow arguments without parentheses.

commit f169043d81524b5b529f2c1e9c35437ba5bc3a7a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-23 13:14:27 +0900

    Add pipeline operator [Feature #15799]

commit e717d6faa8463c70407e6aaf116c6b6181f30be6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-08 21:35:33 +0900

    IO#set_encoding_by_bom

    * io.c (rb_io_set_encoding_by_bom): IO#set_encoding_by_bom to set
      the encoding by BOM if exists.  [Bug #15210]

commit bdc8b3789ad388ff1d573369de6b085483b17098
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-13 18:07:19 +0900

    * expand tabs.

commit 02b1a85385e7fd18b8bcecfdbbf1acbac703c039
  Author: Luke Gruber <luke.gru@gmail.com>
  Date:   2019-06-11 05:46:57 +0900

    remove 2 redundant calls to rb_str_dup

    Because `rb_class_path` calls `rb_str_dup` already.

    Closes: https://github.com/ruby/ruby/pull/2232

commit 69509df2f4ed8e052d683fa3901c9f97d00ed7fc
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-13 16:42:31 +0900

    squeeze space [ci skip]

commit 7f79a86d8b4d250ea0e82eb06cd3336edb840a01
  Author: Martin Drst <duerst@it.aoyama.ac.jp>
  Date:   2019-06-13 15:30:03 +0900

    add comments to mention sort.reverse!

    For array.c (Array#sort) and enum.c (Enumerable#sort_by),
    add comments mentioning that sort.reverse! / sort_by { ... }.reverse!
    can/should be used to reverse the result. [ci skip]

commit 2a26c1ea24ec107cfb43d8561ad28984846b7660
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-13 00:40:27 +0900

    Clarify the Ruby version support status in IRB more

commit 8d84e119da52573f9dfe3b2fe7a6d1c27b7fd71f
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-13 00:32:59 +0900

    * 2019-06-13

commit 180802906190501e4eb9b9423adfb6116ceb334b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-13 00:29:45 +0900

    make sync-default-gems GEM=irb

    Upgrade IRB to https://github.com/ruby/irb/commit/41ea43a4a732e094acfa1b0fc1473fdcda9e6227

    Mostly backport changes.

commit 88411d350e9e3eb6425375238a20af9b6aae28ae
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-12 15:30:07 +0900

    Another incomplete string case

commit 9593e76ac2cfd9366b8b904df3fc3e1047af3aee
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-12 15:23:47 +0900

    Ripper::Lexer: fallback parse error token to the previous one

commit 8354cfd03b1e9961266e1fe56fca481450679b98
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-12 11:00:25 +0900

    Treat "begin rescue end" correctly

commit c1d78a7f0ece2004822193a0c1f1fd3dc38c2fdf
  Author: Neeraj Bhunwal <neeraj.bhunwal@gmail.com>
  Date:   2019-04-16 13:03:08 +0900

    do_mutex_lock: release mutex before checking for interrupts (fixes issue 15360)

commit 5e018214e7435030727a97ac49db038d96438e74
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-11 07:47:56 +0900

    Fix SystemStackError when calling a method in an unused refinement

    Fixes [Bug #15720]

commit 4f9e7c95e4c8216c17f46747092f28df9c54fab7
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-12 01:16:49 +0900

    * 2019-06-12

commit 23e3c1704b344819fcea907a67aafd1e6be8a9df
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-12 01:16:45 +0900

    * expand tabs.

commit 6db2d6d8520f88e25d97af77495eb6c879f90b21
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-06-01 05:25:24 +0900

    Add compaction support for more types.

    This commit adds compaction support for:

    * Fibers
    * Continuations
    * Autoload Constants

commit c4cbaef216ffcc9bda70cc328a805ad679ccaa8c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-11 11:13:26 +0900

    assert_cpu_usage_low with timeout scale

    * test/lib/test/unit/assertions.rb (assert_cpu_usage_low): apply
      the timeout scale to measuring period.  this assertion is very
      runtime environment dependent.

commit 42f0a8fd6f7e1f4afcb17aeb34e9f8ddf8d66b9b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-11 11:09:02 +0900

    MIN_HZ and MIN_MEASURABLE constants

    * test/lib/test/unit/assertions.rb (Test::Unit::Assertions):
      promoted MIN_HZ and MIN_MEASURABLE as constants, which should be
      constant through the process.

commit eb016d835373cdce6f08694e527d7a569c208cb5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-11 11:03:55 +0900

    Generalize timeout_scale

    * test/lib/test/unit.rb (Test::Unit::TimeoutOption): renamed
      SubprocessOption.

    * test/lib/test/unit.rb (Test::Unit::TimeoutOption#setup_options):
      prefer `--timeout-scale` option.

    * test/lib/test/unit.rb (Test::Unit::TimeoutOption#non_options):
      prefer `ENV["RUBY_TEST_TIMEOUT_SCALE"]`.

commit 39ae88ad0dd0f8d7cf732e8567af13e7f2ce9748
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-11 22:31:57 +0900

    Refined syntax error messages

commit 140b8117bd3c32cb9d0b144937b90f0178a00b0e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-11 02:09:00 +0900

    &. is not allowed inside LHS of massign

    https://hackerone.com/reports/605262

commit 42ac8890efbd38dc021bf5edab325a69be7fc4cf
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-11 12:32:13 +0900

    Fail test if load ~/.irbrc

commit e4364dbf6ecd9f87588f6f9e93d213046b75478e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-11 12:16:26 +0900

    Fixed the code-style with the upstream rule.

commit 4adc6f07ef8e1c620bee06f3614ce58b51839b34
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-11 07:15:31 +0900

    test/lib/test/unit/assertions.rb (assert_cpu_usage_low): Relax the limit

    CPU usage 1% causes occesional test failure.  Try to use 5%.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/gentoo/ruby-master/log/20190604T153002Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/gentoo/ruby-master/log/20190610T153002Z.fail.html.gz

commit fe9701ee0062f15409107a92582a9e6e5630bfbe
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-11 06:56:46 +0900

    * expand tabs.

commit de4b2930f71a88358c8f1968e410f420c54853bd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-11 06:53:33 +0900

    ext/socket/ipsocket.c: Use SO_REUSEADDR for local_host/port

    Sometimes ruby/spec fails when trying to specify local_host and
    local_port for TCPSocket.open.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-master/log/20190610T192504Z.fail.html.gz

commit 6096baea5db6505206f0e636c4e5272b4eb72da4
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-11 06:45:49 +0900

    test/net/http/test_http.rb: Extend the timeout

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190610T071910Z.log.html.gz

commit d7e7e998625a3ab10c76ba94816db9d6a753e058
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-11 00:25:57 +0900

    * 2019-06-11

commit be6b462489e42b6a8ee60ba96fc18fcc9794f819
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-06-11 00:20:10 +0900

    Use checktype for performance

commit f0bfa71ab3ce5f6045a39e503f6decbc9b3a7d3d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-10 23:23:15 +0900

    Use UTC for file2lastrev timezone

    02155da7bad37bd1c8adadd486d2d16eac7af43b got a claim about sacrificing
    ability to compare arbitrary `RUBY_DESCRIPTION`s without converting
    timezones.

    Because most of the people would be familiar with timezone conversion
    with UTC but it'd be harder when it comes to JST, this commit just
    changes the timezone in f42588f754d5885ec30631e5008c383f3ef905d8 to UTC.

    Another bonus in using UTC is that we can use a shorter variant of
    ISO 8601 format like "2019-06-10T14:26:24Z" (the last Z part).

commit 02155da7bad37bd1c8adadd486d2d16eac7af43b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-10 22:20:00 +0900

    Make file2lastrev timezone consistent with git log

    Using the same timezone for all commits is convenient when just looking
    dates in RUBY_DESCRIPTION, but usually we also check `git log` when
    we're interested in the order of commits.
    `git log` shows times in committer's timezone and forcing RUBY_RELEASE_DATE
    to JST makes it harder to find a corresponding commit from `git log`.

    Because this label is only used in development, I believe there's no
    strict requirement to use traditional timezone for release here.

    Also when building Ruby after committing from a non-JST timezone, I'd be
    surprised to see a strange time (in a different timezone) for my very new
    commit in `ruby -v`.

commit caa90202c9d2acbb9bce32ceebe6166c2f1de5d0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-10 22:04:51 +0900

    Make sure to suppress .irbrc on benchmark

    By the way, this is already improved by nobu:

    ```
    $ benchmark-driver benchmark/irb_exec.yml --rbenv '2.6.3;2.7.0-preview1;before;after' -v
    2.6.3: ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-linux]
    2.7.0-preview1: ruby 2.7.0preview1 (2019-05-31 trunk c55db6aa271df4a689dc8eb0039c929bf6ed43ff) [x86_64-linux]
    before: ruby 2.7.0dev (2019-06-10T21:13:14+09:00 master 973fd18f11) [x86_64-linux]
    after: ruby 2.7.0dev (2019-06-10T21:18:56+09:00 master 976c689ad4) [x86_64-linux]
    Calculating -------------------------------------
                              2.6.3  2.7.0-preview1      before       after
                irb_exec     11.868           5.872       6.297      10.278 i/s -      30.000 times in 2.527776s 5.108997s 4.764167s 2.918821s

    Comparison:
                             irb_exec
                   2.6.3:        11.9 i/s
                   after:        10.3 i/s - 1.15x  slower
                  before:         6.3 i/s - 1.88x  slower
          2.7.0-preview1:         5.9 i/s - 2.02x  slower

    ```

commit 880204cf55813c975f3bbd0be93b292a099d5890
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-10 21:45:46 +0900

    irb/cmd/help.rb: return nil after the redefinition

commit 976c689ad478b8010b053aa270a28bd236b8380e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-10 21:07:24 +0900

    irb: defer requiring rdoc to improve the start up time

commit 973fd18f11f5026024fc43e2848db030110bdaee
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-10 21:13:12 +0900

    Add a benchmark of irb boot time

    ```
    $ benchmark-driver benchmark/irb_exec.yml --rbenv '2.6.3;2.7.0-preview1'
    Calculating -------------------------------------
                              2.6.3  2.7.0-preview1
                irb_exec     11.844           5.171 i/s -      30.000 times in 2.532887s 5.801960s

    Comparison:
                             irb_exec
                   2.6.3:        11.8 i/s
          2.7.0-preview1:         5.2 i/s - 2.29x  slower
    ```

commit b9996b7b323d7e238512fa8dbd3d3b8576ba06e1
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-10 19:48:08 +0900

    * 2019-06-10

commit 626ae5a9b6531412f598b2f37a15821628857707
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-10 19:47:08 +0900

    Resolv specs should pass on Windows now

commit 60af6fef3c664ac7dab53fcde28c30f30ce862aa
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-10 19:45:00 +0900

    Fix Resolv specs to not depend on a system /etc/hosts file

    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/archlinux/ruby-master/log/20190609T153804Z.fail.html.gz
    * Thanks @naruse for the tip.

commit 614154bbb6adeb06cce755be7b8540e1594703c5
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-09 10:49:51 +0900

    Added missing dependency for rake examples.

commit 2c59c58a47db31e28757e1936dd355a98352b489
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-09 11:00:21 +0900

    Fixed wrong BUNDLE_BIN_PATH for ruby core.

commit 44f7f093ab8d8663cbbe31d8a975ae6e8d20724f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-09 11:00:07 +0900

    Added the condition for ruby_core repository.

commit 57ccea6232a76aec5711e5e583cffe0aa5221928
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-01 19:29:56 +0900

    Revert to change for filelist of bundler gemspec.

commit 8f37629519ad330032a38ac0e871b2912ed38a1b
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-01 18:49:40 +0900

    Merge bundler master from upstream.

      Pick from 8dd59e3ba97eb80a599f8149f31bf40773b69dc0

commit 66508992483ae5d77b56a98427c50c772341c0ac
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-09 12:27:49 +0900

    Make Resolv::DNS#each_name accept Resolv::IPv{4,6} arguments

    These arguments were previously documented as supported, but not
    actually supported.

    Patch from Toru Iwase

    Fixes [Bug #15900]

commit a432c014c99eb44b3f446aa43c7e83c945d3ec8e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-09 12:30:40 +0900

    * 2019-06-09

commit 562c0bfedaa96a1488cbfc0d282412743ea8cde0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-09 11:34:58 +0900

    Split test_strip_bom for each encoding

commit a8ef498d6bfbd5c665b75a0782526d18b361dd5b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-09 11:10:34 +0900

    Add tests of the encoding with BOM

commit f42588f754d5885ec30631e5008c383f3ef905d8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-08 20:08:18 +0900

    Make RUBY_RELEASE_DATE full on development

    I cannot tell the order just by commit hashes.

commit 1ca03dc4f77de4030534596ad23af64be925dc44
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-08 19:46:32 +0900

    Suppress warnings by gcc 9.1

commit 27a59ca2c846e14ec6dbcb86fd2d6f65399ff28d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-08 19:40:55 +0900

    file.c: fix compile error with MacPorts gcc

    With the SDK of Xcode 10.2.1, `API_AVAILABLE` and so on macros are
    not defined in <os/availability.h> when using a compiler other
    than clang (which has `__has_feature` and `__has_attribute`), but
    `__API_AVAILABLE` macro and so on are defined, which are also
    defined in <Availability.h>.

    I suspect this is a bug of the SDK.

commit 5a840517ae738357d3d5afdcef61461e3969edfa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-08 18:44:18 +0900

    Fix broken `gem unpack`

    * lib/rubygems/commands/unpack_command.rb: 'rubygems/package' is
      required here, to fix broken `gem unpack` command.

commit 21de4a574f363e77c64d36ce2671fa55e7955b49
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-08 18:44:04 +0900

    io.c: fold very very long lines

commit 3776c48cf41950d2cc994676bb2735ee1a0a474e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-08 13:44:40 +0900

    Revert "require rubygems/package where used"

    This reverts commit b76630f73e8362d3072bfa7178471ddc5d21c235.

      It fails with `make test-bundler BUNDLER_SPECS=runtime/setup_spec.rb:1204`

commit 1696f80f400518ea1b5304c23d8192140a7e55c6
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-08 00:15:42 +0900

    * 2019-06-08

commit 19977cc761cf25748676e45a5a7a706b0d7fd70d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-07 23:54:49 +0900

    Remove unnecessary variables

commit ffaefcadd81cb8e4d38114e76b1831ba95d6a6f3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 23:08:43 +0900

    Report a sudden death of workers

commit 75751dca2b9f573db923cecd9767e9174fb69a98
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-07 23:33:23 +0900

    test/openssl/utils.rb: Extend the timeout for armv7l

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190607T051708Z.fail.html.gz

commit b76630f73e8362d3072bfa7178471ddc5d21c235
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 22:34:28 +0900

    require rubygems/package where used

    * lib/rubygems/commands/unpack_command.rb: 'rubygems/package' is
      required.  fix the failure of `gem unpack` command.

    * lib/rubygems/source/local.rb: ditto.

    * lib/rubygems/source/specific_file.rb: ditto.

commit 6566919176834efb47ea717967669ca83eb78347
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 18:45:49 +0900

    ripper_state_lex.rb: chomp CR

    * lib/rdoc/parser/ripper_state_lex.rb (RDoc::Parser::RipperStateLex):
      chomp newline, including CR, from here document terminator.

    Closes: ruby/rdoc#694
    Closes: ruby/rdoc#697
    Closes: ruby/rdoc#705

commit a6a26e42b15c46f117f4fce07a2050e9d727355d
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-07 14:45:06 +0900

    compile.c: Partially revert r63870 which caused wrong optimization

    [Bug #15906]

commit b8af33e63bd286308e5e1b20c182ec50e0f194de
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-25 13:32:37 +0900

    Skip one assertion for OpenSSL::PKey::EC::Point#mul on LibreSSL

    LibreSSL 2.8.0+ does not support multiple elements in the first
    argument.

commit 119ca4343cceed031f017ce2e0d2a1e709344a0f
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-07 13:10:21 +0900

    Make specs pass on OpenBSD

    Skip Process clockres specs that don't work on either FreeBSD or
    Solaris/AIX in addition to OpenBSD.

    Run most current String#crypt specs on non-OpenBSD, and add a new
    set of crypt specs for OpenBSD, which support bcrypt but not DES
    in crypt(3).

    Use @server.connect_address instead of @server.getsockname in some
    socket tests, as OpenBSD does not treat connection to all zero
    IPv4 or IPv6 addresses as connection to localhost.

    When trying to connect using UDP on an unsupported address family,
    allow Errno::EPROTONOSUPPORT in addition to Errno::EAFNOSUPPORT,
    as OpenBSD raises the former.

commit c55de95ff1c4ea6313c2863037703a0e5f0d0f4f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 10:05:42 +0900

    Dummy Makefile.in for CIs

commit 7e403dc6c84356e83c02538e76cc70ac789921ac
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-07 09:26:40 +0900

    test/openssl/utils.rb: Extend the timeout

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-master/log/20190606T171708Z.fail.html.gz

commit c7477c3e1fb661ed1cbcda9c7fbc710f77390845
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 09:09:29 +0900

    Moved Makefile.in under template

commit aef3bb3513d5b275ed9fa2765e83fab97122fd40
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 09:06:55 +0900

    Remove the dependency of Makefile on Makefile.in transitionally

commit 200c840b952a65fca10d5f3a47b69288f1d3dc65
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 09:02:48 +0900

    Revert "Moved Makefile.in under template"

    This reverts commits:
    * 6f9d5fafe040cb02a1278fbfcdcb8063d564824c
    * bb3c89b6437049e26669b2156310670d5e06e386

    And remove the dependency of Makefile on Makefile.in
    transitionally.

commit bb3c89b6437049e26669b2156310670d5e06e386
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 08:58:53 +0900

    Makefile.in moved under template

commit 6f9d5fafe040cb02a1278fbfcdcb8063d564824c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-06 12:49:08 +0900

    Moved Makefile.in under template

commit aee77901310389462c0971e7c45f7c19410f3371
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-07 02:04:51 +0900

    * 2019-06-07

commit 2bc09665ab8e72d4320a55a274eae903262f29cd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 02:00:48 +0900

    win32/registry.rb: fix potential infinite loop

    * ext/win32/lib/win32/registry.rb (Win32::Registry#each_value):
      advance the index even if an error occurred in #read.

commit 09a2189c1b5dd5a28a052f9464a516213f89d6e7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-07 01:56:22 +0900

    Adjust indent

commit 9f941f61efb5bdf6572f2d41ad29bcab267ecf5f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-06 21:19:09 +0900

    test/webrick/test_filehandler.rb: extend the timeout for Solaris CI

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190602T031908Z.fail.html.gz

commit 60924636e5184c967df129e523ba9374ccc57144
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-06 21:18:26 +0900

    test/net/http/test_http.rb: extend the timeout for Solaris CI

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190605T231909Z.fail.html.gz

commit fcc36d767b60329692b27d685ba867848da6aa04
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-06 16:49:40 +0900

    Revert "Stop `circular require` warning"

    This reverts commit c2a9c350249588677cf68b506539093504927eac.

    It cannot stop `circular require` warning.

commit c2a9c350249588677cf68b506539093504927eac
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-06 15:38:00 +0900

    Stop `circular require` warning

commit 861b50d81d9ed5f57b78c87b2e2f24f718db31dd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-06 15:25:18 +0900

    lib/rubygems.rb: Stop "Leaked file descriptor" warning

    Bundler.setup changes Gem::DefaultUserInteraction.ui and does not close
    it.  This change makes sure that it is closed.

commit 1e54903684aa3c9ea3fe54520157846a1b1f07be
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-05 21:07:27 +0900

    test/openssl: Support OpenSSL 1.1.1

    OpenSSL 1.1.1 rejects some shorter keys, which caused some failures of
    `make test-all TESTS=openssl`.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian/ruby-master/log/20190606T003005Z.fail.html.gz

    This change merges 6bbc31ddd1 and 63fb3a36d1 in
    https://github.com/ruby/openssl.
    Reference: https://github.com/ruby/openssl/pull/217

commit d046fe926273d0137f2d5cdf2dedfcfeeb98189b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-06 12:03:19 +0900

    configure.ac: utilize wide columns for summary

commit 884576bf12df04abbbc32bc74f142320bc6d7556
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-06 08:21:40 +0900

    Update RDoc of RUBY_REVISION

commit 02880d1f4a9ebd1c0a807376fcb25ccd908334b4
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-06 04:57:52 +0900

    Skip transpose-words if less than 2 word

commit fd173372285f9575e424f854d8072b5f71fce1e2
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-06 04:25:58 +0900

    * 2019-06-06

commit eadc06ba1664102da07ec08aeca6c3e1eccc4e96
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-06 04:25:16 +0900

    Add test_ed_transpose_words_for_mbchar

commit 6dc0541ed3c3736fb4c0b270f2c8df1c0dbfba95
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-05 22:29:53 +0900

    NEWS: Note about CGI.escapeHTML change [ci skip]

    See https://github.com/ruby/ruby/pull/2226 for benchmark results.

commit 0a29dc87e62c701db56816cb430daf07a4f02bea
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-05 19:28:51 +0900

    Optimize CGI.escapeHTML by reducing buffer extension

    and switch-case branches.

    Buffer allocation optimization using `ALLOCA_N` would be the main
    benefit of patch. It eliminates the O(N) buffer extensions.

    It also reduces the number of branches using escape table like
    https://mattn.kaoriya.net/software/lang/c/20160817011915.htm.

    Closes: https://github.com/ruby/ruby/pull/2226

    Co-authored-by: Nobuyoshi Nakada <nobu@ruby-lang.org>
    Co-authored-by: Yasuhiro MATSUMOTO <mattn.jp@gmail.com>

commit f3c877e8deaea91ff27c0fca837c9388d030a896
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-05 20:07:19 +0900

    Ignore ~/.gitconfig on tool/vcs.rb git commands

    Because some `log.*` git configs may change the result of `git log`,
    `RUBY_LAST_COMMIT_TITLE` can be wrongly formatted and break version.c
    compilation. So the `git log` executions should not respect user's gitconfig.

commit 84c294eb0b5b5206f01f062d4c2c860a57c7873c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-05 15:49:55 +0900

    spec/bundler/bundler/dsl_spec.rb: fix exception to raise

    When describing "Runtime errors", raise a `RuntimeError` as-is.

commit f258137083051a7fc2412c62e3fb239f93d1fdf8
  Author: Martin Drst <duerst@it.aoyama.ac.jp>
  Date:   2019-06-05 14:03:50 +0900

    Fix grammar of macro name: ECCESSED -> EXCESSIVE

    Fix the name of the macro variable introduced in 0872ea5330
    from NODE_SPECIAL_EXCESSED_COMMA to NODE_SPECIAL_EXCESSIVE_COMMA.

commit 1624d77f3ee0a536a6ab37da014d85d16fcd1de2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-05 13:02:38 +0900

    error.c: avoid infinite recursion at inspecting the frozen object

commit b2fe7484e7e7c7741f33bfb02c2fc91f03763ab4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-05 12:57:14 +0900

    Test for f1f04caf60e4fc9dc3b12109e0be831f2d692810

commit 542d69c894f86cd9a395fdd5296981c998e4a6bf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-05 11:53:24 +0900

    Revert "vcs.rb support non-inplace build"

    This reverts commit 22cd4027349f803efc7ede284376b7a7013f8dfe.

    It did not make sense due to a typo `@srcidr`.

commit aa8a8d8f6d259da096afc1deb65cc35e0fe518d0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-05 12:03:56 +0900

    Split an assertion for f1f04caf60e4fc9dc3b12109e0be831f2d692810

commit c75a3356b39c5a6ede275f38d5d869dbcd5dba93
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-05 11:29:41 +0900

    Move I/O access from Reline::KeyStroke to Reline

commit 7c776038ec3e620625b7fe3e78638afe936f9a5d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-05 11:29:04 +0900

    * expand tabs.

commit f1f04caf60e4fc9dc3b12109e0be831f2d692810
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-28 09:52:35 +0900

    Include inspect value of object in FrozenError messages

    FrozenError#receiver was added recently for getting the related
    object programmatically.  However, there are cases where FrozenError
    is raised and not handled, and in those cases the resulting error
    messages lack detail, which makes debugging the error more difficult,
    especially in cases where the error is not easily reproducible.
    This includes the inspect value of the frozen object in FrozenError
    messages, which should make debugging simpler.

commit 96d65274246a4be88581693f452e6b3bae9fdc5c
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-05 11:19:37 +0900

    Add some documentation to Timeout#timeout about possible issues

    Documentation requested in [Bug #15886].

commit a105831819af8d143dd587a93844ca982cfadd67
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-05 11:03:57 +0900

    tool/runruby.rb: support RUNRUBY_USE_LLDB as well as RUNRUBY_USE_GDB

commit 26d02cc7cdb9fd2272a695083449824a3852717a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-05 11:03:19 +0900

    tool/runruby.rb: load the default lldb scripts

commit 5859ea1b1b3f1ba23a15174c6bef4a2ecabafb2f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-05 11:01:23 +0900

    tool/runruby.rb: load .gdbinit explicitly

commit 6b66a76f43038eb4b789f0f94729ddcc233d9c56
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-05 11:01:59 +0900

    * expand tabs.

commit 71b14affc6b699f38aabe73125380cab57799e34
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-05 11:00:54 +0900

    Revert "Optimize CGI.escapeHTML by reducing buffer extension"

    This reverts commit 8d81e59aa7a62652caf85f9c8db371703668c149.

    `ALLOCA_N` does not check stack overflow unlike ALLOCV. I'll fix it and
    re-commit it again.

commit 804a7907a8974cf2f820a7cdce9133843b0fa7db
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-05 10:13:25 +0900

    * 2019-06-05

commit 8d81e59aa7a62652caf85f9c8db371703668c149
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-04 19:58:39 +0900

    Optimize CGI.escapeHTML by reducing buffer extension

    and switch-case branches.

    Buffer allocation optimization using `ALLOCA_N` would be the main
    benefit of patch. It eliminates the O(N) buffer extensions.

    It also reduces the number of branches using escape table like
    https://mattn.kaoriya.net/software/lang/c/20160817011915.htm.

    Closes: https://github.com/ruby/ruby/pull/2226

    Co-authored-by: Nobuyoshi Nakada <nobu@ruby-lang.org>
    Co-authored-by: Yasuhiro MATSUMOTO <mattn.jp@gmail.com>

commit b31e1b4a7c5b97d861c2b34ed4ccd982d5c6cb82
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-04 23:17:38 +0900

    * expand tabs.

commit 0b0c6cb7e4fa17247cb214c4eaf924617a55e9a7
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-04 23:15:14 +0900

    compile.c: Remove the magical `(const NODE*) -1`

    It is used to represent "no default expression" for keyword argument:
    `def foo(key:)`.  This change uses NODE_SPECIAL_REQUIRED_KEYWORD.

commit 0872ea53303499caf3584e40f2a5438e86eb4fed
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-04 23:11:38 +0900

    node.h: Avoid a magic number to represent excessed comma

    `(ID)1` was assigned to NODE_ARGS#rest_arg for `{|x,| }`.
    This change removes the magic number by introducing an explicit macro
    variable for it: NODE_SPECIAL_EXCESSED_COMMA.

commit 39eae6bf89773ef830b632c02737545ab9eedd35
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 21:27:46 +0900

    tool/vcs.rb: return the commit date as the modified time

commit 2e2cd8297bf34dd5f613d5001da54949ba228ca6
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-04 19:55:04 +0900

    * expand tabs.

commit 2c60f3714381803218313a6056d3e1dd39782ca1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2016-05-12 16:52:34 +0900

    random_mt_type

    * random.c: renamed random_data_type as random_mt_type, and append
      "MT" to `wrap_struct_name`, respecting the implementation.

commit c8b001858ed6911db4285d239193bc2384ff6ce0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 19:06:19 +0900

    Revert "marshal.c: new functions for extensions"

    This reverts a commit miss, 24a96a0228ccf355826644a9daad69e11b67b53b.

commit 9e472e18d22d013f5da7d5a3769599c5fb763f43
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 19:00:48 +0900

    suppress marshal warnings

commit 24a96a0228ccf355826644a9daad69e11b67b53b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2012-06-22 14:38:03 +0900

    marshal.c: new functions for extensions

    * marshal.c (rb_marshal_dump_limited): new function for extension
      libraries to dump object with limited nest level.

    * marshal.c (rb_marshal_load_with_proc): new function for extension
      libraries to load object with hook proc.

commit 51d27d25d7f6da520821feae94934c4de51b7bb3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 18:51:49 +0900

    test/lib/test/unit.rb: use colorize.rb

commit e7aa87c35340c1690e903e8058d3c4e78f0f5335
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 18:33:34 +0900

    Renamed duplicate test

commit fade26afa72282ee9e2dbbc2e74cd9ea45674dc6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 18:10:09 +0900

    colorize.rb: get rid of syntax errors on older versions

commit a57d6d2325ddc71363414acf2f923db0bf0ddc9c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 18:08:21 +0900

    colorize.rb: make `colors_file` optional

    [ci skip]

commit b0c35ff2db3a4ebb12a405705592e938f50bff64
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 17:23:57 +0900

    colorize.rb: fix reading from test/colors

    [ci skip]

commit 16cb1fb007a9d107b8c447e862c92c682a56a7c8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 17:09:16 +0900

    extlibs.rb: colorize

    [ci skip]

commit 58fd27d3d89451fbbe840348cd66f2205e34e72b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 17:06:12 +0900

    colorize.rb: read `test/colors` file after `$TEST_COLORS`

    [ci skip]

commit ce4b5d90b2127af185f91037de1185ad7520ace3
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-04 12:39:25 +0900

    * remove trailing spaces. [ci skip]

commit 8406547b7c3f97c073aa70d22ec7e90a6bf5af5e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-04 12:39:03 +0900

    Azure Pipelines run on master instead of trunk [ci skip]

commit c1e2d50531f3ba50cce3016bcfd440546e1ef007
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-04 12:37:25 +0900

    Azure Pipelines run on master instead of trunk [ci skip]

commit b0cb4bdb4ee2aabc2f068a194a10882515d995d3
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-04 11:40:21 +0900

    * expand tabs.

commit 7866ed850c1ae95a6b115e09f3788d5b623f0708
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-04 11:39:27 +0900

    node.c: Show the ID of internal variable

commit 14b5ccf91b8df1e61ae20f606b85cbb86d087f16
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-04 09:36:32 +0900

    * expand tabs.

commit aa8d393d8a69d1a5780d338692f75e2dd821c5b0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 09:24:17 +0900

    EOF by 2 ^D on a TTY

    Terminate the input from a TTY by 2 ^D at the middle of line, like
    as many programs, `cat`, `perl` and so on, do.  By the first ^D,
    the line will be sent without a newline, and then EOF will be send
    by the next ^D.

commit 9a07915ae21d5a8e39d7dab6b609be033f2e2d7d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-04 08:34:10 +0900

    Add aliases for commands for changing text macro

commit d950cade5347a61cff6d9b63c7d0c5768b96b539
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-04 08:33:03 +0900

    azure-pipelines.yml: Upgrade Ruby for UseRubyVersion

    to fix
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=1162&view=logs

commit 4b7213a85a6700657b825f8f127ce83a3070bf1d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-04 06:39:02 +0900

    Implement transpose-words

commit c9b74f9fd95113df903fc34cc1d6ec3fb3160c85
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-06-04 07:15:48 +0900

    Pin keys in "compare by identity" hashes

    Hashes that compare by identity care about the location of the object in
    memory.  Since they care about the memory location, we can't let them
    move.

commit 790a1b17902f7ccb5939b9e0314571079fc30bc8
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-31 07:25:31 +0900

    object id is stable now for all objects, so we can let hash keys move

commit 2de3d92844058511debef2815a0402f892a5536a
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-31 06:50:43 +0900

    allow objects in imemo envs to move

commit 4eb1c2365cd2745b58eb835ea1e26cc33a1238b1
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-31 04:08:06 +0900

    Unpin objects that `proc` references

    This commit adds compaction support to method and proc objects.  It just
    unpins references and implements the "compact" callback and updates
    references.

commit ca22cccc14e17d21b4fe7b5aed680e9edf12afb7
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-06-04 03:52:53 +0900

    get rid of a warning of VC++

commit 1a0b82210c924dca447da6aeaffd0ddd502705ea
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-04 01:03:03 +0900

    Upgrade benchmark-driver to fix deprecation warning

commit 9987f457652f99794c3a8d4467c06ed770cdd393
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-04 00:35:58 +0900

    Reflect behavior changes to argument name

    0c459af7c233adb5f44022350bfe8fa132d8053e changed the meaning of
    `detect_compile_error`, and this commit lets it follow the change.

commit fc7b4c70185b320db3bb6f9a05261ec54ce8bc4c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 00:27:44 +0900

    Simplify matching

commit 0da9205f154b4562aa575b3811dd0e33bc4b07f4
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-04 00:32:16 +0900

    Remove conflict resolution mistake [ci skip]

    in de541fe1961370e64541d73c96cf790d30f28604 :bow:

commit d21a694075866f4a3333cf65910a649acd057306
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-04 00:29:53 +0900

    Improve test_color to prevent regression

    Actually de541fe1961370e64541d73c96cf790d30f28604 was still needed.
    This commit would improve the test coverage using the branch.

commit de541fe1961370e64541d73c96cf790d30f28604
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-04 00:22:22 +0900

    colorize_code must return escaped text

    This was needed before 0c459af7c233adb5f44022350bfe8fa132d8053e but it
    could be actually useless now. But I added this anyway just in case.

commit 6498c733da4f34aca47ca88412605761467a2fec
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-04 00:20:29 +0900

    * 2019-06-04

commit 0c459af7c233adb5f44022350bfe8fa132d8053e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-04 00:14:55 +0900

    Colorize error characters

    * lib/irb/color.rb (IRB::Color.scan): ignore "incomplete end of
      input" error only, to colorize invalid characters, e.g., control
      characters, and invalid symbols, as errors.

commit 928377d2c5153333445d58710534b471042ffb46
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-03 22:00:14 +0900

    Revert "common.mk: allow brace expansion for benchmark targets"

    This reverts commit 4c0e21add7c87b70df27fbff81d8f192a467556d
    because we're not using /bin/bash.

    See 11d3986d6557eb3cfcecbdd0ef6e21b18c7c960b and
    1b2b0e1f244b3e71812fa9859e8b87150ea30434 to know its context.
    In short, 4c0e21add7c87b70df27fbff81d8f192a467556d does not work on
    Ubuntu.

commit 1b2b0e1f244b3e71812fa9859e8b87150ea30434
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-03 21:59:34 +0900

    Revert "common.mk is NOT working with /bin/sh anymore"

    This reverts commit 11d3986d6557eb3cfcecbdd0ef6e21b18c7c960b.

    Travis was broken by that.

commit 11d3986d6557eb3cfcecbdd0ef6e21b18c7c960b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-03 21:15:54 +0900

    common.mk is NOT working with /bin/sh anymore

    at least on Ubuntu.

    The brace expansion does not work on Ubuntu /bin/sh (dash), and so
    4c0e21add7c87b70df27fbff81d8f192a467556d effectively broke /bin/sh
    compatibility of common.mk.
    I guess he was using macOS whose /bin/sh is bash.

commit a4c5d234045438e09ea4f5feed0ae50958604907
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-03 20:47:32 +0900

    benchmark/time_strptime.yml does not work with miniruby

    Since 72ad092960c413b6a5687c552747b20a5ed78b22, we cannot run full `make benchmark`
    because default BENCH_RUBY is miniruby and it fails to require 'time'.

    Using miniruby for benchmark by default seems reasonable for some cases,
    but now it's just bothering for people running full `make benchmark`.

commit d7c3eb570b2a9dd76f4e0e5d3c39fa10dc8d0cd7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-03 17:23:06 +0900

    Erase VI_OPERATORS

    The operators are using @waiting_operator_proc in vi mode.

commit c2805192561ad9690b55c14aaccece1804b61a21
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-30 22:36:48 +0900

    remove `rb_objspace_pinned_object_p()`

    Nobody uses this function other than gc.c. We only need
    RVALUE_PINNED().

commit c990b3c41af5957a739dfb235dfbb821e73a74df
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-03 14:56:42 +0900

    Fix the error token on "invalid hex escape"

    * parse.y (tok_hex): flush token after dispatching the "invalid
      hex escape" parse error.

commit 22da5d71eaa50a749f8a08beb9bd6fe59e489449
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-03 12:56:13 +0900

    `ruby -v` may no longer be ASCII-only on non-master branches

commit 3102ca4c6e0b8fa50f56a6a25d8a28c48251d1c6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-03 12:26:23 +0900

    Default GIT external encoding to UTF-8 

    And dump the title as US-ASCII.

commit 17af8bfce6508951edca8650155be5525a894f65
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-03 12:00:35 +0900

    Make size on an infinite each_slice enumerator return Infinity

    Fixes [Bug #15889]

commit f48aad7ba22811dcd5e5be7af667ec49301ad7cd
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-03 10:47:38 +0900

    Add reline to doc/maintainers.rdoc

commit 533070bfc69cae5b09103a229e4db33b6af695cb
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-03 10:32:32 +0900

    Use lines instead of split

    ```
    % cat ~/bench-split.yml
    prelude: |
      s = "foo\nbar\nbaz\n"
    benchmark:
      '/(?<=\n)/': |
        s.split(/(?<=\n)/)
      '/^/': |
        s.split(/^/)
      'lines': |
        s.lines
    Warming up --------------------------------------
               /(?<=\n)/   459.123k i/s -    467.844k times in 1.018994s (2.18s/i)
                     /^/   467.922k i/s -    469.744k times in 1.003894s (2.14s/i)
                   lines     2.343M i/s -      2.424M times in 1.034677s (426.84ns/i)
    Calculating -------------------------------------
               /(?<=\n)/   422.347k i/s -      1.377M times in 3.261232s (2.37s/i)
                     /^/   477.603k i/s -      1.404M times in 2.939186s (2.09s/i)
                   lines     2.485M i/s -      7.028M times in 2.828757s (402.47ns/i)

    Comparison:
                   lines:   2484631.6 i/s
                     /^/:    477603.3 i/s - 5.20x  slower
               /(?<=\n)/:    422346.5 i/s - 5.88x  slower
    ```

commit 182072b2118ed3d1100303e3c67f54a3ee3d4c33
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-03 04:17:52 +0900

    The C-q is also quoted insert in emacs mode

commit 5524de5ca010e92f18fa6991f7bc953bcf84169d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-03 03:41:40 +0900

    Add aliases for commands for moving macro

commit 1bfba99b793e91f2d26af2ff7051a48f184f649e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-03 03:38:39 +0900

    Close leaked file descriptors in tests

commit 3428922437a31b644cffcabd33fd9353e68f88c8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-03 03:29:19 +0900

    The ed_move_to_beg is different from vi_first_print

commit 65fdb903250f37add2f83b81a5600d0c3e417427
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-03 02:03:15 +0900

    Reline::LineEditor::ARGUMENTABLE is no longer used

commit aeb3a2b3373521a6eb47f7185836351a2c52c2bf
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-03 01:36:55 +0900

    * 2019-06-03

commit 3457ce448655a3c2e52793186f62298903ddc26b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-02 13:10:03 +0900

    Fix ArgumentError in aliased macro

    Closes: https://github.com/ruby/ruby/pull/2221

commit f4b060d8d7f927306cbbe24df888a09112acd4c8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-02 12:14:29 +0900

    Check conditional nestings in INPUTRC

    Closes: https://github.com/ruby/ruby/pull/2222

commit a1e6e45341d70c608b7b5af98be0f234fd0072fb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-02 12:06:49 +0900

    Prefer $INPUTRC over the default in the home

    Closes: https://github.com/ruby/ruby/pull/2222

commit 4fda39fc8788cbcdd07f04768ec84faf3ea44721
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-06-02 22:37:42 +0900

    Use simpler regexp

commit d04ebc57f232e1a2ca36bd3d5ed9a24f63ee43d6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-02 12:21:09 +0900

    Add true condition `Reline`

commit 06a25344d9944529383cf76e81c8342b8821cf5e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-02 13:00:27 +0900

    Make psych.so deterministic

    Fixes Ruby Bug #15890

commit 486a2c26d604ff0e18bae73fe97b95478a44f3d5
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-02 08:50:01 +0900

    Add Reline test for unknown macro

commit e360688c4df08c2a43daa00c1de9832a20ad1521
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-02 07:39:12 +0900

    Add new test for Reline within pipe

commit 28e01f006d124fa8d6d85450f92b188b473921f8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-02 07:28:26 +0900

    Add comments to key bindings vars of Reline::Config

commit bfd26cc18df6c6eca5b67cea5f2d6a6d557da468
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-02 07:21:59 +0900

    Reline.readmultiline always needs block to confirm termination

commit 7b1c1b949201b5ebe5be597ec27317ea6e9f0841
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-02 05:07:04 +0900

    Suppress error of macro not found

commit 4b9869e7e04cbfb581f6f1b21ae17b310135c5e2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-24 12:07:36 +0900

    Update String#crypt tests to work on OpenBSD

    Skip the webrick httpauth tests that use crypt when testing on
    OpenBSD.

    Fixes [Bug #11363]

commit 09c09eb0db6c14c532935081c9b79d38fdc81f6b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-02 00:42:57 +0900

    NEWS: move GC.compact

    From "Implementation improvements" to "Core classes updates".

commit 3afae5b572bbf6b066ef90648917cbc5028dd4f6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-02 00:42:11 +0900

    NEWS: markup class and method names

commit e814d2f84a6f7c83dcfe1133ec96cf981d09e067
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-02 00:36:19 +0900

    * 2019-06-02

commit 8a041c1b92b5dcc52908155ba1ca6c9f44a471cb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-02 00:34:02 +0900

    delegate.rb: markup method names

commit 2bad001cfd15c59630a03918dc80a703b093688e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-01 21:23:24 +0900

    Ignore warnings about mismatched indentations.

commit 464e55f1d0296c3593157a89159f75d58397a1f5
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-01 21:20:21 +0900

    Ignore warnings about argument prefix with operator symbol.

commit 3c77ef9adc567af58e27c62db35d618f3b3069d2
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-01 21:07:35 +0900

    Ignore warnings about ambiguous first argument with the negative integer.

commit 9eecd7a2fd0b67aa13450887a1fee9a6638b9e4e
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-01 20:44:24 +0900

    Ignore warnings about ambiguous first argument of regexp with assert match.

commit f630359d9b60e298e472a62f0b6ff17f17ef5c69
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-06-01 19:38:13 +0900

    Add a benchmark using IRB::Color

    I heard actually this part would not be a bottleneck for rendering
    because writing anything to terminal takes way longer time anyway, but I
    thought this benchmark script might be useful for benchmarking Ruby
    itself.

commit 56660de3c6df7a4ff8667ef4047d30d0de169935
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-06-01 18:45:11 +0900

    Merge rubygems master from upstream.

      I picked the commit from 3c469e0da538428a0ddd94f99aa73c32da22e8ba

commit 560cd5b1f04f30542a294b3d77527d3b12f7cc15
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-06-01 16:52:40 +0900

    Add myself as OpenBSD platform maintainer

commit de01c4ec00d5357a2aa9ee1c1c989f691a865a21
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-01 16:47:59 +0900

    Reset Config at Reline::Config::Test#teardown

commit 34727475d0a255f4c9f3c66201ac7bcbb516256d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-01 15:07:22 +0900

    Remove an unnecessary argument

commit 3034d666e8015caa05c55a46debd5ed1ff502d47
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-01 14:57:36 +0900

    Just use `File.readlines`

commit b487b39b8597daf066fb1e1e7d3087ac694a0d3a
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-01 13:34:55 +0900

    * expand tabs.

commit 65e63af377bb493dea4d0207627ed87d5da360a8
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-06-01 13:15:43 +0900

    Make opt_aref instruction support Integer#[]

    only when its receiver and the argument are both Integers.

    Since 6bedbf4625, Integer#[] has supported a range extraction.
    This means that Integer#[] now accepts multiple arguments, which made
    the method very slow unfortunately.

    This change fixes the performance issue by adding a special handling for
    its traditional use case: `num[idx]` where both `num` and `idx` are
    Integers.

commit 7df65ef67691fcc354d819da9cd54a1ade9b6247
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-01 09:05:58 +0900

    Use inputrc data for keystroke setting

commit c1e52997870a63168835fde49562cb3c822c968a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-01 01:46:23 +0900

    Fix FrozenError when assigning frozen class to constant

    * variable.c (set_namespace_path): modules/classes can get named
      by assignment to constant, even if frozen.  [Bug #15891]

commit aeb9a0ca77725896ef072fa9bc0a031430a3a0e5
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-06-01 01:21:52 +0900

    appveyor.yml again!

    This issuse is caused by MSYS2 changing from using ncurses to pdcurses.
    Appveyor's MSYS2 is so out-of-date that partial updates are 'troublesome'...

commit 1d37cc1900b6cf13285417577cb21c01195d3d2a
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-01 02:02:08 +0900

    Update to ruby/spec@cfe908c

commit f97979ce888492cbf1c3c92839e086fbec1e5d15
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-06-01 02:02:06 +0900

    Update to ruby/mspec@a57a9af

commit 552c42f51f75eeeaa5a46e2df28fd5dab77261da
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-06-01 00:34:38 +0900

    Separate raw keystroke config for each platforms

commit 8fc552adee76ec324a219ba6b19fa2e39a1e014e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-06-01 00:03:18 +0900

    * 2019-06-01

commit 88770c2ab668cd01cac016fcf81cb2c8f265ab18
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-06-01 00:02:35 +0900

    Support Home and End key to move to beg and end

commit 21a43489b18d2ceb04182e0d36bb906439a86610
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-31 22:53:01 +0900

    Use IO#sync= instead of a monkey patch

commit 73890d9d79425415774a3a2d72ee5882bc41e5c7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-31 22:32:47 +0900

    Flush  I/O immediately if RELINE_STDERR_TTY is set

commit 913661cca08ccc6e2b4fd7367ddafcc7e2569a36
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-31 22:15:43 +0900

    Bump irb version to 1.1.0.pre.1.

      Because the current irb support reline and have many of changes.

commit 1457ad1ea77ff2dd6498ad9c8f1ab6c8165df98e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 19:12:24 +0900

    [DOC] JIS X 0301 has been updated

    [ruby-dev:50790]
    * https://www.meti.go.jp/press/2019/05/20190520006/20190520006.html
    * https://www.meti.go.jp/press/2019/05/20190520006/20190520006-2.pdf

    [ci skip]

commit 8b39df854d7dea1c15949c6b047bcb0f0a12c287
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 16:31:22 +0900

    Let irb use an empty file as irbrc

    to get rid of side-effect by existing .irbrc file.

commit b632566d339968bfd271a07e290a71bbb7f621ec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 16:14:27 +0900

    UNIX domain socket name length has a certain limit

commit b1aecef87364631b0001dd2aafc432931e19a98f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 15:58:50 +0900

    Use UNALIGNED_MEMBER_PTR

    * internal.h (UNALIGNED_MEMBER_ACCESS, UNALIGNED_MEMBER_PTR):
      moved from eval_intern.h.

    * compile.c iseq.c, vm.c: use UNALIGNED_MEMBER_PTR for `entries`
      in `struct iseq_catch_table`.

    * vm_eval.c, vm_insnhelper.c: use UNALIGNED_MEMBER_PTR for `body`
      in `rb_method_definition_t`.

commit ea42423908ed055f9039b1dce6e9a232a3b2dd90
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-05-31 12:16:27 +0900

    Keep vm->orig_progname alive

    `vm->orig_progname` can be different from `vm->progname` when user
    code assigns to `$0`. While `vm->progname` is kept alive by the
    global table, nothing marked `vm->orig_progname`.

    [Bug #15887]

commit 83f9183a7e549b0d7e6b68e298d57744ddb4d97f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 14:05:01 +0900

    Also GCC 9 provides -Waddress-of-packed-member

commit d2f663d6f185f62ef019434caf9bd6afd63849d4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 10:05:38 +0900

    STATIC_ASSERT for VM_METHOD_TYPE_MINIMUM_BITS

commit d180e405703b36c3f3a84334779c56bf9a3ea6a8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 02:52:41 +0900

    Add --limit option and default it to 20

commit 1e9057b54a53e7bc1fa3d0e3eaef1dd33707d044
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 02:30:29 +0900

    Prefer the current branch or tag name

commit fd658ec821f07e0a2254fcd62ce29cc644d61302
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 02:28:38 +0900

    Define RUBY_FULL_REVISION

    Only if the short revision differs from the full revision.

commit e8c710b11a02c6ab82b358fc671a14f378cb1974
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-24 13:10:40 +0900

    Fix visibility of some methods when using DelegateClass

    Public instance methods added to a delegated class after the
    creation of the delegate class were not returned by the
    public_instance_methods class method of the delegate class.

    Protected instance methods in the delegated class when the
    delegate class is created were returned by the public_methods
    instance method of the delegate class.

    Patch mostly from Kenichi Kamiya <kachick1@gmail.com> in
    GitHub pull request 926.  Minor changes to get it to apply,
    and to fix tests after applying by me.

    Fixes [Bug #11512]

commit 1cd93f1cdfbe6f7e71b05b3f8e707f21d70e94ba
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-12 08:32:00 +0900

    Allow DelegateClass() to module_eval given block

    Methods that return classes often module_eval the given block
    (e.g. Class.new and Struct.new).  This allows DelegateClass to
    work similarly.  This makes it easier to use DelegateClass
    directly without subclassing, so as not to create an unnecessary
    subclass.

    Implements [Feature #15842]

commit 856593cc4972562d2ab0a59a61f38fe3a4a863ab
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-31 09:44:14 +0900

    Fix typo :bug: [ci skip]

commit 6a5e89e23c433199f926d757481bc3c29fce7854
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-31 07:24:08 +0900

    Set git config to commit mjit-debug

    As it failed to commit like:
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cefd8a8105780001c4f2d5d?step=5cefdd1e48fad200077fa3f8

commit cb40a21da0687b5dd3cd251c9e66bb0edf67f2b9
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-31 06:03:18 +0900

    Warn compile_error only when input is finished

    Let's say we are in progress to write `"foo"`:

    ```
    irb> "fo
    ```

    at this moment, nothing is wrong.
    It would be just a normal way to write `"foo"`.

    Prior to this commit, the `fo` part was warned because of
    5b64d7ac6e7cbf759b859428f125539e58bac0bd. But I think warning such a
    normal input is not valuable for users.

    However, we'd like to warn `:@1` or `@@1` which is also a syntax error.
    Then this commit switches the syntax highlight based on whether the
    input text is finished or not. When it's not finished yet, it does not
    warn compile_error.

commit 6e052817f95095217b67256aff48cedbd57717cf
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-31 06:17:56 +0900

    Abstract away Ripper::Lexer#scan in IRB::Color#scan

    because 5b64d7ac6e7cbf759b859428f125539e58bac0bd made it hard to
    understand #colorize_code for me and this change is needed for my next
    commit.

commit 8f83fe3b02f6689cd1ea85ec59c6fad12066f301
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-31 05:53:02 +0900

    Finish with ^D only when input is completely empty in vi insert mode

commit a4161b7649c5aec6ff4d857863e0e829f9d7fde8
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-05-31 05:11:24 +0900

    Update to ruby/spec@0ba5312

commit e935a3227d1553539f65d1475f2c161082ba7148
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-05-31 05:11:22 +0900

    Update to ruby/mspec@3cc36d0

commit c55db6aa271df4a689dc8eb0039c929bf6ed43ff
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-31 00:01:41 +0900

    * 2019-05-31

commit f7aa80b3feeddac6a5689f286b3db3728128caa4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-31 00:00:26 +0900

    Make the target name unique when BASERUBY=no

commit ab0c8cc021b26712c9af9b1309244b7d930c9dfa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-30 22:57:49 +0900

    Touch Unicode headers and the timestamp before packaging

    Not to download Unicode data files at building from the packages.

commit f0945176c356cfe615ff6b4e6012e7e8e0911bd6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-30 22:27:11 +0900

    Fix missing `gitcmd`

commit 22cd4027349f803efc7ede284376b7a7013f8dfe
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-05-30 22:19:36 +0900

    vcs.rb support non-inplace build

commit 92ecf58b1e8ed15f5ec2bf69e3871de4343f71e0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-30 22:03:33 +0900

    parse.y: adjust here-doc error token

    * parse.y (here_document): adjust token to the here-doc identifier
      in compile_error when a here-document misses the closing
      identifier.

commit b0e2b7a5ff0df14b3c8062c31ebb526a73a03763
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-30 21:49:08 +0900

    Include stack elements left after errors

commit 279c8e14d4b079e5b70b0389b82893de42b75c50
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 20:54:28 +0900

    Use rebuilt buffer data to rerender all

commit 74a0e3ec235380541db95e18978e4e1aa174b407
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 20:06:59 +0900

    Use start_with? for escaped quote too

commit ecd0f1d966209742382e5bd4591bafc88152a697
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 18:29:26 +0900

    Use negative lookahead and start_with?

commit fcca39fa73607e6acf2aea00fd8bf746023955dc
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 18:20:59 +0900

    Fix strange vertical cursor moving when adding a newline at bottom

commit 106843d839cb5779c7e2761b826aea78bd9a7e63
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-30 17:12:53 +0900

    * expand tabs.

commit 5fc9f0008f824936c667970593df1b6663f0ae24
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-30 17:12:26 +0900

    reorder bitmap clearing.

commit dd63d7da61c472809c5e6a1dba81b7dea5aa1c1b
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-30 16:57:37 +0900

    move pinned_bits[] position in struct heap_page.

    pinned_bits are not used frequently (only GC.compact use it) so
    move it at the end of struct heap_page.

commit e15de865837262122cc64705440d00efac4b8c71
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-30 16:52:42 +0900

    introduce `during_compacting` flag.

    Usually PINNED_BITS are not needed (only for GC.compact need it)
    so skip updating PINNED_BITS if the marking is not by GC.compact.

commit 70e87d9660af24fb93cac1312b6e1990602c1396
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-30 15:49:48 +0900

    Do not rely on IRB.conf[:MAIN_CONTEXT] before initialize

    so that we can colorize binding.irb source lines.

commit 55c34b994b40db4d9fdbc29d9d8521745a56fdfd
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 15:34:41 +0900

    Check the end token of heredoc correctly

commit 5a229b0a88679529a18aa3ef87317bdbd1783c58
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 15:19:30 +0900

    Calculate vertical position correctly when rerendering all lines

commit 90014dddec70219c2da800bf0d4d262bfa99c9a8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 15:04:37 +0900

    Fix broken rendering when the last line is auto-wrapped

commit eae953ba9ff3302a698115f34893f17bf458d2ea
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 14:19:58 +0900

    Rerender following lines when line number increased

commit 1cf9f79342c517e3f12ba614ad874b1d619af5bc
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 14:04:14 +0900

    Clear remaining lines when line number decreased

commit 4a31c1e45d12b7813096948616f8a03224f20ac8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-30 12:35:27 +0900

    parse.y: continue after heredoc error

    * parse.y: continue parsing the rest of the here-document starting
      line, after the terminator was not found.

commit cb520e76237d3884b768f4f68120beb13fcf1f04
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-30 12:29:38 +0900

    Fix the auto-wrap behabior that was too buggy

commit f0ded366933407cfd0ad2c516b69d2766d1634d2
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-30 10:40:03 +0900

    Use Regexp#match instead of #match for 1.9 BASERUBY support

commit d2ba80b5df7118383cbcfae934316310c6d81633
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-30 09:58:18 +0900

    Revert "Fix building with 1.8 BASERUBY"

    This reverts commit 05bc14d81a1d7f6af826a92371aeff0c3fb2a67e.

    We have decided that the cost of reintroducing support for 1.8
    BASERUBY outweighs the benefit.  If you are still using 1.8 and want
    to build master/trunk, build and install the latest release, and use
    that as BASERUBY.

commit 5867e51e8311d1ed49457e946751cd0c06a306b8
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-30 04:13:37 +0900

    * 2019-05-30

commit 814eaa25e2a54b5997f0d89da1a6e2259d4fc1e9
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-30 04:12:10 +0900

    Do not use rb_iseq_path() while moving ISeq pointers

    in GC.compact.

    While `in_jit` is false, GC.compact is allowed to run and it may be
    moving ISeq-related pointers. So calling rb_iseq_path() when `in_jit`
    is true is illegal.

commit 5b64d7ac6e7cbf759b859428f125539e58bac0bd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-29 22:03:47 +0900

    Colorize errors more

    * lib/irb/color.rb (IRB::Color.colorize_code): colorize
      `compile_error` part as same as `on_parse_error`.

commit 12644e8b0208b01f4f4cea550d161a86e6f25aa8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-29 21:59:34 +0900

    Get rid of nested string interpolations

    * lib/irb/color.rb (IRB::Color.colorize): get rid of nesting string
      interpolations not to confuse ruby-mode.el

commit 1da5c73932b2dcf2a089f125df1fe7cc4ab9fafd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-29 21:39:45 +0900

    parse.y: fix state after ivar/cvar

    * parse.y (parse_atmark): return EXPR_END or EXPR_ENDFN, depending
      on the previous state, even incomplete names consistently.

commit 83e905eb4e6d1e8a7ebe88e3b1a6d7efa67ba01c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 20:24:00 +0900

    Revert "Use "require" just for essential"

    This reverts commit ab7a6e1a1651d82d327d155b78a8e3af1d976707.

commit ab7a6e1a1651d82d327d155b78a8e3af1d976707
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 20:20:48 +0900

    Use "require" just for essential

    The 559dca509d2a98584b09c7d9a6d74749ce793ad7 contains an excess range in
    using "require".

commit fafcbe0eb0af0aa25ca1fa6e162e081bb78a8107
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 18:52:20 +0900

    Use reversed get_screen_size correctly on Windows

commit 5ceff480c2c1696e9893a1e5e09e39f8425c6c5a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-29 16:02:09 +0900

    ripper: Ripper::Lexer#scan

    * ext/ripper/lib/ripper/lexer.rb (Ripper::Lexer#scan): parses the
      code and returns the result elements including errors.
      [EXPERIMENTAL]

commit 7c0639f3f83f85557aff87e94da1afd373555bcb
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 16:47:57 +0900

    Never make a method call from MJIT worker

    by showing line number only when it's Fixnum.

    When it's not Fixnum, we need to call a method to know the line number.

commit ce7b1132c581375dafa6a5b5071e66eaa362b429
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 16:22:26 +0900

    Do not call FIX2INT while GC.compact may be running

    because FIX2INT might crash by moving method entry pointer:
    http://ci.rvm.jp/results/trunk-mjit@silicon-docker/2063412

commit 468b475e615e59c0778751051ecda175140c615e
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 16:09:07 +0900

    .travis.yml: Minor reorder for shortening

commit 1a0c3d8dd64eb90f5d74e68458d686c4f9cc1669
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 15:04:31 +0900

    Convert Enumerator to Array for Ruby 1.9.3

    String#lines seems to return Enumerator in Ruby 1.9.3, and it does not
    respond to #delete_if https://travis-ci.org/ruby/ruby/jobs/538559919

commit 5379ca92501c529005c0818f3cbbd1ef0798de6d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 14:56:58 +0900

    Skip spec broken since a66bc2c01194a9c017c874a30db5b3b6bd95e966

    This has not worked since the merge https://travis-ci.org/ruby/ruby/jobs/538438184

commit 068d327595814a3448290eeba897fc37a8bb2dfb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-29 13:34:19 +0900

    Colorize compile_error as same as on_parse_error

commit cc66272e5061020cac6864bbc2f68f7d327ecfbb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-29 12:48:49 +0900

    parse.y: flush invalid char

commit 8552e9d69693b1d3f99a30d846b9dcc30bf590c2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-29 13:24:01 +0900

    Fix shorten-64-to-32 warning

commit aee36bf149bedf97007584ac5d6cd5d438be28b5
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-29 13:12:15 +0900

    Fix Possible Control flow issues (DEADCODE)

    Coverity Scan says `Execution cannot reach this statement: "poison_object(v);"`,
    so do nothing when `ptr` is always 0 without address_sanitizer.

commit e04d10b28f47ea4d32f9562aedc4be9749415219
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-29 13:01:53 +0900

    test/rubygems/test_gem_stream_ui.rb (test_ask_for_password): extend the timeout

    for Solaris.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190528T191908Z.fail.html.gz

commit 8187ffa461be6c1ee198c0b8f2c3a22ca2681d9a
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-29 12:30:36 +0900

    Revert "Colorize error part more"

    This reverts commit c7f3c222c9b82736c993419daa6bfb643e5c0793.

commit c7f3c222c9b82736c993419daa6bfb643e5c0793
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-28 18:19:59 +0900

    Colorize error part more

    Colorize `compile_error` parts as well as `on_parse_error` parts.

commit 34fe1f7d719d556cd7eda16d4df7cc64ce25dcfa
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-29 12:09:19 +0900

    Create empty revision.tmp if BASERUBY is not yes

commit 3f132979236f4aa42e3347a920123ce271a1e695
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 10:04:39 +0900

    Remove extra items because Reline::HISTORY is a sized queue

commit c86d1fbed5e887ea7b59582510fb26ec912b7898
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-29 09:46:44 +0900

    Create empty revision.tmp if no BASERUBY

commit f60a59ed20648ddc4784d2dcb172d10c5f3405ed
  Author: MSP-Greg <MSP-Greg@users.noreply.github.com>
  Date:   2019-05-29 06:03:30 +0900

    appveyor.yml - update for msys2  - pdcurses, force toolchain

    Closes: https://github.com/ruby/ruby/pull/2208

    Merging the PR for fixing AppVeyor msys2 failure related to GCC 9 like:
    https://ci.appveyor.com/project/ruby/ruby/builds/24877992/job/ned5k4k5rwxnld5j

commit 98ba116d402e7c255dae78ce43b76723a56c4cb7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 09:02:39 +0900

    Revert 3b7862c8e88cd7838a53ec083ac5733386400956 causing various CI hangs

    and dependent commits c67934b1c3b40dda5f170b032423e520511c68dd and
    f0d1dc5cee87dfb023cb43a2db9bcdef5a8dee8f.

    RubyCI and ci.rvm.jp are almost dead by timeout since this commit.

    ---

    Revert "Skip a reline test hanging on Wercker since 3b7862c8e8"

    This reverts commit f0d1dc5cee87dfb023cb43a2db9bcdef5a8dee8f.

    Revert "Remove extra items because Reline::HISTORY is a sized queue"

    This reverts commit c67934b1c3b40dda5f170b032423e520511c68dd.

    Revert "Use existing instances for LineEditor and Config"

    This reverts commit 3b7862c8e88cd7838a53ec083ac5733386400956.

commit 797d7efde18c5f7acf5264047842fd974f383ca9
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 08:56:26 +0900

    Prevent MJIT compilation from running while moving

    pointers.

    Instead of 4fe908c1643c3f355edd787bb651aefb53b996c0, just locking the MJIT
    worker may be fine for this case. And also we might have the same issue
    in all `gc_compact_after_gc` calls.

commit 6b5e712361cca8559ed66d5c1106e888c5971d39
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 08:22:02 +0900

    Make tool/vcs.rb compliant to BASERUBY

    People seem to consider BASERUBY is either 1.8 or 1.9 now. Since this
    file may be executed by BASERUBY from file2lastrev.rb, I think we should
    not rely on Ruby 2.0 in this file for now.

commit e1f62d7f0e33de81a194f26a2c57e14e38d9de52
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 07:46:44 +0900

    Check the result of file2lastrev.rb if HAVE_BASERUBY

    is yes.

    We ignored the failure status of file2lastrev.rb on 73da429c36c, but it
    was for an environment without BASERUBY. I think we should skip running
    file2lastrev.rb on HAVE_BASERUBY=no, and run it and check the status on
    HAVE_BASERUBY=yes.

    Otherwise we may have an ignored arbitrary error of file2lastrev.rb on
    HAVE_BASERUBY=yes environment.

commit f0d1dc5cee87dfb023cb43a2db9bcdef5a8dee8f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 08:08:33 +0900

    Skip a reline test hanging on Wercker since 3b7862c8e8

    like https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cedad11105780001c4e7001?step=5cedaf6b48fad200076fe77b

commit 67f75d5b4332f6bef2d1ea19803dc6092e6cbf3b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 08:04:48 +0900

    Add TESTOPTS=-v for Wercker test-all --jit-wait

    because it's hard to identify which test causes a hang for now.

commit 8d837431709c004a0fcd0a9f7f811ced04a040d7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 06:53:18 +0900

    Use IO.copy_stream

commit a4a682c450164d1d4371e00a4f83429aa85d29ae
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 06:11:24 +0900

    Check RUBY_YES_I_AM_NOT_A_NORMAL_USER env to access RubyVM doc

commit d341bb285768ae70bc8d251e577181c57322968c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 06:08:25 +0900

    IRB never show RubyVM's doc

commit d390af3686d640dd2aa54af51ed5c2a8e581a46e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 06:54:49 +0900

    Encode completed strings correctly

commit 3e54ff67e6dc1c5882fc05392add09bc59c1afae
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 05:53:09 +0900

    Test BASERUBY: Ruby 1.9.3 on Travis

    We have no clear assertion or check of BASERUBY requirement.
    I want to make the current situation more explicit.

    I'm NOT saying we should support Ruby 1.9.3 here,
    but I'm just checking the situation as per 05bc14d81a1d7f6af826a92371aeff0c3fb2a67e.

    FYI, at this moment Ruby 1.8.7 did not work with this Travis config, like:
    https://travis-ci.org/k0kubun/ruby/builds/538459100

commit 91f5a8db593f9eef739517dc0067dae439934311
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-05-29 06:15:57 +0900

    Update to ruby/spec@0c5c5c1

commit c67934b1c3b40dda5f170b032423e520511c68dd
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 05:58:33 +0900

    Remove extra items because Reline::HISTORY is a sized queue

commit 3b7862c8e88cd7838a53ec083ac5733386400956
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-29 05:53:14 +0900

    Use existing instances for LineEditor and Config

commit a66bc2c01194a9c017c874a30db5b3b6bd95e966
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-05-29 05:41:48 +0900

    Update to ruby/spec@9a501a8

commit d070523e7be4b95914adeef9a10401fba7718c5a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 05:27:53 +0900

    Drop unused Travis config: universal-darwin17

    This has been unused since b7f5c573ef20dbbf5534ee3a45625c7f9d45f2ec.

commit 462a63c39e7aa20253d6256077d298458c9ef7f3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-29 05:09:59 +0900

    Drop MJIT debug code from GC.compact

    As ko1 added some improvements on GC.compact, I want to check if it
    solved the problem too.

commit abd556958d11321cf0a2991a86dc8b1a714fc79a
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-29 00:07:07 +0900

    * 2019-05-29

commit c730c25354a18e99b9147c30ecc8f986d6a172f1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-28 21:39:13 +0900

    parse.y: warn escaped whitespace

    * parse.y (warn_space_char_code): warn whitespace characters
      escaped with meta/control prefix.

commit fb568fe724b0c8b2582263ed859ad10f0bd90d38
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-28 23:46:07 +0900

    Added missing predicate macros

commit 8a2b497e3b8d9c9be27278081526cace50490140
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-28 15:57:20 +0900

    remove obsolete rb_gc_finalize_deferred().

    rb_gc_finalize_deferred() is remained for compatibility with
    C-extensions. However, this function is no longer working
    from Ruby 2.4 (crash with SEGV immediately).
    So remove it completely.

commit 2562b7d7cd6621970fed1ad72d87f8d23d50d398
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-28 11:08:53 +0900

    Unify RELINE_TEST_ENCODING setting

commit d5f408403f805b2ff616b9c43528d9fdffa3bf60
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-28 11:08:22 +0900

    Set read-only with attrib command

commit 62b3d4c721334108f89cd59407ffd910204e7868
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-28 14:36:29 +0900

    Skip following all digits after `@@`

commit 40e175b390f39afdddcfbf74afcad96093a158e7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-28 14:20:42 +0900

    Clean a garbage [ci skip]

commit 05bc14d81a1d7f6af826a92371aeff0c3fb2a67e
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-28 12:54:20 +0900

    Fix building with 1.8 BASERUBY

commit f3bddc103d6a9d6e679ab35d1d3e8ab7aa2f3ae4
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-28 11:42:31 +0900

    use malloc() instead of calloc().

    Here malloc() is enough because all elements of the page_list
    will be overwrite.

commit f9401d5d44dd4ae69b6a14fcccd41c2810033986
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-28 11:41:49 +0900

    should skip T_ZOMBIE here.

commit 2229acaa54e1011ae77710e10f8c9e7933403127
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-28 11:41:03 +0900

    should use heap_eden->total_pages.

    The size of page_list is heap_eden->total_pages, but
    init_cursors() assumes the size of page_list is `heap_allocated_pages`.
    This patch fix it.

commit 72333286c45ac821e227ad62d810a09a0208ecbb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-28 11:38:13 +0900

    Fix typos in Ripper::Lexer#inspect and Ripper::Lexer#pretty_print

commit ccfb12d76ca58957cb95692594626169a97224b7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 11:02:44 +0900

    Fix condition..."and" is lowest priority operator, than "="

commit 7f211bfe6c5e4a763412406e5e257ea275ca53da
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-28 10:26:23 +0900

    use only eden_heaps on GC.compact.

    `heap_pages_sorted` includes eden and tomb pages, so we should not
    use tomb pages for GC.compact (or we should move all of tomb pages
    into eden pages). Now, I choose only eden pages. If we allow to
    move Zombie objects (objects waiting for finalizers), we should
    use both type of pages (TODO).

commit cfd839c140707852340a840e9e164e0f211fbb42
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-27 17:15:58 +0900

    Suppress warning (uninitialized variable).

commit fa7a768fdfe5223a29db4fa71b3e6101fb02ad51
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-28 10:23:21 +0900

    Removed inconsistency file from upstream repository of rubygems.

      followed up ae2a904ce9bffedee7d110dc60fd51c0a2879a5b

commit 165ddfda20f6db8a3149d14c4f431fc242ddab70
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-28 10:07:55 +0900

    * remove trailing spaces.

commit ae2a904ce9bffedee7d110dc60fd51c0a2879a5b
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-27 23:44:15 +0900

    Update the certificate files to make the test pass on Debian 10

    The old certificate files (for example, test/rubygems/ca_cert.pem) were
    signed by SHA1.  This message digest is considered too weak and rejected
    by OpenSSL 1.1.1 or later.  Because of this, the test suite does not
    pass on Debian 10.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian/ruby-master/log/20190527T123003Z.fail.html.gz#test%2Frubygems

    This change regenerates the files.
    A shell script for the regeneration (util/create_certs.sh) is also
    added.

commit cf904d9f9fb18fd2982651946125db62066c3ff5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-28 10:02:30 +0900

    Avoid doubly building Travis and AppVeyor

    but on "master" branch.

    For Pull Request, I changed the approach from
    d9b338a53f520b2dbb05555f18b8de8072300f40 and
    277e68825a8e4d0e6503a32e41f8b1b6c078b567.

commit 1cdaa17a065c529354fa9bcb4a1f3001783900ef
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-28 08:44:28 +0900

    parse.y: numbered parameter symbol

    * parse.y (parse_atmark): numbered parameter name is not allowed
      as a symbol regardless the context.

commit 57b4df07bc1e863c48a3b0f4c3185de431454695
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 08:38:55 +0900

    Use Reline.completer_quote_characters to complete

commit 74c88e7cda8640084077003ec00b004f9dd7ae73
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 05:10:49 +0900

    Fix reversed row and column get_screen_size on Windows

commit f6b62d8fe77a474935ef3dee6bb20ca3cc4da602
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 04:39:29 +0900

    Use Shift+Enter as Meta+Enter on Windows

commit 8b135cc8752abf89f2c11fb8760febb756348577
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 04:25:50 +0900

    Use VK_MENU instead of VK_LMENU to check ALT on Windows

commit d5682eb9396c7813f50a1400f7e801d0058c6c6e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 03:25:31 +0900

    Remove unused variable from IRB::InputCompletor

commit 5e275dd2af4d9d24cdb1cfc0f232f348dae9c2cd
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 03:23:52 +0900

    Treat :@1, :@@1, @1, and @@1 correctly to check termination

commit 7447c7b651d9074879429bb84dd73f8821521f27
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 01:52:04 +0900

    Join next line if deletes newline at end of line

commit 69c7ad17235319c78766102068402ab9fcc9a5ca
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 01:51:01 +0900

    Exit only when blank input

commit b2b5ed14104d2010ceae9fc81823bdcdc84b3bd7
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-05-28 01:30:15 +0900

    Suppress duplicated warning

commit 9a68aba79f8a3e144e6409988c2e17a5d3f11f26
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 00:15:38 +0900

    Support OSC and treat \1 \2 correctly

commit 70166b3ca3eff9747d8c861b3a30e3ef96ffbb72
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 00:20:43 +0900

    Revert "Support OSC and treat \1 \2 correctly"

    This reverts commit 77bfebebc44c5e46ebd156d074081846c037f882.

commit 11778fd246a7fe58c3edfa1dbdb87f62b1f36747
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-28 00:20:24 +0900

    * 2019-05-28

commit 77bfebebc44c5e46ebd156d074081846c037f882
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-28 00:15:38 +0900

    Support OSC and treat \1 \2 correctly

commit 8a2a5822caa7a9fc146d7de4db679986603d7a4f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-27 19:59:17 +0900

    Colorize error part

commit b4365e75fd70618b79b3a71c1c13f202acd71368
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-27 19:58:15 +0900

    Do not make an incomplete escape a valid char

commit c40003da25543b0f828911af56108ee16af35236
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-27 19:20:11 +0900

    Ripper#token

    * parse.y (ripper_token): added Ripper#token which returns the
      current token string.  [EXPERIMENTAL]

commit b3602f1d20baa4e5f29b2baff2c265461af78f56
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-27 16:19:30 +0900

    check the object is in tomb_heap.

commit 35146c436820f35733982bac870e409c57888575
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-27 16:12:30 +0900

    add a space between type and others

commit b3a6469e46b3c9c10176b066e5076ddcc5f96939
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-27 16:09:47 +0900

    add a line break for each error message

commit 6c1a07555c7fb37a5cd36f08489d33d779b4d41b
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-27 14:50:26 +0900

    fix GC.verify_internal_consistency.

    Fix debug output to dump more useful information on GC.compact
    debugging.

    check_rvalue_consistency_force() now accepts `terminate` flag
    to terminate a program with rb_bug() or only print error message.
    GC.verify_internal_consistency use this flag (== FALSE) to dump
    all of debug output.

commit 61da57c76a9e32a4154dac8f24f9b860d65b320d
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-27 14:37:48 +0900

    is_pointer_to_heap() checks also tomb or not.

    is_pointer_to_heap(obj) checks this obj belong to a heap page.
    However, this function returns TRUE even if the page is tomb page.
    This is re-commit of [712c027524].

    heap_page_add_freeobj() should not use is_pointer_to_heap(), but
    should check more explicitly.

commit ea6e284d86ccbc2d1ed5637acd0940a12b58b672
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-27 12:22:11 +0900

    parse.y: removed "parser_" prefix from tokadd_utf8

commit af17e111b3f7cb3c5ad7dc194399b44d0e5004d0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-27 11:57:48 +0900

    Added #inspect and #pretty_inspect to Ripper::Lexer::Elem

commit 43730256e800dd8e0c5cc482e9861868590ae037
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-27 12:58:08 +0900

    open-uri: Regenerate server certificates for tests

    OpenSSL 1.1.1 requires 2048 bits or more.  This change will fix:
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian/ruby-master/log/20190527T003004Z.fail.html.gz#test%2Fopen-uri

commit 4c277364a5e70983dcafc9b4d5d990414d61d264
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-27 11:47:09 +0900

    CSI allows empty digit which equals 0

commit 0aa9b003de353e690f31ba59ca0a2db1df51b8bf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-27 11:05:51 +0900

    context.rb: hide wrapping lines

    * lib/irb/context.rb (IRB::Context#evaluate): separate the code
      from wrapping lines to propagate the given exception, not to show
      the wrapping lines when SyntaxError.

commit 9840f52c77a928479919e539d2e47ce36b5ede49
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 10:18:09 +0900

    Use IRB::InputMethod#eof? to quit

commit 1d301acbe8e9b0df7872d6719d6646ade25630d6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 10:09:21 +0900

    Fix rendering bug of ^D

commit 9c136f3dea0c6052fefb377bf2c445daec1ca0b6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 08:39:39 +0900

    Move to next of last line by ^D

commit 4e2c7783e364f37a748fe0d3a3cd9f96e58287c0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 08:13:48 +0900

    Check blank history

commit 2805c55aa39bf6127e1e684deb0d5a0291cb6479
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 07:35:35 +0900

    Move to next of last line by ^C

commit c49796c9301845e17bd2d5b254ce75d40c898d56
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 07:00:06 +0900

    Reline should move to next line after finished in Readline mode

commit 29c16b30ce7655bf34ac59b1327ab13f83dc7970
  Author: Sutou Kouhei <kou@clear-code.com>
  Date:   2019-05-27 06:23:47 +0900

    Add support for history with Reline backend

commit 2c91c5b329796a0c7f3cda0296d7c6d6cd6aa8c6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 06:04:42 +0900

    Move to the other line when press <- at head or -> at tail

commit 716ba4a12732d94a50fb31bcaca4ce07bc4b6870
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 05:45:08 +0900

    Implement J to join lines in vi command mode

commit 64dc21830aa60dc757df48c715a73f704eed43e0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 05:01:04 +0900

    Remove \1 and \2 that escape CSI before render

commit c6b7cad5c903fa957c274d233c15fdcb3e4a9623
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-27 04:19:59 +0900

    .azure-pipelines.yml: Add timeout to install dependencies

    to avoid cancelling overall build pipeline when stucking there.

commit 64ee8900c89444692c6a51f0153869cb634bb086
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-27 03:32:23 +0900

    Highlight global variable on IRB

commit 7597f7ecb18ae537002391f9feb7f0e689d3b87b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-27 03:24:52 +0900

    Simplify lexer state matching in #dispatch_seq

    for improving readability of the condition. It may be slightly faster, or may not.

commit 5a6c77bbe8acd5929421c359bca57ef559a4f0fe
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-27 03:10:15 +0900

    * expand tabs.

commit 39eadca76b48fc7841da688f6745e40897ec37ff
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-06 16:02:11 +0900

    Add FrozenError#receiver

    Similar to NameError#receiver, this returns the object on which
    the modification was attempted.  This is useful as it can pinpoint
    exactly what is frozen.  In many cases when a FrozenError is
    raised, you cannot determine from the context which object is
    frozen that you attempted to modify.

    Users of the current rb_error_frozen C function will have to switch
    to using rb_error_frozen_object or the new rb_frozen_error_raise
    in order to set the receiver of the FrozenError.

    To allow the receiver to be set from Ruby, support an optional
    second argument to FrozenError#initialize.

    Implements [Feature #15751]

commit 897901283c79e5f5f33656abdd453dc272268748
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-27 02:29:20 +0900

    Refactor IRB color dispatch

    The reason why we were checking lexer state in addition to token was
    that we do not want to colorize local variable, method call, etc., while
    they share the :on_ident token with a name of method definition which
    should be colored as blue.

    It means that we're concerned about the lexer state only for :on_ident.
    Thus we can skip checking lexer state for non-:on_ident tokens. This
    refactoring is based on that idea.

    Also, now we manage Ripper's lexer state as Integer (use `|` if you
    need to check multiple states). It should be faster than using Array of
    Integer because #any? block call is not needed.

commit e73a68ebc322516a42821f502d6d5de5bfa1eb47
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 02:59:21 +0900

    Support op, cvar, iver, gvar and kw that follow on symbeg in IRB

commit 122679136820afc663b854567afd16e49eae5a96
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 02:55:37 +0900

    Support :@@cvar and : on colorize

commit e50aa359de2a419c0a04eaee84a095f602e1ccb1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-27 02:22:57 +0900

    Make the imaginary color on IRB close to pry

    and sorted the token names alphabetically.

commit 60cc03ffe7a4b67300b0b547dfa4ddaaa894ece6
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 02:13:27 +0900

    Fix indexes in comments of vi_insert.rb

    Previous fix was 2993b361333147f6dfb86a153971c22329ffbaf4.

commit 0f35c79ad6bcf409851049639d7200ce7f9787fb
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 01:59:17 +0900

    Fix number literal regexp of IRB completion

commit e39c950c2bcb8f77f12f841a7acc13b12402ee5a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-27 01:24:03 +0900

    Use correctly RI output in IRB completion

commit 2a7821b28964ba9d71d8714554502a02fabe3781
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-27 00:45:50 +0900

    * 2019-05-27

commit a43c637660cd3c893401e899014d721d2fa2a5b4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-27 00:07:05 +0900

    parse.y: broke the terminator condition down

    * parse.y (here_document): broke the terminator condition down
      into each piece, the positional condition, resetting the
      dedented here-document indentation, and matching identifier.
      suppress a false warning by icc.

commit 4f2a7b800110346292890e3bed41b37f3f58ab0b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-26 23:44:57 +0900

    Colorize imaginary and rational literals

commit 23270f6fee88668a5099fa16eb48739fba2d9dd6
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-26 22:29:30 +0900

    azure-pipelines.yml: Do not notify vs2017 failure

    It has not been stable recently. Let's stop notifying them for now.

commit 2ce6365f9ccd93e8129252429391118f794f5e0b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-26 18:45:59 +0900

    parse.y: adjust error indicator

    * parse.y (parser_yylex): adjust the error indicator of unexpected
      fraction part.

    before:
    ~~~
    1.2.3
    ^~~
    ~~~

    after:
    ~~~
    1.2.3
       ^~
    ~~~

commit 58308899151ee3d49f8d9ef5c4e8d108d8822525
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-26 18:24:06 +0900

    test/ruby/test_notimp.rb: Use EnvUtil.timeout for timeout scale factor

commit 2df2cdcff0b0358ebc98a43181b5271632563a68
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-26 17:25:16 +0900

    test/ruby/test_process.rb: Use EnvUtil.timeout for timeout scale factor

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-master/log/20190526T052508Z.fail.html.gz

commit 4668a3a9da9f02b073631013e71722868ceafa53
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-26 17:19:46 +0900

    test/lib/envutil.rb (EnvUtil.timeout): added.

    It is a wrapper for Timeout.timeout with the scale factor applied.

commit 02b39daef834890981689f1f697c7c25cad55dd6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-26 11:33:40 +0900

    Fix scanner event at invalid syntax

    * parse.y (parser_yyerror, parser_compile_error): revert
      r67224 (e5d10cda07b23682e5e4e64d1324e4d3247d4785) "Flush erred
      token".

commit f20af9543f278ab602d001dace850dcf4411cfa6
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-26 15:23:21 +0900

    test/rubygems/test_gem_stream_ui.rb (test_ask): extend the timeout

    for Solaris.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190525T211908Z.fail.html.gz

commit aaf6c678d272d4487179b7ae0b03990ac6b2aff5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-26 14:32:28 +0900

    Handle keyword symbol in IRB::Color::SymbolState

commit 52b09fcee1b170ad3be7d26b885b8a509c7ba006
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-26 14:29:16 +0900

    Deal with more syntax highlight edge cases

    Please refer to the tests again.

commit 8aba3b7a04738c8cebcf3d4ecacd57199d976ae2
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-26 13:39:11 +0900

    Fix more unintended syntax highlights

    See tests for what kind of things are fixed.

commit 13f58eccdab374ab14d33a6882c52e048cb52e3c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-26 12:47:29 +0900

    Always color Symbol as Yellow on IRB::Color

    Symbol color was made blue as a workaround because it was hard to
    distinguish `foo`s in `:foo` and `def foo; end` (both are :on_ident).
    But I wanted to make it yellow like pry.

    `:Struct` had the same problem in :on_const. Because the :on_const was
    also blue (but underlined and bold), it was not a big issue.

    While they're not so problematic since we got a workaround, we also had
    a more serious issue for highlighting a symbol like `:"a#{b}c"`.
    The first half was considered as Symbol and the last half was considered
    as String, because the colorizer did not have a state like a parser.

    To approach the last issue, I introduced `IRB::Color::SymbolState` which
    is a thin state manager knowing only "the token is Symbol or not". Having
    this module magically solves the first two problems as well. So now we
    can highlight Symbol as yellow in the perfect manner.

commit a516834b47de810b53241c66f677fafd4485bebd
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-26 09:48:38 +0900

    test/ruby/test_rubyoptions.rb (test_script_from_stdin): scale timeout

    for Solaris.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10s/ruby-master/log/20190525T131909Z.fail.html.gz

commit 208ed56e575b83c47d5cc2e48efd6807bb661bdd
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-26 05:54:03 +0900

    Colorize empty embexpr more on IRB::Color

commit ec759011201ce16db7079dbc26ae9c085c2608ba
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-26 01:32:12 +0900

    Fix completion menu state calculation

commit 2993b361333147f6dfb86a153971c22329ffbaf4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-26 00:48:26 +0900

    Fix indexes in comments

commit 98be203704e98c53b2d3b939b10a0d765c76d53d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-26 00:01:51 +0900

    Support some unhandled syntax highlight

    Heredoc, %i, :Foo, { 'a': ... }, ...

    :'a' is still half-broken.

commit a4d44b08ec5139f91617f0fc5786494c5076aaa1
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-26 00:00:56 +0900

    * 2019-05-26

commit d9c41f2dec7af7f44b4545f4111498c8af3569fe
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-26 00:00:03 +0900

    Use Reline.completer_word_break_characters to complete

commit ada64aa9e7f1e087b9fd536d9bc512de401f42a0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-25 23:48:58 +0900

    Clear IRB::Color escape sequence before newline

    because otherwise prompt and other things could be polluted.

commit 7c507345a73afe3f599e407e851b9c0d708adeb0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-25 23:21:37 +0900

    Build trunk branch too to trigger AppVeyor on PR

commit be851692cec43470aceed23ff40c198deb4d4680
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-25 23:21:45 +0900

    Build trunk branch too to trigger Travis on PR

commit e2db9f4cc35dacdca1c0d1f1ae79772dae093c34
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-25 22:52:10 +0900

    Add and use Reline::Unicode.escape_for_print

commit e691b4da5d1d70216be3e8853d18bcb6a62a617c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-25 22:31:13 +0900

    Respect --nocolorize on REPL source highlight

commit 65ce14e7b5f66a92f452136290357eb3df147e5b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-25 17:20:31 +0900

    Added --with-rdoc option

    New option to direct formats of RDoc to install.

commit 4fae3c3fb0847ba8eccb61b3c0cc0ae874c17cf0
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-25 16:56:26 +0900

    Show doc list to install

    Show document format list to install, not only enabled or disable.

commit 8fd3b9fc5f0f0ef031c54982236b6da327b81458
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-25 16:53:20 +0900

    Force update all RDoc at install

    RDoc needs to parse all files at once for the cross-reference.

commit 061c781a09de68c7e34e45732081aac337c4facc
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-25 16:38:18 +0900

    Drop method obsoleted by b83119be9e9a8611063142541993e4823a025622

    We might need to do the same thing in IRB::Color now, but I'm not doing
    that as I assume ANSI escape sequence does not come from a user input
    though Reline.

commit b83119be9e9a8611063142541993e4823a025622
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-25 13:21:22 +0900

    Incremental syntax highlight for IRB source lines

    Closes: https://github.com/ruby/ruby/pull/2202

commit 3c6e1a8cf911d312edeb9dfcc9153be68867ca4f
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-25 11:28:07 +0900

    Avoid to show warning message with unused variable.

commit 7686e33ee453d43210afcf90fef8fc613dede31c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-25 10:36:30 +0900

    JSON like label ends by differs from the start

    pp Ripper.lex('{ "a": 3 }')
     =>
    [[[1, 0], :on_lbrace, "{", EXPR_BEG|EXPR_LABEL],
     [[1, 1], :on_sp, " ", EXPR_BEG|EXPR_LABEL],
     [[1, 2], :on_tstring_beg, "\"", EXPR_BEG|EXPR_LABEL],
     [[1, 3], :on_tstring_content, "a", EXPR_BEG|EXPR_LABEL],
     [[1, 4], :on_label_end, "\":", EXPR_BEG|EXPR_LABEL],
     [[1, 6], :on_sp, " ", EXPR_BEG|EXPR_LABEL],
     [[1, 7], :on_int, "3", EXPR_END],
     [[1, 8], :on_sp, " ", EXPR_END],
     [[1, 9], :on_rbrace, "}", EXPR_END]]

commit 809ac9f2eaa0b9cf818f571f6febcee6785cc8e2
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-25 09:51:27 +0900

    * expand tabs.

commit 1ef39d8d099f145222b9352423af16a2bab6e05b
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-25 08:34:34 +0900

    Fix process not waking up on signals on OpenBSD

    When using UBF_TIMER_PTHREAD (the UBF handler on OpenBSD), the
    timer_pthread_fn function will not signal the main thread with
    SIGVTALRM in cases where timer_pthread is armed before
    consume_communication_pipe is called.  This is because
    consume_communication_pipe will unarm the timer.

    Fix this by checking the return value of consume_communication_pipe.
    If it returns TRUE and the timer_pthread is disarmed, then signal
    the main thread with SIGVTALRM.

    On OpenBSD, this fixes TestThread#test_thread_timer_and_interrupt, and
    fixes hangs in TestProcess#test_execopts_redirect_open_fifo_interrupt_raise
    and TestProcess#test_execopts_redirect_open_fifo_interrupt_print.
    It also fixes the use of Ctrl+C/SIGINT in irb on OpenBSD. It does not
    cause any test failures on Linux when UBF_TIMER_PTHREAD is forced as
    the UBF handler.

    Fixes [Bug #15798]

commit 19430b776c3ebae1adfdc5cbe6cdf69a92e37253
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-25 08:24:41 +0900

    Fix wrong variable name

commit 822468307b1a54eccd2711300008a3974c15141e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-25 08:08:54 +0900

    Add round-robin variable

commit 559dca509d2a98584b09c7d9a6d74749ce793ad7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-04-28 07:47:33 +0900

    Show documents when completion

commit 260235ce871c3e7718af8d612f1a8ed400b56070
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-04-28 06:37:39 +0900

    Use Reline as Reidline multiline editor in IRB

commit ff43b2262702e828e2008ba65e68b331d263e3d0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-25 02:13:14 +0900

    Enter key always means evaluate in Reline#readmultiline

commit 637ee7ee3853387b4f34aa350471692f1778693d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-25 01:13:02 +0900

    Fix C-v C-j

commit 27bab6a569389e743f09dd52c58d8d127eaa7772
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-25 00:44:09 +0900

    Revert "Change Reline's version with "Reline 0.0.0""

    This reverts commit 481ccf73d88797914f700e6e27711bf1ce997eb0.

commit 481ccf73d88797914f700e6e27711bf1ce997eb0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-25 00:40:14 +0900

    Change Reline's version with "Reline 0.0.0"

commit 4b012c23b282f48161718392cde8dc637f734623
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-25 00:38:57 +0900

    Check block in #readmultiline

commit b2150548001c412ad424251904d6ece1a80e55f4
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-25 00:25:42 +0900

    * 2019-05-25

commit eb4e774711b17b8a25a7b16c4f0b6044da3dc261
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-24 23:38:40 +0900

    Support Meta key in Reline

commit 2d34087a38ac680c5576a56fbf4104c3561b0204
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-05-24 21:48:10 +0900

    Add notes for the Process#clock_getres spec

commit 4541d2effe1f32e74d27602b44aff12cbf6937aa
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-05-24 21:29:47 +0900

    Only exclude the failing clocks for Process.clock_getres specs on AIX

    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/aix71_ppc/ruby-trunk/log/20190522T103301Z.fail.html.gz

commit 706c816ad270d981c37894b78ac49cdf1d7cf350
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-24 19:01:39 +0900

    Escape dots in regexp

commit a4da223c9a37e2384086f4306571ff0a753fa844
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-24 19:00:50 +0900

    * expand tabs.

commit 6ae9d5c85f3a2a7002b8fc0525e3aca645ec1709
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-24 18:59:58 +0900

    Revert "check it in eden or tomb."

    This reverts commit 712c027524e3a03500b3098d950fc2f0608ce897.

commit c06f9e1d24e0e164506c6b5946a02814319485cc
  Author: Martin Drst <duerst@it.aoyama.ac.jp>
  Date:   2019-05-24 18:22:36 +0900

    switch UNICODE_BETA to NO (one more try, first try didn't work)

        Unicode version 12.1.0 was officially released on May 7th, 2019.
        There were no changes at all from the "real" beta
        published shortly after the new era name "Reiwa" was announced.
        So we can switch UNICODE_BETA back to NO.

        common.mk: switch UNICODE_BETA back to NO
        tool/downloader.rb: add additional conditions to avoid an error
                            when moving from beta to final

commit b0a4d81fc3c9195f7462a096a50e857669c47918
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-24 17:52:58 +0900

    check RVALUE on verifier.

    GC.verify_internal_consistency() checks health of each RVALUE with
    check_rvalue_consistency(). However, this function is enabled
    only on debug environment (RGENGC_CHECK_MODE>1). So introduce
    new function check_rvalue_consistency_force() and use it
    in GC.verify_internal_consistency.

commit 712c027524e3a03500b3098d950fc2f0608ce897
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-24 17:35:22 +0900

    check it in eden or tomb.

    is_pointer_to_heap() checks if it is in valid pointer to the
    RVALUE in any heap_page_body. However, it returns true if it
    points tomb pages. This patch check it points to eden pages.

commit 10927b59256aeb196d164e8a8e75180a72768e97
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-24 17:06:43 +0900

    add separation char on rb_obj_info(imemo obj)

commit 2893550452f6f3cadb17c670da185813d7d0a835
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-24 16:10:59 +0900

    Mixed encoding error can continue to parse

commit 45ad375acccca2bb0852613b1e809a7af556f5e6
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-24 16:10:10 +0900

    [DOC] Use Rational literals than to_r in examples

commit 1a4080cb0ade6c700ce763d4290e5b56635d1bc8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-24 15:07:38 +0900

    Hoisted out ndigits_denominator

    * time.c (ndigits_denominator): calculate the denominator for
      digits.

commit 54d5b599e850c08f92581645c56e4f5ccf20eb45
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-24 14:31:53 +0900

    Fix typos [ci skip]

commit 25415780964f2a104523318f3ceef389bfae6e94
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-24 00:47:03 +0900

    Add leaked-globals to .travis.yml

commit 491d2b8063d1f4e1c9e8fe0a57ff66fbfdf7d622
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-24 14:25:46 +0900

    Removed symlinks by in-place build [Bug #15870]

commit 14778125b12b80f1ebb0474f0360204f6b3abae5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-24 14:24:38 +0900

    Removed and ignore symlinks by in-place build [Bug #15870]

commit e713c2bde8117f3aaf39d827d3fc504cd5866976
  Author: Martin Drst <duerst@it.aoyama.ac.jp>
  Date:   2019-05-12 16:21:24 +0900

    switch UNICODE_BETA to NO

    Unicode version 12.1.0 was officially released on May 7th, 2019.
    There were no changes at all from the "real" beta published shortly
    after the new era name "Reiwa" was announced. So we can switch
    UNICODE_BETA back to NO.

    common.mk: switch UNICODE_BETA back to NO
    tool/downloader.rb: add additional conditions to avoid an error
                        when moving from beta to final

commit 35caedc828667363413c7fbe4a4cc60758c426a2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-24 14:11:00 +0900

    --autostash is since Git 2.6 [Bug #15871]

commit dfc21a0467d39af00666aec5098530529924cf48
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-24 12:23:26 +0900

    Ignore generated files by in-place build [Bug #15870]

commit 7f2f56b2f51269f42f822ecf346375b040267595
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-24 12:22:17 +0900

    Define GITPULLOPTION to rebase [Bug #15871]

commit 50e993d4e347bd3e821c4996cc745fa0aa74bd64
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-24 12:17:05 +0900

    Skip the Process.clock_getres spec on AIX

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/aix71_ppc/ruby-trunk/log/20190522T103301Z.fail.html.gz

commit 498113d5d39a4227c2b9a9c11bea895fe316e6b9
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-24 11:20:12 +0900

    test/ruby/test_gc.rb (test_gc_stress_at_startup): extend time timeout

    It fails on some CI environments.
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian8/ruby-trunk/log/20190524T003006Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11s/ruby-trunk/log/20190523T002505Z.fail.html.gz

commit 1ee1e8fccdec8de86799db02d6f62ba3d064ba1e
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-24 01:03:23 +0900

    Test GC.compact with MJIT again

commit dde8ceaf709abca1e3af63739de65d2809691878
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-24 00:42:54 +0900

    * 2019-05-24

commit 187ef00a41ca28a26ffa0a9399c48335578590bb
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-24 00:41:18 +0900

    wercker.yml: Commit MJIT debug logs to another repository

    because too-large Wercker output is truncated.

    ruby/mjit-debug is a private repository for now, because the person
    fixing it is likely to be me or another committer.

commit 4fe908c1643c3f355edd787bb651aefb53b996c0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 23:53:41 +0900

    gc.c: Try pausing MJIT worker during GC.verify_compaction_references

    for debugging
    http://ci.rvm.jp/results/trunk-mjit-wait@silicon-docker/2048247

commit c04ef141d2edd71f90f0707889b4adfd94e5be43
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-23 23:34:18 +0900

    enum.c (enum_tally): better example in rdoc

commit e72769ef81a933959f4a85ee09eec66bedcbf022
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-23 23:24:22 +0900

    Enumerable#filter_map in NEWS

commit ccb165292962f42edbfc72cbf6b49a9ea8a319c9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-23 22:47:55 +0900

    New Time methods in NEWS

commit 0b4d51b055ad2806719b1f4a3eca5c1bbce64631
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-23 22:39:54 +0900

    * expand tabs.

commit f5415a95ce1d393a3fd1d7f657ba85d85171356a
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-03-16 14:42:24 +0900

    Add `Time#ceil`.

    Closes: https://github.com/ruby/ruby/pull/2133

commit fe3ff5afb07e171fd950623c69abfbabbb2762a3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-23 17:27:24 +0900

    Suppress paranoid warnings for external/3rd-party libraries

    [Feature #15665]

commit dc95b57a68da6999ce6a1542b3ad81c51429cc99
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-23 17:30:53 +0900

    add verifier before compact

commit 878a06efecbd2d71bf1a852a6367fbcd3e8edf93
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-05-23 17:24:15 +0900

    add comments [ci skip]

    Also requested by Ko1.

commit 763989c6c5a553fa072208e53707813fbde916d0
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-05-23 17:02:07 +0900

    prefix ASAN related inline functions asan_

    requested by Ko1.

commit 8fce83339b6a862001c4fbad6bcd72dc3efee136
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-05-23 16:55:20 +0900

    disable _FORTIFY_SOURCE

    Sanitizers and fortifications do not interface, and there is currently
    no plan for them to work together.

    See also https://github.com/google/sanitizers/issues/247

commit 6be0ab73c3f2cc95d76ca21203adf6a73c8705e7
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-23 16:52:14 +0900

    gc_pin() doesn't check is_markable_object().

    Caller of gc_pin() should check it is a mark-able object.
    So gc_pin() doesn't need to check it. With this fix,
    we can refactoring around it.

commit 65637dae30bda83b72f185bbcf01d7bad80926c7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 16:07:16 +0900

    Test GC.compact on MJIT again

commit c5cbabf8a8aa42b7dcf943c64274489286174108
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-05-23 15:33:40 +0900

    Use colorized IRB on Windows without checking `TERM`

commit 0acbdd1ed0d2302743525a5188cc5a0d6251680c
  Author: Alfonso Jimnez <me@alfie.cat>
  Date:   2018-11-20 19:51:08 +0900

    Adding Enumerable#filter_map

    [Feature #15323]
    Closes: https://github.com/ruby/ruby/pull/2017

commit 1ccc2eeba08c370d84474357771f0bd7c5fe7f16
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-19 16:24:33 +0900

    Pretend to update all Unicode files

commit c05eaa93258ddc01e685b6cc3a0da82998a2af48
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-15 14:04:46 +0900

    Fix mixed encoding in heredoc

    Heredocs are parsed line-by-line, so we need to keep track of the
    temporary encoding of the string.  Previously, a heredoc would
    only detect mixed encoding errors if they were on the same line,
    this changes things so they will be caught on different lines.

    Fixes [Bug #15839]

commit f91b1ab33d397fdcdf452d563d7f59469a078d88
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-16 13:08:49 +0900

    Skip assertion in readline test if Readline version is 4.3

    Previously, the entire method was not run for Readline 4.3, probably
    because it was known to fail. Commit
    c754e979d3eeca51f1b13778f19f347df3da656e removed the check for
    Readline 4.3.  Other than this one assertion, which also doesn't
    work when using Reline, the method runs correctly when using
    Readline 4.3.

    Fixes [Bug #15853].

commit 4814f173615f8f9f2f3429fe788089479490fe10
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-23 13:21:40 +0900

    skip zombies.

    rb_gc() no longer invokes finalizers, so there are T_ZOMBE objects.

commit 02973d3ba8020f494ad2d627284f9bc45db48f9c
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-23 11:42:15 +0900

    pin `maybe` pointers.

    Objects pointed by "maybe" pointers because of conservative marking
    should be pinned down.

commit 136ae55892ae120bb94e4ff2d025c745fdaa1091
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-23 11:21:16 +0900

    Do not kick finalizers on rb_gc().

    rb_gc() kicks gc_finalize_deferred(), which invokes finalizers.
    This means that any Ruby program can be run this point and
    it may be thread switching points and so on.

    However, it is difficult to think it invokes any Ruby programs.
    For example, `GC.compact` use `rb_gc()` to implement it, however,
    any Ruby program must not be run on this timing.

    For this reason (it is difficult to image it run any Ruby program),
    I removed `gc_finalize_deferred()` line in rb_gc().

    This patch solves GC.compact issue.
    [Bug #15809] and re-enable GC.compact test.

commit 0eff21af8d03a9d2b881b9cce963262da3d952dc
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-23 11:19:23 +0900

    update Array's length correctly.

    ARRAY_ASET() does not change the length of array, so
    use rb_ary_push() instead of ARRAY_ASET(). It prevents
    updating reference on GC.compact.

commit bb29ed6e336d26f25722f356e83a027394008443
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-23 08:33:20 +0900

    C-v C-j means an newline insertion

commit da3fabc976fb88c77e8b3446f2f0bc005e64056f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-23 08:23:22 +0900

    Change behavior to confirm multiline termination

    Always checks termination if you press Enter at last line.

commit c210c68d393b76149f02dc1f8b610269a53d94bc
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 03:14:54 +0900

    Revert "Revert CI deduplication on Wercker / Azure for debugging"

    This reverts commit 1ebe9a2f82fef5190454e68d430004282f5da172.

    because it did not help.

commit 1ebe9a2f82fef5190454e68d430004282f5da172
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 01:58:57 +0900

    Revert CI deduplication on Wercker / Azure for debugging

    CI seems to have a weird behavior now. Debugging.

    Revert "azure-pipelines.yml: Fix typo"

    This reverts commit f69d28fbca1eec8b9722cea1f989ee9554e8dad5.

    Revert "azure-pipelines.yml: Use simpler trigger syntax"

    This reverts commit 709756d89747bd36664593eda4156a7bf5ad7631.

    Revert "azure-pipelines.yml: Do not run CI on trunk"

    This reverts commit bec877b46fd4d0f621a75591b519a7e266eaa89b.

    Revert "appveyor.yml: Do not doubly run CI on trunk"

    This reverts commit d9b338a53f520b2dbb05555f18b8de8072300f40.

commit 00f7e424516a6c5ea58ddb3cc821d3cabe9c496c
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-23 01:46:21 +0900

    spec/ruby/core/hash/constructor_spec.rb: add "ruby_version_is" guard

    follow up for d3f1c615c5

commit a093c98ddc92d8b0a341233630aea8f778188c7e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-23 01:39:04 +0900

    Fallback RUBY_FULL_REVISION if not defined

commit f69d28fbca1eec8b9722cea1f989ee9554e8dad5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 01:18:30 +0900

    azure-pipelines.yml: Fix typo

commit 709756d89747bd36664593eda4156a7bf5ad7631
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 01:17:26 +0900

    azure-pipelines.yml: Use simpler trigger syntax

commit bec877b46fd4d0f621a75591b519a7e266eaa89b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 01:13:13 +0900

    azure-pipelines.yml: Do not run CI on trunk

commit b80adde359f82085db9065a9c06af5ee8f937c34
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 01:07:16 +0900

    wercker.yml: Notify master branch instead of trunk

commit 9d39eb6b40966deeeaa23c28f0be640c56545644
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-23 00:45:30 +0900

    range.c (inspect_range): omit beginless "nil"

    except the special case `(nil..nil)`.

    ```
    (1..).inspect      #=> "1.."
    (..5).inspect      #=> "..5"
    (nil..nil).inspect #=> "nil..nil"
    ```

    [Bug #15745]

commit d9b338a53f520b2dbb05555f18b8de8072300f40
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 00:40:09 +0900

    appveyor.yml: Do not doubly run CI on trunk

commit 277e68825a8e4d0e6503a32e41f8b1b6c078b567
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-23 00:33:44 +0900

    .travis.yml: Test master branch instead of trunk

commit d3f1c615c5b81319e422e9c92e1cb8ba82209fba
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-05-23 00:15:55 +0900

    hash.c (rb_hash_s_create): Reject `Hash[[nil]]`

    The behavior of `Hash[[nil]] #=> {}` was a bug until 1.9.3, but had been
    remained with a warning because some programs depended upon it.
    Now, six years passed.  We can remove the compatibility behavior.
    [Bug #7300]

commit 4d62296948c36615e73b99d592253256d0ea0d4a
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-23 00:15:54 +0900

    * 2019-05-23

commit a205e24747497391390ef7c004293a8a7934dd96
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-22 23:18:37 +0900

    Make RUBY_REVISION full length

commit d819d97cf02fd0a5b5b1f6ee69c9fdb83276e6c2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-22 23:18:09 +0900

    Default to the current branch

    * tool/make-snapshot: default to the current branch if no branch
      but srcdir is given.

commit 8fb77acac70bab6924c063020b6fe3e93fece242
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-22 23:50:07 +0900

    Fix revision name

    * tool/make-snapshot (package): dump to stringize GIT revisions
      properly.

commit 24684a81d2ed3ae32ad67659a8b18acd052727b5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-22 22:15:55 +0900

    Fix revision name

    * tool/make-snapshot (package): use the last revision of the whole
      tree as the revision name, not a single file.

    * tool/file2lastrev.rb: ditto.  dump without unnecessary subrange
      and literal quotes, to stringize SVN revisions properly.

commit 658f17b8ec56e3f8bbd70afdb92c6e7aa156e5be
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-22 21:14:12 +0900

    Fixed the method to delegate

    * tool/vcs.rb (VCS::GITSVN.revision_name): should delegate to the
      same method of SVN, not an undefined method.

commit 2fb69b32968e4c18c8b6fe0a9a33b454feccba32
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-22 16:54:47 +0900

    * expand tabs.

commit 32dd1a798a6d042dbf91e24e9c9f44d94e68f721
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-22 16:52:19 +0900

    gc.c: revert b00f280d4b "Eagerly name modules and classes"

    * gc.c (rb_raw_obj_info): new string objects cannot allocate to
      create new class path name during GC.

commit 4d93340d3836bc454cee0c74715a412d090ff178
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-22 16:33:03 +0900

    ast.c: update inspect results in the documents

commit 48f3dc3cce74f459a690f8434d191140a1c0d8a2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-19 06:37:01 +0900

    Set namespace tree

    * variable.c (set_namespace_path): set path to the whole namespace
      tree.  [Feature #15765]

commit 1b20d6a6c6b0f72804fb25f90e78fe8efdcbed56
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-04-12 12:46:28 +0900

    Extract build_const_pathname

    * variable.c (build_const_pathname): build constant path from
      name as a string.  [Feature #15765]

commit b00f280d4b9569e7153365d7e1c522b3d6b3c6cf
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-04-12 12:46:28 +0900

    Eagerly name modules and classes

    * variable.c: make the hidden ivars `classpath` and `tmp_classpath` the source
      of truth for module and constant names. Assign to them when modules are bind
      to constants.

    * variable.c: remove references to module name cache, as what used to be the cache
      is now the source of truth. Remove rb_class_path_no_cache().

    * variable.c: remove the hidden ivar `classid`. This existed for the purposes of
      module name search, which is now replaced. Also, remove the associated
      rb_name_class().

    * class.c: use rb_set_class_path_string to set the name of Object during boot.
      Must use a fstring as this runs before rb_cString is initialized and
      creating a normal string leads to a VALUE without a class.

    * spec/ruby/core/module/name_spec.rb: add a few specs to specify what happens
      to Module#name across multiple operations. These specs pass without other
      code changes in this commit.

    [Feature #15765]

commit a829be209fc5866f07adc93e8b2f1ddf7131ebfd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-22 08:57:20 +0900

    Ripper: no documents of fallback methods

commit c48d9139d4a979e534c1522d2a09ec2a440a8e9a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-22 07:03:29 +0900

    Remove unnecessary variable in LineEditor

commit c00d8056729b72724b86b0f0412c6f2ca9fd1318
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-22 06:48:27 +0900

    Support CSI sequences in prompt

commit ca435ed04ae15607c598808473c59dd7c83debc1
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-22 03:12:37 +0900

    Use Reline.test_mode in Reline's test too

commit f8732bd4d65cf0b776348907b56bd58f4f79ca9c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-22 02:52:29 +0900

    Reline#reset should initialize @rest_height and @screen_size eveytime

commit 232f1117e8aa83ed315d2f0c5ebaaa68e722d204
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-22 02:14:35 +0900

    * 2019-05-22

commit be86e71c674a6eb3221019cc9e988b3e999b2220
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-22 02:13:57 +0900

    Reopen $stderr with specified fd by RELINE_STDERR_TTY

commit b508b623ee1cc526cfd674218f6e6e7fa6b10f26
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-21 21:00:17 +0900

    Use conssitent documentation about repository [ci skip]

    This unifies our explanation with
    https://github.com/ruby/www.ruby-lang.org/pull/2069

    Co-authored-by: OKURA Masafumi <masafumi.o1988@gmail.com>

commit 2ecee730a577ece99d16792c12d6662578ac5a85
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 20:52:11 +0900

    Remove ~/.inputrc not found error message

commit 32ed85f601d2102990b62102c5f3b322306b1928
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-21 20:32:15 +0900

    Copy config to make IRB::Context#use_colorize? functional

    on initialize

    This fixes https://github.com/ruby/ruby/pull/2188

commit 4613c4bd5c22acb675ec385f4e0fa27ec7ad59ab
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 18:55:31 +0900

    Symbol beginning token may take a constant token

commit bb5b4f9044b583e192d56c7feda4d1084542efd3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 18:45:00 +0900

    Cursor should be at line head after line breaking

commit fd95ab44c66ce6b756f66210640cf8e8ffd1bd32
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 18:36:10 +0900

    IRB should eval and show an error when only `.` is inputted

commit 3f6b5f447caf8f8ca06d5c170e9266ef20945834
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-21 18:34:29 +0900

    re-skip tests of GC.compact.

commit 6d93baaedd0e9819d4ddb6637b2d3d539f1fa210
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 17:46:31 +0900

    Support DEL key

commit 8c004c71235c5ee8b2d4846672788d3089f3e884
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-21 17:45:28 +0900

    enable test for GC.compact to reproduce an issue on CI

commit 7ff4abe650038ec4a9fa5fa9e0fbc16ceff7714e
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-21 15:45:21 +0900

    unify normal and verify ver.

commit 0b9a7b35287e7c4db37e0f49612faeff29752108
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-21 14:58:39 +0900

    do not use RARRAY_SET() directly in array.c.

commit 44e9b1e3a6ba464a8ecc22cd7779af64ea01e2e8
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-21 14:23:42 +0900

    Fix typo

commit ac00bdc8a8ac2c62a94dd36a7784d15bbcb7df19
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-20 18:10:35 +0900

    Do not modify shared array

    [Bug #15821]

commit f9696ca6cbfe827b7ce7199e511fa7431f9333b1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-21 10:30:13 +0900

    Simplified the guard against old versions

commit be0d9c0d26adcf8017d0ce4adf782c1bea2b7240
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 09:24:09 +0900

    Add "require 'irb'" to use IRB.conf

commit 29c81265c1637245aa331f8d47c5060f4dc79ab0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 09:14:08 +0900

    Check whether IRB.conf is nil in IRB::WorkSpace#code_around_binding

commit 3a9008b9845db544d0788851f9527ce9f9f6bf4a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-15 16:36:33 +0900

    Add --colorize and --nocolorize options to IRB

commit df6a673ca55d26a768ead23466c7e055a8596d7a
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 08:10:36 +0900

    Fix vertical cursor moving when splitting line

commit 34d7ec4e9b0a24b3ce89009927738f1dac38e6d3
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 01:18:19 +0900

    Finish only when buffer contains non-blank line

commit b69dfdb4b3d9dfce18123d1814087fc49b390ea9
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 01:14:53 +0900

    Cursor up should reduce 1 than editing height

commit 8023b3ce9d654c1a58e1f4952b666e2c412938ca
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-21 01:10:47 +0900

    * 2019-05-21

commit 6592f5fcc8e7c6130eba5acf71d2763e7a6d58cf
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-21 00:59:43 +0900

    Check bytesize in vi command mode last char back

commit 583ecd5fc5d96a6a8135776db6e92b8565789fb0
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-20 22:08:27 +0900

    * expand tabs.

commit e83f10b36865c7fc3f3e09deab679c4270310021
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-20 21:58:06 +0900

    Get rid of undefined behavior that source and destination buffers overlap

commit 8c8f2d97cf51103b6f3d40bf7239a40899e380f6
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-05-20 17:41:57 +0900

    Remove redundant ignore rule for Process#clock_getres specs

commit 2a34543e11299146db688e636e0b95c22990e302
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-05-20 17:40:34 +0900

    Move exclusion for Hyper-V next to other skipped constants

commit ab0f2deab11a3203f9af3af1a27dfea1f4a882f3
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-20 14:39:46 +0900

    skip a test for CLOCK_MONOTONIC_RAW.

    On my Linux guest machine on Hyper-V, I got an error.
    Process.clock_gettime(CLOCK_MONOTONIC_RAW, :nanosecond) returns like:

      ...
      875573945119100
      875573945119600
      ...

    even if `Process.clock_getres(value, :nanosecond)` returns 1.
    So I simply skip this test for CLOCK_MONOTONIC_RAW.

commit 7ef548c0acf2f8b62db234e39a0f1030902a305c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-20 12:43:52 +0900

    Mixed encoding error can continue to parse

commit 9f49ff4965da8b05887912506dff7d0d20388550
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-20 07:45:36 +0900

    Cursor can't move to eol when vi command mode

commit f659e2f9bf0c7d0351a80dc284a384a948bd67dd
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-20 04:52:41 +0900

    * 2019-05-20

commit 075e1acb4c920edf0b5d20a5cb5004a4f88fbcd8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-20 04:47:43 +0900

    Readline.completion_proc accepts US-ASCII

commit 4d7ada10b1d8d6eba79d845aa9ecffb890f593d4
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-19 16:47:53 +0900

    Update test-unit

commit cc764e5d37a8424949af0e83a8bb5661a1d6e8a6
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-19 05:45:50 +0900

    * 2019-05-19

commit af1502175b5a3415949b8daa6f70a1cfaa7d1975
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-19 05:42:13 +0900

    Touch the timestamp file for Unicode files

commit 60de17258ba0be6c113e60ce237c3b8608457da7
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-05-18 20:06:49 +0900

    [DOC] Shorten examples for Time#{round,floor}

commit cc0e460bccbf005d23616be1ea2624a161a4ecdd
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-05-18 20:06:10 +0900

    [DOC] Improve documentation for Time#floor

    Use numbers that are more illustrative for #floor.

commit f782e5bdcf91f2885519e20e3aa53eec063faea8
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-05-18 20:05:26 +0900

    [DOC] Use '&&' instead of 'and' in boolean expression

commit acf6689a8c77b5730274e2c9ec1d49423674da15
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-05-18 20:04:04 +0900

    [DOC] Improve documentation for Enumerator::Lazy

commit 154a67f140a8397df77d82cdc80e13b291b8aedd
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-18 18:23:47 +0900

    Rename rb_gc_new_location to rb_gc_location

    The function will return new or existing locations depending on whether
    or not the object actually moved, so give it a more appropriate name.

commit bbb84a16fab8e715a108c318e9e0e019339eb972
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-18 14:20:33 +0900

    Add fall through comment for Coverity Scan

commit 16917cc3cb27277d04b9c35fb7fc10f72a9b6dfa
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-18 03:12:53 +0900

    Add Reline.test_mode to use with special I/O

commit b165bedcbd41d791a85fc1ce90b57a0d0525f319
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-18 12:17:02 +0900

    skip a test to pass CIs.

    I'm debugging [Bug #15821] but my patch introduces another issue.
    So I simply skip this test and re-enable it later.

commit 6ae1c596f0b179f1b1b2b115ca75eab1631230fe
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-18 09:40:52 +0900

    Add test for UNTIL

commit 4d9c3a8c2362b7d5973057435258e447ce733741
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-18 01:17:47 +0900

    Update include files on msys2 too

commit 719ebbec303967aacbf5122219d67b34aae9351e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-17 23:46:22 +0900

    Get rid of always updating Unicode files

    [Misc #15859]

commit c4bad9f74e432572b80c24c7f1c519c5cc4c59a2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-18 09:35:40 +0900

    Distinguish pre-condition and post-condition loops

commit 39336a4210557d8677a2e07094efd785af0711ca
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-18 02:41:28 +0900

    * 2019-05-18

commit 9858d74a128c1126f0d05ebe5c05a2e6b34ce0af
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-18 02:32:25 +0900

    Remove parent namespace from Readline test classes

    The namespace "Readline" doesn't exist when running tests if readline.so
    doesn't exist and Reline exists. So test classes shouldn't be at nested
    namespaces under "Readline".

commit ea3e7e268546599883b25d9a33d26e042461ac25
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-17 23:08:31 +0900

    Prevent Dynamic -> Static symbols from moving

    If a dynamic symbol has been converted to a static symbol, it gets added
    to the global ID list and should no longer move.  C extensions can pass
    symbols to rb_sym2id and those symbols should no longer be movable.
    When the symbol is passed to rb_sym2id, the `id` member is set, so we
    can use its existence to prevent movement.

commit 0723c107f4fb39f60113b44dd21d875c90da5456
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-17 13:55:59 +0900

    Do not export InitVM functions

commit e29a85a96c47be3b4ff77b1e6d2235ea935a35bc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-17 10:49:25 +0900

    Make COROUTINE_XMM_REGISTERS compile-time only too

commit b1b385465e4fc1cab84b2a3fa112a33a3e5ab076
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-17 10:25:34 +0900

    Do not call memcpy if copying nothing

    c.f.
    * e7b18ca6d9b45b7e71694557b9fab8152c62c1ed
    * 34e1079aef81d108890fb167d7df69960e994ff5

commit 32e8b42852fc59a7064ec9ad642774c562b69c21
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-17 12:59:49 +0900

    skip tests for GC.compact to pass CI.

    Now, GC.compact has issues which makes rubyci RED, so I skip this test
    and debug soon.

commit f1f402946023573d3d17410d0de19c653f53f96e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-17 10:10:39 +0900

    * 2019-05-17

commit 0971cab4d0cb730292461d16ac72c430aa23cc10
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-17 09:53:47 +0900

    Test to disable ASCII-only optimization

    Examples why ASCII-only optimization cannot apply multi-byte
    encodings which have 7-bit trailing bytes.

    Suggested by @duerst at https://github.com/ruby/ruby/pull/2187#issuecomment-492949218

commit 23751a2681abd50e9081bdbb00f818942570c872
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-16 23:26:57 +0900

    leaked-globals: check if un-prefixed symbols leak externally

commit e0f0ab959e9a0fa3db8dfdb2a493b057d6e7541b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-16 18:58:17 +0900

    Remove unused symbols

commit 0ed9bdfc13082b6d19712738ca69fbbe2a36f106
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-16 18:24:12 +0900

    Pack struct rb_strterm_heredoc_struct on 32-bit platforms

commit 88449100bc6d23a00dbf3addb97665f4f606f2b8
  Author: Koichi Sasada <ko1@cookpad.com>
  Date:   2019-05-16 16:44:30 +0900

    don't need to sweep rest.

    `transient_heap_evacuate()` disables GC using `rb_gc_disable()`
    to prohibit GC invocation because of new allocation for evacuated
    memory. However, `rb_gc_disable()` sweep all rest of unswept pages.
    We don't need to cancel lazy sweep so this patch introduce
    `rb_gc_disable_no_rest()` which doesn't cancel lazy sweep.

commit a160b2f56716f70fa3e485ae89875da48baefc1d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-16 15:51:37 +0900

    Make COROUTINE_REGISTERS compile-time only not to be a global symbol

commit 7069f64c419ebb9a7fd3e48d81454148ed4b2fba
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-16 15:43:16 +0900

    Prefix global_symbols with `ruby_`

commit 973431c059ab2719e97d1ec051d21aa63a43a005
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-16 15:36:58 +0900

    Make internal functions static

commit 82332c7d8b17b610a347f7c804219c7fcb702d23
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-16 15:13:36 +0900

    Rename mjit_gc_finish_hook to mjit_gc_exit_hook

    because @ko1 said "gc_finish" is confusing like a finish of entire GC
    process

commit 18e43e823106f15c8aaceb1f56874bdf67bc36a3
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-16 14:58:57 +0900

    Fix fd leak

    merged https://github.com/rubygems/rubygems/pull/2765

commit fadab0f9fb18448c9146fce0fd87f4285f647516
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-16 14:43:49 +0900

    * 2019-05-16

commit e970ab3339109b89b4251887e39412af20348156
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-15 23:17:18 +0900

    Suppress unused-but-set-variable warning

commit 214e2f93aa6b0810353b67f320dab6aa63a97169
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-15 18:18:44 +0900

    Fix the warning in 456586bb234915107da255d2944f620a7dd7048b

commit 3cf767ee35060d7d261f47399a7d717256d0f237
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-10 06:36:30 +0900

    unpin finalizers and update references

commit c9b28fd7ae5c5a79a74afebd5b191cfd2f31a65f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-15 17:22:25 +0900

    Allow --enable/--disable options to take an argument

    [Bug #15850]

commit f54aa6c5b286b2b44bcdb1958fc9b1ebfce3559e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-15 15:52:12 +0900

    Rename confused name Reline::IO with Reline::IOGate

commit 0cc893d01d1c4a6b36f01a25587a121261601697
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-15 12:41:31 +0900

    Static symbols can't be moved (they are not RValue)

    This is my mistake, I thought they were regular objects, but apparently
    they are not.  We don't need to pin them.

    Revert "Symbols can move so only cache IDs"

    This reverts commit 672ee5f6ed5a6840a3be9150b6721a5ee8f8766b.

commit 672ee5f6ed5a6840a3be9150b6721a5ee8f8766b
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-14 09:24:19 +0900

    Symbols can move so only cache IDs

    IDs can't move, we need to use them to look up the symbol objects later.

commit e8b929b9df3a686ab4e5e0a07fb813d0bedf508f
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-15 12:21:53 +0900

    * expand tabs.

commit c70ceb59928aa2c37befd6b03d73657ba5ece61c
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-10 05:13:56 +0900

    Add object packing strategies for compaction

    This commit adds an alternative packing strategy for compaction.
    Instead of packing towards "most pinned" pages, we can pack towards
    "most empty" pages.  The idea is that we can double the heap size, then
    pack all objects towards the empty side of the heap.  This will ensure
    maximum chaos for testing / verification.

commit 46a479889cb5be2a7a24d6adbe54e822899d96cc
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-15 00:19:31 +0900

    * 2019-05-15

commit 2ca537ba4b620d0a657b7da433df92f876974015
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-15 00:18:43 +0900

    Fixing function name

    This function is used for marking / pinning vm stack values, so it
    should have "vm" in the function name to be more clear.

commit b5a3ec7f18761cbe30a90aa585b59ab05d926d2d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-14 17:15:49 +0900

    Remove useless use of a variable in Reline::ANSI

commit 80c968c571a65d140aefab4774fa87bf39966723
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-14 17:05:36 +0900

    Rename Reline's test file name because of typo

commit 4fe0961dca71406816e136a76f742adb1f0b9bb5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-14 16:45:18 +0900

    Fix typo in debugged C source name

    I failed to collect any debug info in
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cda57fcab79a30008f195f6?step=5cda6a4e1090c4000800772e

    It seems that it's due to this typo.

commit c754e979d3eeca51f1b13778f19f347df3da656e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-14 07:00:03 +0900

    Test ext/readline and lib/reline by test/readline

commit 07e7ae9ed78d0891a1c4755e2faf3c8d15d95102
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-14 05:34:20 +0900

    Add an assertion message to test of Readline's class variables

commit 1e65196b54644c5a8fe53c98643ab7e87dfb87c0
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-14 04:08:23 +0900

    Check encoding when Readline completion

commit 29dde62605d50a55933ec5d92bcb6f5f738c390b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-14 14:47:54 +0900

    io/console: rb_str_cat_conv_enc_opts is not exported

commit c1746708233bf90270dca1f698ca3616cc16922c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-14 14:39:08 +0900

    io/console: fix up timeout on Windows

commit 456586bb234915107da255d2944f620a7dd7048b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-14 14:21:46 +0900

    io/console: support getch timeout on Windows

commit 6d733565c2df1b34c7f0b7d43d97f80f714a64b9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-14 14:19:15 +0900

    io/console: support wide character input on Windows

commit 602ef62ae693344aea70a85bb664bbbe93f20465
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-14 02:39:40 +0900

    Rescue CompatibilityError for Readline's completion

commit 5bab1304af25a843728dbcd2f3594913740aecb0
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-05-14 11:44:20 +0900

    fix visibility of SecureRandom.gen_random

    Aliasing a method preserves its visibility.  These aliases turn
    formerly-public methods into private.  Should make them public
    again.  [Bug #15847]

commit af1f3f131f6a82f5f06fe5b3adeb6f80cf86b941
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-14 01:10:15 +0900

    Readline's class vars should be encoded as default_external

commit 741321704fa1e4f180c853684a8ceaa6eff3b469
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-14 00:03:15 +0900

    Remove unused variable in LineEditor

commit 79ead821dd4880725c9c6bb9645b3fad71715c5b
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-14 06:27:54 +0900

    Add NaN / Infinity / MinusInfinity to mark list

    This prevents the constants from moving.

commit a1ecf07dff7530f8f53fb456b2e38a8a039cb561
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-10 07:04:35 +0900

    turn T_MOVED in to a linked list

commit 66a7c92938638e3afceb1d92ae877376902a71a0
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-14 04:59:30 +0900

    Don't run the compactor if GC is disabled

    GC is required for pinning / marking objects.  If the compactor runs
    without pinning everything, then it will blow up, so just return early
    if the GC is disabled.

commit 0215520beaa2be7a7bfb9aeb79bfc8c7ea7936b0
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-14 00:32:58 +0900

    * 2019-05-14

commit d2003a6d392b3b0054d7528e2e731584196aefad
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-14 00:30:08 +0900

    Symbol just represents a name

commit 3b3b4a44e57dfe03ce3913009d69a33d6f6100be
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-13 23:53:46 +0900

    Update dependencies

commit 082bbdc92e5d704c9fb2811d7c038f92aee77484
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-13 21:26:01 +0900

    Update the canonical repository for racc.

commit b42303b151534b4d0f2b7ccf7d4beeb27b0c2874
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-13 21:14:52 +0900

    Fix typos

commit 2dc613815d2c4a69bfbcbf78d1b99aa52fbabf60
  Author: tienne Barri <etienne.barrie@gmail.com>
  Date:   2016-08-31 02:29:07 +0900

    delegate.rb: don't look for methods on Kernel

    Instead, look for instance methods of Kernel.
    Otherwise, instance methods of Module (which are methods of Kernel
    itself) are mistakenly believed to exist, and it fails when calling
    Kernel.instance_method().

    Closes: https://github.com/ruby/ruby/pull/1422

commit 24964fff92cd89925d2169ad97a357a5bc57e3e1
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 04:22:08 +0900

    Check that Reline exists on test

commit 75f196ce75f35ecbab8186c9ada2f3a91160f8f9
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 03:29:18 +0900

    Skip tests depend on Readline's special behaviors

commit caef2ddaaf4a121272ad5c11d046ff4511c0f560
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 03:26:10 +0900

    Implement Reline::HISTORY as an expanded Array

commit c48778d64294c7871e2be09b0138d74e4d9d8551
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 03:24:15 +0900

    Add attr_accessor for Reline's Config attrs

commit ebb15cc6c17e33b030b511fff8b5722a8238ace5
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 02:33:29 +0900

    Reline.completion_proc= should raise ArgumentError

    When the value is not Proc.

commit 130ced9fb025da05bc97346e30f1e3a6c86ead2e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 02:31:42 +0900

    Reline.completion_append_character= should be nil

    When unknown value comes.

commit e467f920a38cabad9568ebd5cfd46d11de04afa8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 02:30:53 +0900

    Add Reline.special_prefixes as stub

commit 5837290af1216eaadbee3204e40ef16931da2fdb
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 02:26:31 +0900

    Implement Reline's class methods for compatibility

    - insert_text
    - redisplay
    - line_buffer
    - point
    - point=
    - vi_editing_mode
    - emacs_editing_mode
    - vi_editing_mode?
    - emacs_editing_mode?
    - get_screen_size

commit c137f015ab2283e885168f983e36e4bd2c1aa29e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 02:20:20 +0900

    Add Reline.pre_input_hook interface

commit 9cb821b02486de87b322089302fec3a63cda7b81
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 02:14:48 +0900

    Implement Reline.input= and Reline.output=

commit bb56b899009828d567062fa5b9dd0af9f927cd32
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 01:51:05 +0900

    Add ed_search_prev_history to Reline

commit 559cad9f2d87721fda1ffbf2e39ce4b328a5b17f
  Author: okuramasafumi <masafumi.o1988@gmail.com>
  Date:   2019-05-04 21:54:25 +0900

    Improve doc for Enumerable#include? and member?

    Existing doc for Enumerable#include? and member? has some problems.
    * `IO.constants` is not commonly used, and only some know
        that `SEEK_SET` is actually included in constants.
    * `IO.constants` is actually an Array, not the example is not
        appropriate for `Enumerable` module.
    So in this commit, the old example is replaced with new one.
    New example uses integer range, which is much simpler and easier to
    understand.

    Closes: https://github.com/ruby/ruby/pull/2168

commit 33bce2585ffacd8cf762972da7ca7a99d804989f
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 00:30:39 +0900

    Use LineEditor#reset on test

commit d3a702a3f1568f33e1c681bc40bae396a2f46d17
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-13 00:23:03 +0900

    * 2019-05-13

commit 0f45bd0584f1550e153babc339ad7671e2424d20
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-13 00:22:27 +0900

    Split namespace of env-dependent I/O classes

commit 11476e9902405b90b7493fed43f9fc2e6db9a32c
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-12 23:20:51 +0900

    Check INPUTRC env in Reline::Config

commit aaaede8bcff278bd304092e1c74d39e8fbd4cef8
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-12 21:22:04 +0900

    Change LineEditor instance in Reline to class var

commit fc57e10569614caf5efc5b7fe18e6c76fafbb2e9
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-12 20:43:38 +0900

    Revert "Add a test for em_capitol_case of Reline"

    This reverts commit b1767e56b158d8307412a0928a7ac2366541429d.

commit b1767e56b158d8307412a0928a7ac2366541429d
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-12 17:25:28 +0900

    Add a test for em_capitol_case of Reline

commit 3211a0a1e87d7ad622906b84de27f49a7d0d7578
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-12 00:52:17 +0900

    * 2019-05-12

commit e9bb30d47e5f07774cfbc69f0c8824ec921f6cda
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-12 00:03:19 +0900

    Expect no conflict in the parser

commit 79931dddba67ad68886f65ba8562eb99507cee3a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-10 16:40:34 +0900

    Propagate parser_params to rb_yytnamerr

commit dc65e75101de94c0f88851d7d3eab56cb7232c7a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-10 17:28:20 +0900

    Adjust indent

commit aa52464efd558010f4fa5ef5de68d8f684b637aa
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-10 21:45:15 +0900

    15f45ae4d1 and 56528da3e broke the darwin environment.

    Revert "Propagate parser_params to rb_yytnamerr"

    This reverts commit 15f45ae4d12f14714ab3021b60887d8c7bf4b095.

commit d4c8577a14fa272bc9a3e68d4748fdf2f2cf7dee
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-10 21:45:04 +0900

    Revert "Fix for bison 2.3"

    This reverts commit 56528da3efb32bb773b22740c24450246b861e58.

commit 56528da3efb32bb773b22740c24450246b861e58
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-10 16:58:51 +0900

    Fix for bison 2.3

commit 15f45ae4d12f14714ab3021b60887d8c7bf4b095
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-10 16:40:34 +0900

    Propagate parser_params to rb_yytnamerr

commit 9a4d39b95ed60a00aec2ee3447931015254eb794
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-10 15:22:54 +0900

    No longer svn & git-svn are used

commit dbcc224f3883c810049ef620fac8a1b59bde2e69
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-10 09:01:08 +0900

    Removed old names of internal methods

commit a7b68e63c5dd9d366b0ddc17b16650560800f03a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-10 12:48:43 +0900

    Suppress a warning in Psych&YAML with verbose mode

commit c8a891d1aa2fd54172d313441811aef2838b7797
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-10 12:21:25 +0900

    Fix missing `\A`

commit bef5829482ab410111911f2472442ff0dfbd3838
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-10 11:54:15 +0900

    Add one more retry for win32ole event matcher

    to fix
    https://ci.appveyor.com/project/ruby/ruby/builds/24438615/job/yld1utsltxag9dr2

commit a85ed43294700ed0dd11d22b5c3d5d37d2b1809c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-10 08:59:08 +0900

    Do not access the internal member

commit c4d49749fbbb922f6102d3bf0729c861f9436a00
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-10 04:28:19 +0900

    * 2019-05-10

commit 5f05851ae37050c7031a080e405f8773089d7c14
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-10 04:27:44 +0900

    add FROZEN to lldb debug output

commit 025206d0dd29266771f166eb4f59609af602213a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-09 14:11:43 +0900

    Fallback to an invalid branch name if no branch found

commit eb84b33c86280a72aaeedae1e582045528c534b2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-09 14:02:01 +0900

    Search a branch name at a detached head

commit c06ddfee878524168e4af07443217ed2f8d0954b
  Author: Alan Wu <XrXr@users.noreply.github.com>
  Date:   2019-05-08 22:44:41 +0900

    str_duplicate: Don't share with a frozen shared string

    This is a follow up for 3f9562015e651735bfc2fdd14e8f6963b673e22a.
    Before this commit, it was possible to create a shared string which
    shares with another shared string by passing a frozen shared string
    to `str_duplicate`.

    Such string looks like:

    ```
     --------                    -----------------
     | root | ------ owns -----> | root's buffer |
     --------                    -----------------
         ^                             ^   ^
     -----------                       |   |
     | shared1 | ------ references -----   |
     -----------                           |
         ^                                 |
     -----------                           |
     | shared2 | ------ references ---------
     -----------
    ```

    This is bad news because `rb_fstring(shared2)` can make `shared1`
    independent, which severs the reference from `shared1` to `root`:

    ```c
    /* from fstr_update_callback() */
    str = str_new_frozen(rb_cString, shared2);  /* can return shared1 */
    if (STR_SHARED_P(str)) { /* shared1 is also a shared string */
        str_make_independent(str);  /* no frozen check */
    }
    ```

    If `shared1` was the only reference to `root`, then `root` can be
    reclaimed by the GC, leaving `shared2` in a corrupted state:

    ```
     -----------                         --------------------
     | shared1 | -------- owns --------> | shared1's buffer |
     -----------                         --------------------
          ^
          |
     -----------                         -------------------------
     | shared2 | ------ references ----> | root's buffer (freed) |
     -----------                         -------------------------
    ```

    Here is a reproduction script for the situation this commit fixes.

    ```ruby
    a = ('a' * 24).strip.freeze.strip
    -a
    p a
    4.times { GC.start }
    p a
    ```

     - string.c (str_duplicate): always share with the root string when
       the original is a shared string.
     - test_rb_str_dup.rb: specifically test `rb_str_dup` to make
       sure it does not try to share with a shared string.

    [Bug #15792]

    Closes: https://github.com/ruby/ruby/pull/2159

commit d802698d3e27a3cf091a56556df3562cc6ff996c
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-09 10:01:31 +0900

    Push the current (topic) branch to the remote upstream

commit 4fabb744718ddbb2eb8f5f4a6ca3d47d8e770547
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-09 09:59:27 +0900

    Show the commit command if dryrun

commit f1486fea46cf36f1c936f5074a7251f29f9c1c5d
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-05-09 09:23:44 +0900

    require 'stringio'

commit 10723dd6cefb84e6a7d69b3bc3c1a74c345e4306
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-09 08:54:38 +0900

    dryrun option is for `push`, not `git`

commit dc405eb737c178016167c8e64bdf32d27c5455f0
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-09 07:55:35 +0900

    Pin finalizer table

    Objects in the finalizer table stay pinned for now.  In some cases, the
    key could move which would cause a miss when removing the object from
    the table (leading to a T_MOVED reference staying in the table).

commit 4ff0911c796e80ad3740b1aea0199da698f4910b
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-09 07:26:32 +0900

    * 2019-05-09

commit 8b12db6e197a5f4d57fb208b3f03b4b17733f1e4
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-09 07:26:29 +0900

    * expand tabs.

commit c53f87943e53c96b86d50b496d2a410ff1245b4c
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-05-09 07:19:59 +0900

    Calling `obj_info` during sweep is unsafe

    `obj_info` will look at references of objects in some cases (for example
    it will try to access path information on ISeq objects).  But during the
    sweep phase, if the referenced object is collected before `obj_info` is
    called, then it could be a bad ref and a segv will occur.

    For example:

    A -> B

    Sweep phase:

    1. obj_info(B)
    2. Sweep and free B
    3. obj_info(A); A tries to read B
    4. SEGV

    This commit simply removes the call to `obj_info` during the sweep
    phase.

commit a95ca6d5e9c1c7371f7324159840ac1e8c013125
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-08 17:30:11 +0900

    Trim MJIT output from TestHideSkip

    to prevent failure like
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cd28aa6ab79a30008ee819b?step=5cd28b2403f44600070db083
    with --jit-verbose=1.

commit 29fcb37a8319c70a8524c13b525087ff63431676
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-08 16:59:37 +0900

    Fixed a typo

commit c54d5872fbd95c04ab77b4c1d6f95974ddac0090
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-08 16:55:59 +0900

    Configure directories for headers and libraries automatically

    [EXPERIMENTAL]

commit a1bab3d1a3bf36e113267c212d7fb36710859674
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-08 16:51:37 +0900

    Escape $@ in mjit-debug-on-fail

commit e8e415b5347197666f4dd11d25df08881ddaa36f
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-08 16:44:08 +0900

    Add workaround for `Permission denied` of `cp`

    see r67347
    recent log: https://travis-ci.org/ruby/ruby/jobs/529640417

commit b0965cc2d6fe284e0bf3154ed7a282a29287a20c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-08 16:26:53 +0900

    Add missing chmod for mjit-debug-on-fail

commit 60869ebd005dc21e03e5f3cf9b517ff761781e80
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-08 16:25:25 +0900

    Wrap mjit-debug-on-fail for Wercker failure

    for debugging failure like
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cc98936ab79a30008eb86fa?step=5cc990d73d81fb0007bb04c3
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cd18efa23fcb70008ddfd45?step=5cd1908603f4460007076c5a

commit d736080c8b8731fe8e7be99893eea35b67cbbc0e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-08 15:45:13 +0900

    Use ruby_bug guard

commit a7cbb659566b4b9114cc2a00f036e7a88300b30d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-08 15:13:33 +0900

    Do not break rubyspec for old Ruby

    Fixing 7d805e67f3275aef066d77aa9c32bef715c362ed

commit 229e5053a1ea9633489e296faafc34c9c51e7391
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-05-08 14:59:18 +0900

    Drop -fs from rubyspec to see test results easily

    Recently `ruby/spec on Ruby 2.4` seems stable.

commit 6ec43d3d049f4736e6d0196497bfc9562001dd28
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-08 11:18:20 +0900

    * 2019-05-08

commit d56b0cb554dd75190b1d308e20f3f49f5f12571b
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-08 11:14:21 +0900

    Use `start_with?(quoted)` instead of `[0] == char literal`

commit efda52ba62361a0262d3775b8210fff85fb42247
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-07 23:30:39 +0900

    Use cgit instead of svn.

commit 45b125eca76e60482113575f1e71574fcbcc3b4c
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-07 23:16:26 +0900

    Update the canonical repository url.

commit 5eb5613fef1c8a72df6843ffce9fc339f145948e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-07 22:53:45 +0900

    Recent commits of trunk do not have svn revision

commit a47f598d77ac97f9fe89fe16aa8bcab4fd262c16
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-04-20 08:44:51 +0900

    Reduce ONIG_NREGION from 10 to 4: power of 2 and testing revealed most pattern matches are less than or equal to 4 results

    Closes: https://github.com/ruby/ruby/pull/2135

commit 7d805e67f3275aef066d77aa9c32bef715c362ed
  Author: Jean Boussier <jean.boussier@gmail.com>
  Date:   2019-05-07 19:00:57 +0900

    Avoid triggering autoload in Module#const_defined?(String)

    [Bug #15780]

commit 6786fe44dcbb560d896bb9bb5baa9dc74677ce17
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-07 17:36:10 +0900

    * 2019-05-07

commit 4dc5d3c5dd43b4cc54517e604c16ecfc808e5481
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-05-07 14:06:25 +0900

    add new debug_counters about is_pointer_to_heap().

    is_pointer_to_heap() is used for conservative marking. To analyze
    this function's behavior, introduce some debug_counters.

commit 7e72ce0f734113e3e215a74b440092443e957d45
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-06 15:30:44 +0900

    Load OptionParser defaults from XDG and Haiku standards

commit 970a25b10415bc3735e6e3c165e167e6abc3d7f4
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-06 11:08:03 +0900

    * 2019-05-06

commit f1b0db2c70aa3120a557fd7553b98f96ecc62ade
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-06 11:02:12 +0900

    Revert "UTF-8 is one of byte based encodings"

    This reverts commit 5776ae347540ac19c40d146a3566a806cd176bf1.

    Mistaken `max` as `min`.

commit 594a033ff0f6a22693b7b82b060e922c58dac8d0
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-05-05 16:52:34 +0900

    Improve description of Ruby in README

    Use improved description as suggested by Olivier Lacan (@olivierlacan),
    see https://github.com/ruby/www.ruby-lang.org/pull/1888.

commit 35ff4ed47fcdc14bbdd19540622cb04f86536c95
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-05-05 16:51:40 +0900

    Improve documentation for String#{dump,undump}

commit bb4ac7a6506971dc34b5656f1a69aadc7299fcab
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-05 13:43:22 +0900

    Fix use of numbered parameter inside proc that is default value of optarg

    This allows cases such as:

    ```ruby
    m ->(a = ->{@1}) {a}
    m.call.call(1)

    m2 ->(a: ->{@1}) {a}
    m2.call.call(2)
    ```

    Previously, this would cause a syntax error.

    [Bug#15789]

commit 0c0ed1cee8aa8c538cc81f0daef26737eb2d5d0d
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-05 13:43:22 +0900

    Fix use of numbered parameter inside proc that is default value of optarg

    This allows cases such as:

    ```ruby
    m ->(a = ->{@1}) {a}
    m.call.call(1)

    m2 ->(a: ->{@1}) {a}
    m2.call.call(2)
    ```

    Previously, this would cause a syntax error.

    [Bug#15789]

commit b8f3be295b694964e88960c0228459b8aadd114a
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-05-05 13:33:58 +0900

    Fix a case where numbered parameters should not be allowed

    Because `proc{|| @1}` is a syntax error, the following should
    also be syntax errors:

    ```ruby
    proc { |
    | @1}
    ```

    ```ruby
    proc { |; a| @1 }
    ```

    This fixes both cases.

    [Bug #15825]

commit 374c8f4ebab1a740990330c732b9de965c5e8d10
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-05 14:32:45 +0900

    Fixed about ARGF.lineno

    [Bug #15823]

commit 84e71e9fc1965d00013fea1bea1ce22aa7e7e619
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-05 11:13:58 +0900

    * 2019-05-05

commit f1b52d3a8889dbffddadd3e3ccf05fb9a90b18ee
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-05 11:13:54 +0900

    * expand tabs.

commit ff21e75d32e27a2b362ed53fb471828876b54418
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2018-07-28 00:07:56 +0900

    parse.y: duplicated when clause warning

    * parse.y (case_args): moved "duplicated when clause" warning from
      compile phase, so that `ruby -wc` shows them.

commit 848edb03f8d3e5f5e97d3ea45fec592d87d73b05
  Author: Masatoshi SEKI <m_seki@mva.biglobe.ne.jp>
  Date:   2019-05-04 22:52:25 +0900

    ignore test_RangeError

commit a380f4c2b7310c85635958c751ac78d7796bc8d2
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-05-04 22:31:21 +0900

    Fix typos, grammar, and style

commit 8bf3040e301ffe82ab02df58c89bd1e55bb0980b
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-05-04 22:02:20 +0900

    Fix grammar

commit b9e52db28398c5a792ae16730243af764c869bcd
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-04 22:00:22 +0900

    Add a pathologic check

commit 7d30cd47c4e9e27461d3906e5740daa02dac22ca
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-04 19:29:14 +0900

    * remove trailing spaces.

commit 8980b53a48b1f55e09c5223008225e6bfa765405
  Author: Masatoshi SEKI <m_seki@mva.biglobe.ne.jp>
  Date:   2019-05-04 19:28:57 +0900

    add DRb::WeakIdConv (Bug #15711)

commit b72623012d74abdb06210153ed48c9e2fa075bbd
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-05-04 06:23:25 +0900

    Update broken URL in Float documentation.

      [Misc #15775][ruby-core:92332]

commit a3cbce7822c680e62d000817c36fbdb5f62997d8
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-04 00:00:01 +0900

    * 2019-05-04

commit 04fd98d5963d45f69ff8239bd02392e550d67191
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-03 23:59:58 +0900

    * expand tabs.

commit 77440e949bd69e6ed86d70026d238521adb8319a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-03 22:37:51 +0900

    Improve performance of case-conversion methods

commit 1f349ea297738f3a2c4914166746cea0e5ada031
  Author: Marcus Stollsteimer <sto.mar@web.de>
  Date:   2019-05-03 23:12:22 +0900

    Fix typo

commit 5776ae347540ac19c40d146a3566a806cd176bf1
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-03 15:33:59 +0900

    UTF-8 is one of byte based encodings

commit 58cd4b7bde1f03ddce41fdc8f30ebe3c75706e75
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-03 06:26:18 +0900

    * 2019-05-03

commit 7d02bab0b080bbf5f7dd3f29de57a52677e39a51
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-05-03 06:24:57 +0900

    Nil cannot and should not convert to a string

commit 5c87bb3b90a6d77089314ed0e62e31654621efa9
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-02 22:44:43 +0900

    * expand tabs.

commit 5e23b1138f16af0defb184d7deeffadfd2ce3c04
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-02 22:44:20 +0900

    Fix potential memory leak

commit d6efb386bab9ee3839cf17945ad810b03f28f129
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-02 14:47:26 +0900

    * 2019-05-02

commit a1ae478a31ffe4fd21c17f785f1827c031281be8
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-05-02 14:44:47 +0900

    Fix a typo

commit 71952440adcbdd1ff51aea519bc14e8965b84ebf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-01 20:55:08 +0900

    Silence a (probable) debug print

commit 474af9ee9a4804d052e1e40503e1b6491d00a969
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-01 20:47:00 +0900

    No last commit when up-to-date

    Get the last commit title from the upstream to the head, so that
    no `last_commit` line will be shown when the branch is up to date
    with the upstream.

commit 2f0f9115d314d0fecbd0a9f5b5a6c59c611fa5e7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-05-01 20:26:35 +0900

    Ignore ChangeLog

commit dcb6a6ae3e2b8a3e298e7f0d4a3e7f8ff102a30e
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-05-01 17:38:09 +0900

    Windows simply causes an error to open invalid path

commit fc3e80cf6d8847fd5a2313dd7e2079d268f1ec84
  Author: NARUSE, Yui <naruse@airemix.jp>
  Date:   2019-05-01 01:06:13 +0900

    guard include with has_feature

    clang's sanitizer/msan_interface.h has fallback macros.
    It causes redefinition of __msan_unpoison().

commit 3de03544ff9fba80039460f2e2cd864010bf8cba
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-05-01 00:45:54 +0900

    Add Reline.delete_text that raises NotImplementedError

commit c06821161ae9dcfebeabd30ec7ab598ee70c89ce
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-05-01 00:03:58 +0900

    * 2019-05-01

commit 4e88e8692844a2a317bc19481f0f2601b6f00955
  Author: manga_osyo <manga.osyo@gmail.com>
  Date:   2019-04-30 23:18:44 +0900

    Add exception support in `Range#first`.

    Closes: https://github.com/ruby/ruby/pull/2163

commit 0eedec68673fa74960dec80b26659263ec3b6a9a
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-30 22:35:38 +0900

    Change Accept-Encoding from `*` to `identity`

    When `Accept-Encoding` is `*`,
    http://www.unicode.org/Public/12.1.0/ucd/ returns gzipped content now.
    So set `identity`.

commit dd942cd5b31947f6a514d4a916971011fbabc089
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-04-30 22:24:45 +0900

    Use redirect keyword arguments instead of ">"

commit 50872f4a15a2070fa007c1d85fcf44802e4bcc0b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-30 22:23:20 +0900

    Use array mode of `system` instead of `shellescape`

    `&.` is not available in ruby 2.0.

commit df3de409325d1e95d375a736d2bc9c45d47ec317
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-30 22:13:47 +0900

    String#[] with index to extract matched substring safely

commit 1dd94dfba3ed3ffd087d1ba93154cb922033a37c
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-04-30 21:51:03 +0900

    Must use IO::NULL instead of platform dependent filename

commit 830e40ee05681a9230d523c1ca8b4bd3238fcfbf
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-04-30 19:45:44 +0900

    Skip on Windows now when using reline because it causes hang of whole tests

commit 5a83a1d55454d42cbf5b0bcc9df9c9c83e3a39d7
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-04-30 18:01:17 +0900

    **Must** use IO::NULL for null device

commit c222f4d31fc5f0566fa969d8fbb948f8841daf94
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-30 16:18:45 +0900

    `from` is not nil but `""` on shallow clone [ci skip]

commit 151b7d72bd26f9676c92b69f6b4710af3cb7ea65
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-04-30 15:02:03 +0900

    Forgotten to remove

commit 94b740b2499242e1aca67f7bbf595e75e63abc40
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-04-28 03:41:06 +0900

    Use Ripper for IRB

    The debug option of IRB is deleted because it's just for IRB's pure Ruby
    parser.

commit 567cb1ae1d25b837bed6e91af1418c6a4f25cc90
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-04-30 12:52:48 +0900

    Use Encoding::UTF_8 if RELINE_TEST_ENCODING doesn't exist

commit 3be5907e734f9c88af577bb0b0e8ec2d66b7b2f7
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-04-30 12:47:40 +0900

    Move Win32API to Reline::Win32API

commit 319eee0f4a13d29a82eeffa348b8a3b5685e2f6e
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-04-30 12:27:23 +0900

    Use Encoding::UTF_8 if Encoding.default_external is Encoding::IBM437

commit 17350c7e5534c8678097d70698fe08614a6c3997
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-04-27 14:53:09 +0900

    Add Reline as a fallback library for Readline

    * lib/reine.rb, lib/reline/*: Reline is a readline stdlib compatible
      library.
    * lib/readline.rb: Readline uses a fallback to Reline when ext/readline
      doesn't exist.
    * tool/sync_default_gems.rb: add ruby/reline as a default gem.
    * appveyor.yml: add "set RELINE_TEST_ENCODING=Windows-31J" for test suit
      of Reline, and add "--exclude readline" to "nmake test-all" on Visual
      Studio builds because of strange behavior.
    * spec/ruby/library/readline/spec_helper.rb: skip Reline as with
      RbReadline.

commit eb45ba61160dbae412407f232fe9b3252eb99362
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-04-30 04:09:25 +0900

    Skip the spec on Windows because RUBY_EXE is RUNRUBY and it calls ruby as grandchild

commit 320f0aba49d17737ef965fc8c5f565dad96f514c
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-04-30 04:09:07 +0900

    Revert previous commit; it was meaningless

commit ae3a9862048135f846f694b98031cf264889580f
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-30 03:33:51 +0900

    * expand tabs.

commit 09022b6d70ad16737964e58db039aac00a1488ea
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-04-30 03:32:41 +0900

    Use CreateToolhelp32Snapshot instead of NtQueryInformationProcess to get ppid on Windows

    Try to get rid of a spec error.

commit b7d9ec8caa4fb9d279df22f82fe28777a98fa37e
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-30 00:28:44 +0900

    * 2019-04-30

commit 7a34d8902ad93c0e487623cd99e6c23296a7a768
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-30 00:28:00 +0900

    Merge .time

commit 040b37f8b4b8d0a4931ee9b7c15b57f9f918639a
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-29 23:02:18 +0900

    Use 10 chars as RUBY_REVISION in snapshot too

commit f95f07dad30a80b7e3eb4b2838ca4311d2822764
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 18:59:26 +0900

    avoid passing NULL to memset

    `GC::Profiler.enable; GC::Profiler.clear` tries to clear
    objspace->profile.records but it has never been allocated before.
    Thus the MEMCPY took NULL argument before this changeset.

    The objspace->profile.records is allocated appropriately elsewhere.
    Why not juts free it if any?  That should work.

commit 34e1079aef81d108890fb167d7df69960e994ff5
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 18:37:21 +0900

    glibc says memcpy cannot take NULL

    At least since 2004, glibc's <string.h> annotates memcpy as
    __attribute__((__nonnull__)).  This basedir is passed to it.  When
    LOAD_RELATIVE is not defined and MJIT_SEARCH_BUILD_DIR is not set,
    this variable is never updated.  Should initialize with meaningful
    default value.

commit e7b18ca6d9b45b7e71694557b9fab8152c62c1ed
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 18:01:24 +0900

    glibc says memcpy cannot take NULL

    At least since 2004, glibc's <string.h> annotates memcpy as
    __attribute__((__nonnull__)).  On the other hand the argv here,
    which is passed from rb_funcallv, may be NULL.  Practically this
    should never be a serious problem but for maximum safety, let's
    avoid passing NULL here.

commit a116f04ccabe8ce7d0e7312ef0f55f6a2cdd178e
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 17:28:43 +0900

    suppress some UBSAN sanitizers

    They are not "undefined".  UBSAN reports them because it thinks
    they are "often unintentional".  We see the report rather annoying.

commit f4c68640d679c3786c19f3503c76112312636c37
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 17:01:20 +0900

    this variable is not guaranteed aligned

    No problem for unaligned-ness because we never dereference.

commit 7c0f513e97828dd8274695a49bde92c326b208cb
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 17:00:58 +0900

    fix typo

commit 6a3165e19dfa21babfb2ef1f1c20c9930410b0ec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-29 18:32:21 +0900

    Fixed HERETERM_LENGTH_MAX on IL32LLP64

commit c7f780c155ac553aa026e6caf4b1c88ff988adde
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-29 15:57:40 +0900

    Refactored rb_strterm_heredoc_t

commit 1432471a759dc0cbc80c53766894dba45e6da887
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-29 13:45:32 +0900

    Disallow also CR in here-doc identifier

    * parse.y (heredoc_identifier): CR in here-document identifier
      might or might not result in a syntax error, by the EOL code.
      make a syntax error regardless of the EOL code.

commit 23375c8b81e07644517e5ad985b2fbf5e1b5d545
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-29 13:42:50 +0900

    Make only `mesg` can be assigned with default `fname`

commit 330b376133e00ae418bcf01e641e127df01fbc28
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-29 00:24:26 +0900

    parse.y: fix here-doc identifier with newline

    * parse.y (heredoc_identifier): quoted here-document identifier
      must end within the same line.

      the only corner case that here-document identifier can contain a
      newline is that the closing quote is placed at the beginning of
      the next line, and has been warned since 2.4.

      ```ruby
      <<"EOS
      " # warning: here document identifier ends with a newline
      EOS
      ```

commit 69cad44facc4dedfe181c6a669b63fb9da2aa673
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-29 12:19:07 +0900

    Reduce debug output

    because I found machine clock problem
    see r67347
    https://travis-ci.org/ruby/ruby/jobs/525784924
    https://travis-ci.community/t/mtime-of-source-codes-are-sometimes-newer-than-build-time-clock-skew/3215

commit 812a438145a604e1361d4bf07cc3d81452cfb0ec
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-29 11:31:18 +0900

    iseq.c: removed unnecessary zero-fills

commit 6033423d6882546e132a450ab9efc66507879594
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-29 10:11:44 +0900

    NEWS: Moved "Integer#[] with range" to "Core classes updates"

commit daa0874056f602cbc99cab5ddfe3e590194f9bca
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-29 06:29:10 +0900

    CLOCK_MONOTONIC_RAW_APPROX seems less precise than advertised on macOS

    * https://travis-ci.org/ruby/ruby/builds/525651487

commit 79671ec57e59091260a0bc3d40a31d31d9c72a94
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-29 06:20:11 +0900

    Update to ruby/spec@7de852d

commit 994833085ae06afbe94d30ab183d80e0234fbe14
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-29 06:20:09 +0900

    Update to ruby/mspec@c25d63d

commit bbb93608a385242da93bc5256a90a6376981d86f
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-29 06:16:03 +0900

    Move the check for CentOS CLOCK_MONOTONIC_RAW next to others

    * Fixes "No behavior expectation was found in the example"
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos6/ruby-trunk/log/20190428T093004Z.fail.html.gz

commit dfc0eeb0cfb22efde6369f275d3a28c29144d9a6
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-29 01:22:28 +0900

    Fully support Git in tool/merger.rb

    as both backport source repository and backport destination repository.

commit f0776e3203b55b698971a2d2b0acc48cb3a0940e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-29 01:23:09 +0900

    Add more debug print for random CI failure on osx Travis

    and remove `git status` with noisy rvm trace log

    see r67347

commit 50cbb21ba533f67e29d7da0975ba186f9e3da93f
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-04-29 01:17:27 +0900

    Add "Integer#[] with range" to NEWS

commit 75260d36b591a6c9c6f183648434b3c1026e1cd8
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-29 01:00:20 +0900

    * remove trailing spaces.

commit 991e32681eac3c675ef796f5691a6786e99c3fb0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-29 00:57:34 +0900

    tool/merger.rb: Avoid making too-deep indentation

    because it's hard to understand what's going on when indentation depth
    is too deep.

    Sorry for polluting git blame, but most of the Merger's lines are
    updated recently anyway.

commit 2dddd370a17a33177f0898986ea2b37eabd07f31
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-29 00:53:06 +0900

    Support `tool/merger.rb removetag` under Git

    repository.

commit bbad0d05b3e42909da297db06d632d2102122f65
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-29 00:22:48 +0900

    * 2019-04-29

commit fad2825e42d80145ca7047f840b9b0cea00d0ca9
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 23:51:43 +0900

    Support `tool/merger.rb tag` under Git repository

commit 555d1dda71a3cd1ac954c4d41d523562721cde8d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-28 23:42:46 +0900

    * expand tabs.

commit 6bedbf462544a7917fdc8d8c44276079a6e156cf
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-04-28 23:24:09 +0900

    numeric.c: Extend Integer#[] to support range arguments

    ````
    0b01001101[2, 4]  #=> 0b0011
    0b01001100[2..5]  #=> 0b0011
    0b01001100[2...6] #=> 0b0011
        ^^^^
    ````

    [Feature #8842]

commit cb550246136b90a63b4f75f5e7cfaccb9da08eda
  Author: Yusuke Endoh <mame@ruby-lang.org>
  Date:   2019-04-28 23:23:00 +0900

    test/ruby/test_integer.rb: Add a sane test for Integer#[]

commit 3bc810334c776bb68bddeeced9bd91f918c8581f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 22:36:23 +0900

    Support `tool/merger.rb up` under Git repository

    updating indentation (and slightly changing styles) for areas already
    supporting Git.

commit d906dd87b049e84fc9a17b89a74fdd52d40c5fbb
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 22:23:12 +0900

    Skip CLOCK_UPTIME_RAW_APPROX since it seems less precise than advertised on macOS

    * See https://travis-ci.org/ruby/ruby/jobs/525595997

commit 392d84b4900eb954fdfcf11c2a63dd4c029996f4
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 22:14:55 +0900

    Fix wrong svn options

    for SVN as a backport source.

    This was a mistake in de5378233b2ff5434f024ac66285e699794a321d...

commit 1c8cefca310d12cf4ae475eeacec73bf1f5ae7c3
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 22:02:09 +0900

    Stop using global variable for repos

    to avoid having impact from other places.

commit 9426da83c60eca84197e9fcf67dc9c7c12ad3d2e
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 21:59:14 +0900

    Exclude failing Process.clock_getres specs on AIX

commit a27f7e499c66e5f09d5159c33c72834f14ec5aac
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 21:54:42 +0900

    Add missing platform guard

commit 9a0dbb341442fc0d203a5cd6fb46250e429e9188
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 21:52:55 +0900

    Skip problematic Process.clock_getres specs on ARM

    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-trunk/log/20190428T051708Z.fail.html.gz
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-ad7f67/ruby-trunk/log/20190428T045405Z.fail.html.gz

commit cb8eb37377289a3874742af290bcd32dd09910bf
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 21:53:57 +0900

    Now tool/merger.rb may use Git [ci skip]

commit f2d7ba6a7473b408002c90b77b021fc837f93561
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 21:51:35 +0900

    make sync-default-gems GEM=irb

    from https://github.com/ruby/irb/commit/e8e79d569ed59fe4ed4fbca968917ce799f02a5e.

    This colorizes Range object on IRB inspect.

commit 13abf5519a8c00ac2b05409e667c58f05c75123a
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 21:39:37 +0900

    Workaround a CentOS bug in Process.clock_getres specs

commit 14965c5f4b0160d22febd94f258b2ba1491a585e
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 21:40:37 +0900

    Drop SVN-specific method from Merger module

    to clarify it's not needed for Git support.

commit fcb18755135982320900c45baa45bd4ba0029e07
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 21:16:20 +0900

    Make Merger.version private to the module

    because it's not used outside the Module.

commit 16695af0ef13c709846a18ae9d186642445fae5f
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 21:36:03 +0900

    Refactor logic in Process.clock_gettime spec

commit fc37a045a0b2cf02a77109eb87b01d8b82d5c15d
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 21:35:17 +0900

    Fix typo in spec

commit d835ed4df1ae2bf317db41a8009b1fad143c94f1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 21:02:01 +0900

    Define merger.rb's methods under Merger namespace

    so that we do not monkey-patch all classes by defining methods on
    top-level (Object class).

    Not arranging indentation in it to keep `git blame` for now.

commit 8711f77a26078b80eb954e0bc873418cf733eff5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 20:33:12 +0900

    make sync-default-gems GEM=irb

    from https://github.com/ruby/irb/commit/96f05e726879e9858eb015c8d043c9f52b864ff9.

    Just syncing newer test changes so that conflicts do not happen when trunk is
    modified and we need to backport that to ruby/irb.

commit 588f212c2665555f76c68e0954332619bff60418
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 20:18:44 +0900

    make sync-default-gems GEM=irb

    from https://github.com/ruby/irb/commit/44301d382794d91e2caa16dd4efe62439e0041d8.

    This includes some fixes for string interpolation highlight fixes.

commit 4d8ad48f7dc610f58150daf92a859ed53fdd3a6c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 19:33:41 +0900

    Support git as redmine-backporter's done destination

commit 5d24fba544352a32fdd4e06fa25dc0625c6860f1
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 19:37:29 +0900

    Skip the entire Process.clock_getres spec on FreeBSD

    * Clocks don't match the reported precision.
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/freebsd11zfs/ruby-trunk/log/20190428T093003Z.fail.html.gz

commit f40458e9dda3298df12f5b602f02afd4dfae334b
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 14:10:08 +0900

    Specify VM_CHECK_MODE explicitly

    In my understanding, `VM_CHECK_MODE` should be Integer and I'm not sure
    how `-DVM_CHECK_MODE` would behave. To make the matters simple, let me
    pass the mode explicitly.

commit 766293fc490b6812739e837554dd5d8e703d352c
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 14:04:48 +0900

    Ruby 2.3 is EOL

commit 4c8f1078985613ea1015fe1a1cdbe9944528cb35
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-28 12:16:40 +0900

    Make the range to export as changelog optional

    * `from` is defaulted to the beginning of the branch inclusively,
      otherwise the given revision is excluded as the previous.

    * `to` is defaulted to the head.

commit d72bd190a80e6b8258ca923b606175754a210b6d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-28 12:11:59 +0900

    Added VCS::SVN#branch_beginning

commit b7669705270478f14d02f15b51b74eeec52a49da
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-28 12:04:15 +0900

    Search the beginning revision more strictly a bit

commit fdcd640507ab2600dfa96f4962eba2702acfc264
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-28 11:35:14 +0900

    Makefiles need to be indented by tabs

commit 5a53682d6dede337b81f944edc76b1a5e1243adc
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-28 11:31:36 +0900

    Removed `--reverse` option

    It is nonsense with `-n1` option.

commit d0a54673202458455244f79ed212a97727f0c7c7
  Author: David Rodrguez <deivid.rodriguez@riseup.net>
  Date:   2019-04-26 20:26:21 +0900

    Update rubygems with latest upstream changes

    Closes: https://github.com/ruby/ruby/pull/2154

commit a15f7dd1fb1148c3d586238ee6907875f2e40379
  Author: Jeremy Evans <code@jeremyevans.net>
  Date:   2019-04-28 02:05:26 +0900

    Always mark the string returned by File.realpath as tainted

    This string can include elements that were not in either string
    passed to File.realpath, even if one of the strings is an
    absolute path, due to symlinks:

    ```ruby
    Dir.mkdir('b') unless File.directory?('b')
    File.write('b/a', '') unless File.file?('b/a')
    File.symlink('b', 'c') unless File.symlink?('c')
    path = File.realpath('c/a'.untaint, Dir.pwd.untaint)
    path # "/home/testr/ruby/b/a"
    path.tainted? # should be true, as 'b' comes from file system
    ```

    [Bug #15803]

commit d47cd75b4fead0cfc5fdb59c48d5d822ffe3382d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-28 10:41:11 +0900

    Chomp a newline from the branch name

commit 7790b610b8c11ae987e0f9a936418a7a34a8af0b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-28 02:00:39 +0900

    Shorten git revision name without "r" prefix in snapshot

commit 2c283655a650a7e97aaf36992d1d60c314403b7a
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 06:43:58 +0900

    Some Solaris versions seem to only provide millisecond accuracy for CLOCK_REALTIME

    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-trunk/log/20190427T182404Z.fail.html.gz

commit b7c301569df2eaee3a2785e5ec56f8c53fbc9fea
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 06:42:31 +0900

    Skip clock_getres spec on BSD

    * clock_getres() seems to be incorrect on BSD:
      https://rubyci.org/logs/rubyci.s3.amazonaws.com/freebsd11zfs/ruby-trunk/log/20190427T183003Z.fail.html.gz

commit 0d227d1ce6aa01b0f6db06bbbf828acb962d4734
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 02:42:54 +0900

    Try to more accurately reflect MRI's logic in specs for finding the home if $HOME is unset

commit 5b93321064e83ea180492469071189372e8289e8
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 02:23:45 +0900

    Update to ruby/spec@14e6148

commit 14f004d3962f799ae2caca7d6a82f508e51270bc
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 02:17:49 +0900

    Isolate test_gc_compact on AppVeyor mswin as well

    because it makes the CI unstable
    https://ci.appveyor.com/project/ruby/ruby/builds/24143365/job/yrx7b8ce2qg9wro2

commit ed4f33187976ebbbe4d3eb83dceea1992e9f6a16
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-28 02:02:30 +0900

    * remove trailing spaces.

commit cae0b73214d721539e335babf02283799198a983
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-28 02:01:01 +0900

    make sync-default-gems GEM=irb

    from https://github.com/ruby/irb/commit/89e9add06da3fd5f9ce91a2f5fa0b0190aa5d42f.

    This adds syntax highlight support for Module on inspect.

    In addition to that, I'm adding a trailing space in test_color.rb for
    testing ruby-commit-hook's auto-style.

commit a1b4816759418ca8fe510e8739622fc5d77ab0f0
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 01:53:23 +0900

    Update to ruby/spec@15c9619

commit 00c33d9c232ed1a79eda17acd7231ac93caa162b
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-28 01:53:20 +0900

    Update to ruby/mspec@18c5a7d

commit 80be9e986b81d1e50433005f6b91f4cd0c1c0939
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-28 01:25:10 +0900

    * 2019-04-28

commit bb6036946ef7337c8bef6380ba394c082d5452cb
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-28 00:30:16 +0900

    Reduce matz's work, let git do it instead

commit 87d2a2df1b40016401a2f6dfc98e46880bbd18fd
  Author: Benoit Daloze <eregontp@gmail.com>
  Date:   2019-04-27 23:43:28 +0900

    Improve documentation of Array.try_convert

    * Mostly to try the new git repository.

commit 429fdf3de22690371b98590c4c1d6a53adbbfc26
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-27 23:27:12 +0900

    Added ChangeLog marker for the beginning of 2.7.0

commit db614dbf6d8c7f6e9ed315cd979500b131a5cc26
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-27 23:25:48 +0900

    Support git-log format ChangeLog

commit 2a4625115a2020dd55f952bdb176ab30405e19b9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-27 23:14:59 +0900

    Separate format_changelog

    VCS::GITSVN#format_changelog generates previous format, similar to
    svn-log, and VCS::GIT#format_changelog stores just git-log as-is
    for now.

commit 7875c42f64e8656eb18262da65816a72375bf5f2
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-27 23:13:03 +0900

    Override log format to parse for ChangeLog

commit 6f8ac2cb28f99a4b2588c59ec44eff6ed38c4d3b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-27 23:08:50 +0900

    Include the beginning commit in ChangeLog

commit af1e487e9bb763b939dc6704c9a343c9eafa1637
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-27 23:05:05 +0900

    Updated marked commits for ChangeLog

commit 3067370f611b16955a8064116092e5f0f9f126a7
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-27 22:21:34 +0900

    Retry downloads more for unicode outage

    like https://ci.appveyor.com/project/ruby/ruby/builds/24142523/job/v6aq4srj7c3hgt86

commit 9348643575d7a744f3e404d9069a0d29f97960a0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-27 22:01:10 +0900

    make sync-default-gems GEM=irb

    Synced from https://github.com/ruby/irb/commit/5feb361ed80736efa5b2c2b629837ec2a5fc2cdb.
    This includes a support to colorize named Class instance on IRB inspect.

commit 3f9562015e651735bfc2fdd14e8f6963b673e22a
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-27 21:21:55 +0900

    Get rid of indirect sharing

    * string.c (str_duplicate): share the root shared string if the
      original string is already sharing, so that all shared strings
      refer the root shared string directly.  indirect sharing can
      cause a dangling pointer.

    [Bug #15792]

commit afb361dfd0811f96f601d8d6492f9e1a0321ea01
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-27 20:15:07 +0900

    Isolate test_gc_compact on msys2 AppVeyor

    as it's unstable on the environment
    https://ci.appveyor.com/project/ruby/ruby/builds/24138134/job/i7e441u7se11w7ey

commit bc01f7b7211b96b258fc6586789ce9875c079a7d
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-04-27 12:55:32 +0900

    Fix description of NODE_IN

commit 7fe04850d21db1e17508fb8c05fd78fc079a71c6
  Author: okuramasafumi <masafumi.o1988@gmail.com>
  Date:   2019-04-27 11:18:25 +0900

    Add class ref to `UnboundMethod#owner` doc

    It refers to `Method#receiver` in the doc, but
    there's no class reference in current doc.
    Some tools automatically make it a link so it's useful.

    Closes: https://github.com/ruby/ruby/pull/2156

commit ecf660e438320f501ce4e05e92a5d6c79fe4d54d
  Author: James Clarke <jrtc27@jrtc27.com>
  Date:   2019-04-27 07:32:46 +0900

    ia64: Don't clear register_stack_start

    r59829 stopped clearing stack_start and enabled the code for
    !FIBER_USE_NATIVE, but we need to do the same for register_stack_start
    on ia64, otherwise we end up with NULL in cont_save_machine_stack.

    Closes: https://github.com/ruby/ruby/pull/2155

commit 5f6ba669ff79819e0e2cf006ed22f960d4565543
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-27 12:28:00 +0900

    Isolate TestGCCompact from JIT testing

    Wercker seems to randomly fail
    https://app.wercker.com/ruby/ruby/runs/mjit-test1/5cc3c1c423fcb70008db9b64?step=5cc3c46a03f4460007da0659

    To help debugging, let me isolate the impact from GC.compact in the JIT
    testing on Wercker.

commit 48313f129abd464c69853a66af22adbad260b82e
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-27 12:21:35 +0900

    Add `or nil` to call-seq of `Enumerator::ArithmeticSequence#begin`

    ```
    % ruby -ve 'p (nil..).first'
    ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-darwin18]
    nil
    % ruby -ve 'p (nil..).begin'
    ruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-darwin18]
    nil
    ```

commit be8cf0d4f672c6061c38c06a7d5d1ee909fc124b
  Author: Kazuki Tsujimoto <kazuki@callcc.net>
  Date:   2019-04-27 12:09:48 +0900

    Update NEWS for pattern matching [ci skip]

commit baad9e8a1c5b54d5728ce48d36726ed78754285f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-27 12:08:48 +0900

    NEWS: Note about $TERM requirement [ci skip]

commit 569c1ef6f17ad12012ba85c443c6806b9d0a9da5
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-27 11:42:38 +0900

    make sync-default-gems GEM=irb

    Backport changes from ruby/irb.

commit 782e48726082ee130b6ce27f2a21d33257f09d71
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 14:48:35 +0900

    suppress warning in test/irb

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos7/ruby-trunk/log/20190421T040003Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67678 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

    Re-committing https://github.com/ruby/ruby/commit/7f09b5e9da8f83f84c5b6ae7a644a562811fec73

commit a2219e687e07fb7e3b9b6dce8e68210fd3a516f9
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-27 09:17:50 +0900

    * 2019-04-27

commit c8b675adb902a67bf62a1a9945bade7c8becc4e8
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 14:48:35 +0900

    suppress redefinition warnings

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67679 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8990779d3693b106fbca014518726ba53224f731
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 18:52:50 +0900

    Prefer block_given? to iterator?

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66866 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e804fcb42c56d5a4ff31df0391accaf5ede8c26e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-26 18:53:36 +0900

    Fix rdoc in 52cfb17086

commit a429b3601f5dea7e3f7019733afffe64df583f34
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-26 18:46:43 +0900

    Revert "Class instance should be also colorable on IRB"

    This reverts commit 6669c966d2744f21315047d1725ad4494d15b8ba.

    It seems to make tests fail... let me fix this later.

commit 6669c966d2744f21315047d1725ad4494d15b8ba
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-26 18:42:50 +0900

    Class instance should be also colorable on IRB

    inspect.

    Change is made with: `$ make -C .ruby sync-default-gems GEM=irb`

commit 52cfb17086998b9434c9c786bfcf827197216c9a
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-26 18:28:54 +0900

    make sync-default-gems GEM=irb

    from https://github.com/ruby/irb/commit/e6739d8c66dc78562930adb0b96935c9b38acf74

commit a6805771ec202a8b8586d6624b05342029cace0d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-26 18:25:54 +0900

    Define `make sync-default-gems`

    to run tool/sync_default_gems.rb

commit a93f55569950b714a3d1235e59ad0a7d5b88f938
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-26 18:18:09 +0900

    tool/sync_default_gems.rb: Check prerequisites

commit 1cef6a0c0c996ab87ef41dfeede3203ee3c811dc
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-26 17:47:09 +0900

    Add more debug print for random CI failure on osx Travis

    see r67347

commit 0523b02f481150d60fc0803689d0919ee22923e9
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 14:33:44 +0900

    yaml cannot deep-merge arrays

    The configuration cannot but be written here and there....

commit 267ac0624dad6be5c3f4760f691258ae7dc83861
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 13:35:08 +0900

    make test needs no gems

commit d700a8a0eb5f0a17d689216b5944ab6e39f1d55e
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 13:32:55 +0900

    update travis clang

    Seems clang-7 has false-positives around memory sanitizer.

    This line should not be reported because the memory region is
    correctly unpoisoned beforehand:
    https://travis-ci.org/ruby/ruby/jobs/524766381

    Clang 8 seems to fix it.

commit 3175c54cb6d0684cf5a9346838a91756db33e54e
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 11:58:43 +0900

    new travis setting to enable assertions

commit 2a49a4795679e17613435544766b127ebe31b6d3
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-26 11:33:40 +0900

    sanitizer compiler flag update

commit 7b7043e5da8589e01b94575d4ed647e909e5c875
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-25 15:50:47 +0900

    eliminate use of freed memory

    rb_io_fptr_finalize_internal frees the memory region.

    =================================================================
    ==85264==ERROR: AddressSanitizer: heap-use-after-free on address 0x610000000d8c at pc 0x5608e38077f7 bp 0x7ffee12d5440 sp 0x7ffee12d5438
    READ of size 4 at 0x610000000d8c thread T0
        #0 0x5608e38077f6 in rb_io_memsize io.c:4749:24
        #1 0x5608e37a0481 in obj_memsize_of gc.c:3547:14
        #2 0x5608e37a4f30 in check_rvalue_consistency gc.c:1107:2
        #3 0x5608e37a2624 in RVALUE_OLD_P gc.c:1218:5
        #4 0x5608e37a5bae in rb_gc_force_recycle gc.c:6652:18
        #5 0x5608e38191f9 in rb_f_backquote io.c:9021:5
        #6 0x5608e3d8aa14 in call_cfunc_1 vm_insnhelper.c:2058:12
        #7 0x5608e3d6e23d in vm_call_cfunc_with_frame vm_insnhelper.c:2211:11
        #8 0x5608e3d54a35 in vm_call_cfunc vm_insnhelper.c:2229:12
        #9 0x5608e3d5253b in vm_call_method_each_type vm_insnhelper.c:2564:9
        #10 0x5608e3d51f50 in vm_call_method vm_insnhelper.c:2701:13
        #11 0x5608e3cf2de4 in vm_call_general vm_insnhelper.c:2734:12
        #12 0x5608e3d79918 in vm_sendish vm_insnhelper.c:3627:11
        #13 0x5608e3d06cf5 in vm_exec_core insns.def:789:11
        #14 0x5608e3d43700 in rb_vm_exec vm.c:1892:22
        #15 0x5608e3d47cbf in rb_iseq_eval_main vm.c:2151:11
        #16 0x5608e37620ca in ruby_exec_internal eval.c:262:2
        #17 0x5608e376198b in ruby_exec_node eval.c:326:12
        #18 0x5608e37617d0 in ruby_run_node eval.c:318:25
        #19 0x5608e35c9486 in main main.c:42:9
        #20 0x7f62e9421b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
        #21 0x5608e3522289 in _start (miniruby+0x15f289)

    0x610000000d8c is located 76 bytes inside of 192-byte region [0x610000000d40,0x610000000e00)
    freed by thread T0 here:
        #0 0x5608e359a2ed in free (miniruby+0x1d72ed)
        #1 0x5608e37af421 in objspace_xfree gc.c:9591:5
        #2 0x5608e37af3da in ruby_sized_xfree gc.c:9687:2
        #3 0x5608e3799ac8 in ruby_xfree gc.c:9694:5
        #4 0x5608e380746d in rb_io_fptr_finalize_internal io.c:4728:5
        #5 0x5608e38191ed in rb_f_backquote io.c:9020:5
        #6 0x5608e3d8aa14 in call_cfunc_1 vm_insnhelper.c:2058:12
        #7 0x5608e3d6e23d in vm_call_cfunc_with_frame vm_insnhelper.c:2211:11
        #8 0x5608e3d54a35 in vm_call_cfunc vm_insnhelper.c:2229:12
        #9 0x5608e3d5253b in vm_call_method_each_type vm_insnhelper.c:2564:9
        #10 0x5608e3d51f50 in vm_call_method vm_insnhelper.c:2701:13
        #11 0x5608e3cf2de4 in vm_call_general vm_insnhelper.c:2734:12
        #12 0x5608e3d79918 in vm_sendish vm_insnhelper.c:3627:11
        #13 0x5608e3d06cf5 in vm_exec_core insns.def:789:11
        #14 0x5608e3d43700 in rb_vm_exec vm.c:1892:22
        #15 0x5608e3d47cbf in rb_iseq_eval_main vm.c:2151:11
        #16 0x5608e37620ca in ruby_exec_internal eval.c:262:2
        #17 0x5608e376198b in ruby_exec_node eval.c:326:12
        #18 0x5608e37617d0 in ruby_run_node eval.c:318:25
        #19 0x5608e35c9486 in main main.c:42:9
        #20 0x7f62e9421b96 in __libc_start_main
    /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310

    previously allocated by thread T0 here:
        #0 0x5608e359a56d in malloc (miniruby+0x1d756d)
        #1 0x5608e37aed12 in objspace_xmalloc0 gc.c:9416:5
        #2 0x5608e37aebe7 in ruby_xmalloc0 gc.c:9600:12
        #3 0x5608e37aea8b in ruby_xmalloc_body gc.c:9609:12
        #4 0x5608e37a6d64 in ruby_xmalloc gc.c:11469:12
        #5 0x5608e380e4b4 in rb_io_fptr_new io.c:8040:19
        #6 0x5608e380e446 in rb_io_make_open_file io.c:8077:10
        #7 0x5608e3850ea0 in pipe_open io.c:6707:5
        #8 0x5608e384edb4 in pipe_open_s io.c:6772:12
        #9 0x5608e381910b in rb_f_backquote io.c:9014:12
        #10 0x5608e3d8aa14 in call_cfunc_1 vm_insnhelper.c:2058:12
        #11 0x5608e3d6e23d in vm_call_cfunc_with_frame vm_insnhelper.c:2211:11
        #12 0x5608e3d54a35 in vm_call_cfunc vm_insnhelper.c:2229:12
        #13 0x5608e3d5253b in vm_call_method_each_type vm_insnhelper.c:2564:9
        #14 0x5608e3d51f50 in vm_call_method vm_insnhelper.c:2701:13
        #15 0x5608e3cf2de4 in vm_call_general vm_insnhelper.c:2734:12
        #16 0x5608e3d79918 in vm_sendish vm_insnhelper.c:3627:11
        #17 0x5608e3d06cf5 in vm_exec_core insns.def:789:11
        #18 0x5608e3d43700 in rb_vm_exec vm.c:1892:22
        #19 0x5608e3d47cbf in rb_iseq_eval_main vm.c:2151:11
        #20 0x5608e37620ca in ruby_exec_internal eval.c:262:2
        #21 0x5608e376198b in ruby_exec_node eval.c:326:12
        #22 0x5608e37617d0 in ruby_run_node eval.c:318:25
        #23 0x5608e35c9486 in main main.c:42:9
        #24 0x7f62e9421b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310

    SUMMARY: AddressSanitizer: heap-use-after-free io.c:4749:24 in
    rb_io_memsize
    Shadow bytes around the buggy address:
      0x0c207fff8160: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00
      0x0c207fff8170: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0c207fff8180: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00
      0x0c207fff8190: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0c207fff81a0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd
    =>0x0c207fff81b0: fd[fd]fd fd fd fd fd fd fd fd fd fd fd fd fd fd
      0x0c207fff81c0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0c207fff81d0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0c207fff81e0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0c207fff81f0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0c207fff8200: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
    Shadow byte legend (one shadow byte represents 8 application bytes):
      Addressable:           00
      Partially addressable: 01 02 03 04 05 06 07
      Heap left redzone:       fa
      Freed heap region:       fd
      Stack left redzone:      f1
      Stack mid redzone:       f2
      Stack right redzone:     f3
      Stack after return:      f5
      Stack use after scope:   f8
      Global redzone:          f9
      Global init order:       f6
      Poisoned by user:        f7
      Container overflow:      fc
      Array cookie:            ac
      Intra object redzone:    bb
      ASan internal:           fe
      Left alloca redzone:     ca
      Right alloca redzone:    cb
      Shadow gap:              cc
    ==85264==ABORTING

commit 2a863d4babed062dd91d2fe519d5018651c6378e
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-25 15:03:18 +0900

    avoid buffer overflow in vm_check_canary

    ec->cfp->iseq might not exist at the very beginning of a thread.

    =================================================================
    ==82954==ERROR: AddressSanitizer: heap-buffer-overflow on address 0x7fc86f334810 at pc 0x55ceaf013125 bp 0x7ffe2eddbbf0 sp 0x7ffe2eddbbe8
    READ of size 8 at 0x7fc86f334810 thread T0
        #0 0x55ceaf013124 in vm_check_canary vm_insnhelper.c:217:24
        #1 0x55ceaefb4796 in vm_push_frame vm_insnhelper.c:276:5
        #2 0x55ceaf0124bd in th_init vm.c:2661:5
        #3 0x55ceaf00d5eb in ruby_thread_init vm.c:2690:5
        #4 0x55ceaf00d4b1 in rb_thread_alloc vm.c:2703:5
        #5 0x55ceaef0038b in thread_s_new thread.c:872:20
        #6 0x55ceaf04d8c1 in call_cfunc_m1 vm_insnhelper.c:2041:12
        #7 0x55ceaf03118d in vm_call_cfunc_with_frame vm_insnhelper.c:2207:11
        #8 0x55ceaf017985 in vm_call_cfunc vm_insnhelper.c:2225:12
        #9 0x55ceaf01548b in vm_call_method_each_type vm_insnhelper.c:2560:9
        #10 0x55ceaf014c96 in vm_call_method vm_insnhelper.c:2686:13
        #11 0x55ceaefb5de4 in vm_call_general vm_insnhelper.c:2730:12
        #12 0x55ceaf03c868 in vm_sendish vm_insnhelper.c:3623:11
        #13 0x55ceaefc95bb in vm_exec_core insns.def:771:11
        #14 0x55ceaf006700 in rb_vm_exec vm.c:1892:22
        #15 0x55ceaf00acbf in rb_iseq_eval_main vm.c:2151:11
        #16 0x55ceaea250ca in ruby_exec_internal eval.c:262:2
        #17 0x55ceaea2498b in ruby_exec_node eval.c:326:12
        #18 0x55ceaea247d0 in ruby_run_node eval.c:318:25
        #19 0x55ceae88c486 in main main.c:42:9
        #20 0x7fc874330b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310
        #21 0x55ceae7e5289 in _start (miniruby+0x15f289)

    0x7fc86f334810 is located 16 bytes to the right of 1048576-byte region [0x7fc86f234800,0x7fc86f334800)
    allocated by thread T0 here:
        #0 0x55ceae85d56d in malloc (miniruby+0x1d756d)
        #1 0x55ceaea71d12 in objspace_xmalloc0 gc.c:9416:5
        #2 0x55ceaea71cd2 in ruby_xmalloc2_body gc.c:9623:12
        #3 0x55ceaea7d09c in ruby_xmalloc2 gc.c:11479:12
        #4 0x55ceaf00c3b7 in rb_thread_recycle_stack vm.c:2462:12
        #5 0x55ceaf012256 in th_init vm.c:2656:29
        #6 0x55ceaf00d5eb in ruby_thread_init vm.c:2690:5
        #7 0x55ceaf00d4b1 in rb_thread_alloc vm.c:2703:5
        #8 0x55ceaef0038b in thread_s_new thread.c:872:20
        #9 0x55ceaf04d8c1 in call_cfunc_m1 vm_insnhelper.c:2041:12
        #10 0x55ceaf03118d in vm_call_cfunc_with_frame vm_insnhelper.c:2207:11
        #11 0x55ceaf017985 in vm_call_cfunc vm_insnhelper.c:2225:12
        #12 0x55ceaf01548b in vm_call_method_each_type vm_insnhelper.c:2560:9
        #13 0x55ceaf014c96 in vm_call_method vm_insnhelper.c:2686:13
        #14 0x55ceaefb5de4 in vm_call_general vm_insnhelper.c:2730:12
        #15 0x55ceaf03c868 in vm_sendish vm_insnhelper.c:3623:11
        #16 0x55ceaefc95bb in vm_exec_core insns.def:771:11
        #17 0x55ceaf006700 in rb_vm_exec vm.c:1892:22
        #18 0x55ceaf00acbf in rb_iseq_eval_main vm.c:2151:11
        #19 0x55ceaea250ca in ruby_exec_internal eval.c:262:2
        #20 0x55ceaea2498b in ruby_exec_node eval.c:326:12
        #21 0x55ceaea247d0 in ruby_run_node eval.c:318:25
        #22 0x55ceae88c486 in main main.c:42:9
        #23 0x7fc874330b96 in __libc_start_main /build/glibc-OTsEL5/glibc-2.27/csu/../csu/libc-start.c:310

    SUMMARY: AddressSanitizer: heap-buffer-overflow vm_insnhelper.c:217:24 in vm_check_canary
    Shadow bytes around the buggy address:
      0x0ff98de5e8b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0ff98de5e8c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0ff98de5e8d0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0ff98de5e8e0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
      0x0ff98de5e8f0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
    =>0x0ff98de5e900: fa fa[fa]fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e910: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e920: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e930: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e940: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
      0x0ff98de5e950: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa
    Shadow byte legend (one shadow byte represents 8 application bytes):
      Addressable:           00
      Partially addressable: 01 02 03 04 05 06 07
      Heap left redzone:       fa
      Freed heap region:       fd
      Stack left redzone:      f1
      Stack mid redzone:       f2
      Stack right redzone:     f3
      Stack after return:      f5
      Stack use after scope:   f8
      Global redzone:          f9
      Global init order:       f6
      Poisoned by user:        f7
      Container overflow:      fc
      Array cookie:            ac
      Intra object redzone:    bb
      ASan internal:           fe
      Left alloca redzone:     ca
      Right alloca redzone:    cb
      Shadow gap:              cc
    ==82954==ABORTING

commit aa190abe207c9cdbd75a5f8670a4e613565ee6bf
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-25 13:10:29 +0900

    newptr should not be NULL

    obj_ivar_heap_alloc already handles that situation.

commit 1aa05fddd81846bfa2833dff5e0aaccc1e707c81
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-24 16:47:09 +0900

    unpoison header before touching

    This header is poisoned to detect unintentional buffer overrun.
    However in this (and forthcoming) function, we are intentionally
    looking at the header.  We have to unpoison before anything.

commit 40b5f2b85dc5c50d7757c3b2522a767188b0e0b3
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-24 16:15:46 +0900

    memo.c might not always be initialized

    memo.float_value might change inside of hash_sum.  In case it
    flipped from false to true there, and the calculated sum is Inf,
    memo.c might not be initialized at all.  This is bad.

    Found using memory sanitizer:

    ==55293==WARNING: MemorySanitizer: use-of-uninitialized-value
        #0 0x55dfb8d6c529 in rb_float_new_inline internal.h:1814:53
        #1 0x55dfb8d1b30c in enum_sum enum.c:4017:18
        #2 0x55dfb86d75ad in call_cfunc_m1 vm_insnhelper.c:2041:12
        #3 0x55dfb864b141 in vm_call_cfunc_with_frame vm_insnhelper.c:2207:11
        #4 0x55dfb85e843d in vm_call_cfunc vm_insnhelper.c:2225:12
        #5 0x55dfb85e08f3 in vm_call_method_each_type vm_insnhelper.c:2560:9
        #6 0x55dfb85de9c7 in vm_call_method vm_insnhelper.c:2686:13
        #7 0x55dfb849eac6 in vm_call_general vm_insnhelper.c:2730:12
        #8 0x55dfb8686103 in vm_sendish vm_insnhelper.c:3623:11
        #9 0x55dfb84dc29e in vm_exec_core insns.def:789:11

commit f02760fc0a455f376ad1a855fd1a5e9252c8267c
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-24 15:30:25 +0900

    avoid reading uninitialized variable

    autoload_reset() can read this state.result.  Because autoload_reset
    is a function passed to rb_ensure, there is a chance when an
    exception raises before actually filling this memory region.

    test/ruby/test_defined.rb:test_autoload_noload is one of such case.

    Found using memory sanitizer.

    ==54014==WARNING: MemorySanitizer: use-of-uninitialized-value
        #0 0x557a683f3e5a in autoload_reset variable.c:2372:9
        #1 0x557a6707a93b in rb_ensure eval.c:1084:5
        #2 0x557a683efbf5 in rb_autoload_load variable.c:2475:14
        #3 0x557a685fc460 in vm_get_ev_const vm_insnhelper.c:938:4
        #4 0x557a68448e0a in vm_exec_core insns.def:267:11

commit 3ba485c0bfcfc0be351ef8278cd27187f4c11906
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-23 18:02:24 +0900

    zero-fill before GC mark

    Depending on architectures, setjmp might not fully fill a jmp_buf.
    On such machines the union can contain wobbly bits. They are then
    scanned during mark_locations_array().  This is bad.

commit 504ce460d240b5b726e77c0b0915677892a19e58
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-24 14:53:47 +0900

    give up sanitizing BSD_vfprintf

    Sanitizers report something inside of this function but it is
    beyond my brain capacity.  Also the code is proven to work.
    Let me ignore.

commit b11b26bcaf711ad01d1a81943cca42f7ff40bfee
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-24 12:24:44 +0900

    fix size of allocated memory

    The size of `ptr` here is not the same as the variable `size`.
    We were counting the size of header twice.

commit 6201a89b38afb6bb2a548aeba0ca77090851713b
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-24 11:23:13 +0900

    mark verify functions non-sanitizable

    These functions purposefully read from memory regions potentially
    not handled well.  Should let sanitizers avoid checking them.

commit 572f2ddff64ddf12f2331ad77b72d2b0c9d9883c
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-23 18:36:20 +0900

    use __attribute__((__no_sanitize__("memory")))

commit fa09acafde3b7dbb23edadc6eddcce27f7395880
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-24 18:22:33 +0900

    extend machine stacks when sanitizers are there

    It seems sanitizers require extra amount of machine stacks.  Without
    extending them the process tends to stack overflow.

commit 1f4204a762b2ddcc2f235b1a2b6a10071ef90d3b
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-23 17:55:15 +0900

    disable assertion when MSAN is active

    These assertions check if a newly allocated object (which is marked
    as an uninitialized memory region in MSAN) is in fact a T_NONE.

    Thus they intentionally read uninitialized memory regions, which do
    not interface well with MSAN.  Just disable them.

commit bdd1b300f8bf540c8f237cce50e42991f94101e3
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-23 17:47:49 +0900

    __asan_region_is_poisoned takes void *

    while heap->obj is a VALUE.  A cast should be there.

commit 171a6ad1c12b1600b01d9bde29947526ae3e2aee
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-25 14:33:44 +0900

    print the disasm

    It seems to be my fault to leave the variable disasm unused.

commit b6ebbee5d64dbd422957efe55b4ec5520c9b11bf
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-04-25 16:36:32 +0900

    suppress warning [ci skip]

commit 54eac83b2ad77ddea84fa6d66c09e0bb014cf61e
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-24 13:35:23 +0900

    Hide internal IDs

    * parse.y (internal_id): number the ID serial for internal use by
      counting down from the neary maximum value, not to accidentally
      match permanent IDs.

    [Bug #15786]

  Notes:
    Fixed: [Bug #15786]

commit 5689c46457e6b078ac83b08b7e881e0050ebdfaa
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-26 01:43:26 +0900

    * 2019-04-26

commit 0408b8b390f788693b10ad82281ae3d66ea52eb4
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-26 01:43:11 +0900

    Syntax-highlight yield in IRB

commit 2422316aea034c818734ad2fa68c4b021a6aafeb
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-26 01:18:37 +0900

    NEWS: Credit goes to Pry [ci skip]

    We must note this feature is heavily inspired by Pry.

commit 5fe99aefd39ce535f658aabd0ca6e2265348d314
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-26 01:15:30 +0900

    Support highlighting Regexp in inspect

commit e64bab5f779440ae920746ae5689a2af91de3604
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-26 00:53:36 +0900

    Add NEWS entry about IRB syntax highlight [ci skip]

    Details: https://github.com/ruby/ruby/pull/2150

    Note that this introduction is discussed with @aycabta who is allowed to
    make some changes to IRB by the IRB maintainer, keiju.

commit 0c54d2e2c7697aa5d6a1315b79c16b88d34f5e81
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-25 23:53:57 +0900

    Force IRB::Color to recognize TERM

    Closes: https://github.com/ruby/ruby/pull/2150

commit 022cbb278f381e5774a5d0277a83127c6f6b4802
  Author: Pocket7878 <poketo7878@gmail.com>
  Date:   2019-04-25 23:47:12 +0900

    Do not color IRB output on 'dumb' TERM

    Co-Authored-By: k0kubun <takashikkbn@gmail.com>
    Closes: https://github.com/ruby/ruby/pull/2150

commit b55201dd099011a22c8c1d64c653f898d9b409ca
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-25 21:36:48 +0900

    Colorize IRB's inspect result

    Closes: https://github.com/ruby/ruby/pull/2150

commit 94af6cd383f9dc3ae1204a5fba8f56ee7826cbce
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-25 21:16:21 +0900

    Colorize IRB's code_around_binding

    Closes: https://github.com/ruby/ruby/pull/2150

commit 790f6709ae418345829d12f053cf270f4d535f1c
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-25 23:46:37 +0900

    Mention warning of `$,`

    see [r67606](https://github.com/ruby/ruby/commit/3ee0648dc7a5465b2cbadd7246fc2edbd676d759)

commit 2272cb00eadcbc48640c69fcd6a30e45a5977cd5
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-25 11:07:17 +0900

    Ripper does not use internal IDs directly

commit c9715eb494ee9055f76ff59027219b5b4756f7bd
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-25 20:02:22 +0900

    Add more debug print for random CI failure on osx Travis

    see r67347

commit 3581a64239b333be33424888f689c9e452fc3334
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-25 19:37:10 +0900

    BSD's mktemp does not have `-p`

commit 57225dc07a3fcc745c7aecc1fb04182b156ad29f
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-25 19:24:56 +0900

    Show `make checkout-github/merge-github` in help

commit b2e92bfd9f25274277f15faa6e9a70a7d0a36dfe
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-25 18:54:43 +0900

    Resurrect `make xxx-github PR=1234` interface

    `call xxx, yyy` seems to pass " yyy" instead of "yyy".

commit 70adfdcd8de3296e9015338216073e8144dbea04
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-25 18:29:58 +0900

    Added pr-%

    May merge multiple github pull requests at once. e.g.,

        $ make pr-123456789 pr-987654321

commit 44bb429bb1bb431dc2805daf93f52509c26b9da7
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-25 18:27:16 +0900

    Cache git config values

commit 6de9128fe942de9a0306fe63b949b1a9c343e2c8
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-25 18:05:51 +0900

    Add `make checkout-github` too

    You can use this like `make checkout-github PR=1234`

commit 116f91ab504a450b1b96d6b3f029fbaa5f99a305
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-25 15:33:05 +0900

    Make working tree under the source directory

commit 09ce223b0b297359fd7f9a5d629a70be32157302
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-25 15:03:54 +0900

    Rebase the pull request in a worktree

    A pull request based on an old commit may rewind too many files,
    even if unnecessary.  As rewinding some files, e.g., common header
    files, configure.ac, will result in full-rebuild, rebase in a
    separate directory to get rid of such rewind.

commit d0ba4abf1a00339ebbb5d405db3240a8bdb7b68b
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-25 13:22:06 +0900

    Add RB_ID_SERIAL_MAX

commit 99084f540171df301478ec66fb89e2c38287e504
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-04-10 21:05:15 +0900

    Lazy allocate the compile data catch table array

    Closes: https://github.com/ruby/ruby/pull/2119

commit 9bfc185a0d93f05f7522a3dea89d69920dcf079c
  Author: Kouhei Sutou <kou@clear-code.com>
  Date:   2019-04-25 05:28:56 +0900

    Upgrade test-unit to 3.3.2

commit 7d2cb60e48f40d6d6105808e1de1e244a05a8138
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-25 01:09:06 +0900

    * 2019-04-25

commit 68e3f8192b6df3ee1759bef7725e958aa3e72c3d
  Author: Masatoshi SEKI <m_seki@mva.biglobe.ne.jp>
  Date:   2019-04-25 01:08:54 +0900

    add DRbObject dereference test (Preparation for investigation of Bug #15711)

commit dd5b6c71c6cf157406e5ead4dfc6188d563bc268
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-25 00:52:16 +0900

    Fix typos [ci skip]

commit 6061aa0ac1b4d43d107d47ba4d2eecbda77959a1
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-24 23:26:56 +0900

    Automatically gpg-sign rebase when commit.gpgsign

    is true

    Closes: https://github.com/ruby/ruby/pull/2148

commit daff4cbd6c7d6be07ae094bda45bca076b37a375
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-24 22:40:54 +0900

    Add `make fetch-github` and `make merge-github`

    Closes: https://github.com/ruby/ruby/pull/2147

commit 2642f22050d74d56da5525b0cd1a5c665ddb4c51
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-24 18:18:46 +0900

    Add more debug print for random CI failure on osx Travis

    see r67347

commit 1613917ae6441b98a52d885f0df1479652be755d
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-24 17:34:21 +0900

    Defer setting gc_stress instead of setting dont_gc

    [Bug #15784]

commit f1a52d96a59c63d46cb23af60cdcaf38e30e0512
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-24 12:52:57 +0900

    Defer setting gc_stress until inits done

    [Bug #15784]

commit 2ef66737081ec029f9c82e11671de36bb70a9e3b
  Author: Koichi Sasada <ko1@atdot.net>
  Date:   2019-04-24 09:30:07 +0900

    force 10 chars SHA1 display.

    `make update-src` shows latest commit hash for convenience.
    However, `rev-parse --short` option shows different length
    (maybe) between git versions. This fix force 10 chars
    with `--short=10`.

commit 19d454a957836a6118f42b0367aea7c823beffae
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-04-24 07:16:17 +0900

    syntax error can move, so do not cache

commit 75061f46ae646e821e9228caa5e3b7f23fa609f0
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-04-24 04:10:52 +0900

    Fix complex hash keys to work with compaction

    For example when an array containing objects is a hash key, the contents
    of the array may move which can cause the hash value for the array to
    change.   This commit makes the default `hash` value based off the
    object id, so the hash value will remain stable.

    Fixes test/shell/test_command_processor.rb

commit cf930985da1ae15b66577ec8286e54ad04ccda78
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-03-17 00:53:18 +0900

    Remove member char_offset_updated from struct rmatch as member char_offset_num_allocated can serve the same purpose as that predicate

commit 82ef172a8cb90819bf835e468eb8af2323e3bccf
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-24 01:10:13 +0900

    The step should not fail when isolated tests

    do not exist

commit bc8e54911db505d9e1776673a86e956c7d7e3b89
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-24 00:39:33 +0900

    Isolate test_gc_compact for osx Travis

    After `GC.compact`, test/shell/test_command_processor.rb seems to be made
    unstable on osx Travis like https://travis-ci.org/ruby/ruby/jobs/523487997.

    For investigating whether it's impacting that or not, let me try isolating
    that for osx Travis for now.

commit 9629f4c0518f4a22fe8c149019c3d15005f4ef00
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-24 00:40:29 +0900

    * 2019-04-24

commit 31cf13060cce44d782b068cf083b1ae4def6dc09
  Author: Lourens Naud <lourens@bearmetal.eu>
  Date:   2019-03-16 21:48:34 +0900

    Only define history_root member of the Oniguruma re_registers struct if USE_CAPTURE_HISTORY is enabled

commit 14dd8d6b370797f2e419205e9f28368433dc6ceb
  Author: Hiroshi SHIBATA <hsbt@ruby-lang.org>
  Date:   2019-04-23 22:26:40 +0900

    Added cgit url.

commit f4f66bd11c65882b86e0acf4d58f15fb596f25cf
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-23 21:55:29 +0900

    Revert "IRB is improved with Reline and RDoc, take 2"

    Accidentally merged when 89271d4a3733bc5e70e9c56b4bd12f277e699c42
    "Adjusted indents".

commit 89271d4a3733bc5e70e9c56b4bd12f277e699c42
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-23 20:27:24 +0900

    Adjusted indents

commit f2cd4f4cd0a1e352fcc48a216127beaeda2b2399
  Author: aycabta <aycabta@gmail.com>
  Date:   2019-04-23 18:09:46 +0900

    IRB is improved with Reline and RDoc, take 2

commit 87cf45a512a7803f266e4782c49e0a99c06a4039
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-23 16:48:48 +0900

    Fix a typo

commit 2ae5f6f97cd1cd79e3c0ef11da235ddc053a6186
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-23 15:43:51 +0900

    Add VCS::GIT#commit

commit 2fb83a0af7a49788e80c55fd324dfa8e046cd9d9
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-23 15:39:36 +0900

    Split git-svn dependent methods

commit 18eb9e585526881cba9752e50b2d206924714339
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-23 15:03:19 +0900

    Use an exclusive range for ruby_version_is

commit 0d41adf6e2d10ef699e291f468ee955b25671d6f
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-01-07 11:03:41 +0900

    Split long expression

commit 4946c3e4b5e465c743da3050169fdb1f7b060c95
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-23 14:09:45 +0900

    Add tool/format-release to .gitattributes

commit 2e1ac220891eb6f53ab62b7c5f4376d8b7959779
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-04-23 12:38:49 +0900

    Oops, bad merge 

commit e50e60b96a90db8dd92a39f89bd1315d63e1515d
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-23 12:34:10 +0900

    * expand tabs.

commit 5a58318a9036ae2430d0a6b1d27ff3d3fd7fdf13
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-04-23 12:32:20 +0900

    T_MOVED can live on the stack, so make sure we can do book keeping

    Unused T_MOVED objects can live on the stack, so we need to make sure
    that they can be accounted for in book keeping

commit 6ca9e7cc0785c33f6d382176dbd79d6c91db72fe
  Author: Seiei Miyagi <hanachin@gmail.com>
  Date:   2019-04-23 00:21:50 +0900

    Disallow numbered parameter as the default value of optional argument

    [Fix GH-2139] [Bug #15783]

commit ae07b66aaa092c59ac9d544c9b582712290dc357
  Author: Seiei Miyagi <hanachin@gmail.com>
  Date:   2019-04-23 00:01:17 +0900

    Fix internal error of `->x:@2{}`

    [Fix GH-2139] [Bug #15783]

commit ea520ca9273699fc1c77a71bbeba4b6e06ccfc6c
  Author: Aaron Patterson <tenderlove@ruby-lang.org>
  Date:   2019-04-23 09:14:36 +0900

    Prevent rb_define_(class|module) classes from moving

    Before this commit, classes and modules would be registered with the
    VM's `defined_module_hash`.  The key was the ID of the class, but that
    meant that it was possible for hash collisions to occur.  The compactor
    doesn't allow classes in the `defined_module_hash` to move, but if there
    is a conflict, then it's possible a class would be removed from the hash
    and not get pined.

    This commit changes the key / value of the hash just to be the class
    itself, thus preventing movement.

commit 660c0716595a8fc942d12317a5c55c038b830e94
  Author: Urabe, Shyouhei <shyouhei@ruby-lang.org>
  Date:   2019-03-08 17:10:08 +0900

    [ci skip] grammars in comments

commit 9cdb736672bec22a8396f8077f8eea758bb2ef88
  Author: Nobuyoshi Nakada <nobu@ruby-lang.org>
  Date:   2019-04-23 10:15:01 +0900

    Missing semicolon

commit a9b57862bd5b81fb091202d82fb26f3f9ecdc4a3
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-23 10:19:53 +0900

    * 2019-04-23

commit a8d4dc287fc8621c5b786140714736cb747d3291
  Author: git <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-23 10:19:47 +0900

    * expand tabs.

commit 98ee63693d963e96ac7d81ac33a5b12103b577b3
  Author: Aaron Patterson <aaron.patterson@gmail.com>
  Date:   2019-04-23 08:23:04 +0900

    Symbols can move, so don't cache in static pointer

    This changes the static pointers to use IDs then look up the symbols
    with the ID.  Symbols can move, so we don't want to keep static
    references to them.

commit 6fbf4e22c83b4504d2d9a4a42216e4306a4e7e38
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-22 23:10:10 +0900

    Adds a reference to `TracePoint` to `binding` docs

    This change adds an explicit reference to `TracePoint` in the
    documentation for `binding`. Currently it only refers to the now
    deprecated `Kernel#set_trace_func`. This reference is left alone for
    continuity in the documentation.
    [Fix GH-2079]

    Co-authored-by: Brandon Weaver <baweaver@squareup.com>

commit e19e5d2409e99ef7fd450d317e71e119cb5a4c3a
  Author: Stefan Schler <mail@stefanschuessler.de>
  Date:   2019-02-18 20:44:01 +0900

    Fix return value name in docs for Array#union

    Throughout the docs, `new_ary` is used to indicate a new array, whereas `ary` refers to the receiver.

  Notes:
    Merge branch patch-5 of https://github.com/sos4nt/ruby into trunk

    [Fix GH-2084]

commit 4cd67a848a0648c20b1cab9d2dfe1bf7d7d90be0
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-22 22:00:33 +0900

    Fix RUBY_REVISION spec

    broken by 5da52d1210625fb00acd573b3f32281b4bde1730

commit 87261cf59f4914801512cf0f3f1332f0c94b6952
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-22 21:44:44 +0900

    Omit last_commit=RUBY_LAST_COMMIT_TITLE without local commits

commit 5da52d1210625fb00acd573b3f32281b4bde1730
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-22 21:23:37 +0900

    Migrate RUBY_VERSION/RUBY_DESCRIPTION to Git

    from Subversion.

    This behavior is tentative and not discussed well. The point of
    discussion will be just the length of commit hash, and I thought we
    should include this kind of change in 2.7.0-preview1 release even before
    the length is fixed yet.

    Let's discuss that afterwards and fix it later as needed. Naruse
    suggested that length=10 is very unlikely to cause conflict, and thus
    it's used by email notification and rubyci now. This behavior is in
    favor of that for now.

commit dd0b516399f1e009667a99e815bf86c6a1245ee5
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-22 21:01:34 +0900

    Tk is already removed from stdlib at r55844

    https://github.com/ruby/ruby/commit/303dc3c591e324b6bbc691326d8bea76fe3b8fda

commit c697bade0fc1a7f80122fac7bfe4d137f999f841
  Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
  Date:   2019-04-22 20:01:07 +0900

    Ignore VSCode configuration from git.

commit 6a2c8e46f63998b860f5dbf4a89e2f7ee2d7ed0e
  Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
  Date:   2019-04-22 20:00:32 +0900

    Use github url instead of ViewVC.

commit 184447d91c71aaab6a6f4e6e0527f553872036fb
  Author: SHIBATA Hiroshi <hsbt@ruby-lang.org>
  Date:   2019-04-22 19:37:22 +0900

    ViewVC of svn.ruby-lang.org was shutdown status.

commit ae3f38dc533f2967214f826d3ed45f950f94a8e7
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-22 19:02:17 +0900

    CRuby trunk uses git instead of subversion now

commit f005ccc771574e8e4e17b7a35c19b352e0b7dc73
  Author: Shugo Maeda <shugo@ruby-lang.org>
  Date:   2019-04-22 17:15:49 +0900

    Clarify requirements of <=>

    A return value of <=> is automatically converted to -1, 0, or 1, so
    other values can be returned.  [Misc #15630]

commit 6013e41a7bb1d6909e0538ccb885b477bd080163
  Author: Kazuhiro NISHIYAMA <zn@mbf.nifty.com>
  Date:   2019-04-22 11:39:08 +0900

    Support of Ruby 2.3 has ended

    https://www.ruby-lang.org/en/news/2019/03/31/support-of-ruby-2-3-has-ended/

commit beaddd1d327a1c6fe16ab2c84191251280657e48
  Author: NAKAMURA Usaku <usa@ruby-lang.org>
  Date:   2019-04-22 11:33:56 +0900

    Now only supports Git repository

commit b26a7c8d86d8a750a0124340a6d6c1010b768ab2
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-22 10:06:50 +0900

    * remove trailing spaces.

commit e949c084b52de8c2a938e7a959dd61d6e9b78f2d
  Author: Takashi Kokubun <takashikkbn@gmail.com>
  Date:   2019-04-22 10:05:56 +0900

    README.ja.md: Update description about Git repository

    Backported 4c570abf77 to Japanese

commit 44a468ccdad87ac58e0bb1eccb8b67910bfc7b50
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-22 09:55:20 +0900

    * remove trailing spaces.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67701 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4c570abf773a0c627592ddef584f3375f791126c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-22 09:55:19 +0900

    README.md: Update description about Git repository

    We started to switch from SVN to Git. Because GitHub would be more
    reliable than our single-host cgit, I continued to list GitHub mirror
    repository in the first place.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67700 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 693c28d59f6c5eb9dc4fefba57c7967c0dd49b63
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-22 00:04:07 +0900

    * 2019-04-22

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67699 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fdd3091274867197b20bd2c9502fcc5cf3470130
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-22 00:04:06 +0900

    Fix a typo [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67698 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6fd7b1bb741edfe08b9f9da4652b5e1d5d3a57a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 23:24:38 +0900

    tool/redmine-backporter.rb: Git support in backport/rel

    close https://github.com/ruby/ruby/pull/2138

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67697 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c7db05d216cc4c72bed494d026898784ba6b3b5b
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 22:05:32 +0900

    tool/redmine-backporter.rb: Remove unused methods

    They seem to have never been used from the beginning (r45081).

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67696 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72be46f104446ed2dd0a6c2476045fa9f9051f6e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 21:26:06 +0900

    Drop tool/generate-backport-changelog.rb

    because we're not writing ChangeLog since ruby_2_4.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67695 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2c31e6dec4e0625c9a79f7d5df669d2ee5abb1de
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 21:03:39 +0900

    tool/merger.rb: Guard match failure properly

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67694 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit de5378233b2ff5434f024ac66285e699794a321d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 20:49:11 +0900

    tool/merger.rb: Support fetching patch from cgit

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67693 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 47676e969e9ecb204e704f0221816167afa79362
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 19:01:44 +0900

    tool/merger.rb: Drop ChangeLog handling

    We're not writing ChangeLog since ruby_2_4.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67692 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 51cec00953ff8d7baa483d3846aa1dbdb89101aa
  Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 18:13:49 +0900

    Revert "IRB is improved with Reline and RDoc"

    This reverts commit 7f273ac6d0f05208b5b228da95205e20c0e8286c.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67691 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 683834eb72cfa77f4eac1c705327b522302b1721
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 17:34:37 +0900

    Drop MJIT_FUNC_EXPORTED from rb_hash_bulk_insert

    it's official API after r67677

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67690 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit add82b7e7eebfb8ee311bd85cd2111874f3564f2
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 17:19:48 +0900

    Drop obsoleted feature from help

    I understand this is dropped in r67569

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67689 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9c51ef5bc44fc50e9e89a622cf566c6aae0449b4
  Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 16:37:34 +0900

    Merge upstream of Reline

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67688 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ea1835caf27e7a4ba31d2c87d05ac292d6d108cd
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 16:27:52 +0900

    Drop unnecessary newline in short line [ci skip]

    I'm committing safe things to test commit hooks on production...

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67687 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 60455b39bbc98a9faab4cf289feb7191cff8220d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 16:21:55 +0900

    Fold too-long line for readability [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67686 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0d23d02ac75cb4349d6dcc3b4ad2b3fba7573f58
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 16:17:35 +0900

    Use consistent comma in .ja [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67685 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c23b258d4dc3e1ee34ca6e3351952196bbbf7ab2
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 16:14:59 +0900

    Drop created at in .ja like en version [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67684 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 96147b3a12b24f69f2aaccc385d87cceaaec7f6a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 16:12:51 +0900

    Slightly modify ja sentence [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67683 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0d972252b0196d7ebb9994292c112a258e68886c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 16:08:32 +0900

    Backport README change to .ja.md [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67682 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 221e293733d89fd9b87d966b0891076162264535
  Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 16:08:26 +0900

    Add test/reline/ again, I'm back

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67681 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d9a01bc17a3b1097906c8751b621c9a212f29f42
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 15:08:00 +0900

    Remove unused variable and check if succeeded

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67680 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9a83922b666d4e26b84840757b16b0f9df6acef9
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 14:48:35 +0900

    suppress redefinition warnings

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67679 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7f09b5e9da8f83f84c5b6ae7a644a562811fec73
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 14:48:35 +0900

    suppress warning in test/irb

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos7/ruby-trunk/log/20190421T040003Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67678 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d3df725f9efeb0e6c121f9a1316abaa90956f1b8
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 14:37:11 +0900

    Make rb_hash_bulk_insert public

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67677 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d9c17c1a877349b193a0718d91bf9d5f05d3b853
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 13:54:04 +0900

    git.ruby-lang.org may be slow than github.com from oversea

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67676 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5906bcc95ab5973b46213e1ec08b71cd4f8f60bd
  Author: usa <usa@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 13:53:44 +0900

    Remove debug lines


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67675 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 66b6d76648c65bf1fa1f284ca691100a8a9f9882
  Author: usa <usa@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 13:52:38 +0900

    Show/unshow executing command as specified by `V`


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67674 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 03c6cb5e8f503dcf6bc80a70a48a9775bbd2a47e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 13:02:24 +0900

    Note about cgit url [ci skip]

    testing svn hook by this commit

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67673 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 710e763e72d925fc25cd5974158cc9e14016a81b
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:56:42 +0900

    test/ruby/test_pattern_matching.rb: add missing tests for NODE_DASGN, NODE_LASGN

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67672 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2dc51bf447dd837e9dc3189bbccaf23db0776816
  Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:51:26 +0900

    Remove test/reline temporary, I'll come back

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67671 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2a5ea43507564739be53af511c9b3a4891db9700
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:46:25 +0900

    add ensure to restore $stdout correctly.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67670 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d0e50b7d5ba6cd247110a0b867a2e1b5442d9978
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:38:53 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67669 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b02f368c82ffbc5318a11e3d700035062bd1d816
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:38:52 +0900

    Restore pwd

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67668 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72cbc3142dbabc54ff225950034335d4f5a4521f
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:35:07 +0900

    Revert "Try dropping const qualifier to suppress msiwn warning"

    This reverts commit b023c1cc07b2fd6e201bf3aeb4a1df9af3854888.

    in favor of r67666.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67667 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e6a7b8a4879dfa44fa1dcefb67f064322570c4c7
  Author: usa <usa@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:33:05 +0900

    Get rid of warnings of VC


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67666 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b023c1cc07b2fd6e201bf3aeb4a1df9af3854888
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:32:03 +0900

    Try dropping const qualifier to suppress msiwn warning

    https://ci.appveyor.com/project/ruby/ruby/builds/23995093/job/qo728n1uorepkx16

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67665 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4cb2dcdf02964650412c0e34ecbb3dcb744f2a2e
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:31:34 +0900

    ubygems.rb is already removed from ruby repository.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67664 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a3adb11fa60a184231cbd085c3171e675db4c8ce
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:30:48 +0900

    test/reline/helper.rb: define RELINE_TEST_ENCODING always

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67663 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0db89a38f22754eb09c69ae3e38533c91b5e3b17
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:30:38 +0900

    Show the latest commit hash after update

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67662 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2c6e241462e02003fc9c3103b8f6aed465b33927
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:12:05 +0900

    Remove obsoleted TODO comment [ci skip]

    looks like it's updated sufficiently

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67661 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 01efa5d912f47829eb7fbb472d899ed293105d25
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 12:11:38 +0900

    Add missing test for p_var_ref

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67660 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e7d76e3f5aa78f81e38de5e4ef16cffe7ad7a0d5
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 11:58:10 +0900

    tool/merger.rb: Drop some revision notations.
    Maintainer use merger mainly from redmine-backporter.rb.

    [Fix GH-2136]

    From: Chikanaga Tomoyuki <t-chikanaga@groovenauts.jp>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67659 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ffc93316c8035ade6bf035dd9348dfcc143e2d4b
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 11:58:10 +0900

    tool/merger.rb: Remove unused command line format.
    I believe no-one use this notation for years.

    [Fix GH-2136]

    From: Chikanaga Tomoyuki <t-chikanaga@groovenauts.jp>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67658 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dad3047659a503d7e6f4ded362f8d58ecca20b1f
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 11:51:03 +0900

    Remove redundant cast

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67657 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bb77cc183732cf68e224398c30d8e38d02cab14c
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 11:43:31 +0900

    Add missing tests for p_args

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67656 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1a0990cb143f8988603fe510b8ed840780a77d1f
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 11:33:15 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67655 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 65f1b8118357f48064626702b19561eeb5d9b9c7
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 11:33:14 +0900

    Fix test library name

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67654 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eeee4f404b9e2dd9cac84de2b30f7bf1ba608c53
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 11:18:28 +0900

    Remove unnecessary condition

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67653 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ecf4e8fbd7efe33e536bbef8d9e58b3c345dda48
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 10:39:09 +0900

    * 2019-04-21

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67652 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 985192f092aa36a88836a51012b7d572bccd5c0e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 10:06:25 +0900

    Make README.md similar to README.ja.md [ci skip]

    making safe commit to debug svn hook

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67651 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 838f1f61bfd31861a8ddc470e33cf21ee866ad7b
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-21 07:25:59 +0900

    skip test until we can guarantee movement of certain objects

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67650 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3863b7776f68821e5a873fd3a73886a2eb377845
  Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 18:32:44 +0900

    Remove IRB's old test files

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67649 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 66ae3bd5599186599af5041dced836087cdeb3bd
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 18:29:19 +0900

    skip test if mjit is enabled

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67648 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4a555d441895cc56243b1a411404e324fbcf89f
  Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 18:23:09 +0900

    Add "require 'stringio'"

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67647 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ffaee7b301abfd451c7c5028602a2184e6a9dd90
  Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 18:16:16 +0900

    Use require_relative for tests of Reline

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67646 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7f273ac6d0f05208b5b228da95205e20c0e8286c
  Author: aycabta <aycabta@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 17:51:20 +0900

    IRB is improved with Reline and RDoc

    Reline is a readline stdlib compatible library. It also supports
    multiline input. IRB is improved with Reline and supports multiline.
    Besides, supports showing documents when completed.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67645 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91faab7f1477c65f71aee8324cdeca7b6f19434a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 16:52:59 +0900

    Fix wrong critical section label

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67644 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ef73bee8113638199595611240d74d310f8a4f57
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 16:37:29 +0900

    Prefix rb_ to MJIT wait call since it's exported

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67643 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e4a0304aef5f2475b6111eca85daee032d88155c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 16:16:11 +0900

    Workaround Wercker check which is not working now

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67642 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9c587d22bd31f50a3a07f5024b7376302e902e09
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 15:54:41 +0900

    Skip test_find_collided_object on problematic CIs for now

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67641 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 78d3e4396d3c2ca53875fdbc9a24032d6eebf4f6
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 15:08:54 +0900

    Make sure the has_remembered_objects flag is correctly set

    Remembered objects can move between pages, so we need to make sure the
    flags on the page are set correctly.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67640 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c2b8cd425e80ea75c9f3efd8b5b63f1f235b6b54
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 14:50:19 +0900

    Revert "Revert "Skip ISeq reference for stale_units for debugging""

    This reverts commit b79899b56a9ebadf5c493c4df2419ebf63934381.

    I wanted to test r67638 first. Now let me try this as well.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67639 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b2ffafd2383fef50933a725797b1ea7ae4fbdaea
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 14:48:22 +0900

    Invalidate JIT-ed code if ISeq is moved by GC.compact

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67638 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b79899b56a9ebadf5c493c4df2419ebf63934381
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 14:45:56 +0900

    Revert "Skip ISeq reference for stale_units for debugging"

    This reverts commit 4bd4d4e4cfd164f767e88f844cf10b06faee14b9.

    Sorry, let me test another one first

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67637 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4bd4d4e4cfd164f767e88f844cf10b06faee14b9
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 14:44:47 +0900

    Skip ISeq reference for stale_units for debugging

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67636 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 109633b12730484ea23bac5203a8ed6d6d820477
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 14:11:37 +0900

    Always pin stack zombie and moved slots

    We should always pin stack zombies and moved

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67635 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b25bf66a8cd34e10f436535c8b9371bca8978a2c
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 14:00:45 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67634 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5d9acf07fb679aab643fd553af8b2469aa145158
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 14:00:45 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67633 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1686c0d470d56dcd7348351f0d1979d1ca1b4133
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 14:00:43 +0900

    Add `Time#floor`

    [Feature #15653]
    [Fix GH-2092]

    From: manga_osyo <manga.osyo@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67632 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b914bea88ea0371f0b37781a2d0db03759bd5a7e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 13:50:21 +0900

    Check ISeq references in stale_units too

    This is a possible bug from recent "JIT recompile" introduction.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67631 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c98d1f182d1b5870272e25b7e636b49849f2c71c
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 13:13:29 +0900

    add more assertions around moved object

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67630 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 243842f68a97a34a36a7e8c690efe7e18bf81e91
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 12:37:22 +0900

    Avoid usage of the dummy empty BEGIN node

    Use NODE_SPECIAL_NO_NAME_REST instead.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67629 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 27f75cf3dc74ad70d065a7d8a14dbaa0eeac1023
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 12:29:20 +0900

    Update ISeq references in stale_units as well

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67628 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8b503d657731fc0982c584f8b82f4976ea1283f
  Author: yui-knk <yui-knk@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 12:25:36 +0900

    Add symbol to the result of `RubyVM::AbstractSyntaxTree#children`.

    Add symbol to the result to make pattern match easily.

    For example:

    (1) NODE_MASGN * NODE_SPECIAL_NO_NAME_REST

    ```
    $ ./miniruby -e 'p RubyVM::AbstractSyntaxTree.parse("a, * = b").children[-1].children'
    [#<RubyVM::AbstractSyntaxTree::Node:VCALL@1:7-1:8>, #<RubyVM::AbstractSyntaxTree::Node:ARRAY@1:0-1:1>, :NODE_SPECIAL_NO_NAME_REST]
    ```

    (2) NODE_POSTARG * NODE_SPECIAL_NO_NAME_REST

    ```
    $ ./miniruby -e 'p RubyVM::AbstractSyntaxTree.parse("a, *, _ = b").children[-1].children[-1].children'
    [:NODE_SPECIAL_NO_NAME_REST, #<RubyVM::AbstractSyntaxTree::Node:ARRAY@1:6-1:7>]
    ```

    (3) NODE_LASGN * NODE_SPECIAL_REQUIRED_KEYWORD

    ```
    $ ./miniruby -e 'p RubyVM::AbstractSyntaxTree.parse("def a(k:) end").children[-1].children[-1].children[1].children[7].children[0].children'
    [:k, :NODE_SPECIAL_REQUIRED_KEYWORD]
    ```

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67627 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91557d0c52de3287a319e241215803989159adcc
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 12:00:49 +0900

    check the index rather than include

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67626 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79accaf8d4dda146004eaa9a3477b31448913537
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 12:00:08 +0900

    fix strict compile errors

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67625 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c784da17448c40e55cdd231724bfe4bf53da35a1
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 11:40:41 +0900

    Update MJIT references

    ISeq can move, so we need to tell MJIT where the new location is.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67624 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6c4fd432d0242647149906f7433a9f5025819d07
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 10:59:34 +0900

    Try harder to make objects move

    Sometimes the objects we allocated may not get compacted.  This change
    is to increase the likelihood that they will move

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67623 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit db14ceae4217a37d40fc676d893e44177bde35b6
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 10:20:09 +0900

    * 2019-04-20

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67622 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c74a44d64c20a7f234d0135b492a7d0f06207351
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 10:20:08 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67621 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91793b8967e0531bd1159a8ff0cc7e50739c7620
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-20 10:19:47 +0900

    Add `GC.compact` again.

    

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67620 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3d547f6df76a48834cfd9893baf4f51567b3afb
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 22:57:21 +0900

    Reflect README.md contents to README.ja.md [ci skip]

    I seem to have found the svn hook bug. Let me test that again.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67619 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5b3c099ad2aac985d054c1af9728bdb0eb9b0228
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 19:55:07 +0900

    Removed extra empty lines

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67618 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4cfc6cedc46c3bf95497290092a63028d6b4e3b2
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 19:45:16 +0900

    template/prelude.c.tmpl: allow UTF-8 characters

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67617 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f1a33775494f1b81d6f6722817f1c7e5db61a27c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 18:23:13 +0900

    Use similar line length in README [ci skip]

    still debugging svn hook...

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67616 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit af56793a8d7e120e33b9327a8d52c18a6a1c76d8
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 18:09:46 +0900

    README.md simplified [ci skip]

    - "do system management tasks" -> "manage the system"
    - "talk about" -> "discuss"
    - "The URL of the Ruby home page is:" and "This is what you need to do to compile and install Ruby:" are removed because of redundancy.
    - "Bugs reports should be filed" -> "Bugs should be reported"

    [Fix https://github.com/ruby/ruby/pull/2004]

    From: yzzhang-cs

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67615 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1845c9d9bae9bc0731bc5d58ecc0f5df4ea7c33d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 18:00:26 +0900

    Revert "README.md simplified [ci skip]"

    This reverts commit 41fabbcc0ef7f6e025c1af8bf0387ee9e38d655f.

    because I had a mistake in comment message.
    (to commit svn hook again)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67614 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4dd1cf3b27f5a92045176129ff2d4f5d8cea466a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 17:53:40 +0900

    time.c: added in: option to Time.now

    * time.c (time_s_now): added in: option to Time.now as well as
      Time.at.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67613 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb042e0f0c6c7380ca1c68b3a8cb4b523ce164eb
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 17:44:23 +0900

    * remove trailing spaces. [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67612 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 41fabbcc0ef7f6e025c1af8bf0387ee9e38d655f
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 17:44:22 +0900

    README.md simplified [ci skip]

    - "do system management tasks" -> "manage the system"
    - "talk about" -> "discuss"
    - "The URL of the Ruby home page is:" and "This is what you need to do to compile and install Ruby:" are removed because of redundancy.
    - "Bugs reports should be filed" -> "Bugs should be reported"

    [Fix GH-${pr_id}]

    From: yzzhang-cs

    (merging some safe PR to test svn hook)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67611 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 390ea5442089b8507a7d88c7d8756049bfcc0d4a
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 15:21:55 +0900

    Only mark the superclass if there is one

    Some classes don't have a superclass, so we should check to see if it's
    there before marking.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67610 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 14626ed20a6677ab767e764c9edff83f94872f1a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 07:30:01 +0900

    fake.rb.in: split by whitespaces not to be affected by -F option

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67609 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c3c4e411ebd94403055360506ccac248114eebba
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 07:24:03 +0900

    parse.y: suppress warning

    * parse.y (parser_append_options): explicitly pass $; when auto
      splitting, to suppress the warning for non-nil $;.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67608 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 396c1846fa8ba1f513cfe3c846e383e4b46d2e53
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 06:57:09 +0900

    * 2019-04-19

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67607 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3ee0648dc7a5465b2cbadd7246fc2edbd676d759
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-19 06:56:55 +0900

    io.c: warn non-nil $,

    * array.c (rb_ary_join_m): warn use of non-nil $,.

    * io.c (rb_output_fs_setter): warn when set to non-nil value.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67606 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4751caecc357c313c3c81c3d422a3cbc880c6ecc
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-18 21:56:47 +0900

    Removed deprecated executable from bundler upstream.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67605 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b86d87c81a6b2f2b494e1b23af22194c46864fb5
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-18 18:56:03 +0900

    Suppress warnings

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67604 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d1f86a1ffceb3323b4e2fac82dfc40c5a382e9e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-18 18:34:40 +0900

    string.c: warn non-nil $;

    * string.c (rb_str_split_m): warn use of non-nil $;.

    * string.c (rb_fs_setter): warn when set to non-nil value.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67603 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eb3d3dfcc1ad61cb3040acfdf41f71c228b892e4
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-18 13:55:52 +0900

    * 2019-04-18

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67602 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 80282c76a3f7caa22bc06e153a34ae69a35cc4ee
  Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-18 13:55:49 +0900

    Take over strscan maintenance


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67601 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 286f0b8ae3c30b5911199924a1779ca045afb079
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 22:20:02 +0900

    Added rubygems and bundler entries.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67600 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 828353334afb893456cffdb2daca991e985af8a9
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 18:41:55 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67599 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 744e5df7156c8bb3fea61bacb1bf27d3d8698548
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 18:41:41 +0900

    Reverting compaction for now

    For some reason symbols (or classes) are being overridden in trunk

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67598 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f399134e8ff61faa81d624e2dd2e05ed61d32af1
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 18:24:48 +0900

    NEWS: note about recent changes around JIT [ci skip]

    This diff is backported from the upcoming preview release note.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67597 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0f31971ad3e846cc8d9fa3258e8b9abfe85f0f1f
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 17:53:32 +0900

    Suppress warning in assertion too

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67596 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a2366a15bad75fb2ddec63d36aff4af4be14ff14
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 17:39:52 +0900

    Suppress warnings in `make test-all`

    suppress "warning: Pattern matching is experimental, and the behavior may change in future versions of Ruby!"

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67595 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ffbcf9f842d228e4a95b13f415dfc4e141e8f4f0
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 16:35:29 +0900

    downloader.rb: enable cache files

    * tool/downloader.rb (Downloader::Unicode.download): enable cache
      files when index.html has not been modified since the previous
      download, even if beta version.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67594 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c576f14039c920e40e6849657e6dd87772f6f7da
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 16:35:27 +0900

    common.mk: download data and property files together

    * common.mk (update-unicode-files): download data and property
      files together, not to download index html twice.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67593 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bd698312fa96a5a5232eb1f1943bf7eac997aa46
  Author: yui-knk <yui-knk@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 16:15:08 +0900

    Fix the format of NODE_IN node

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67592 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5141398ff060bdaa437418cc35adcbfe0f886cb0
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 16:09:28 +0900

    downloader.rb: use File.read instead of IO.read

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67591 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8e6c1a186c2c1ccfce2788ba307dae35e2dd03a8
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 16:09:24 +0900

    common.mk: update auxiliary and emoji files

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67590 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc9f19abe853bcef2b348e2d6d7c555b677ab28d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 15:48:26 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67589 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da8cd2dc30c26e9df47b743e7d1c16025e255628
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 15:48:07 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67588 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9c9db64d7e9058dc6fc7ead3791b259685798806
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 15:48:05 +0900

    Define Struct#deconstruct

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67587 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9738f96fcfe50b2a605e350bdd40bd7a85665f54
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 15:48:03 +0900

    Introduce pattern matching [EXPERIMENTAL]

    [ruby-core:87945] [Feature #14912]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67586 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b077654a2c89485c086e77c337d30a11ff3781c3
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 15:16:39 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67585 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 281a22a39864602938cd881265243a3bb60df792
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 15:16:35 +0900

    Super should be marked regardless of whether or not ext exists

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67584 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7bd58a4e6d214b78645f0a15dcc691d3faaa1acf
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 15:13:11 +0900

    update super even if there is no ext

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67583 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1eb54b99d592c460fea4b0f897f5e8e61c96c07
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 14:34:46 +0900

    string.c: improve splitting into chars

    * string.c (rb_str_split_m): improve splitting into chars by an
      empty string, without a regexp.

        Comparison:
                               to_chars-1
                  built-ruby:   1273527.6 i/s
                compare-ruby:    189423.3 i/s - 6.72x  slower

                              to_chars-10
                  built-ruby:    120993.5 i/s
                compare-ruby:     37075.8 i/s - 3.26x  slower

                             to_chars-100
                  built-ruby:     15646.4 i/s
                compare-ruby:      4012.1 i/s - 3.90x  slower

                            to_chars-1000
                  built-ruby:      1295.1 i/s
                compare-ruby:       408.5 i/s - 3.17x  slower

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67582 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 62c07674e06443075872bdc11662de6408bd00d2
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 14:19:05 +0900

    make verification more strict

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67581 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dbc9f43cb38acc037b152949a9f7b98362a6dcac
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 13:05:29 +0900

    call verification method in addition to compaction

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67579 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c54f9a5b101e709e98bc8306643feaddc8a3d934
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 12:17:42 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67578 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit aee9f24973271d8602cd6924266b1e6fffad3f8e
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 12:17:42 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67577 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3c55b643aec09bbe779dab25b2397947eded2b9b
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 12:17:25 +0900

    Adding `GC.compact` and compacting GC support.

    This commit adds the new method `GC.compact` and compacting GC support.
    Please see this issue for caveats:

      https://bugs.ruby-lang.org/issues/15626

    [Feature #15626]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67576 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fcd679ed11e3e801431f2f931dbe925edb8df0bf
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 02:02:35 +0900

    Recompile without method inlining

    if cancel happens in an inlined method.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67575 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d71b78575b08f55d35194b2c091719b2c4463ea3
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 02:02:16 +0900

    Introduce frame-omitted method inlining

    for ISeq including only leaf and no-handles_sp insns except leaf.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67574 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b914166fcdba3faf5d4cb5e3a18d49691546ce21
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 02:01:07 +0900

    * 2019-04-17

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67573 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b0614decfc2c756abd37347477f262bb09c27233
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-17 02:01:05 +0900

    Implement single-level basic method inlining in JIT

    "Basic" means it does not omit a call frame.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67572 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dcf5c19c9f89d732da70a1a16a2fe60cd1999bcc
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-16 08:58:09 +0900

    * 2019-04-16

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67569 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3f7c6aea3e7bd8cc8b70c2274659250f1b877de5
  Author: knu <knu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-16 08:58:06 +0900

    Mention SNI support in Net::IMAP

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67568 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e68495e5f4dfd466ad56f745502d1d78cdba07de
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-15 23:38:57 +0900

    Carve out mjit_compile_body

    This refactoring is needed for implementing inlining later.
    I've had this since long ago and it has conflicted sometimes. So let me
    just commit this now.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67566 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 246723a34ce5024e1d018cee4327dcce1bbd55c6
  Author: knu <knu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-15 19:52:34 +0900

    Support SNI (Reapplying r67488)

    This fixes connecting using TLS 1.3 to imap.gmail.com

    [Fix GH-2077] [Feature #15594]

    From: Marc-Antoine Perennou <Marc-Antoine@Perennou.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67563 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3791bdf08084b40f0e6f499a83715639c7d25b1e
  Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-15 11:05:03 +0900

    Import CSV 3.0.9

    This fixes test failures on Windows.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67561 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3b6c7c7ebca1b051dbaa6f33494e92f5638fcc9
  Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-15 06:01:51 +0900

    Import CSV 3.0.8

    This includes performance improvements and backward incompatibility
    fixes.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67560 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb96811d15f83c6b692e8e00d458eef32032af6a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-15 00:25:11 +0900

    Drop obsoleted debugging output [ci skip]

    I confirmed that it's working now in
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=396&view=logs&jobId=8c5967c9-8e3a-5773-c80c-34c55d5c3051

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67559 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad9c5c5db69a1e94a980a5b0d09bacca8b0c647e
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-15 00:13:50 +0900

    * 2019-04-15

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67558 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 17b606d8b356d732dbc0fb38c9ab05a5a28d3939
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-15 00:13:49 +0900

    Fix broken variable propagation on Azure

    It looks like the old definition was not working as intended...
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=394

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67557 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 816c5323fe82a7a4502f35ab8252ed56a6251688
  Author: marcandre <marcandre@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 22:47:24 +0900

    OpenStruct: improve error message when passing wrong number of arguments.

    Patch by Lisa Ugray (issue #15515)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67556 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1119bb4794b32fc0edfc95ba12f02bf151c170c5
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 22:42:13 +0900

    Debug bundled-gems allow_failures

    it seems not working in
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=392

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67555 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ead870d7c3b95bc51bd404541e087352ed7bf464
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 22:29:22 +0900

    Do not require Ruby 2.4 for baseruby

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67554 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b041cf55bbd39ca690843b455e76e914869b8753
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 22:10:14 +0900

    Fix missing debug counter name

    r67550 introduced the typo

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67553 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 009a0a3870656268d00e98a12311bfcc70f54a18
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 21:49:20 +0900

    Avoid crash on logging GC-ed ISeq

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67552 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e45c9a40a2ee2ca241565f5953af116cd2b5ab29
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 21:40:44 +0900

    Do not execute MJIT copy job when ISeq is GC-ed

    I assumed that ISeq is never GC-ed by `in_jit` + `mjit_mark` on copy job
    ISeq, but unfortunately I found SEGV on `mjit_copy_job_handler` in which
    iseq->body was somehow Qnil. And it seems to be fixed by disabling the
    job when `mjit_free_iseq` is called for the ISeq.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67551 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 12225347198344590af4a4a55ac1f90591a21dac
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 21:25:23 +0900

    Share optimization cancel handlers

    $ benchmark-driver benchmark.yml --rbenv='before --jit;after --jit' -v --output=all --repeat-count=12
    before --jit: ruby 2.7.0dev (2019-04-14 trunk 67549) +JIT [x86_64-linux]
    after --jit: ruby 2.7.0dev (2019-04-14 trunk 67549) +JIT [x86_64-linux]
    last_commit=Share optimization cancel handlers
    Calculating -------------------------------------
                                     before --jit           after --jit
    Optcarrot Lan_Master.nes    69.55360655447375     74.15329176797863 fps
                                73.74545038318978     79.60903046141544
                                75.85637357897092     82.00930075612054
                                77.10594124022951     82.56228187301674
                                78.67350527368366     83.37512204205953
                                79.97235230767613     83.41521927993719
                                81.03050342478066     84.20227901852776
                                81.61308297895094     84.73733526226468
                                82.06805141753206     85.27884867863791
                                82.46493179193394     85.36558922650367
                                83.85259832896313     85.39993587223481
                                84.02325292922997     85.63649355214602

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67550 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 04ac63fe57d3643dac0c0779d32f0b89ec9e2f15
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 18:31:24 +0900

    Prefer uintptr_t over ptrdiff_t for i686

    as debugged in PR

    [close https://github.com/ruby/ruby/pull/2130]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67549 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c5570cf9bde992f3d14a6382f1038fb422182f45
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 17:53:19 +0900

    Detect send-compatible opt insns automatically

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67548 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b75bb06e00ab4d8b77ebd9b476ecf945f8b7f72a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 17:33:43 +0900

    Allow falling back to non-inlined opt_send_without_block

    for opt_aref with inline cache to minimize the possibility of JIT cancel.

    Also opt_aset and opt_mod are added for the targets.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67547 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 18b5148215df99cebb0ba27f45f0dc7e0599737a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 16:12:44 +0900

    Add debug counter for MJIT stale_units

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67546 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f7035dd3ff665dce14657cf244c10c2d4b2b43c7
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 16:10:34 +0900

    Do not reset non-increment-only counters

    to prevernt underflow.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67545 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5ce28c0642591a950e5757150137253cb8d0b9a9
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 15:57:21 +0900

    Add RubyVM.reset_debug_counters when RB_DEBUG_COUNTER

    is defined. It's 0 by default and so it disappears on actual build.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67544 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 57f9a700d719c0ab0a9ade41ebecac022a2a06d4
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 15:52:37 +0900

    Add more debug print for random CI failure on osx Travis

    see r67347

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67543 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3ac518f9bdd413cf2217b101bd5c62deadfbee2a
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 15:05:27 +0900

    Enabled to some bundler examples again.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67542 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2e8b9aba9bef6c913e5b2de25b24026943438519
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 15:03:58 +0900

    Skip to failing examples on ruby core repository.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67541 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 59fa1232045b1a19c5beae8d8a3b51b66b1aeb2d
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 15:02:47 +0900

    Added rspec dependency for bundler examples.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67540 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 68ddd4d300e9a88737c4f37af74e1a0312949b2f
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 15:01:35 +0900

    Merge Bundler 2.1.0.pre.1 as developed version from upstream.

      https://github.com/bundler/bundler/commit/a53709556b95a914e874b22ed2116a46b0528852

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67539 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d636809c057432e8d42abe30c6c6785eb0721d77
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 14:52:14 +0900

    Revert "Try to set false explicitly"

    This reverts commit a1b5d20068a9b1859b383b249e510cd33d196e4a.

    Revert "Revert "Skip recompiling tests on i686 Linux""

    This reverts commit 7b88a9207b97b94bc3c3be35084c742296f4aff2.

    Revert "Simplify matrix for debugging"

    This reverts commit e85d6c5c5e62dde37c6f6ffdb7125b9008b9ebfa.

    Sorry, these 3 commits were under debugging in
    https://github.com/ruby/ruby/pull/2129 but accidentally merged by using
    `git svn dcommit` instead of `git push` to the topic branch :bow:

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67538 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a1b5d20068a9b1859b383b249e510cd33d196e4a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 14:48:40 +0900

    Try to set false explicitly

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67537 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7b88a9207b97b94bc3c3be35084c742296f4aff2
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 14:48:39 +0900

    Revert "Skip recompiling tests on i686 Linux"

    This reverts commit 19513c88d5f923abb7f226520192aef9f3fcc1c7.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67536 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e85d6c5c5e62dde37c6f6ffdb7125b9008b9ebfa
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 14:48:38 +0900

    Simplify matrix for debugging

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67535 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 661cefc5812b5f206b2af9640d7ad2e6efd0913e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 14:40:18 +0900

    Fix typo in platform matcher

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67534 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fa13bb1a6f0894d92b85337385058330eb071eea
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 14:26:46 +0900

    Unify comment styles across MJIT sources

    I'm writing `//` comments in newer MJIT code after C99 enablement
    (because I write 1-line comments more often than multi-line comments
     and `//` requires fewer chars on 1-line) and then they are mixed
    with `/* */` now.

    For consistency and to avoid the conversion in future changes, let me
    finish the rewrite in MJIT-related code.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67533 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19513c88d5f923abb7f226520192aef9f3fcc1c7
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 14:26:23 +0900

    Skip recompiling tests on i686 Linux

    somehow they are filing like
    https://travis-ci.org/ruby/ruby/jobs/519830085
    but they are not so fatal.

    Let me just skip them for now and fix tests afterwards.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67532 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d6d8fc2421c8171ef4f57d61c5b544e05ec5d468
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 13:52:04 +0900

    * 2019-04-14

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67531 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9b6b4674d77da2ef3f9f15095af9e39cc966b882
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-14 13:52:02 +0900

    Recompile JIT-ed code without optimization

    based on inline cache when JIT cancel happens by that.

    This feature was in the original MJIT implementation by Vladimir, but on
    merging MJIT to Ruby it was removed for simplification. This commit adds
    the functionality again for the following benchmark:

    https://github.com/benchmark-driver/misc/blob/52f05781f65467baf895bf6ba79d172c9b0826fd/concurrent-map/bench.rb
    (shown float is duration seconds. shorter is better)

    * Before
    ```
    $ INHERIT=0 ruby -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) [x86_64-linux]
    --
    1.6507579649914987

    $ INHERIT=0 ruby -v --jit bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) +JIT [x86_64-linux]
    --
    1.5091587850474752

    $ INHERIT=1 ruby -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) [x86_64-linux]
    --
    1.6124781150138006

    $ INHERIT=1 ruby --jit -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) +JIT [x86_64-linux]
    --
    1.7495657080435194 # <-- this
    ```

    * After
    ```
    $ INHERIT=0 ruby -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) [x86_64-linux]
    last_commit=Recompile JIT-ed code without optimization
    --
    1.653559010999743

    $ INHERIT=0 ruby --jit -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) +JIT [x86_64-linux]
    last_commit=Recompile JIT-ed code without optimization
    --
    1.4738391840364784

    $ INHERIT=1 ruby -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) [x86_64-linux]
    last_commit=Recompile JIT-ed code without optimization
    --
    1.645227018976584

    $ INHERIT=1 ruby --jit -v bench.rb
    ruby 2.7.0dev (2019-04-13 trunk 67523) +JIT [x86_64-linux]
    last_commit=Recompile JIT-ed code without optimization
    --
    1.523708809982054 # <-- this
    ```

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67530 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 088df9c8c26bcd7ad4de6637d9e734c26e7b72a0
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-13 15:55:35 +0900

    Revert "GET_CFP and ec->cfp are different"

    This reverts commit 30f71f4768e0babc60f5be6ca235d2c40268bc27.

    I've also overlooked we're doing RESTORE_REGS()...

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67523 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 30f71f4768e0babc60f5be6ca235d2c40268bc27
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-13 15:27:52 +0900

    GET_CFP and ec->cfp are different

    When reviewing r66565, I overlooked that `GET_ISEQ()` and `GET_EP()` are
    NOT `ec->cfp->iseq` and `ec->cfp->ep` but `reg_cfp->iseq` and
    `reg_cfp->ep`.

    `vm_push_frame` updates `ec->cfp` and in this case we want to check the
    callee's cfp and so `ec->cfp` should be checked instead.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67522 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e7f7aa87420d6542b8e4a347a037e4ce293fb845
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-13 09:56:14 +0900

    * 2019-04-13

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67521 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a73dae4c53f749223a744bdd5e2179b6b877d0e2
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-13 09:56:14 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67520 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d3da5fbd30e174c5737ec09c6896db7e81691714
  Author: marcandre <marcandre@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-13 09:56:12 +0900

    Proc.new: change deprecation warning for clarity (issue #15539)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67519 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 95a82766306641595179e23dbac3d6992b919460
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-12 23:32:35 +0900

    * 2019-04-12

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67518 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 39b04bc698c8ebebc00ca38ffda01473bfbdc43b
  Author: nagachika <nagachika@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-12 23:32:31 +0900

    [DOC] Add `ifnone` example to `find` documentation [ci skip]
    [Fix GH-2110]

    From: OKURA Masafumi <masafumi.o1988@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67517 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f866fd9eacd69520918b4e96617a2f43f4d44ec
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-11 19:36:38 +0900

    * 2019-04-11

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67513 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 025343654dca186444e1eafc3760ad895366c46d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-11 19:36:37 +0900

    Get rid of a magic number

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67512 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 47c82df27ff73c5181f7bd4505b4c98a96f15a0c
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-11 19:36:36 +0900

    Share the exception local ID table

    [Fix GH-2115]

    From: Lourens Naud <lourens@bearmetal.eu>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67511 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cf781b0871cb8d6b7135fa74d9549ca1cdb2a846
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 23:56:17 +0900

    Set a meaningful name to all Azure jobs

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67510 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 34af06037435cba85cafb0e8b24d37904ad7cced
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 23:47:18 +0900

    Try uncommenting deb-src

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67509 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 724bc97d4bca5ee12c84926faf4df49d134d7e42
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 23:42:18 +0900

    Debug latest sources.list on Azure

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67508 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1d955861ed892ead71e2e5542235d5d0f37b8276
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 23:34:53 +0900

    Try removing apt update

    trying to fix
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=363

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67507 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 82632d4c0c117a7728293ff955e3527487230bc1
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 21:57:39 +0900

    ext/openssl/ossl_bn.c (ossl_bn_initialize): get rid of SEGV

    OpenSSL::BN.new(nil, 2) dumped core.

    [ruby-core:92231] [Bug #15760]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67506 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 54b93ef1ac4c81730508740ae213f6f52b0bec94
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 21:43:34 +0900

    compile.c: name a hidden local variable as a predefined ID

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67505 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b9e52ef8b6a004082fa341ee9c6bbbd5168e7daf
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 21:43:33 +0900

    Adjusted styles

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67504 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d8442c43066fe2ff875c74af5c8eda35437adb1e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 21:43:32 +0900

    parse.y: fix fatal messages

    * parse.y (rb_parser_fatal): fix "parser" in the message which was
      replaced accidentally.  it is not the argument name.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67503 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c84bdda47a9710a1ba0db1c847db8e224d0eaaf9
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 21:43:31 +0900

    timev.h: dummy definition for TAGS

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67502 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 37994bc5322c02a21e8905d373bef802cac91f72
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 18:16:01 +0900

    * 2019-04-10

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67501 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 481481b81aaca7cc5de3982784f68981335005a7
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 18:16:00 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67500 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 25c1fd3b9037d9eb39596bb994eeabed812adada
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 18:15:21 +0900

    Reverting all commits from r67479 to r67496 because of CI failures

    Because hard to specify commits related to r67479 only.
    So please commit again.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67499 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0cc2ffbc1bf135a3b7a8656b9242e87b1ad96d6c
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 17:03:48 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67498 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 83fc324d1dfb2bec7d683509e25e3cc17dbecf18
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 17:03:47 +0900

    ext/openssl/ossl_bn.c (ossl_bn_initialize): get rid of SEGV

    OpenSSL::BN.new(nil, 2) dumped core.

    [ruby-core:92231] [Bug #15760]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67497 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91db3b6c6b0daff732c0bacfcc4db397f1df4a42
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 16:18:25 +0900

    compile.c: name a hidden local variable as a predefined ID

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67496 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8e3a4bd2c3e5c508e6bd48f6686969c085042ce
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 15:44:43 +0900

    id_table.c: use NULL as ID* instead of Qundef

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67495 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 33721b4d3306b68188ea253eb0cd717dfa71f917
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 15:44:42 +0900

    vm_method.c: fix a warning

    * vm_method.c (rb_add_method_iseq): use rb_method_iseq_t, as
      rb_method_definition_set refers, with a cast to suppress a
      warning.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67494 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5ae753dfa3632a8bc4a4141ff67e8fc9554ca7a0
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 15:44:41 +0900

    Adjusted styles

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67493 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cc02df324f74fc84b9eae1e66bdf38f4422c249b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 14:12:33 +0900

    parse.y: fix fatal messages

    * parse.y (rb_parser_fatal): fix "parser" in the message which was
      replaced accidentally.  it is not the argument name.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67492 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e86bf9a4d768df94c084c3cc8c0786bacad0f31a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 10:34:44 +0900

    timev.h: dummy definition for TAGS

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67491 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9e448d2fd7490636a9c3553f44d7db5334b04f39
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 10:18:01 +0900

    compile.c: cast iseqs to suppress warnings

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67490 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d099eabbb7c0d493dbf6c665aceaf4738fc68d0e
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 08:48:17 +0900

    Set a write barrier between iseq and mark objects

    ISeq pins references in the mark array during compile, so it manually
    marks references in the mark_ary.  This was causing write barrier
    misses, so we need to add a write barrier when pushing on the mark
    array.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67489 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e553d94f01ab5c101c26627132ed12e30a00e8f7
  Author: shugo <shugo@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 08:35:02 +0900

    Support SNI

    This fixes connecting using TLS 1.3 to imap.gmail.com

    [Fix GH-2077] [Feature #15594]

    From: Marc-Antoine Perennou <Marc-Antoine@Perennou.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67488 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 73f891f1a5dafb1709b333d953ad8b50af7ee1f9
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 08:23:39 +0900

    fix RMoved definition location

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67487 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 70cd493b050f6328f2dbe43dad6741d9f0a96d92
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 08:23:33 +0900

    Don't fail the build if we can't get objects to move

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67486 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e900bba9454f8d1a75ac5aa68a15ac21e04c5340
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 08:03:40 +0900

    Pin weakmap references

    Weak map references can't move because the st_table needs their address
    as a key.  But, we also need to remove T_NONE from the map so they
    aren't reused.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67485 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b84b8adc8910a877bf9217f95b5bfb0eea268e5a
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 06:40:07 +0900

    Just a check to see what is breaking in CI

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67484 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e385c159da9338b14ab7fb67ce8d8398ab069d5a
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 06:13:32 +0900

    Add error globals to mark list so they don't move

    JSON gem is referencing constants defined in Ruby then keeping a
    reference as a global.  We need to register these globals so they stay
    pinned.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67483 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 41f5237ed19d5e8d471d441e2cbfc3063f58b110
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 05:47:36 +0900

    Try to make compaction more likely

    This commit tries to make compaction more likely by allocating some
    objects and then throwing them away

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67482 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ca9733dc02213211a4e6fd767195cd7de36762c0
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 05:32:22 +0900

    * 2019-04-10

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67481 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2d912017d7617ba9d9aff9b6ef52591e4b028e6b
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 05:32:22 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67480 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3ef4db15e95740839a0ed6d0224b2c9562bb2544
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-10 05:32:04 +0900

    Adding `GC.compact` and compacting GC support.

    This commit adds the new method `GC.compact` and compacting GC support.
    Please see this issue for caveats:

      https://bugs.ruby-lang.org/issues/15626

    [Feature #15626]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67479 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c09e35d7bbb5c18124d7ab54740bef966e145529
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-09 22:08:30 +0900

    NEWS: [DOC] markup hyphens [ci skip]

    * NEWS: [DOC] markup command line options, not to convert
      successive hyphens to an en-dash unintentionally.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67478 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ed958ef37ef85f7e2dcaf444ccb156f4bf611bce
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-09 22:08:29 +0900

    NEWS: [DOC] fold lines [ci skip]

    * NEWS: [DOC] fold lines not to make the BTS references wrong
      links, without a backslash.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67477 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a2429de63ce82c48a2c08ec4b0f9e89f700345cf
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-09 18:41:00 +0900

    mention support for Unicode Version 12.1.0 (issue #15195) in NEWS

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67476 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 49255fd703a20f7a02eb3ba23ed63350a403072b
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-09 10:27:37 +0900

    * 2019-04-09

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67475 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 320c98b436b5277678907b9ba32e4c6cdd3678a0
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-09 10:27:36 +0900

    date: support for Reiwa, new Japanese era

    [Feature #15742]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67474 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 63e66f08b6b524aff2bce99e30ef4fb343b2fe30
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-09 10:27:35 +0900

    date_core.c: [DOC] Heisei will be assumed if no-era [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67473 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d10451f3fd51f577e704db770de48d05044eb45c
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-08 22:47:37 +0900

    object.c: fix searching nested const paths

    * object.c (rb_mod_const_get, rb_mod_const_defined): nested const
      paths should not search from toplevel constants.
      [ruby-core:92202] [Bug #15758]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67472 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1b592b508c72a56ae012869d97fe1580ff87246
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-08 22:47:36 +0900

    test_module.rb: fix a typo

    * test/ruby/test_module.rb (TestModule#test_nested_get): fix a
      typo.  nested module's name is a qualified path.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67471 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7a4c39c5f25c7bed475f65e45c76a646ad993d8b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-08 14:06:43 +0900

    struct.c: force hash values fixable

    * struct.c (rb_struct_hash): force hash values fixable on LLP64
      environment.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67470 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b29f55c5acc4addabc7ffa94e022e40b36255abb
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-08 12:26:29 +0900

    * 2019-04-08

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67469 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ae6c195f30f76b1dc4a32a0a91d35fe80f6f85d3
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-08 12:26:29 +0900

    range.c: force hash values fixable

    * range.c (range_hash): force hash values fixable on LLP64
      environment.  [ruby-core:92194] [Bug #15757]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67468 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b5baceda18fd6e93f8db29f79055a004f6419e1d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-08 12:26:28 +0900

    range.c: force hash values fixable

    * range.c (method_hash): force hash values fixable on LLP64
      environment.  [ruby-core:92191] [Bug #15756]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67467 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 06eece87c6e8b969a73aa80ac659f09eb9dcbbcb
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-08 12:26:27 +0900

    enumerator.c: force hash values fixable

    * enumerator.c (arith_seq_hash): force hash values fixable on
      LLP64 environment.  [ruby-core:92190] [Bug #15755]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67466 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 012faccf040344360801b0fa77e85f9c8a3a4b2c
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-07 20:26:27 +0900

    doc/signals.rdoc: Clarify a bit where Signal.trap handlers are executed

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67465 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b7c4e6d11c9d29ed4b5efa7606dc400216827bc4
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-07 20:14:06 +0900

    gc.c: missing break

    * gc.c (obj_memsize_of): T_RATIONAL and T_COMPLEX cannot be an
      imemo.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67464 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 575735664b1b77924ffdc9faf87c44c67d9be363
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-07 17:18:09 +0900

    Add debug message for test_rinda crash

    We often see test-all worker crash on test_rinda, but for now we even
    can't know which test is unstable from this output:
    http://ci.rvm.jp/results/trunk_gcc5@silicon-docker/1926481

    Let me print `caller` on the timeout failure.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67463 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 93ecb9a1de00db26f1581392ae519a6a9faeab0d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-07 01:03:14 +0900

    * 2019-04-07

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67462 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bbb0db6f1c6650481ae2cd1cb771f896459c0c6b
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-07 01:03:11 +0900

    Fix typo in a comment [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67461 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5a6b0e39a1913235d960fafb37b23a29317ccd11
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 23:42:02 +0900

    Add debug counter for VM <-> MJIT calls

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67460 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe979e5bce4d5606d491ed25e603f5504a20c500
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 22:21:18 +0900

    internal.h: fix potential memory leak

    * internal.h (rb_imemo_tmpbuf_auto_free_pointer_new_from_an_RString):
      create tmpbuf to keep the pointer before xmalloc which can raise
      a NoMemoryError exception.  extracted from
      https://github.com/bear-metal/ruby/tree/transient-imemo-tmpbuf

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67459 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f15d04358827d60a708f296973c420b2c031ac5e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 11:53:32 +0900

    Cover all insns in test_jit again

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67458 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit feecc10bfcf6fb95f60f62dbfcc9b23fc15813f2
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 11:42:30 +0900

    Suppress unnecessary warnings in test_jit

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67457 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d1163b182bdd572edaa44ff000240d49acc09d6
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 11:35:37 +0900

    Resurrect a test dropped in r67442

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67456 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a26d525ae453fc59a8591d544cdba80f5e31900d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 10:25:15 +0900

    appveyor.yml: try porting r67454 to msys2

    Trying to fix
    https://ci.appveyor.com/project/ruby/ruby/builds/23639998/job/0hm9v79xlryod1ff

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67455 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b5df5296a4741839b6430c9f07cd25edbb7fb8c5
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 09:08:04 +0900

    appveyor.yml: Use pre-generated headers and tables

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67454 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 50eea44a27cc0b9b2c5c24b725a1119ec0c00e5c
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 08:52:15 +0900

    remove Unicode 12.0.0 related directory and generated files

    This completes issue #15195.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67453 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e78854080db3d18124ff9cfec9a257073e29150
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 08:16:03 +0900

    * 2019-04-06

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67452 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cab005db92da4c867a464d2faf27ece30f61b26b
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-06 08:16:00 +0900

    revert r67445, (r67446,) r67447

    Debugging output is no longer needed because the problem has been fixed with r67449.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67451 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6e0e93e60ec55ab4a28d29d4ad70a3ad7e65c73e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 23:44:15 +0900

    downloader.rb: fix typo, extra %

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67450 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9dcc6f081000d9c0f11a97051654ee2091f632e0
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 23:44:13 +0900

    appveyor.yml: download beta version for test

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67449 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit aebc11dfe60bb9548843c22d7deb65c67d7a2915
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 21:44:04 +0900

    downloader.rb: quote base name

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67448 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8f734dc7b543e7662b66cffd5d698d372d9a0b7a
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 21:36:29 +0900

    output more debug information in downloader.rb (temporary)

    Unicode file download doesn't work with Visual Studio, we need more debug output.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67447 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f6338966f15c0f77b3508ff0ceef8ea9553c5063
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 19:39:02 +0900

    * remove trailing spaces.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67446 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fd8cdf398456b2da0f6fe541b77826051e60624
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 19:39:01 +0900

    add puts statements to debug Unicode file download (temporary)

    Unicode file download doesn't work with Visual Studio, see e.g.
    https://ci.appveyor.com/project/ruby/ruby/builds/23614399/job/f8vya2l7fjdfcye4
    We temporarily produce more output for debugging.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67445 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b2311c67671c69df8c390f22b3cb961f7be39a75
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 17:41:04 +0900

    `rb_add_method` is void function.

    * method.h (rb_add_method): make it void function because
      nobody use a return value.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67444 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4b53f843264df5694f6693a9a3461af055573fe0
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 17:15:21 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67443 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2b5bb8a0875b75f18e628c8b2df22760536bdad9
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 17:15:11 +0900

    add definemethod/definesmethod insn.

    * insns.def: add definemethod and definesmethod (singleton method)
      instructions. Old YARV contains these instructions, but it is moved
      to methods of FrozenCore class because remove number of instructions
      can improve performance for some techniques (static stack caching
      and so on). However, we don't employ these technique and it is hard
      to optimize/analysis definition sequence. So I decide to introduce
      them (and remove definition methods). `putiseq` insn is also removed.

    * vm_method.c (rb_scope_visibility_get): renamed to
      `vm_scope_visibility_get()` and make it accept `ec`.
      Same for `vm_scope_module_func_check()`.
      These fixes are result of refactoring `vm_define_method`.

    * vm_insnhelper.c (rb_vm_get_cref): renamed to `vm_get_cref`
      because of consistency with other functions.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67442 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fe64d17d3cd455a3f014d6f756cb201320f7f9a
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 09:58:51 +0900

    update to Unicode Version 12.1.0 (beta)

    Unicode Version 12.1.0 adds one single character, U+32FF SQUARE ERA NAME REIWA,
    for the new Japanese era starting on May 1st. 12.1.0 will be finalized only on
    May 7th, so we go with the beta version because further changes in the data we
    need are highly unlikely, and we want to make sure Ruby is ready for the new era.

    * common.mk: change UNICODE_VERSION to 12.1.0, UNICODE_BETA to YES

    * enc/unicode/12.1.0, enc/unicode/12.1.0/casefold.h, enc/unicode/12.1.0/name2ctype.h:
      add directory and generated data files for new version

    * lib/unicode_normalize/tables.rb: update for new character

    * test/ruby/test_regexp.rb: add test for character property age=12.1

    * test/test_unicode_normalize.rb: add test for NFKC decomposition of new character

    This (mostly) completes issue #15195.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67441 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c8d60fddc0f868a2bb8cee0a75859513afe41c0e
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 08:40:51 +0900

    * 2019-04-05

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67440 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c604219e8d79f4a224e446a4aa19711155070ef8
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-05 08:40:48 +0900

    change lib/unicode_normalize/tables.rb to single item per line to make diffs shorter

    * template/unicode_norm_gen.tmpl: Change formatting of output to produce only a
      single item (or range) for each line to make future diffs shorter and easier
      to understand and check.

    * lib/unicode_normalize/tables.rb: output of the above

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67439 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 59a37c028317441b4a1e6d9a1e9c69570b347ee9
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 21:11:53 +0900

    gmake.mk: get rid of unicode normalization table timestamp

    * common.mk, defs/gmake.mk: rid of unicode normalization tables
      timestamp.  update the target tables file only when only it
      exists.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67438 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f015efc64aece0d25cc25686ea63dc8ffd7a340
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 14:26:11 +0900

    iseq.h: Remove dead members

    * iseq.h (struct iseq_compile_data): Remove the dead ensure_node
      and for_iseq members.

    [Fix GH-2108]

    From: Lourens Naud <lourens@bearmetal.eu>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67437 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6faf26689382c35d2fb8df90b096ea34c87b3ed5
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 14:10:26 +0900

    gmake.mk: update normalization table

    * defs/gmake.mk: try to update Unicode normalization tables file
      if Unicode data files exist.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67436 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f1fb989f1a17c63af1062ea402ed50f0d6cb4efa
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 12:34:55 +0900

    enumerator.c: make arith_seq_first support nil begin

    * enumerator.c: (arith_seq_first): support nil begin.

    * test/ruby/test_arithmetic_sequence.rb (test_first): add assertions for
      beginless and endless arithmetic sequences.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67435 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 53d3fe0643c591a9083e22ccea62e49f451fd450
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 12:34:53 +0900

    ruby/test_arithmetic_sequence.rb: add assertions for beginless and endless ranges

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67434 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dcb37d06395d996b046b755d2219c4accaac0b5f
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 12:34:52 +0900

    range.c: support to make beginless arithmetic sequences

    * range.c (range_step): fix the guard condition so that a beginless
      range can be turned into a beginless arithmetic sequence.

    * test/ruby/test_range.rb (test_step): add assertions for the above
      change.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67433 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e59017354782c7cf599af39c6725486cca03297d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 10:34:56 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67432 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 22fd30e605bd9f13fa1db54316acc925721fea16
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 10:34:53 +0900

    Revert "Introduce inline cache for invokesuper"

    This reverts commit d147ad6231aebb1d478162fb8e109e0c6a696169.

    because failing on CI:
    http://ci.rvm.jp/results/trunk-mjit@silicon-docker/1916925

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67431 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e896292d64d86be9b82b29938b9f2dbadbafa0f4
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 01:06:06 +0900

    * 2019-04-04

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67430 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d147ad6231aebb1d478162fb8e109e0c6a696169
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-04 01:06:03 +0900

    Introduce inline cache for invokesuper

    Looks good in micro benchmark:
    ```
    $ benchmark-driver benchmark/vm2_super.yml -v --rbenv 'before;after'
    before: ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    after: ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    last_commit=Introduce inline cache for invokesuper
    Calculating -------------------------------------
                             before       after
               vm2_super    19.265M     31.280M i/s -      6.000M times in 0.311447s 0.191813s

    Comparison:
                            vm2_super
                   after:  31280464.2 i/s
                  before:  19264906.2 i/s - 1.62x  slower
    ```

    No significant impact to Optcarrot:
    ```
    $ benchmark-driver benchmark.yml --rbenv='before;after' -v --output=all --repeat-count=12
    before: ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    after: ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    last_commit=Introduce inline cache for invokesuper
    Calculating -------------------------------------
                                           before                 after
    Optcarrot Lan_Master.nes    48.41126024010233     47.28027196127746 fps
                                49.49212664510990     48.75072555488074
                                49.51485564376117     49.20650895701073
                                49.58351773328487     49.24563592659139
                                49.64022392458479     49.26292753046641
                                49.92566235019630     49.44496216868009
                                50.18022198879376     49.45467429762771
                                50.33038373991723     49.52003367348857
                                50.43202877523305     49.69190055704068
                                50.61368587766504     49.79856204866324
                                50.77975014460643     50.27764769510704
                                50.89807360753746     50.35785776505005
    ```

    A little improvement to k0kubun/railsbench?:
    ```
    $ rbenv shell before; RUBYOPT="-v" WARMUP=1 BENCHMARK=30000 bin/bench
    ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    Warmup: 1 requests
    Benchmark: 30000 requests

    Request per second: 897.1 [#/s] (mean)

    Percentage of the requests served within a certain time (ms)
      50%    1.01
      66%    1.02
      75%    1.03
      80%    1.04
      90%    1.08
      95%    1.23
      98%    2.10
      99%    5.52
     100%   13.26

    $ rbenv shell after; RUBYOPT="-v" WARMUP=1 BENCHMARK=30000 bin/bench
    ruby 2.7.0dev (2019-04-03 trunk 67428) [x86_64-linux]
    last_commit=Introduce inline cache for invokesuper
    Warmup: 1 requests
    Benchmark: 30000 requests

    Request per second: 913.0 [#/s] (mean)

    Percentage of the requests served within a certain time (ms)
      50%    0.99
      66%    1.00
      75%    1.01
      80%    1.02
      90%    1.06
      95%    1.20
      98%    2.12
      99%    5.57
     100%   12.39
    ```

    No significant impact to discourse:
    ```
    * before
    categories_admin:
      50: 54
      75: 60
      90: 70
      99: 86
    home_admin:
      50: 56
      75: 65
      90: 71
      99: 122
    topic_admin:
      50: 64
      75: 73
      90: 79
      99: 117
    categories:
      50: 32
      75: 33
      90: 46
      99: 61
    home:
      50: 34
      75: 36
      90: 48
      99: 56
    topic:
      50: 40
      75: 42
      90: 55
      99: 83

    * after
    categories_admin:
      50: 59
      75: 66
      90: 80
      99: 149
    home_admin:
      50: 54
      75: 58
      90: 70
      99: 96
    topic_admin:
      50: 63
      75: 66
      90: 79
      99: 115
    categories:
      50: 31
      75: 32
      90: 45
      99: 65
    home:
      50: 34
      75: 35
      90: 49
      99: 58
    topic:
      50: 40
      75: 42
      90: 55
      99: 78
    ```

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67429 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2482d1f9e6b770bc5f65ffde97df36066095ff2e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 21:48:02 +0900

    Partially allow failures in test-bundled-gems

    Tests of minitest randomly fails with strange errors:
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=303
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=314

    Instead of marking `continueOnError` for all, let me select
    failure-allowed gems individually.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67428 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f4a1235abe83f8b52ac3048719fac6426469cb42
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 20:16:47 +0900

    vs2019 build is not functional now

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67427 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a6146af5bd2855f08e520fad67c39164adc507e9
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 19:56:37 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67426 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1329c7cdca5cca07e8680a28724b3f192144f04e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 19:56:36 +0900

    date: make zone a substring to copy encoding and taintedness

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67425 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f0204a254789608edc46515f181b1f52ec106442
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 18:35:26 +0900

    Revive accidentally removed assertion

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67424 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4319541e870b3ec37ddb73d399dafcb39db35e7
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 17:35:57 +0900

    range.c (r_cover_range_p): support beginless range

    `(..2).cover?(..1)` should return true.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67423 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 95f7992b89efd35de6b28ac095c4d3477019c583
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 17:11:41 +0900

    Introduce beginless range [Feature#14799]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67422 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dd2479bcea6cfbfb7656ef691ad5f9ff6ae543cd
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 06:59:04 +0900

    Fix more ASAN errors

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67421 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit be0f09a998c08eaa8bd4a5300e10b405cc9ae972
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 06:58:59 +0900

    Extract type to sym as a new function

    I will use this from another function in compaction

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67420 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad67845ba82023474ed2c914e7b38859a9cd488d
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 06:13:22 +0900

    Fix typo in lldb script

    Also fix tests

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67419 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 714c2b0a93a3ad2206dc93535f42987083b16ca9
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 04:13:13 +0900

    * 2019-04-03

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67418 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e377eb0e75d6307ac379f575bf3caf0b8b08fab4
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 04:13:12 +0900

    Fix ASAN error

    This code was trying to access memory before unpoisoning it.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67417 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4283fb42bc7a4f7e6de1263756b32fdd2356bf3a
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-03 04:13:07 +0900

    Poison / verify the freelist

    This commit just adds poisoning around the freelist to help debugging.
    Also verify that the freelist only contains T_NONE objects when checking
    the heap integrity

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67416 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f28be7e02d113bd26c33cb94e65004055576c065
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 20:48:18 +0900

    Merge rubygems/rubygems from upstream.

      The current master branch is
      https://github.com/rubygems/rubygems/commit/97b264f0fa248c864b6ee9a23d3ff1cdd217dddb

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67415 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 537024433720d7c54cba9bab4596638f59fbadc9
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 19:51:35 +0900

    Azure Pipeline tests on Linux are not reliable

    test-bundler started to fail with r67383
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=278
    which is very unlikely to be Ruby implementation's fault.

    test-bundled_gems also started to fail with r67413
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=303
    I'm not sure the commit is related to the failure.

    Overall, they are not useful as testing environment of Ruby itself for
    now since nobody seems to take care of these CI statuses. Let's stop
    reporting the status to GitHub until it becomes reliable.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67414 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79de8e9f6ba093da4d792294f1675083634c9e3b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 17:08:29 +0900

    downloader.rb: keep linked file newer than cached file

    * tool/downloader.rb (Downloader.save_cache): keep linked file
      newer than cached file, so that GNU make triggers when the
      content is updated.  it uses the timestamp of symlink itself
      instead of the target.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67413 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7cd6706b9ab901b0b710a087b5aeb5654f219b09
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 13:36:34 +0900

    date_parse.c: name JISX0301_DEFAULT_ERA

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67412 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da0fceae3b3641c60823954e8198bf10a1b99c10
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 13:36:33 +0900

    date_parse.c: renamed JAPANESE prefix as JISX0301

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67411 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f3e5e6fc5f545b5e6b496334578a16a2acf01c8
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 12:49:00 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67410 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e8f8cf111fc1cd6ee7a00b692ba208bd1c7ce539
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 12:48:58 +0900

    date: use del_hash to extract an element destructively

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67409 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1ad6dde9da48149f1998eb5b85916165867c2368
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 08:55:02 +0900

    Fix ASAN errors when walking the heap

    verify_internal_consistency_i and gc_verify_heap_page would walk the
    heap, reading data from each slot, but would not unpoison the object
    before reading.  This commit unpoisons the slot before reading so that
    we won't get ASAN errors

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67408 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f0f6615a25eb87e5e9954b7fec85c71f05100b7d
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 07:53:34 +0900

    add regex support to lldb debug output

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67407 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f4bff3a7f944edee72118de5b762a46b1b98d463
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 07:52:39 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67406 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1286674bb9855d69f3448fb76c2721c5ac38b84c
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 07:52:35 +0900

    unpoison / poison objects while walking the heap

    This fixes some ASAN errors

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67405 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 990df873029a632c06dee9de9768bda8400fe922
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 05:46:10 +0900

    Make spec for the jit feature more general and not MRI-specific

    * Other implementations should not define RubyVM.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67404 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 960d059ef71901980c95cd28013b7a93bc3f83d5
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 05:45:55 +0900

    Simplify spec as there is no easy way to tell if MJIT support is available

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67403 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d48783bb0236db505fe1205d1d9822309de53a36
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 05:35:13 +0900

    * 2019-04-02

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67402 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c71c59feeb8edd975cc49c718dec8319e22ee2a4
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-02 05:35:10 +0900

    Fix Float#to_s specs to not depend on the platform representation of doubles

    * AIX, Solaris, etc have a different binary representation.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67401 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 321d72bdd6f26b26bc4b9989076f2d3a2fbdc9b3
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-01 14:58:31 +0900

    Added tests for end of Heisei

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67400 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 285817c6d8ed6117fc4931a32ae16aaf3c5b4c99
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-01 14:28:25 +0900

    date_parse.c: removed 'r' which is not in JIS X 0301 yet

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67399 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e836cd0b9f213084bf4a2b4c642e27c9d550a706
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-01 14:21:39 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67398 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 744c3140595c34171553515e127d080634704db3
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-01 14:21:36 +0900

    date_parse.c: extract Japanese era initials

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67397 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 367362b9d56bc8d9e5cafaec5abe7c987c4a831c
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-01 00:37:47 +0900

    * 2019-04-01

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67396 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e86970840145c4f1349dd5729e64960e5b04583
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-04-01 00:37:45 +0900

    exp is String, so it's always truthy

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67395 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e0420f57749f85bebeabd509f9da73f7ae8c966
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-31 23:46:31 +0900

    * 2019-03-31

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67390 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ddc5839005b91ec7a87f374d3b2606b158400817
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-31 23:46:25 +0900

    Fix a typo [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67389 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b84eed5dd8e2cb981a80091a58775a7d21946e5b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-30 23:31:35 +0900

    ruby.c: respect features by command line

    * ruby.c (process_options): feature options in command line
      arguments take precedence over options in RUBYOPT environment
      variable.  [ruby-core:92052] [Bug #15738]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67388 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19e672cce9590c09b6beb3ada4ccf0e62bf6610c
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-30 21:39:35 +0900

    rdoc: Colorize background of code/pre [ci skip]

    Borrowed the style of code/pre from bugs.ruby-lang.org.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67387 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 721be154946f0a13f739363c4968c548aba5fee3
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-30 21:37:23 +0900

    process.c: [DOC] remove extra quotes [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67386 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 413b12737697564a4de6bb88b2830169dc42909e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-30 21:35:13 +0900

    Fix a typo in an assertion message

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67385 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 031e2f1285e3ea37eca9a4c24d6ae25ef1c459d3
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-30 08:26:33 +0900

    * 2019-03-30

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67384 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9249346c0bed3fa154a49b2ca924c205e66018ef
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-30 08:26:31 +0900

    mjit_worker.c: explicitly ignore the unused result of RB_DEBUG_COUNTER_INC_IF

    By adding `(void)`.  This makes Coverity Scan happy.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67383 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9d047fd3e51945c8fcc3a8a97c41dc2baf016974
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 23:44:09 +0900

    Add mjit_compile_failures debug counter

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67382 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e465d6c5df2c3b6f97348b2d21037be3f55c7d38
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 23:27:00 +0900

    ruby tool/update-deps --fix

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67381 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5ee256da687f080f8ec0b12c10fc2592020e4872
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 23:08:51 +0900

    Prevent mjit length counters from being 0

    It seems that `debug_counter_show_results_at_exit` could be called
    earlier than `mjit_finish` sometimes.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67380 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b03c11a337c53c219a840eed4569e411289f0ddd
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 22:54:29 +0900

    Add debug counters for MJIT cancel

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67379 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 017cb09eb6d40b3d7f7ca08db4aa16cfb91012f2
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 22:24:56 +0900

    Add debug counter for rb_mjit_unit_list

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67378 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 26d56f7b6f68058ca2321d797f86d1edd510644b
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 22:06:48 +0900

    Fix a typo [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67377 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9254e1c740fd0829ad425670c770f782d20a0d82
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 21:55:07 +0900

    Debug make install instead of make

    Actually what has randomly failed was `make install`:
    https://travis-ci.org/ruby/ruby/jobs/512988177

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67376 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bb5ab13bf58e0ccfe5b4c08fec8a0e70612d598c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 21:52:59 +0900

    Add debug counters for MJIT

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67375 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe904f1eec1fe96cf148407c3c4c010de7dd8b73
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 21:31:08 +0900

    Elaborate more on some debug counters [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67374 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 49f1b71144e9e8352688caf7cb23b09b62873464
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 21:00:44 +0900

    Add some more buffer for timeout check

    This spec is unstable on our CI environment:
    https://gist.github.com/ko1/efa58acf4cd1d7b5bf1f63881537afe8

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67373 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ce9e0ffd710db27f928ffa013d5d7047acb04511
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 15:36:48 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67372 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 35e677dd0ab6b042cb52e9f98e35a2d8d7dc5e14
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 15:36:46 +0900

    use GET_CFP() instead of access reg_cfp directly.

    GET_CFP() macro contains performance counter logic.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67371 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fcf60d39776acf018eb7d855778f66568eb6d615
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 10:26:23 +0900

    process.c: [DOC] fix markups [ci skip]

    * process.c (rb_f_spawn): fix markups as rdoc.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67370 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b9ad698c8711ddb10e812b809522a865e4175718
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 09:59:34 +0900

    process.c: [DOC] fix markups [ci skip]

    * process.c (rb_clock_getres): fix code markups, as `+` can not
      include parentheses.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67369 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f27d4354c837434a1e67fc20422c6f96bbe8dc69
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 09:59:32 +0900

    strip trailing spaces [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67368 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c33da35ddf14f39d622df42e0a63581636aa391c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 09:49:35 +0900

    Fix broken retry logic

    previous retry logic did not work
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=266

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67367 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6c04a7ad76b8693048355d0a258731e10f111fd
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 01:25:25 +0900

    Guard spec against msys2 shell

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67366 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e7477a949c157a700e70afff0675af676b57f00e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 00:37:45 +0900

    [bug:8215] seems to be still broken on mswin

    This test fails on AppVeyor mswin so often:
    https://ci.appveyor.com/project/ruby/ruby/builds/23427134/job/rowv0dohwni0xa37
    https://ci.appveyor.com/project/ruby/ruby/builds/22970385/job/qdkqus13bhnyyfxf
    https://ci.appveyor.com/project/ruby/ruby/builds/22970385/job/o4k8keg95ltcryoe

    Maybe it's related to https://bugs.ruby-lang.org/issues/15569.
    As this test is harmful for mswin CI reliability, let me skip this at
    least until somebody fixes the above issue.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67365 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 233267db34bfd74d94a5840cc582e0db7a2881c3
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 00:25:44 +0900

    * 2019-03-29

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67364 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7ce0e96334c66af8f805d101fe35abb5742687e4
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 00:25:44 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67363 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 68987d4ae1a14d96047074599079acc2997e76e9
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-29 00:25:43 +0900

    Do not fail with --disable-jit-support

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67362 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a28aa80c739a1d169649a4da833ef48cfb3465b3
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 23:22:29 +0900

    Update to ruby/spec@e81b3cd

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67361 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0f64776745ef31e626dec0d42b7fb2a5988397ec
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 21:35:20 +0900

    NEWS: Fix a typo [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67360 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6443c62f0c3c4b002c6eaa2574da66f5635e076
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 20:50:19 +0900

    Note r67356 in NEWS [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67359 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ee5b54822cd08c11ae1b2060d28074d36aa45954
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 19:19:08 +0900

    parse.y: show error line separately

    * parse.y: show compile error and the error line separately,
      instead of building the error message by snprintf then yyerror.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67358 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fa04b87af4300f747e3ce5cfe21b8edf85fe73b2
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 17:39:24 +0900

    [DOC] fix missing paren [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67357 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b3507bf147ff47e331da36ba7c8e6b700c513633
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 12:46:48 +0900

    erb.rb: prohibit marshaling [EXPERIMENTAL]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67356 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 978290515ea32204ff4b4173d6283050d628bd37
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 12:33:36 +0900

    [DOC] Fix method references to Method instance methods

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67355 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit de0ef1a9dfd9f966ad7e667788f3e333944d959e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 12:33:35 +0900

    [DOC] fix markups [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67354 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 832bc50768fe42f95f8dda0483f0ba1556175c9d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 08:56:17 +0900

    * 2019-03-28

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67350 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ede77e64a7f465f9591ee9b1e9d6d7d69bfdb9af
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-28 08:56:14 +0900

    Fix typos

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67349 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 41d36d2ce2a900bbb6812e23c13f35ee20f93d31
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-27 22:31:36 +0900

    Skip EBADF spec in MJIT test for now

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67348 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1c5fd2bff0e232aadf4b9486d086ccb6af87ceb6
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-27 22:15:02 +0900

    Add debug print for random CI failure on osx Travis

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67347 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b51b9d50e64170650db71ece4a6c08b3c9ae897a
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-27 17:26:12 +0900

    * 2019-03-27

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67346 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 191b99c89d5843bdee2bccc9ee2d34bc2b5513f0
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-27 17:26:09 +0900

    Merge fileutils-1.2.0 from ruby/fileutils.

      It includes the following updates:

      * https://github.com/ruby/fileutils/pull/26
      * https://github.com/ruby/fileutils/pull/27
      * https://github.com/ruby/fileutils/pull/29
      * https://github.com/ruby/fileutils/pull/34

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67345 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c92c0a593593da2eb1ff94d83d80f71e7ae5343c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-25 23:26:11 +0900

    Prefer using vm_base_ptr rather than cfp->bp

    in MJIT implementation.

    This allows us to drop cfp->bp by just modifying vm_base_ptr in the
    future.

    No performance impact:

    $ benchmark-driver benchmark.yml --rbenv='before::before --disable-gems --jit;bp_::after --disable-gems --jit;vm_env_ptr::ruby-svn --disable-gems --jit' -v --output=all --repeat-count=12
    before: ruby 2.7.0dev (2019-03-24 trunk 67341) +JIT [x86_64-linux]
    bp_: ruby 2.7.0dev (2019-03-24 trunk 67342) +JIT [x86_64-linux]
    vm_env_ptr: ruby 2.7.0dev (2019-03-25 trunk 67343) +JIT [x86_64-linux]
    last_commit=Prefer using vm_base_ptr rather than cfp->bp
    Calculating -------------------------------------
                                           before                   bp_            vm_env_ptr
    Optcarrot Lan_Master.nes    77.15059205092646     70.18873044267853     69.62171387083328 fps
                                78.75767783870441     77.49867689173411     75.43496867709587
                                79.60102690369321     77.78037687683523     79.36688927929428
                                80.25144236638835     78.74729849101701     80.42363742291455
                                82.22375417165489     80.44265482494045     80.90287243299306
                                82.29166786292619     80.51740049420938     81.81153053252902
                                83.35386925305345     80.91054205210609     81.93562989125176
                                83.39770634366975     81.34550754145043     82.24544621470430
                                83.88523450309972     81.60698516017347     82.76801860263230
                                84.17553130135879     82.69615943446324     83.02530407910871
                                84.42132328119858     83.00969158037691     83.19968539409922
                                84.60731429793329     83.32703363300098     83.81352746019631

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67344 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7976d0d153c021fb2e350743fbb54d239aa7acf1
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-25 15:58:55 +0900

    * 2019-03-25

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67343 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8dd0fb9039bbe6152ea5542e6bc70de152871e23
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-25 15:58:50 +0900

    use cfp->bp more.

    cfp->bp was (re-)introduced by Kokubun san, but VM doesn't use it
    because I (ko1) want to remove it in a future. But using it make
    leave instruction fast because of sp consistency check.
    So now VM uses cfp->bp.

    To use cfp->bp, I checked the value and I found that it is not a
    "initial value of sp" but a "initial value of ep". Fix this problem
    and fix all bp references (this is why bp is renamed to bp_).


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67342 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9f05891c3daa79e26dd01f0575f1b595ddb7d302
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-24 09:28:54 +0900

    * 2019-03-24

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67341 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 831e93d928aa1092fbbcabaa8051953de50ad9da
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-24 09:28:51 +0900

    Update power_assert to 1.1.4

    This update fixes a failure of test-bundled-gems, so we revert r67275.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67340 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7e421044a3e1747e62c6760cde2f007223f73e0e
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-23 19:41:20 +0900

    * 2019-03-23

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67339 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0bd50e95f9e2357ac551bda501da91185875370e
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-23 19:41:16 +0900

    file.c: raise NotImplementedError instead of Errno::ENOSYS

    [Misc #15615]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67338 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 56557ec28a8712984a0e9744fd7547e797ec9b6b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-22 20:04:59 +0900

    [DOC] fix markups [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67337 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c671f836b4d123bf86bce6defe42c87caef582f8
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-22 16:57:26 +0900

    add debug counters to count call cache fastpath.

    Add counters to count ccf (call cache fastpath) usage.
    These counters will help which kind of method dispatch
    is important to optimize.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67336 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d2bac1fd977d2ff76321654aece8744cac536dd
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-22 09:21:44 +0900

    * 2019-03-22

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67335 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a433f2c51be52042884998bb5a0048084adad4aa
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-22 09:21:43 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67334 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79ddbe9deebc5af0f08e52cd056f58b49e486ea6
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-22 09:21:41 +0900

    optimize method dispatch for lead/kw params.

    similar idea to r67315, provide the following optimization
    for method dispatch with lead and kw parameters.

    (1) add a special branch to check passing kw arguments to
        a method which has lead and kw parameters.
        ex) def foo(x, k:1); end; foo(0, k:1)
    (2) add a special branch to check passing no-kw arguments to
        a method which has lead and kw parameters.
        ex) def foo(x, k:1); end; foo(0)

    For (1) and (2) cases, provide special dispatchers. For (2) case,
    this patch only use the special dispatcher if all default
    kw parameters are literal values (nil, 1, and so on. In other case,
    kw->default_values does not contains Qundef) (and no required kw
    parameters becaseu they don't pass any keyword parameters).

    Passing keyword arguments with a hash object is not a scope of
    this patch.

    Without this patch, (1) and (2) cases use `setup_parameters_complex()`.
    Especially, (2) seems frequent case for methods which extend a normal
    usecase with keyword parameters (like: `exception: true`).

    We can measure the performance with benchmark-driver:
      With methods: def kw k1:1, k2:2; end
                    def m; end
      With the following binaries:
        clean-miniruby: unmodified trunk.
        opt_miniruby1: use special branches for lead/kw parameters.
        opt_miniruby2: use special dispatchers for lead/kw parameters.
        opt_cc_miniruby: apply step (2).
      Result with benchmark-driver:

                                  m
         opt_miniruby2:  75222278.0 i/s
        clean-miniruby:  73177896.5 i/s - 1.03x  slower
         opt_miniruby1:  62466783.3 i/s - 1.20x  slower

                                 kw
         opt_miniruby2:  52044504.4 i/s
         opt_miniruby1:  29142025.7 i/s - 1.79x  slower
        clean-miniruby:  20515235.4 i/s - 2.54x  slower

                          kw k1: 10
         opt_miniruby2:  26492219.5 i/s
         opt_miniruby1:  25409484.9 i/s - 1.04x  slower
        clean-miniruby:  20235113.7 i/s - 1.31x  slower

                  kw k1: 10, k2: 20
         opt_miniruby1:  24159534.0 i/s
         opt_miniruby2:  23470527.5 i/s - 1.03x  slower
        clean-miniruby:  17822621.5 i/s - 1.36x  slower


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67333 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0f63d961169989a7f6dcf7c0487fe29da178a4d2
  Author: shirosaki <shirosaki@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 22:32:03 +0900

    dir.c: fix Dir.glob starts with brace

    * dir.c (ruby_glob0): expand braces if a glob pattern starts with
      brace.
      [ruby-core:91728] [Bug #15649]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67332 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 638c96858274deb90b2b923477d6b9525e1ed065
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 21:01:36 +0900

    array.c: [DOC] remove unnecessary markups [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67331 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 969156ce9a04b92ffc5b048cfbe666ae1f7b1cbd
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 15:48:00 +0900

    Check argument_arity_error condition in inlinable_iseq_p

    to avoid inlining a method call when it becomes argument_arity_error,
    fixing a potential bug.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67330 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 52bd8f6f68a45cb990a827e4a1c276251cdf471c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 15:25:09 +0900

    Share vm_call_iseq_optimizable_p to reduce copy-paste

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67329 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a8695d5022d7afbf004765bfb86457fbb9d56457
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 14:59:57 +0900

    Make rb_iseq_only_optparam_p static

    because it's not used outside vm*.c, and also having non-static function
    without MJIT_STATIC is harmful for mswin JIT system.

    I hope this fix mswin test failure starting from r67315.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67328 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3c4b7898d82f0a57cc3d034a246c28093c5f2dfd
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 14:59:16 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67327 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1038377a9c8ec8002d07cfdbca6a1c0cca1fc8c
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 14:59:14 +0900

    Fix a wrong lineno in backtrace for cfunc

    lineno is an int, and INT2FIX(0) was assigned.

    [Bug #15719] [ruby-core:91911]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67326 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8540a3c2eb375d1634a451574404d8cb4502f98
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 14:44:26 +0900

    Show retry's stdout as well

    because stderr did not have sufficient information
    https://ci.appveyor.com/project/ruby/ruby/builds/23242505/job/dirugxujk70nnhp6

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67325 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ae0f20c6bf45fdf4e50bc6cc69577cb94cc44ed8
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 14:30:27 +0900

    Retry vcpkg install failures

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67324 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9810c08a5dd0f327f3d2fe2bd61874673ddece11
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 13:49:45 +0900

    Explain why cl.exe needs --jit-verbose=2 [ci skip]

    I forgot to explain it in the previous commit

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67323 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 81de7b9e622ecb57a607af8ba7c341ab8c659a4d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 13:47:59 +0900

    Insert --jit-verbose=2 logs for mswin debugging

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67322 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7aacb650153db6eb341907dff8c3f8445717e556
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 12:24:59 +0900

    Remove duplicated and change order

    `reg*` affects `doc/regexp.rdoc`, but it is not a file of the Oniguruma/Onigmo regular expression engine.
    `reg*.[ch]` matches `reg*` except `doc/regexp.rdoc`.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67321 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f2ea705d68d7e814e68c2df4598b95106e280e49
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 08:32:11 +0900

    Add Enumerator::Lazy docs.

      * explanation of the class concept, with examples;
      * docs for all class methods (most of them just say "Like Enumerable#<methodname>, but chains operation to be lazy-evaluated.", but I believe they are useful this way because now have proper call-sequences and link to corresponding Enumerable's explanations)
      * simplified example for ::new to emphasize the main concept
      * Enumerable#lazy docs are slightly lightened and linked to this class for more in-depth explanations.

      [Misc #15529][ruby-core:91046]

      Co-authored-by: zverok <zverok.offline@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67320 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e8e1f72d8fae3d010a1a5bec90c897aee9f08ce0
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 05:37:03 +0900

    remove redundant check.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67319 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit df2af1147fc250cee73853cd9c78d5afeb9e2591
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 05:26:21 +0900

    fix a type error with a cast for clang.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67318 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 02df0f38df43395debdab80a24fabd8a0e3eb097
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 04:57:44 +0900

    * 2019-03-21

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67317 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5c439ebfb076ac0b16e60dc83f3a56532e85b3c9
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 04:57:43 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67316 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 24e03d7e268f5b89367d495ee2b4aac0b700e6e1
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-21 04:57:39 +0900

    optimize method dispatch for lead/opt params.

    There is a special optimization for "only lead parameters"
    method dispatch using specialized dispatcher functions
    `vm_call_iseq_setup_normal_0start...`.
    Other cases (opt, rest, post, ...) we don't use specialized
    dispatcher and call with `setup_parameters_complex` to
    satisfy Ruby's complex parameter specification.

    This commit introduce a specialize dispatcher for
    methods which use only lead and optional parameters.

    Two step improvements:
    (1) prepare "lead/opt" only check pass.
        It is to skip the `setup_parameters_complex` function.
    (2) introduce specialized dispatcher for only "lead/opt"
        parameters methods (vm_call_iseq_setup_normal_opt_start).

    With these improvements, we achieved good micro-benchmark
    results:
      With a method: `def opt2 a, b=nil; end`
      With the following binaries:
        clean-miniruby: unmodified trunk.
        opt_miniruby: apply step (1).
        opt_cc_miniruby: apply step (2).
      Result with benchmark-driver:

                            opt2(1)
       opt_cc_miniruby:  42269409.1 i/s
          opt_miniruby:  36304428.3 i/s - 1.16x  slower
        clean-miniruby:  25897409.5 i/s - 1.63x  slower

                         opt2(1, 2)
       opt_cc_miniruby:  45935145.7 i/s
          opt_miniruby:  40513196.9 i/s - 1.13x  slower
        clean-miniruby:  29976057.6 i/s - 1.53x  slower

    This improvement may be trivial (difficult to improve practical
    cases). However, this is enough small patch so I decide to
    introduce it.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67315 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 139634a16fc5fa6779b08aeb89f40b289579c4bf
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-20 13:24:42 +0900

    vm_trace.c: [DOC] remove the trick [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67314 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b55586902dbd3df7b749fd1463dacbe871550adc
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-20 11:08:34 +0900

    Improve TracePoint docs.

      * Mention new :script_compiled event;
      * Deduplicate __enable/enable methods;
      * Document target: and target_line: arguments.

      [Bug #15484][ruby-core:90801]

      Co-authored-by: zverok <zverok.offline@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67313 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 46968fab0a0cec4a3e6e37f30b13d20998ba5e7a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-20 10:35:27 +0900

    string.c: [DOC] fix reference to sprintf [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67312 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b49e5b47d26228602f2dd57a81a6c12b1a19dde
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-20 10:31:44 +0900

    string.c: [DOC] remove unnecessary markups [ci skip]

    * string.c: remove <code> markups, which are not only unnecessary
      but also prevented cross-references.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67311 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a265141c84f5b62d3dce62db1cf47d0c88dce601
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-20 10:17:16 +0900

    string.c: [DOC] fix indent [ci skip]

    * string.c (rb_str_crypt): fix indent not to make the whole list
      verbatim entirely.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67310 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eee58ca61134447e2f2140f9bf5366dc1495d7fe
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-20 09:31:13 +0900

    * 2019-03-20

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67309 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 740248425c5a47cb3f73eda97b42d52ef1070349
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-20 09:31:02 +0900

    parse.y: make tNUMPARAM id

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67308 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit afa1505ca89bd350558f1f42b96f1eee781ef019
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 15:23:36 +0900

    parse.y: removed redundant number_arg parser event

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67307 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fa66569afa0614ab27d941a68fb99e7adc1d2d48
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 15:01:21 +0900

    parse.y: fix var_ref of numbered param in ripper

    * parse.y (string_dvar, user_variable): register numbered
      parameter in ripper for var_ref.
      [ruby-core:91867] [Bug #15673]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67306 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e39f7e64b73f0506def7adc88226d6821608da54
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 11:35:50 +0900

    parse.y: fix segv with Ripper#yydebug

    * parse.y (parser_token_value_print): in ripper, ID values are
      wrapped in NODE_RIPPER at set_yylval_name(), so print the Symbol
      wrapped together.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67305 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ae5d9a7664e9664102b1ebc890afdafdf053bed8
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 11:25:15 +0900

    Added Ripper#debug_output

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67304 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 92b0331bcf33d1c4d3396c1ad85919934198aa28
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 02:45:10 +0900

    Use designated initializers for compile_status

    to make it easier to understand what values are grouped.
    Just cosmetic changes.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67302 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b1241d87756b59b6e2f033f7a978130b896bbaf
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 02:28:23 +0900

    Use alloca for stack_size_for_pos as well

    to eliminate necessity of error check and `free`

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67301 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a75ae6faa931e8b9d32c99039a06b950df391a06
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 02:20:21 +0900

    Use alloca again instead of malloc and free

    by changing interface of `mjit_copy_cache_from_main_thread`.

    This is also fixing deadlock introduced by r67299.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67300 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d426e28d2cbbc09208987c6cf86180ea3ba3522
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 01:32:48 +0900

    Resurrect r67287 and r67288

    I noticed that r67287 was illegal because memory allocated by `alloca`
    was used after the stack is expired.

    So I just replaced that with `malloc` and `free` for now.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67299 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 08e9c58d519599def6b786ea211ac3a3d8b64d52
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 01:14:59 +0900

    * 2019-03-19

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67298 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 78e87b7d4f580b041f96e0503febce528b8607b8
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-19 01:14:57 +0900

    Revert "Eliminate mjit_copy_job_t reference from mjit_worker"

    This reverts commit ba51ae0109ee1d1fa7ca90b43da115ea68d7214a.

    CI is failing again...

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67297 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba51ae0109ee1d1fa7ca90b43da115ea68d7214a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 23:01:52 +0900

    Eliminate mjit_copy_job_t reference from mjit_worker

    Take 2 of r67287.

    For some reasons, passing pointer of pointer on stack to a function
    and assigning an addresse to a pointer dereferenced from the pointer
    seems not working on mswin.

    So I achieved to return multiple values by returning struct instead of
    taking pointers.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67296 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 964bbc1686c7dd42d58da504a6968c90d5a428fd
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 21:48:18 +0900

    parse.y: numbered parameter in lambda

    * parse.y (lambda): support numbered parameters, only when no
      argument list including empty parentheses, like empty vertical
      bars.  [ruby-core:91859] [Bug #15672]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67295 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f9e5b8d09cafc2c91137d293b1458f1b0432a12a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 21:07:21 +0900

    Revert "Try disabling Travis cache on darwin"

    This reverts commit 6b136a044205f6e6b66df68cd2da2a9c3e952a7d.

    This does not seem to work:
    https://travis-ci.org/ruby/ruby/jobs/507646193#L2478

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67294 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c1dce923739d0355520c02eb588bc96bedae4328
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 20:46:21 +0900

    Merge https://github.com/rubygems/rubygems/pull/2684

    to make CI stable. See the PR for details.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67293 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 17018d4c31a86af2b47e09b3229dab2e80d3db6d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 15:42:19 +0900

    parse.y: continue after invalid name

    * parse.y (set_yylval_noname): continue after an invalid global,
      instance, class variable name, without "unexpected end-of-file"
      error.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67292 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 908b5301124cf673a2ee44de652968aa5360afd1
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 10:52:45 +0900

    Revert "Request inline cache values from mjit_compile"

    This reverts commit 4161674b2fbea6bdd01783ac5d3b39d88db22972.

    Revert "Eliminate mjit_copy_job_t reference from mjit_worker"

    This reverts commit d86a1aa045959dfbf5cd472eae0d043180259727.

    Reverting them because of CI failures

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67291 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba03222da8ecc408310c37dca908f671ee3f1791
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 10:42:20 +0900

    Pack rb_iseq_constant_body from 296 to 288 bytes

    [Fix GH-2099]

    From: Lourens Naud <lourens@bearmetal.eu>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67290 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d0e25ed277549af21242009e649d93b73c82576c
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 10:18:25 +0900

    parse.y: parser_numbered_param

    * parse.y (parser_numbered_param): hoisted out the contextual
      check for numbered parameters.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67289 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4161674b2fbea6bdd01783ac5d3b39d88db22972
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 03:29:30 +0900

    Request inline cache values from mjit_compile

    rather than preparing beforehand.

    By having this change, implementing inlining by calling
    `mjit_copy_cache_from_main_thread` for inlined methods was made
    possible.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67288 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d86a1aa045959dfbf5cd472eae0d043180259727
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 03:07:06 +0900

    Eliminate mjit_copy_job_t reference from mjit_worker

    and make `copy_cache_from_main_thread` easier to use.

    For implementing inlining later, I'll use `copy_cache_from_main_thread`
    inside `mjit_compile`.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67287 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3fc26f601397f9b3e2893488749481f4df96df07
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 02:12:47 +0900

    Drop rb_mjit_unit from mjit_copy_job

    and guard iseq from GC by marking iseq in mjit_copy_job.

    This is a refactoring for implementing inlining later and
    should not be fixing or introducing any bugs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67286 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cebc640790c084c110ae413231b976941fbfdc7f
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 01:35:20 +0900

    Fix a typo [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67285 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5bd10603416d3f267704b8ad1040ebab163ca3b2
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 01:32:51 +0900

    * 2019-03-18

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67284 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dfb9907cd35ab914a421ccd864ca03594265f5a2
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-18 01:32:49 +0900

    Fix typos [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67283 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a72bc2e716790b933106e524f662f2b63cafc6e2
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 22:51:30 +0900

    Fix a typo [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67282 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6b136a044205f6e6b66df68cd2da2a9c3e952a7d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 15:20:01 +0900

    Try disabling Travis cache on darwin

    to check if it resolves "Permission denied" problem.
    https://travis-ci.org/ruby/ruby/jobs/507381339
    https://travis-ci.org/ruby/ruby/jobs/507392198

    TBH I'm not exactly sure why it happens, but I don't have infinite time
    to understand this. It would be appreciated to identify the root cause
    and remove `DISABLE_CACHE` again if you're sure your patch fixes the problem.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67281 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4b6198d8f13229123ebbcfcdfc4685a913b1ac8
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 14:32:53 +0900

    Roughly increase Azure Pipelines fetch depth

    because --depth=1 may randomly break checkout:
    https://dev.azure.com/rubylang/ruby/_build/results?buildId=208&view=logs&jobId=7ded14dc-7a77-59da-f40a-71e137ad96c0&taskId=2045950f-1dcd-54a4-4c23-fae2521239c1&lineStart=1554&lineEnd=1555&colStart=1&colEnd=1

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67280 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 46f5eb5b48213e1561cd23fea4f672f2e0d09647
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 14:28:54 +0900

    Update NEWS for --jit option changes [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67279 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 12acc751e3e7fd6f8aec33abf661724ad76c862a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 14:21:18 +0900

    Numbered parameters [Feature #4475]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67278 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0fa4a6a618295d42eb039c65f0609fdb71255355
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 14:13:38 +0900

    Change defaults of --jit options

    * --jit-min-calls: 5 -> 10000

    --jit-min-calls=5 obviously can compile non hotspot. This was not a
    problem for MJIT-benchmarks and Optcarrot because the former has very
    few hot optimiziable methods and the latter is likely to trigger
    compilation of hotspot by its intensive calls to optimizable hotspot
    methods and has a very short window to allow limited compilations.

    In real-world applications, it has more time to compile more methods and
    it pressures computer's limited resources like icache. We should avoid
    compiling too many methods. Also compiling many methods exhausts time
    budget for compilation in one ruby process lifetime and delays the "JIT
    compaction" of Ruby 2.6.

    JVM is known to use 1,500 for C1 (client) compiler and 10,000 for C2
    (server) compiler for -XX:CompileThreshold by default.
    https://docs.oracle.com/javase/8/embedded/develop-apps-platforms/codecache.htm

    When things are called X,000 times, requiring 10,000 can eliminate
    compilation of methods which are called only once in these X,000
    iterations and obviously not hotspot. And in fact things like
    unicorn-worker-killer restarts unicorn process every 4096 requests.
    So I felt 10,000 is good for such an environment.

    * --jit-max-cache: 1000 -> 100

    By the same reason stated above, we should not allow compiling many
    methods especially on MJIT which has a larger overhead due to poor code
    locality by dlopen and whose code is also likely to be bigger by just
    inlining many VM instructions with -O3 rather than directly generating
    low-level code.

    In JVM -XX:ReservedCodeCacheSize is 32M for reserved and 48M for maximum.
    --jit-max-cache=1,000 could be closer to it, but in this case MJIT's
    compilation is slow due to data synchronization between threads (to be
    improved in Ruby 2.7 though) and we do not want to delay the "JIT
    compaction" for a long time.

    So I chose a really conservative number for this, but by having method
    inlining in the future, wider range could be optimized even with this
    value.

    * Optcarrot

    --disable-gems, --benchmark Lan_Master.nes 12 attempts.
    No significant impact.

    | r67276             | r67276 --jit      | after --jit       |
    |:-------------------|:------------------|:------------------|
    | 50.44369263063978  | 72.87390680773056 | 73.47873485047297 |
    | 50.58788746124193  | 78.06820808947026 | 78.29723420171945 |
    | 50.77509250801378  | 80.29010348842613 | 78.94689404460769 |
    | 50.935361702064405 | 80.42796829926374 | 80.39539527351525 |
    | 51.27352672981195  | 81.98758158033202 | 81.6754198664817  |
    | 51.720715743242124 | 82.00118535811626 | 82.22960569251283 |
    | 51.89643169822524  | 82.2290091613556  | 82.5013636146388  |
    | 51.95895898113868  | 82.37318990939565 | 82.74002377794454 |
    | 52.10124886807968  | 82.48796686037502 | 83.23354941183932 |
    | 52.292280637519376 | 83.0265226541066  | 84.01552618012572 |
    | 52.51856237784144  | 83.8797360318052  | 84.8588319093393  |
    | 52.65076845986818  | 84.80037351256634 | 85.13577756273656 |

    * Railsbench

    `WARMUP=20000 BENCHMARK=1000 bin/bench` of https://github.com/k0kubun/railsbench.
    It gets closer to --disable=jit.

    |           | r67276 | r67276 | after  |
    |           |        | --jit  | --jit  |
    |:----------|:-------|:-------|:-------|
    | req/s     | 891.3  | 742.2  | 841.5  |
    |:----------|:-------|:-------|:-------|
    | 50%ile ms | 1.00   | 1.21   | 1.08   |
    | 66%ile ms | 1.02   | 1.24   | 1.09   |
    | 75%ile ms | 1.03   | 1.28   | 1.10   |
    | 80%ile ms | 1.03   | 1.30   | 1.11   |
    | 90%ile ms | 1.09   | 1.42   | 1.15   |
    | 95%ile ms | 1.32   | 1.65   | 1.27   |
    | 98%ile ms | 4.79   | 2.23   | 1.81   |
    | 99%ile ms | 5.68   | 7.52   | 6.64   |
    |100%ile ms | 6.52   | 9.69   | 8.59   |

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67277 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 407cd5cc54e12eec6688d175957afee3b022f54a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 13:13:13 +0900

    Drop invalid trailing comma in JSON object

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67276 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fe77cbca9073f521b35fd11bd55dde300559e8d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 01:53:55 +0900

    Ignore test-bundled-gems failure on CI for now

    ktsj-san recognizes this issue and it's intentionally left failing now.
    As failure notification of this task is NOT indicating ruby is broken,
    let's stop notifying the failure fo rnow.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67275 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5b0bcb0b2261a3254a008deecba9227f87e975b4
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 01:26:46 +0900

    * 2019-03-17

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67274 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 46a3b440fdb59da2ef250c585c50a4e1499a1f69
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-17 01:26:44 +0900

    Do not build Azure Pipelines on Pull Request

    For 2 reasons:

    * bundled_gems tend to be left broken (like now)
    * We don't want Slack notification for pull request and it can't be
      disabled on Azure Pipelines

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67273 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8ce6748fc81bdee29b5e790d5e9f8317f77a77bf
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-16 13:11:54 +0900

    Notify AppVeyor results to multiple channels

    and simplified config by using dedicated webhook URL.
    Sadly AppVeyor YAML does not support alias and so we need to copy-paste
    the request body.

    memo:
    https://slack-files2.s3-us-west-2.amazonaws.com/bot_icons/2018-02-10/314363543719_48.png
    is the URL used by `provider: Slack`

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67272 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f044cc1042ef7a3547fdf5f1934a3d108854870f
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-16 13:00:30 +0900

    * 2019-03-16

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67271 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7006fdecf2ff5e832cd6da1bf02462146a9190b8
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-16 13:00:14 +0900

    dsym should be treated as string [ruby-core:91852] [Bug #15670]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67270 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e4c184c6aeb29e3f47c6daf7c5ff26ef1ef440a8
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-15 22:25:06 +0900

    Increase the number of curl retries

    Because retrying 5 times failed.
    https://ci.appveyor.com/project/ruby/ruby/builds/23063048/job/k9lykaagfaex74gg

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67269 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4f7fac6b8ba975b50c4144168f656454c92724b
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-15 14:19:58 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67267 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c36a6f97f243778d3eb8e973eba89ce2b424b707
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-15 14:19:54 +0900

    node.h: introduce nd_brace to determine if a hash literal is a keyword

    NODE_HASH#nd_brace is a flag that is 1 for `foo({ k: 1 })` and 0 for
    `foo(k: 1)`.
    nd_alen had been abused for the flag (and the implementation is
    completely the same), but an explicit name is better to read.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67266 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 560bb32fb2a04713bdbe5fa51ee2aaa271da91b6
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-15 10:19:31 +0900

    NEWS: adjust indents and escape brackets not to be labeled lists

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67265 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3134b20a0129aa072d1cb40a5000297333b5818d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-15 09:44:51 +0900

    Show the source line at an invalid class/instance variable

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67264 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bf4bcaf06115b32b5ffb4ddea972624d3ac7fa50
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-15 07:43:59 +0900

    * 2019-03-15

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67262 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9e7f197c8e0c20bdf96ab7438e30b0457a85ec72
  Author: nagachika <nagachika@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-15 07:43:57 +0900

    tool/make-snapshot: Use 6-spaces indent for SIZE and digests
    to align with release note markdown.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67261 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d6e20297783257574d8143e95fb55aafd91db66
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 22:47:10 +0900

    Skip Bundler's test made fail by r67226

    Possible fix would be https://github.com/bundler/bundler/pull/7038,
    but Ruby script ending with `^~~` could be wrongly stripped by that?

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67257 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3db2041f8772ec7c9faf379095d4c8d06e5e25ed
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 18:04:57 +0900

    compile.c: fix the corner case of rest and keyword arguments

    See https://bugs.ruby-lang.org/issues/10856#note-20 . [Bug #10856]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67256 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 146bb252a0fe114befe8aa762596563c886db7fc
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 17:43:51 +0900

    compile.c (setup_args): process arguments forward

    For unknown reason, setup_args processed the arguments from the last to
    the first.  This is not only difficult to read, but also inefficient in
    some cases.  For example, the arguments of `foo(*a1, *a2, *a3)` was
    compiled like `a1.dup << (a2.dup << a3)`.  The second dup (`a2.dup`) is
    not needed.

    This change refactors the function so that it processes the arguments
    forward: `foo(*a1, *a2, *a3)` is compiled as `a1.dup << a2 << a3`, and
    in my opinion, the source code is now much more readable.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67255 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9800fc26b0367c63ada516b932b13268bb79524b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 17:13:46 +0900

    parse.y: no punctuation instance/class variables

    * parse.y (parse_atmark): exclude punctuation follows @ marks,
      whereas it is inclusive after $ mark as some punctuation global
      variables exist.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67254 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 277af37b427c635688d9ca7cba0b2fa8d1fb459d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 15:43:54 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67253 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4c41dc8945d167bc63932325e11f227b4ec102dd
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 15:43:50 +0900

    compile.c: factor out "compile_args" from "compile_array"

    compile_array function had three usages: array literal, hash literal,
    and method arguments. I think the third is completely different than the
    first and second.  For example, method arguments and popped are
    meaningless; keywords_ptr and flag parameter for array/hash literal is
    also unused.

    This change refactors them: a function "compile_args" is created for the
    third, and removes no longer used parameters of "compile_array".

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67252 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9c077bbed94307d67c82a6e805dd6cc486433df2
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 14:57:42 +0900

    parse.y: show invalid global variable line

    * parse.y (parse_gvar): show the source line erred by invalid
      global variable, and indicate the variable including the wrong
      punctuation.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67251 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ccc933d4a6873d9be359c8ab04b1f242ed64c1e5
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 14:32:30 +0900

    Hoisted out ruby_show_error_line

    * parse.y (ruby_show_error_line): hoisted out from parser_yyerror.

    * parse.y (regx_options): revert r67226 and show the error line
      separately.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67250 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 86c5806c6a3452a0b81595f8a306ec5c421a16a8
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 11:18:05 +0900

    More initializations of YYLTYPE

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67249 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e20aa14a82604db9a5e4d33d206aacfebfbb7d62
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 10:04:55 +0900

    * 2019-03-14

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67248 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6a860ea0062e2f18435a870ae8734f25bc9d9827
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-14 10:04:53 +0900

    Guard out the test when it is run under root permission

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67247 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0d6910dfc8e63d8961b338ea949bc398dd52b5d0
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-13 10:44:45 +0900

    * 2019-03-13

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67244 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8415df619ecfe9d869067faf1282f3552d18e578
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-13 10:44:34 +0900

    Remove unnecessary local variable

    newline is always "\n" when it is used.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67243 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8952525a8e688e0fe67bbc7a3c84256190a44c23
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-12 21:04:03 +0900

    Assertion for r67226

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67227 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6468b01f7288789ef2e9bf548d81cdadb8ef053
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-12 13:23:17 +0900

    Show unkwon regexp option line

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67226 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 60bddf589fb518c6b84515749775dc78458aeaad
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-12 13:11:51 +0900

    * 2019-03-12

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67225 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e5d10cda07b23682e5e4e64d1324e4d3247d4785
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-12 13:11:41 +0900

    Flush erred token

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67224 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a3a1199f413f7a96c4c90c7513c832838379e468
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 22:00:31 +0900

    fix wrong merge of conflict at r67217

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67221 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 43ff4ef912df53da6cadf009ff4e366a0d79626a
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 21:48:34 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67218 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 76fc1ce0a774aab411b4e9f4462c236852624764
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 21:48:33 +0900

    The combination of non-Symbol keys and Symbol keys is now allowed again

    Revert r64358.  [Bug #15658]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67217 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bda6df356a373289e179f2b09c0bbe84ffc70d03
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 21:47:02 +0900

    parse.y: moved excessed_comma

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67216 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bc76d8a232bed2e245cd3997ebd9826938f7a738
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 20:37:17 +0900

    Removed from standard library. No one maintains it from Ruby 2.0.0.

      [Bug #15652][ruby-core:91736]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67215 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 098ec6eb5076f3a140777c5cb56be4465bfa432f
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 19:09:48 +0900

    Added to check MJIT constant for the Ruby 2.3-2.5.

      This commit picked from https://github.com/ruby/webrick/commit/2c13beca2c25dc099b7ed20dbe4d7ede77dfef86

      Co-authored-by: Colby Swandale <me@colby.fyi>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67214 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 448262c81d7fdbca7db0b50059e53b423a2436ec
  Author: knu <knu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 18:52:40 +0900

    Mention the addition of Enumerator::Yielder#to_proc in NEWS

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67213 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7d3d8e79fe9cc9f21cd4341f0a6fb2e6306688fd
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 18:52:31 +0900

    fall back to copy + unlink on EPERM

      [Feature #15415][ruby-core:90536]

      Co-authored-by: Eric Wong  <normalperson@yhbt.net>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67212 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c2d3b8dfb43e6dbc0b9af3c0f880636ffcc06ca9
  Author: knu <knu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 18:49:14 +0900

    Implement Enumerator::Yielder#to_proc

    A Yielder object can now be directly passed to another method as a
    block argument.

    ```ruby
    enum = Enumerator.new { |y|
      Dir.glob("*.rb") { |file|
        File.open(file) { |f| f.each_line(&y) }
      }
    }
    ```

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67211 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7d9664953ba574b04f6558e80e95a71289275d64
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 12:53:33 +0900

    Removed circular require

    Import rubygems/rubygems#2679

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67206 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit aef24ecbe959b5e91e2e06b3a2cbfaa02cae1672
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 12:53:31 +0900

    Renamed duplicate test

    Import rubygems/rubygems#2678

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67205 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 53f2cda8d4717f15680e0a5b3638443182ca6c1f
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 10:37:21 +0900

    * 2019-03-11

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67204 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e5f01dab9d1faebe8f1c8eab3ed805335c4b712d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-11 10:37:16 +0900

    numeric.c: fix infinite loop

    * numeric.c (int_pow): fix infinite loop in the case of y equal 1
      and power of x does not overflow.
      [ruby-core:91734] [Bug #15651]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67203 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f399c2912bcb0ab782fc14a1987e07ceaaf060e7
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-10 15:46:36 +0900

    * 2019-03-10

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67202 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ffec546b0e522a647c7c2473c40dbe018156736d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-10 15:46:28 +0900

    eval.c: clear internal errinfo

    * eval.c (ruby_cleanup): clear internal error info when invoking
      end procs.  [ruby-core:91731] [Bug #15650]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67201 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72df0a8e4703c4e14cb2014d59d8ddad09a47859
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-09 19:17:33 +0900

    Add ignored_sp event

    * ext/ripper/lib/ripper/lexer.rb (Ripper::Lexer): add ignored_sp
      event which will be fired from Ripper::Lexer#on_heredoc_dedent
      method.  [ruby-core:91727] [Bug #15648]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67200 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8776a09d4eed5662ee28eff0d829e880cc001684
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-09 19:14:16 +0900

    Use assert_respond_to

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67199 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 28f619e301cf5f266f38fe764c4018b7fabc77cb
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-09 09:12:53 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67198 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5aecf03ec30a098ba58627aadcfbff4acdd11fdd
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-09 09:12:52 +0900

    variable.c: hoisted out rb_namespace_p

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67197 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5cfa518406d9b411512cffbe6951537bd25a3ebb
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-09 09:00:35 +0900

    * 2019-03-09

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67196 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d5770197462ee4445c4bd4898339ce50052af7d7
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-09 09:00:26 +0900

    Early return in gc_mark_children

    for types Float, Bignum and Symbol as they do not have references
    and singleton classes.

    [Fix GH-2091]

    From: Lourens Naud <lourens@bearmetal.eu>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67195 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit caa2a5bb0eb919d022bd50a7553197192dd78014
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-08 09:35:56 +0900

    * 2019-03-08

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67194 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e185c9716e6cabc2a9d103c8c7a77ee73fbba546
  Author: tadd <tadd@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-08 09:35:53 +0900

    use __GNUC__ instead of __GCC__.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67193 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4c1952f4bf9d2fe183431747a83596287e9b7631
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-07 20:24:48 +0900

    Ignore to handle the different platform

      When `GEM_HOME` was shared with CRuby and JRuby. RubyGems try to
      handle both platforms. It should be ignored the different platform.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67190 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8cc53044081fa00384412a0f141c9f1be9065e1a
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-07 14:11:55 +0900

    * 2019-03-07

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67189 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 23488589b38f09a95e7ba61a72b12358ad6185cb
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-07 14:11:46 +0900

    io.c: chomp CR at the end of read buffer

    * io.c (rb_io_getline_fast): chomp CR followed by LF but separated
      by the read buffer boundary.  [ruby-core:91707] [Bug #15642]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67188 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1598b5e7b343b6c05e6cab47ac3878276aea6d37
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-06 20:49:53 +0900

    Symbol creation is not a problem now unless pinned down

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67187 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fed9a2df50404c734504e0405ecaa98f0d9147c
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-06 20:16:34 +0900

    proc.c: call respond_to_missing? with a symbol

    [ruby-core:91683] [Bug #15640]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67185 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a679e98e64a7c69d65578b11ef072e1115d536ad
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-06 18:48:39 +0900

    Fix PTY.open on OpenBSD [Bug #15607]

    From: Jeremy Evans <code@jeremyevans.net>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67183 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f831ca67642101e29bd2de91998d80560d2b7fb6
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-06 12:19:10 +0900

    delete directory and files related to Unicode version 11.0.0

    this completes and closes feature #15321

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67174 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b3f641085e347d55c1b9b72e25a19c28cdeb84f6
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-06 12:15:06 +0900

    add news about Unicode version update (issue #15321) to NEWS [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67173 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fdc42bf88d7900b722e46976b981ce0fa3d4f1e8
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-06 12:04:36 +0900

    Remove deprecated `sudo: false` in .travis.yml

    - https://blog.travis-ci.com/2018-11-19-required-linux-infrastructure-migration
    - https://docs.travis-ci.com/user/reference/overview/#deprecated-virtualization-environments

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67172 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d4303528d39d38ae2141f13064e82a7908df4f14
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-06 11:08:20 +0900

    Skip malicious extension test with mswin platform.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67171 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad398b7e0c857cbaaf469f44759e163159b60148
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-06 10:55:26 +0900

    * 2019-03-06

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67170 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cff7eefa07f8e7bccb5c0b8c856e5657d6d45ffa
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-06 10:55:19 +0900

    update Unicode version (and Emoji version) to 12.0.0

    - common.mk: set UNICODE_VERSION and UNICODE_EMOJI_VERSION to 12.0.0

    - lib/unicode_normalize/tables.rb: update table data to Unicode version 12.0.0

    - enc/unicode/12.0.0/casefold.h, enc/unicode/12.0.0/name2ctype.h: add generated
      files for Unicode version 12.0.0

    This is the main commit for #15321.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67169 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 08f8cfe14e0f8937e3bcf8a22becdc5ce60b920e
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-05 12:32:58 +0900

    Merge RubyGems upstream: 56c0bbb69e4506bda7ef7f447dfec5db820df20b

      It fixed the multiple vulnerabilities.
      https://blog.rubygems.org/2019/03/05/security-advisories-2019-03.html

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67168 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 593505ac6f802d2b5bff469425b7c76b65cc9b10
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-05 09:32:15 +0900

    string.c: respect the actual encoding

    * string.c (rb_enc_str_coderange): respect the actual encoding of
      if a BOM presents, and scan for the actual code range.
      [ruby-core:91662] [Bug #15635]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67167 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4045cb82227e7b97342eb92b17e35f534128e90d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-05 09:28:25 +0900

    * 2019-03-05

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67166 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19d3aaff5c45c8ee0a9083a182d77cd5f5acf935
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-05 09:28:22 +0900

    Directories in RbConfig may not exist until installation

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67165 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba982a3da32ecb3ae0f08eceda55c503f39d3875
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-04 17:13:27 +0900

    * 2019-03-04

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67164 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 958798851d24a70e849e19592a36edce2daf18d1
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-04 17:13:25 +0900

    FindFirstFile cannot glob share names

    * win32/file.c (replace_to_long_name): do not try to glob host
      names and share names by FindFirstFile which is useless for that
      purpose.  [ruby-core:91656] [Bug #15633]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67163 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e4885d8accb0a30069374ee21f688631fca45f62
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-03 22:35:25 +0900

    Use --depth=1 for vs2019 as well

    to shorten time to clone

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67162 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2e9d4b9f0bd0cae89e75a7a16b2cf0c55aeb9c0e
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-03 15:18:43 +0900

    do not close FSs explicitly.

    * test/ruby/test_dir.rb: r67159 closes all files explicitly
      but this change breaks attempt of this test introduced at
      r56467. Try another solution which removes all references
      from an Array with `#clear`.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67161 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7ebea69529a15e6e3004aeafb40f7d469f47b37d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-03 09:17:21 +0900

    * 2019-03-03

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67160 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19a8bbafd8ef8b48a9d2832e605fb00b3284630e
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-03 09:17:18 +0900

    close opened files explicitly
    to fix a test failure like
    http://ci.rvm.jp/results/trunk-theap-asserts@silicon-docker/1804207


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67159 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4eda7e1d1481168c016a589b53af2233ea2defb2
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-01 23:09:41 +0900

    Stop sharding --jit-wait testing

    by just randomizing test order.

    The original motivation to shard --jit-wait tests was forcing to test
    major parts of code without actually stopping to test MJIT after
    TracePoint enablement. But it tends to increase the test time because we
    often compile the same thing in different shards.

    I made this decision because we seem to hit 1.5h timeout of Wercker
    these days, and Wercker is really bad at handling timeout (it does not
    report timeout as failure, but just keeps it "pending" state)
    https://app.wercker.com/ruby/ruby/runs/mjit-test2/5c78f15cc9e725000805b86c?step=5c79031d6c1e2c0008ac41c3

    By randomizing this, we could test things randomly. The downside of this
    approach is that we may not be able to find a specific commit that
    caused a future failure by having TracePoint in a very early phase.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67158 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4fd5a9e9bb58ab666809eda3256db2ae98b0032f
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-01 22:16:29 +0900

    Try to build readline extension with vcpkg on Azure Pipelines.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67157 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe28e007f3226c48aee497558f8eff535485423d
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-01 17:46:07 +0900

    Try to build vs2019preview on Azure Pipelines.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67156 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19cf8e03878e93a9594c275b8f82a9d53e02eda1
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-01 17:31:43 +0900

    Fixed build failure of Travis CI. We need to support `make srcs`.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67155 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a4020fbefcf61edfe604c25a0bc70a7aed380070
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-01 13:21:33 +0900

    Add Azure Pipelines build status badge [ci skip]

    copy from README.md.  see r67146

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67152 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb04855c415c2ea33f863841a4f4bdbe059131a5
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-01 12:56:33 +0900

    Drop obsoleted continueOnError

    now it's passing thanks to r67149

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67151 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9dbb14b77cb929d0f59b22152ea817e70ee8fa13
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-01 12:45:03 +0900

    * 2019-03-01

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67150 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe61f14d53c5b18d3c475eee23502ab1e5446291
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-03-01 12:45:00 +0900

    Support YACC environment variable for ripper.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67149 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dfec1eb3cee833fa4bef6ce027a3e702508261ba
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-28 23:19:47 +0900

    Add Azure Pipelines build status badge [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67146 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7b81d7f5c2a5fe93835c2b2d865a7378f5499f0f
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-28 22:26:14 +0900

    Mark vs2017 build as continueOnError for now

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67145 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 12eca471a466daa4b03cb2c3edfb1a7039071eb6
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-28 21:47:36 +0900

    Revert "Try clean: true for vs2017 checkout failure"

    This reverts commit b0e350fe16ad17eabf5bbc603f7d817c06ce8554.

    The issue seems to be invalid tag name including `"` in ancient tag.
    We're trying to delete that.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67144 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b0e350fe16ad17eabf5bbc603f7d817c06ce8554
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-28 21:32:24 +0900

    Try clean: true for vs2017 checkout failure

    https://dev.azure.com/rubylang/ruby/_build/results?buildId=107

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67143 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f03775fc0f536b43ace587f6ae9c299a0b8598ef
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-28 21:19:08 +0900

    Try fetchDepth: 1

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67142 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ccd1c02ceaa04b29757954906859fe3b9e3dedf0
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-28 21:01:09 +0900

    * 2019-02-28

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67141 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ef8ed5deee7a687190a33ac655dec271bb18db26
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-28 21:01:06 +0900

    Removed fake environment variable because It is not necessary for macOS.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67140 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f2c516d8031e1c7f4704bd59c5349fab7f24187
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-27 21:40:19 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67139 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 19408c785c6f258024efcaa69d0642ad995c50b3
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-27 21:40:19 +0900

    skip to not support color tty environment.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67138 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 019864b4a5d14f25f5880cda996306908837d7ee
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-27 21:30:24 +0900

    Test Bundler examples and bundled gems tests with Azure Pipeline.

      * They are invoked on Linux and macOS environment.
      * Try to build with vs2017. But it's only binary build.

      https://dev.azure.com/rubylang/ruby/

      [Feature #15181][ruby-core:89222]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67137 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c2ee33898b21af45e9dad89942772c00d3ffc819
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-27 12:26:09 +0900

    * 2019-02-27

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67136 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8092d571be8f65909c6e5a931429933d19566f36
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-27 12:26:09 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67135 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e2a8cb7b9de3d5a22e29886a5a1b7cafacdc31a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-27 12:26:05 +0900

    Remove stale arguments

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67134 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ff074304f4d393fa4a9c97f30829ccf5497009ae
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-26 10:34:20 +0900

    * 2019-02-26

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67133 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e2d1bb1fa4850c8212a7cdbd76a92634a1115453
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-26 10:34:17 +0900

    add exceptions for indenting conventions for files related to regular expressions

    Ruby uses the Oniguruma/Onigmo regular expression engine, including the underlying
    character encoding framework. In contrast to other code implementing Ruby, the
    regular expression engine related code is formatted with two spaces per indent
    level. This commit adds rules for these files. (The commit may not completely cover
    all related files.) [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67132 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 23a8183bea8dda2d7528b57f2e0c8bc31162db3e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-24 20:57:18 +0900

    Check stx_btime in struct statx

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67131 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a582007e3611e1d6e1d57b697391be74dc03c2ac
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-24 14:27:40 +0900

    * 2019-02-24

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67130 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b8285e25348ab6a7b16facb31e5753711b1191e
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-24 14:27:33 +0900

    configure.ac: remove check for broken memmem

    the bug of memmem(3) was fixed in glibc 2.1 released in 1999.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67129 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dc700cf903e7fa1852bd9390e5e350d07edf1000
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-23 13:42:48 +0900

    configure.ac: skip check of statx() on AIX

    Linux and AIX have statx() with different prototype.

    Linux: int statx(int, const char*, int, unsigned int, struct statx*)
    AIX: int statx(char, struct stat*, int, int)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67128 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6604e1b7cd75bef7ed72db699d8f88a7fb56c330
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-23 12:43:58 +0900

    Merge json-2.2.0 from flori/json.

      https://github.com/flori/json/releases/tag/v2.2.0

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67127 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f22ffd83e92a214a697e93fe715d29cbfa52084d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-23 11:22:05 +0900

    spec/../rbconfig_spec.rb: skip spec not working on MinGW

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67126 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0dab1fce7c1eec3b67340e32678841151119beb1
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-23 11:17:57 +0900

    * 2019-02-23

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67125 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 052dbbe74f00733b96841fc8fbe7bdefadf0440e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-23 11:17:54 +0900

    spec/../shared/write.rb: suppress random failure

    due to MJIT worker's known race condition.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67124 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f53548a86cec0ebe147c6ee4484fd8ccf0f42c79
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 16:25:54 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67123 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b1c1ee7183f6c9b6f585d35a5a8786594e1e7733
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 16:25:51 +0900

    change `cfunc->invoker` type for opt.

    * vm_insnhelper.c: change `call_cfunc_*` parameters order
      and specify a function type for the passed func ptr.
      This fix reduce the number of asm instructions, such as:
        # before this patch
        0000000000000110 <call_cfunc_0>:
         110:       48 89 fa                mov    %rdi,%rdx
         113:       31 c0                   xor    %eax,%eax
         115:       48 89 f7                mov    %rsi,%rdi
         118:       ff e2                   jmpq   *%rdx
         11a:       66 0f 1f 44 00 00       nopw   0x0(%rax,%rax,1)

        # after this patch
        0000000000000110 <call_cfunc_0>:
         110:       ff e1                   jmpq   *%rcx

      However, this kind of instruction reduction doesn't affect
      any performance because of great CPU architectures :p


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67122 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4af7f77d0ffe4371610143731e08f6e74314b4a1
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 15:43:11 +0900

    STATX_BTIME depends on filesystems

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67121 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit def040f6c330694e4f620a44b7790444d0f59157
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 15:35:44 +0900

    Skip EPERM, when statx(2) is wholely blocked

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67120 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1ae52fcddff2440ee96013c020c41844332fee38
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 15:22:24 +0900

    Skip EPERM, like as r67102

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67119 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit aa5dd6fe7ef58b4d10eb3192c342043fbe8be8cd
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 15:14:22 +0900

    STATX_BTIME depends on filesystems

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67118 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b9357e4d1b6f318d2ffa7323f14f01272ad336ee
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 15:07:30 +0900

    File#birthtime depends on the kernel version on Linux

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67117 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc90c4ec5da9e60c18785b3b4c393b5294009c1e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 15:01:08 +0900

    Support File#birthtime on Linux

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67116 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 607ecea7c9ca30ef4dbdadc72c9d32131946a069
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 12:08:38 +0900

    Unified rb_file_s_birthtime

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67115 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 67032770242c09f9280cd765ff93735b451856bb
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 05:59:12 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67114 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e15be8bade0a6a75c209eff3b96b4c4f03019a9
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 05:59:08 +0900

    refactoring compile.c.

    * compile.c: refacetoring:
      * initialize `branches` with Qfalse instead of 0.
      * make compile_call* functions from `iseq_compile_each0()`
        to make modifying them easy.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67113 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da7976235fbc2986925969646071bebe3702e49f
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 00:38:59 +0900

    Update to ruby/spec@7a16e01

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67112 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8e389a0f3226c90e96e02e6396686a3bef6a456
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 00:38:38 +0900

    * 2019-02-22

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67111 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 203d946781ce29069f56f259d455ffb3039315f5
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 00:38:37 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67110 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 92d3a7262468717757a3cf4ce24a5a6dd98f516a
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-22 00:38:36 +0900

    Update to ruby/mspec@2ee5661

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67109 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b94ce988b1a000325d47daa02e16dd487c4f27d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-21 16:32:24 +0900

    Constified

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67108 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 936b61d4acffc632608d1c1990b02e6a791107d0
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-21 16:03:12 +0900

    Path for AT_EMPTY_PATH must not be NULL

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67107 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 32f3961fd687d1096f444d09c78d7dcd247649d1
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-21 15:12:17 +0900

    * 2019-02-21

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67106 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7c369b78471e7c847cb4ffdbe95600bca55cabb5
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-21 15:12:13 +0900

    Separate fstatx_without_gvl from statx_without_gvl

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67105 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7c2bbd1c7d40a30583844d649045824161772e36
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 19:43:23 +0900

    Adjust the rubycop rules of Bundler upstream repository.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67104 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f08c9e2e073db205ec2bf2f5843117cb92ada68
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 18:55:25 +0900

    Do not test File class method

    It fails by EPERM for unknown reason.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67103 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cc6806c76c217354c6d1ad70585b033a00faa7a9
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 17:31:17 +0900

    Skip EPERM

    Docker's default seccomp whitelist does not include statx syscall
    by the default.  Skip this error for now.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67102 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c3e0244efe21a99cf81fb26a18b797e0e84b54a5
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 17:09:32 +0900

    Revise the example on OpenBSD

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67101 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8ed170961601a1becec56ffc0f0e7da1f9e56892
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 16:46:15 +0900

    fix rubyspec test to pass tests. please revisit it @nobu?

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67100 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e487e86e982a56ded6e5070aeef0d77655043216
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 16:34:05 +0900

    fix r67097 with cast

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67099 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f2d3b3623feb66b6ba59ecd866c40b531a3c5251
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 16:19:39 +0900

    Fix document and return value of `IO#autoclose=`

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67098 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 15a98ab42838be248a5b59ca342033ee338357ad
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 15:54:23 +0900

    Try statx syscall

    * file.c (rb_file_s_birthtime): export for pathname to check if
      birthtime is supported.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67097 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d034fcb13f04b096f99d1824d5e7dd8ed256713e
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 13:39:57 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67096 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b7f899681371358e84dbf230796a0a661217c2cd
  Author: marcandre <marcandre@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 13:39:56 +0900

    * spec/ruby: Tweak Enuemrator::Chain#rewind spec so that arity of block matches what is yielded

    Calling `and_yield(*args)` adds an implicit expectation that all the `args` are passed to a block that can accept them, even though blocks that are not lambda-like don't mind extra arguments.
    It so happens that this spec passed on Ruby 2.6.1 See [Bug #15613]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67095 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e80e9144f88bac3e2d8890c9e2fc22f5e391aff
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 13:27:24 +0900

    revert r67093 because it breaks tests

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67094 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 10deba066e207eb142e7b61b1479c8af4016b247
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 13:02:30 +0900

    Try statx syscall

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67093 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5210b89fd730815ba2510b09a890910a7995a4a1
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 00:39:37 +0900

    * 2019-02-20

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67092 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 193a06caf5b1fdbe9b4c6110314df03cab7145f5
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-20 00:39:35 +0900

    insns.def: opt_regexpmatch2 is not a leaf insn

    related: r66982
    Sadly opt_regexpmatch2 was not a leaf insn either.
    http://ci.rvm.jp/results/trunk-vm-asserts@silicon-docker/1751213

    CHECK_INTERRUPT_IN_MATCH_AT is just like RUBY_VM_CHECK_INTS, and it may
    call arbitrary Ruby method, for example a GC finalizer from postponed
    job in this case.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67091 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fe0f98e74746654c6b8bdd5203733ad01c732bde
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-19 14:45:00 +0900

    * 2019-02-19

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67090 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d3ff564779356be08274f851bf40f6a9b897fb6d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-19 14:45:00 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67089 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 88798f0787d9d4a331994332837e44f9fcc7bc5c
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-19 14:44:53 +0900

    file.c: enable File.birthtime on Linux

    enable File.birthtime on Linux if statx(2) is available.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67088 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f090b8d8238b2adc0bf05d003d4384769b63e12
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-18 22:33:26 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67087 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d04963501bc057685220fa1160fb9a102dd46d57
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-18 22:33:25 +0900

    Use ENV["BUNDLE_GEM"] instead of gem command provided by system ruby.

      It break the examples of bundler. Because some examples detect the
      different version of system ruby than test target version like trunk.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67086 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bef0c0a3678d07ce40f147051fba092ee30da640
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-18 18:53:13 +0900

    Fixup r66984. It breaks bundler's examples.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67085 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5c11d854110cd130a7b64e01b1e67bcf479ad886
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-18 18:46:28 +0900

    * 2019-02-18

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67084 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3661d0521fa2cf4cdf9efa51c69cad4ea93fa2b3
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-18 18:46:25 +0900

    The ruby core applied the difference structure from bundler upstream repository. We need to modify a configuration for test-bundler.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67083 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 124957566f041e5c6e8f678dfaf62cae381826dc
  Author: ktsj <ktsj@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-17 15:59:11 +0900

    .gdbinit (rp): follow up changes in r66390

    RHASH_ARRAY_{LEN,BOUND}_{MASK,SHIFT} have been renamed to
    RHASH_AR_TABLE_{SIZE,BOUND}_{MASK,SHIFT}.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67082 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1ce2ba32fb94aae94b7519a64e6330a6ff88c888
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-17 00:51:07 +0900

    * 2019-02-17

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67081 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e5347b1c905acc58d98f9497d8edcb0f78729db6
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-17 00:51:01 +0900

    Revert "Assert that union sizes match"

    This reverts commit r67078.
    It breaks armv7l-linux-eabihf and sparc-solaris2.11.
    http://rubyci.s3.amazonaws.com/scw-9d6766/ruby-trunk/log/20190215T061708Z.diff.html.gz
    http://rubyci.s3.amazonaws.com/unstable11s/ruby-trunk/log/20190215T072546Z.diff.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67080 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f450652becfaa6561399455a28211081704b0228
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-15 21:38:03 +0900

    Bump the benchmark-driver git ref to v0.14.13 (macOS memory runner support)

    [Fix GH-2082]

    From: Lourens Naud <lourens@bearmetal.eu>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67079 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 387e8967a37b269de221614d8f83060d5d713bcb
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-15 14:51:39 +0900

    Assert that union sizes match

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67078 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b1daba8227ef420247e0133ecf9bb5b647b891e0
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-15 00:29:08 +0900

    * 2019-02-15

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67077 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7570864267cb258e2d29881e37cb3b8a6930727a
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-15 00:29:04 +0900

    Introduce RVALUE_EMBED_LEN_MAX to remove a magic number

    * include/ruby/ruby.h: replace a magic number with RVALUE_EMBED_LEN_MAX,
      which indicates the number of VALUE elements can be embedded in a RVALUE.

    * internal.h: ditto.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67076 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cb57336e86dbe9c21fd8bc447912256843fe6b26
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-14 23:21:14 +0900

    GNU make does not need srcs_vpath

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67075 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4ae3df42f723d25b0fe4ba6b2689d607b01c6f48
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-14 21:59:03 +0900

    Merge RubyGems master@9be7858f7f17eae3058204f3c03e4b798ba18b9c

      This version contains the some style changes by RuboCop.

        * https://github.com/rubygems/rubygems/commit/9d810be0ede925fb2e3af535848582c3f8e0e72f
        * https://github.com/rubygems/rubygems/commit/61ea98a727fb1b76b6fac52d74107ee4b02aaef2
        * https://github.com/rubygems/rubygems/commit/795893dce3c5f8540804fc08144cc6a90f086b13
        * https://github.com/rubygems/rubygems/commit/9be7858f7f17eae3058204f3c03e4b798ba18b9c

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67074 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d1e6304a891fc5e9cc63e50520bdc798fb95b829
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-14 14:42:14 +0900

    Prefer relative directory from srcdir to top_srcdir

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67073 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4fc656a2f331a91a71208d5a426fce951fa5ca82
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-14 14:40:08 +0900

    Removed duplicate dependents

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67072 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7b8986f2e441f5f71ec9c375baf71ee06fa53130
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-14 00:48:36 +0900

    Cleaning gems should not clean ext

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67071 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bd8cb9f5d268881a49819a1996d3dffdb951168e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-14 00:34:08 +0900

    Parenthesize `for` to ignore errors

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67070 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4844a449405060892db4c407b12f141364d3142d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-14 00:20:50 +0900

    Suppress a warning

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67069 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 63ca54e7aa1be7e8cb2eb11881dbc5bb9cfccb37
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-14 00:19:28 +0900

    * 2019-02-14

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67068 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 43ee21f26dcf911450d5da9b3503eae0d7a87b76
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-14 00:19:26 +0900

    Ignore errors on cleaning

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67067 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f678332d8298e2c19d7c7daf19eeaf023f9a574f
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-13 21:02:08 +0900

    Consider END block

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67066 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 87b1d186f9456e0c8c716eb12c67bc3c6d54ac41
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-13 20:51:03 +0900

    Fix rb_bug message pattern list

    "Other runtime information" section depends on platforms.
    Make no expectation.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67065 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 00679d202d17bc629e02632801eac7c1bc7490c8
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-13 20:36:15 +0900

    Fix rb_bug message pattern list

    Each setions are separated by an empty line, and C level backtrace
    information format has been changed.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67064 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c6a2de302900784dd74106091c723862119bdeca
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-13 18:40:45 +0900

    check return value of `write` to suppress warning.

    * ext/-test-/gvl/call_without_gvl/call_without_gvl.c (do_loop):
      `-Wunused-result` compiler option (gcc?) checks checking
      return value of `write`.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67063 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb159b492f4c027d5068e17f0cd3360f31507878
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-13 13:49:36 +0900

    fix test for r67061

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67062 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a8c0f27276c16d4774f611ce2b1c793b92dcdc89
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-13 13:32:03 +0900

    Remove message to recommend to repot bug

    This message is showed on SEGV, but it is usually caused by 3rd party
    libraries and we don't help reporters well. I concluded this message
    doesn't help users as expected.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67061 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e20e67980e80bc83ca259bdf28e7247576fe742d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-13 13:25:00 +0900

    * 2019-02-13

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67060 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 698c55d32a0aa61a7db127f7f88e87b7717b41f2
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-13 13:25:00 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67059 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 74b19e330adbdae2d8e53b58f1a2a7b725e69c8d
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-13 13:24:59 +0900

    fix imemo entry description.

    * ext/objspace/objspace.c (count_imemo_objects): `imemo_type_ids`
      should be match with `enum imemo_type` in internal.h and this
      patch fix mismatch.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67058 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b2f424150909a4441e906161d729d871b899101e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-12 21:31:55 +0900

    Update dependencies, internal.h includes ruby.h

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67057 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da1f593acabd1d95b4567170ed886c1cd5f33b9a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-12 21:31:01 +0900

    Skip erb files, idirect prerequisites

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67056 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 29c9f4a590e8ad415fb88e4309ec5df8bcc868e3
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-12 21:15:30 +0900

    Replace versioned Unicode header paths with UNICODE_HDR_DIR

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67055 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91cb5c1a70b2f659b6ee1dad4ca7c658fe1e00f9
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-12 12:45:15 +0900

    fix empty Hash memsize.

    * gc.c (obj_memsize_of): ar_table ptr can be NULL (size == 0).


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67054 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9653f770ae359800dcd53b037fad5c07988717c2
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-12 06:57:13 +0900

    * 2019-02-12

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67053 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2f1bf4fae3206c9fb02b9966d546d4c96b3343cd
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-12 06:57:10 +0900

    Accept a third value for NaNs, as produced by the Sun Studio C Compiler

    * See http://rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-trunk/log/20190211T142523Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67052 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 63f990674bdf474f0ce88a23f0bc06b4443d3a94
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-11 22:43:14 +0900

    Use $(hdrdir) for include/ruby.h, as well as r67033

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67051 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 43a45b3fedcfc0b00ac6a0bafbcc49d8ab592671
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-11 12:06:10 +0900

    io.c: remove unused variable and fix typo

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67049 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0f79725a0d20182d749e6ad89785b9acfe5c50dd
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-11 11:13:04 +0900

    * 2019-02-11

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67048 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2d2a50961207307104ff16a49d07d6d3a91e0b24
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-11 11:12:54 +0900

    io.c: check HAVE_FCOPYFILE

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67047 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c84a25e14882a356bc37647a2acf1b6a9127283b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-10 19:42:50 +0900

    random.c: unify syscall with getrandom

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67046 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 944a158a650a27b3fcbcc17c58605850e89b2b75
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-10 17:21:39 +0900

    * 2019-02-10

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67045 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 61ffc7a0aeaa15a618f61c9df753543fa443df96
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-10 17:21:39 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67044 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1a8583de72e12e139e9c7fbcfc026c2cbf410519
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-10 17:21:33 +0900

    random.c: use getrandom() if available.

    getrandom() is supported by glibc 2.25 or later.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67043 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b1cb15c4a42575eb8ceb1c89256f37c662e20172
  Author: akr <akr@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-09 23:54:54 +0900

    new constant: Process::CLOCK_TAI.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67042 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5d490f6ef82062502aa5821cbd9ebe9b09871820
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-09 20:04:11 +0900

    * 2019-02-09

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67041 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b795f9bd36dcf71fd0495d493b23752b73f4950d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-09 20:04:09 +0900

    make-snapshot: try downloading Unicode files

    Remove empty UNICODE_FILES list to update Unicode files like as
    r67025, for 2.6 branch.

    [Bug #15593]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67040 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5133bfad5df57c3399d1ec13a33e944d90fd613b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 18:57:23 +0900

    enum.c: [DOC] tally does not take a block

    [Feature #11076]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67039 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1616dcb16ef34ebf4ffc2167292f9a779f3e121e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 18:49:49 +0900

    make-snapshot: try downloading Unicode files

    [Bug #15593]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67038 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0deeb1aeb6ab9c35454a64a4da0eeb587a4f2c65
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 17:47:42 +0900

    Call DRb.start_service with setup/teardown

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67037 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 74f94b3e6ebf15b76f3b357e754095412b006e94
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 16:22:55 +0900

    configure.ac: check finite,isinf,isnan as macros first

    [ruby-core:91487] [Bug #15595]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67036 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4578181509ffaafb1e872d6f49f551cc887b727d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 11:54:21 +0900

    Use assert_syntax_error

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67035 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 81fb05db9a09759e50b9b8004a89fd281d36bf67
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 11:54:20 +0900

    Suppress warning  [Feature #15575]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67034 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3d1c86a26f0c96a9c1d0247b968aa96e6f3c30bb
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 11:46:22 +0900

    Removed moving toplevel header since r12501

    Moving public headers was 12-years ago, no depend files would
    expect ruby.h in the top source directory now.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67033 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e6f8382a766a4e27e008d8cf753c6589a3eb6f85
  Author: headius <headius@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 02:29:16 +0900

    Replace outdated blockless proc call with block argument syntax

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67032 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 713279550ad33836e5d7bbbb5b801aa13def24dc
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 01:40:27 +0900

    Fix specs for yield in singleton class being deprecated

    * Use eval to trigger warning only when the method is called.
    * Suppress warnings and clarify this will be removed in 3.0.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67031 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 75334db3c6479ea3cd7462d36ca5464d386f9c72
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 01:35:33 +0900

    Update to ruby/spec@6cf8ebe

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67030 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5c7c6763f6cf7b4face107735071c5470e835476
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 01:35:05 +0900

    * 2019-02-08

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67029 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 820f99791eb813bd72ddce2f5b5c4173d3b69b7b
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-08 01:35:03 +0900

    Update to ruby/mspec@231e2ce

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67028 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6c574d4be4fa5bca86b0afb3a675ace3a8e29de6
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 23:58:37 +0900

    appveyor.yml: retry zlib downloads

    https://ci.appveyor.com/project/ruby/ruby/builds/22196846/job/53xvhv265f8eogl4

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67027 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8ca727d80f9b25046f85d6cd2e1f68d2fa001760
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 22:57:27 +0900

    test_rinda.rb: give up stabilizing this test

    on --jit-wait. It's randomly failing and it's unlikely to be detecting
    any MJIT's bug.

    https://app.wercker.com/ruby/ruby/runs/mjit-test2/5c5c2339940b5200f01a0822?step=5c5c2b9fcfa0fc000741d940

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67026 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 910b13fe51891cd6a7e2c391e9d9278f0a5b013a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 21:23:02 +0900

    Update Unicode files

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67025 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a67788b2f365d993c879ad0754f41bc64389459c
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 17:53:13 +0900

    Split procstat_vm.c

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67024 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 18365f9e83ef8f8402426024de4777f1f831ba37
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 17:53:12 +0900

    Split mt19937.c

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67023 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 867338c36ea8094b6c45ed3e081315c654fd3617
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 17:53:11 +0900

    Split dtoa.c

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67022 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7199685dc6741c08324adb31462657161499399f
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 17:14:12 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67021 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 673dc51c251588be3c9f4b5b5486cd80d46dfeee
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 17:14:10 +0900

    enum.c: Enumerable#tally

    * enum.c (enum_tally): new methods Enumerable#tally, which group
      and count elements of the collection.  [Feature #11076]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67020 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e0f1b514d2f78fe5ea17ddf240307cafbf47fccf
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 17:14:09 +0900

    enum.c: hoisted out enum_hashify

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67019 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fb84b86be0f2758bacfb6d04c13e5946f4179fa4
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 16:39:47 +0900

    * string.c (chopped_length): early return for empty strings

    [Bug #11391]

    From: Franck Verrot <franck@verrot.fr>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67018 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f27643e5eb464a6bd2c3b3ff3f2f7f165b14e1fb
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 15:56:15 +0900

    * 2019-02-07

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67017 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 58a415343963f0d1fe50b1f645463068dff6182b
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-07 15:56:13 +0900

    tool/test/test_jisx0208.rb: Use `require_relative`

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67016 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3104de4e16652b07ef818e09cfd4fc5874a66d20
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-06 09:11:08 +0900

    * 2019-02-06

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67015 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4c0e21add7c87b70df27fbff81d8f192a467556d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-06 09:11:04 +0900

    common.mk: allow brace expansion for benchmark targets

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67014 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 173ad5202b29f350b61c5f64d952ff96bbf7c98d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-05 20:45:52 +0900

    test_rinda.rb: extend timeout of wait_for as well

    https://app.wercker.com/ruby/ruby/runs/mjit-test2/5c5961adb18ed400951edeeb?step=5c596fd563e946000717df91

    see also: r67003

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67012 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c1f0daeb6ac5c5414c9a4a58bb778a118006ae1f
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-05 19:19:29 +0900

    Make sure to wait with IO.select before using Socket#accept_nonblock and recvfrom_nonblock

    * On all platforms, as this is the recommended code pattern.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67011 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 920b924e5652884064a9529ffbd80d458a46fbc6
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-05 18:58:50 +0900

    Make sure to wait with IO.select before using Socket#recvfrom_nonblock

    * On all platforms, as this is the recommended code pattern.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67010 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8552ee87b663e10d6c2265748f57a7d041face2c
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-05 18:50:11 +0900

    Pass the Array from select() to Socket.udp_server_recv

    * As mentioned in the documentation.
    * Use Array#size instead of #count, it's more common.
    * Use :unset, it clarifies things if the specs fails.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67009 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit af479d54dcd1ce4a02a1f73b3bcab9d30f164f2b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-05 15:00:25 +0900

    README.win32: [DOC] added modeline [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67008 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9d0b921a41ae3901f16750c2fb725885128379c1
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-05 13:58:47 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67007 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0fadb48498b3fee85aa02406b2119f9512c04ae3
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-05 13:58:46 +0900

    Ignore to add bundler lib directory if it is same as rubylibdir.

      [Bug #15469][ruby-core:90742]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67006 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 883d2d01335ead7fc0cb002543be587105b8d034
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-05 11:19:54 +0900

    * 2019-02-05

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67005 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c7628071b009e64a0c743e4a4edbed6b454e71fb
  Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-05 11:19:51 +0900

    Make sure to wait for socket to be readable.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67004 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 190a61e3a506c7d5fa145d6bfc8faa94b71953ef
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 17:20:05 +0900

    test_rinda.rb: increase timeout for --jit-wait CI

    https://app.wercker.com/ruby/ruby/runs/mjit-test2/5c57dbb6b18ed400951e3c74?step=5c57e8b963e94600070a5d61

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67003 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cc7dedfb4de1f47b2a1713cb7068f9d6ffc33152
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 17:17:44 +0900

    configure.ac: separate -std=gnu99 condition

    Also necessary on mingw, cygwin, darwin and netbsd.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67002 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit df2b8c05bac6414d5dae001310a09a2842910dcf
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 17:13:37 +0900

    Show proper location for warning [Feature #15575]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67001 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9acd2b20c8fa85fe2ca827dbba195f5f12a16df0
  Author: usa <usa@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 17:10:24 +0900

    Update requirements


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@67000 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0fc597f29c663bd785d3a7868a95340eecc7dc03
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 16:10:05 +0900

    check and show a warning for incorrect yield.

    * compile.c (check_yield_place): this function check the yield location.
      * show a warning if yield in `class` syntax. [Feature #15575]

      * do strict check for toplevel `yield`. Without this patch,
        `1.times{ yield }` in toplevel is valid-syntax (raise LocalJumpError
        at runtime) although toplevel simple `yield` is not valid syntax.
        This patch make them syntax error.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66999 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8bda94f78c959fbbcc17a99553b0c22396cabb96
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 15:28:57 +0900

    For this may be a syntax error (instead of LocalJumpError) in Ruby 2.7
    [Fix GH-2078]

    This patch is from Yutaka HARA <yutaka.hara+github@gmail.com>.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66998 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0c18a3d9826d59c3d02fbd49f84c9d69a706b670
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 15:12:27 +0900

    add debug code

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66997 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cc1dbb61e0c3344fc6e17fccf2b53e57ce844b9c
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 08:30:56 +0900

    io.c: get src_size from stp. Fix r66995.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66996 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3f0c966603c6ee1ccf4b37071dd586a1b0147433
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 06:04:12 +0900

    * 2019-02-04

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66995 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3fd9fa40364386174695856fe1bb2b6634eaa3c
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-04 06:04:04 +0900

    io.c: reuse results of fstat(2) in copy functions

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66994 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8cca079d3be8d07c261baea72529628469938245
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-02 19:41:22 +0900

    Fixup r66984. Update the location of bundler gemspec.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66993 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8f8b51c6ac54f476854e355a633dcfb49d9e4459
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-02 16:25:07 +0900

    README.win32: mention GIT as well as SVN

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66992 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c2781525ec517909b5441d392b139f95865ae3c1
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-02 16:18:50 +0900

    README.win32: update required commands and platform names

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66991 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 33d026034e68fefcc8a6615907e864d39da6a3fb
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-02 15:54:55 +0900

    rdoc.css: make label-list compact

    "Labeled Lists" section in lib/rdoc/markup.rb states labeled-list
    will be formatted in same lines.

    ```
    Notice that blank lines right after the label are ignored in labeled lists:

      [one]

          definition 1

      [two]

          definition 2

    produces the same output as

      [one]  definition 1
      [two]  definition 2
    ```

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66990 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc7e1baf5184a362377f303821eb6dacd369b006
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-02 15:38:10 +0900

    COPYING: reformat as RDoc

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66989 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 009144e8efd84ad0223c96a172929a8816266809
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-02 15:38:09 +0900

    NEWS: use note-list

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66988 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3f78209cd15f3e4532689e3fe1acce6938859dde
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-02 15:38:08 +0900

    README.win32: use label-list

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66987 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b01a7a3edcd05166d8ff1040fdf3d3c0c36cf919
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-02 15:17:35 +0900

    * 2019-02-02

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66986 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3dd0b616243aa5e46df2d8362aa86675d338655c
  Author: seki <seki@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-02 15:17:34 +0900

    fix: https://twitter.com/_ko1/status/1086167481922646016

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66985 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7c9771be02ddc707fea8ec96089c8a100c59f806
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 22:41:56 +0900

    Fixed gemspec location of bundler.

      FileCollector of rbinstall.rb requires location of gemspec under
      the sub-direcotry with the same name as default gems.

      I forgot to fix it with r66867.

      [Bug #15582][ruby-core:91374]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66984 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit adbdbff2df25865e8ba0453749097d960a2384b5
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 22:40:10 +0900

    README.win32: reformat as RDoc

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66983 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1f34da3709673a926483fe056185c41766a637da
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 20:52:06 +0900

    insns.def: opt_regexpmatch1 is not a leaf insn

    Given `str`, if `str_coderange(str)` is `ENC_CODERANGE_BROKEN`,
    it calls `rb_raise`. And it calls `rb_funcallv` from `rb_exc_new3`.

    http://ci.rvm.jp/results/trunk-vm-asserts@silicon-docker/1673244

    Maybe we can have a function to directly call `exc_initialize` for this
    purpose, but it may not be worth having such a function for keeping the
    instruction leaf. We may even want to delete the insn
    https://github.com/ruby/ruby/pull/1959.

    I'm not sure whether compile.c could generate opt_regexpmatch2 for
    invalid coderange string. Let's monitor that for a while.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66982 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 232f31ca12a94eb9f51182955285a4474f876af7
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 16:26:39 +0900

    on-smash canary detection

    In addition to detect dead canary, we try to detect the very moment
    when we smash the stack top.  Requested by k0kubun:
    https://twitter.com/k0kubun/status/1085180749899194368


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66981 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8a098051c58446db8be3dcaea3447ce83e16df99
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 15:29:02 +0900

    insns.def: mark exception-raising instructions non-leaf

    These instructions were missed before.  The stack canary mechanism
    (see r64677) can not detect rb_raise() because exceptions jump over
    the canary liveness check.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66980 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3c8ff424c63b6f581c64461bc4b5e13b8b0a710f
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 14:20:07 +0900

    vm_trace.c: trick rdoc for TracePoint#enable

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66979 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8555c53e74f6862086bde429a18dbe775f661395
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 14:11:14 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66978 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1bc6c3f40777ca10d8e7df38b775b0bb81a25881
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 14:11:08 +0900

    Revert r63383, r63248 "compile.c: copy a short insn with leave"

    When copying `leave` insn, TRACE also should be copied if it is
    present, but this optimization is trivial and not worth the
    complexity.  [ruby-core:91366] [Bug #15578]

    4cae5353c03009beb1e0a1619422072773580609
    5afd479de63b6609ddcd1510da94d2c1ac384f7f

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66977 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e826b7d39e0e1a58caa8554d8fe8426f919f726a
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 13:39:47 +0900

    _leaf_helpers.erb: some functions are not leaf

    If a function has rb_warning() that is not a leaf because warning
    ultimately is a method call of Warning#warn.

    If a function has rb_name_error() that is not a leaf because
    NameError is allocated, then initialized.  This of course
    involves calling NameError#initialize.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66976 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5d5427cb0720772c60e4d61511a7a723e0553fdf
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 10:31:36 +0900

    * 2019-02-01

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66974 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit af83a85f75389f646b753807c1136a7e591dec6a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-02-01 10:31:34 +0900

    Run r66972 assertion only when a sticky-bit makes sense

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66973 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cb5a32981404e1bd691978ad9e7ce6a824315995
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-31 23:02:30 +0900

    Fix exception namespace

    * lib/fileutils.rb (remove_entry_secure): EISDIR is under the
      Errno namespace.  [ruby-core:91362] [Bug #15577]

    From: Tietew (Toru Iwase) <tietew@tietew.net>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66972 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1f64192494e896277a8c72a9d0d53ebc93abe312
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-31 21:58:33 +0900

    Use _NSGetMachExecuteHeader() instead of _mh_execute_header

    _mh_execute_header is not accessible from a dylib unless libruby.dylib is
    built with -undefined dynamic_lookup. And using -undefined
    dynamic_lookup is not good style.

    Reported by Jeremy Huddleston Sequoia <jeremyhu@apple.com>
    Reviewed-by: Jeremy Huddleston Sequoia <jeremyhu@apple.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66971 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 857bbfd02c8c57b99c1f40311c507ca3bc2f16a6
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-31 14:36:17 +0900

    _insn_type_chars.erb: use C99

    Now that comma at the end of enum is allowed, we can write this much
    more straight-forward.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66960 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e20714062bf57efcbff0dd3162b148dd35312865
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-31 14:22:58 +0900

    _insn_operand_info.erb: use C99

    Same as r66957.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66959 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 971f965da9a9f8f7cea9bead6c883e79dfc5b715
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-31 14:00:41 +0900

    _insn_len_info.erb: add ASSERT_VM_INSTRUCTION_SIZE

    Also previous rb_vm_insn_len_info is now a function static variable.
    It seems nobody else is using it.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66958 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72e318f118d5cfde0e66a41acd3a2070fcaf4348
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-31 13:46:03 +0900

    _insn_name_info.erb: use C99

    C99 allows string literals of at least 4095 characters (cf: ISO/IEC
    9899:1999 section 5.2.4.1) so the previous complex struct layout is no
    longer necessary.  Just dump the verbatim memory contents we want.



    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66957 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 69431818f4166e0f2c35b8cec142e83bad603e13
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-31 13:35:15 +0900

    * 2019-01-31

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66956 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 03dc91facf4688398fac33d90766642a4e14742c
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-31 13:35:14 +0900

    test_iseq.rb: update expected error message

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66955 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba4d6ae75f3b4aa26c07046671edabb92359f300
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-31 13:35:13 +0900

    test_iseq.rb: enabled

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66954 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 15f8fb34fa82ecb4c20c7dde3d10ca4a3206c408
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-30 20:58:07 +0900

    Show the code in syntax assertions

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66951 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ea88f7ddf914a85b82f4c228a2e1278c55dff962
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-30 15:06:02 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66948 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f6cf042d2e348e73504258fe36f4bd27694a640
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-30 15:05:57 +0900

    enumerator.c: fix arith_seq_first for Infinity

    * enumerator.c (arith_seq_first): fix for Float::INFINITY.

    * test/ruby/test_arithmetic_sequence.rb: add tests.

    * numeric.c (ruby_float_step_size): export for internal use.

    * internal.h: add prototype declaration of ruby_float_step_size.

    [ruby-core:90937][Bug #15518]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66947 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1e3d642bfaf8f8c1a94687442cf51c897f8abdf
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-30 14:08:36 +0900

    hash.c: hoisted out st_index_hash

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66946 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a94b78e41833d0f6b4e9b566dca234dde4628230
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-30 13:54:01 +0900

    hash.c: hoisted out dbl_to_index

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66945 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 15530088b66031228b55715bfafb7957da747e9b
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-30 12:36:10 +0900

    * 2019-01-30

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66944 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ef17936bc526652d7f3e9dc681a850d58da30242
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-30 12:36:09 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66943 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d07d192881920b2b46899fec55bf18199bd71d31
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-30 12:36:06 +0900

    hash.c: remove repeated rb_hash_start

    * hash.c (rb_dbl_long_hash): remove repeated rb_hash_start as
      rb_objid_hash includes rb_hash_start,

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66942 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7fa16fd9624ca38f2d82c121a9af5f22c87e2697
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-28 22:32:32 +0900

    Fix `Module#const_defined?` on inherited constants

    [Fix GH-2061]

    From: manga_osyo <manga.osyo@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66938 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dd4fdb32bdbb68810fa77468157945a481bd85cc
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-28 20:53:54 +0900

    added assertion with method ref operator

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66937 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b5f906136d821bf015583abdf3b01352805da290
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-28 20:45:24 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66936 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2a4c87dc31b3774b8f8f2ab7b74f6d864f41a804
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-28 20:45:21 +0900

    Add refinements support to method/instance_method.

    [Fix GH-2034]

    From: manga_osyo <manga.osyo@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66935 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2210709b79222ecd2d9758f7316fdbd7c068ea84
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-28 14:04:17 +0900

    io.c: use fcopyfile(3) in IO.copy_stream if available

    fixed r66930.

    * io.c (nogvl_copy_stream_func): use fcopyfile(3) in IO.copy_stream if available

    * configure.ac: check copyfile.h and fcopyfile(3)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66934 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 774c60955a725e378caded5e074863ceddb27ca8
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-28 06:46:06 +0900

    Revert "io.c: use fcopyfile(3) in IO.copy_stream if available"

    This reverts commit bd670062c4e3a3c9fdfaaaf7bd3c232442a26a4c.
    It fails on rubyspec.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66933 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0c7768e63f8859ea996c99142eb0424e2255d91b
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-28 05:55:39 +0900

    * 2019-01-28

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66932 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f1a3be3565a04bbb1bb5658b340613585a871370
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-28 05:55:38 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66931 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bd670062c4e3a3c9fdfaaaf7bd3c232442a26a4c
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-28 05:55:26 +0900

    io.c: use fcopyfile(3) in IO.copy_stream if available

    * io.c (nogvl_copy_stream_func): use fcopyfile(3) in IO.copy_stream if available

    * configure.ac: check copyfile.h and fcopyfile(3)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66930 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 42921458ff7eacd1ef614c3e67596c75ccd0a1d4
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-27 22:12:39 +0900

    Update to ruby/spec@e57f49c

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66929 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a53ee2136ff59ebc54ae6c98a500765bc3d13d44
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-26 22:43:42 +0900

    * 2019-01-26

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66928 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 60023cf4521ce86803b9d328982e679962d448cc
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-26 22:43:32 +0900

    parse.y: trim newline in erred code

    * parse.y (parser_yyerror): trim a newline at the end of the erred
      code which was replaced with an extra space in the succeeding
      cursor line.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66927 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0a5b4c13ad16bacfa5659f7ac92eb7abf9416261
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-25 23:09:10 +0900

    vm.inc now in C99

    This changeset modifies the VM generator so that vm.inc is written in
    C99.  Also added some comments in _insn_entry.erb so that the
    intention of each parts to be made more clear.  I think this improves
    overall readability of the generated VM.

    Confirmed that the exact same binary is generated before/after this
    changeset.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66923 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 24b57b102c1992b679f8f8c0fd1a0239289a129b
  Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-25 15:49:59 +0900

    Upgrade CSV to 3.0.4


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66922 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cdca14e75e98e2657daa40589f18a0ad46846020
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-25 15:35:08 +0900

    * 2019-01-25

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66921 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit cee0c36a0890dd44efacf4ea0d37872fb3e903c6
  Author: kou <kou@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-25 15:35:04 +0900

    Upgrade RSS to 0.2.8


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66920 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6375c68f8851e1e0fee8a95afba91c4555097127
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-24 21:36:04 +0900

    parse.y: function parser_mixed_error & parser_mixed_escape

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66919 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7e68efbc9599550eadf5aa9a50bdc9a36796db49
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-24 20:43:11 +0900

    parse.y: remove an extra error message

    * parse.y (parse_string): bail out when word-list meets end of
      input not to show an extra "unexpected" error message after the
      preceding error.

          $ ruby -e "%w["
          -e:1: unterminated string meets end of file
          -e:1: syntax error, unexpected terminator, expecting ' '

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66918 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c6fb7c1f33e128618bcd7799a2de52874c7ebdd8
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-24 19:10:18 +0900

    eval_error.c: should not escapce newline and tab

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66917 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e608402019642719dd994728c15c8ef45f163d4d
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-24 14:30:45 +0900

    * 2019-01-24

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66916 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4bcfccddca1f2ffb72f435ef2e5eb393448a2dea
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-24 14:30:45 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66915 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 161ece479598629f4ace4fa23bfea7bc1331a8a0
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-24 14:30:42 +0900

    numeric.c: Fix negative step with float components

    * numeric.c (ruby_float_step): fix negative step with float components.

    * test/ruby/test_numeric.c (test_step_bug15537): add tests.

    * test/ruby/test_range.c (test_step_bug15537): add tests.

    [Bug #15537] [ruby-core:91101]

    From: shuujii (Shuji KOBAYASHI) <shuujii@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66914 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c56f61161a7baefb3d1ed3f815e5dc544b3accd6
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-23 18:39:45 +0900

    parse.y: token name of tSTRING_DEND

    * parse.y (rb_yytnamerr): show single-quoted single char as-is, to
      show a quoted closing brace as tSTRING_DEND.  e.g.:

          $ ./ruby -e '"#{true'
          -e:1: syntax error, unexpected end-of-input, expecting '}'

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66911 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 71342a46ac4244adb27a514f412aecd012e9ed40
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-23 18:08:22 +0900

    parse.y: token names

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66910 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1fae154c07b957278fd336b54256d5c57f21e0d5
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-23 15:06:47 +0900

    tmpdir.rb: permission of user given directory

    * lib/tmpdir.rb (Dir.mktmpdir): check if the permission of the
      parent directory only when using the default temporary
      directory, and no check against user given directory.  the
      security is the user's responsibility in that case.
      [ruby-core:91216] [Bug #15555]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66909 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 05c3256b2883000aab033737ef121a96b8009b81
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-23 08:22:10 +0900

    * 2019-01-23

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66908 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bcf85587b186bf92537ee5b456d2312a5dce9c9d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-23 08:21:58 +0900

    parse.y: literal add_mark_object

    * parse.y (set_yylval_str, set_yylval_literal): always imply
      add_mark_object.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66907 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bdbc8a8f1214b601ca409f66f2fe00ac06f2e99a
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-22 21:43:57 +0900

    Add more example of `String#dump`

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66906 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e64c54728d0d1db94f229feb59fd1bf2d60f686
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-22 16:25:08 +0900

    ripper.y: get rid of compile error

    yystpcpy is always used by yysyntax_error in bison 2.3, but may
    not used by other than yytnamerr in newer bison.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66905 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3dc6efbe9ca582d6930f25754a16043dedecfa6f
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-22 15:28:04 +0900

    Merge rubygems master targeted RubyGems 3.1.0.

      https://github.com/rubygems/rubygems/commit/1172320540c8c33c59fc1db5191b021c3b2db487

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66904 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 59a6215af65b3bfade13836681cbacc3294e6e78
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-22 15:24:59 +0900

    parse.y: enclose keyword token names by quotes

    * parse.y (rb_yytnamerr): strip enclosing double-quotes, same as
      the default yytnamerr except for that single-quotes matching
      back-quotes do not stop stripping.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66903 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e7d03531e109269e3aff7d9865bdf11f3308e67
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-22 10:56:35 +0900

    * 2019-01-22

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66902 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bac705529d358e512b6ce8b9ead6d776ab28486b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-22 10:56:26 +0900

    fix typo in r66836, missing '/'s

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66901 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f2d63385744da413cba482384d3bdbce288816a5
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 21:31:29 +0900

    benchmark/app_aobench.rb: complete commented code to write the image to a file

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66900 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 32e259f097a8dbae065d55c4d7b299e697a25f84
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 21:31:20 +0900

    benchmark/app_aobench.rb: remove extra printf arguments

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66899 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dfe69186042b2b28e32cb66240ecae820724e430
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 21:31:10 +0900

    benchmark/app_aobench.rb: move `srand(0)` at the top

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66898 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 502f159421cf3e35b9a62ade2a7e0fa2c53a7f21
  Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 19:56:29 +0900

    Improvements to documentation.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66897 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 62ec5eb01874472e2df9d871ef329d5a76b9c853
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 19:24:56 +0900

    parse.y: more token names

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66896 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 12afc11fcda570118c03e88cbb72521e33c38f78
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 19:11:04 +0900

    * io.c: use copy_file_range() if defined

    * configure.ac: check copy_file_range()

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66895 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6891a1cd5ddd9e5e07d537060a257abaa6833648
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 17:51:51 +0900

    string.c (rb_str_dump): Fix the rdoc

    * Officially states that String#dump is intended for round-trip.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66894 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8a294e0f20b0bf4df6528944aa4a4d5ea76b88de
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 16:29:00 +0900

    benchmark/app_aobench.rb: add `srand(0)`

    To prevent noise for benchmark result.  Just for the case.
    [Bug #15552]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66893 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit be3a0c7042583922befae8a11f08159607b28df9
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 16:13:32 +0900

    benchmark/app_aobench.rb: add a magic comment

    To support the change of default encoding.
    It had not worked correctly since 2.0 :-)
    [Bug #15552]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66892 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 90653369097d4942cb0d397d77cf9106c839cbfc
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 15:23:55 +0900

    * lib/net/http.rb: handle Errno::ETIMEDOUT in Net::HTTP#transport_request
      A patch from casperisfine (Jean byroot Boussier).
      [Fix GH-2012]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66891 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 954d0815e9fea323c5c6b6ba072c0aded845a9b1
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 10:11:57 +0900

    test_io.rb: skip test on MJIT to prevent random failure

    like this:
    http://ci.rvm.jp/results/trunk-mjit-wait@silicon-docker/1636642

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66890 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4487562da19a50eceedad8956a652a173c96aff6
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 06:25:08 +0900

    Update to ruby/spec@e2fbd4d

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66889 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6204e0804b24f1675b49d5880da014411bcfb831
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 05:38:57 +0900

    Update to ruby/spec@35a9fba

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66888 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 58573c33e4720315ed27491e31dcc22892e1ce95
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 05:38:27 +0900

    Update to ruby/mspec@e9a482d

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66887 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1c53f86bd9701abd6c6d3a787541e5c408f5aef9
  Author: stomar <stomar@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 00:07:17 +0900

    process.c: [DOC] small improvements

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66886 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f284eb3d54df6d1bb754986f9f5272136ff73466
  Author: stomar <stomar@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 00:06:11 +0900

    lib/securerandom.rb: [DOC] small grammar fixes

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66885 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6833fbcfafdf80908e75aa1d13b9aff70646294c
  Author: stomar <stomar@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 00:04:41 +0900

    time.c: [DOC] small improvement

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66884 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8fe427c1124601861cea4c00adfe625314b44f4b
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 00:02:08 +0900

    * 2019-01-21

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66883 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f9b298fe71614a8ceecba9eb78203a78e9fefb28
  Author: stomar <stomar@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-21 00:02:07 +0900

    vm.c: [DOC] small fix

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66882 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit afd68cd87114fb49158462f1594cacfd2b765e9b
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-20 13:44:25 +0900

    raise FrozenError instead of RuntimeError

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66875 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 27f51081d3b0a4bfb94df1153c005c9bc2c748ba
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-20 13:38:55 +0900

    * 2019-01-20

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66874 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 141ed2f6409184412b57461de3f759db2520b9c6
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-20 13:38:52 +0900

    [DOC] Refactors documentation for `Forwardable`

    [ruby-core:71281] [Misc #11639]

    From: Sam Morgan <s_morgan@me.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66873 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 46549d6b11eb88d02bd2ac4561ab3c7b775cd241
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-19 18:08:10 +0900

    Revert "mjit_worker.c: try to simplify CC_DLDFLAGS_ARGS"

    This reverts commit 405940234eb7876a063eb7129ca61fcc318a633c.

    Not working on MinGW
    https://ci.appveyor.com/project/ruby/ruby/builds/21737578/job/09a2tr94vof6fstt

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66872 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e90d826de7d661ef091761bf7d13c9fc70a9d956
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-19 16:49:47 +0900

    Indented here document (<<~) is Ruby 2.3 feature

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66871 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 405940234eb7876a063eb7129ca61fcc318a633c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-19 16:35:30 +0900

    mjit_worker.c: try to simplify CC_DLDFLAGS_ARGS

    assuming that -nostartfiles is just optional for mingw, cygwin, and AIX.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66870 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a5de8d1ccb98c3d1ea50159f5937b3429ff91c42
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-19 16:26:59 +0900

    mjit_worker.c: do not use GCC_NOSTDLIB_FLAGS for OpenBSD

    OpenBSD's GCC compiler has local extensions that break when
    `-nostartfiles -nodefaultlibs -nostdlib` is used.

    From: Jeremy Evans <merch-redmine@jeremyevans.net>

    [Bug #15548]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66869 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 31c862a775c8ca05c4f2f8001d32690e9e7f8e28
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-19 12:36:25 +0900

    * 2019-01-19

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66868 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c52ca1f2ffcc8beeec043a9fa44004de59e1bb4c
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-19 12:36:22 +0900

    Revert r58345 and r58371.

      These changes break the behavior of default gems. Bug #13428 says
      r58345 is reasonable because gemspec file is installed by `to_ruby_for_cache`
      method. But I revert `to_ruby_for_cache` in rbinstall.rb at r58403.
      There is no reason that we apply r58345 now.

      But I'm not sure about gemspec of default gems affects standalone gems.
      I'm going to investigate it on rubygems/rubygems.

      [Bug #15500][ruby-core:90867]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66867 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c20aae965e2e79fcf4c443b266f7012157d5b23b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 18:52:50 +0900

    Prefer block_given? to iterator?

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66866 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 17aeff3e77e6fe0d37a9943dd93bcb16c4bb9f66
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 18:31:32 +0900

    make-snapshot: get rid of circular dependency

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66865 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c4e832bf6fa605234afee1fa91f0df93bc1a31c8
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 15:13:10 +0900

    configure.ac: fix build_os name

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66864 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3859b77be1141fef50688da3aa70502d1864504c
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 14:14:59 +0900

    configure.ac: use MINIRUBY as BOOTSTRAPRUBY on msys

    Msys shell may not be able to run a command with a drive letter?

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66863 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7a86165d43829ed4a464dc9b14e48ffb0d1a6798
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 11:36:14 +0900

    [DOC] mention rb_str_modify

    [ruby-core:91134] [Bug #15543]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66861 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b4ab9c0e3214c619f2025fb19ff8e010d99112eb
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 11:04:41 +0900

    support older BASERUBY for btest.

    * bootstraptest/test_insns.rb: check RbConfig::LIMITS to support
      older BASERUBY.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66860 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3c55a0b942be7c2f9e76cfd71f320ce1432c39aa
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 10:55:25 +0900

    configure.ac: use BASERUBY as BOOTSTRAPRUBY if available

    MINIRUBY may not be stable enough to run btest, in developing.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66859 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6b5695fef9a99421a61c236c2118f793f6e4559b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 08:52:58 +0900

    make-snapshot: make permissions uniform

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66858 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dabbdcfd6d10e6853554b6224d962adfade53adf
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 08:23:19 +0900

    * 2019-01-18

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66857 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 92c6072ef4183021b57ccbd3fbd7fefc17952866
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-18 08:23:14 +0900

    rbinstall.rb: add --exclude option for install-nodoc

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66856 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f550da512cefbe0283106ca839c4836a98efaf3a
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-17 22:45:48 +0900

    Removed old gemspecs of default gems for the Ruby committers.

      [Bug #12764][ruby-core:77284]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66844 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 367fdd1aee07bd856612e9d796f301e1f1d5a30b
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-17 16:52:47 +0900

    reset bound if the size is 0.

    * hash.c (RHASH_AR_TABLE_SIZE_DEC): generally, we need to check all
      entries to calculate exact "bound" in ar_table, but if size == 0,
      we can clear bound because there are no active entries.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66843 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 07298ea2094bca6f847e7b0c82e3c7059ff745e3
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-17 10:36:21 +0900

    support btest on older ruby.

    * bootstraptest/runner.rb (assert_normal_exit): check MJIT first
      to support btest with ruby ~2.5. btest (bootstraptest) should be
      enable to run with stable ruby interpreter because modified ruby
      may not able to run runner.rb and we need to know why (this is why
      we introduce btest).


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66842 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0280bef3417350a0932c084c8dc7a3db86ec93c2
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-17 09:36:10 +0900

    * 2019-01-17

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66841 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d25a27abba89ade8039cc8baabce19e34865ee89
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-17 09:36:08 +0900

    call rb_str_modify to make a copy unshared

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66840 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d1417ff8fabe8a99dc6c21830b7b3169bb03aa64
  Author: shirosaki <shirosaki@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-16 23:06:37 +0900

    dir.c: fix Dir.glob with braces and matching dir

    * dir.c (join_path_from_pattern): add the last slash for directory
      matching.

    * test/ruby/test_dir.rb (test_glob_recursive_directory): add a test
      for above.
      [ruby-core:91110] [Bug #15540]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66838 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 74477ec2b3904a0f39f11294d2bb336fb73586df
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-16 11:09:48 +0900

    Strip warnflags

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66836 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d0318b8cfdc9dfd357b30b4394e5af9831de215d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-16 10:35:28 +0900

    Revert r65800

    "Makefile.in: reconfig with the original warnflags"
    It would be unnecessary since r65803 and r65805.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66835 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 98e218b69a51fe20926d86dc1b02f4b8ca2ee601
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-16 09:48:46 +0900

    * 2019-01-16

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66834 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 923d03e10cd1446e53e56c7659c1b8c35eb155b1
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-16 09:48:42 +0900

    Fixed a typo, missing `$`

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66833 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ab2547d786572f4c14e0d849f5f64f006425c5ba
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-15 23:19:19 +0900

    st.c (rb_hash_bulk_insert_into_st_table): avoid out-of-bounds write

    "hash_bulk_insert" first expands the table, but the target size was
    wrong: it was calculated by "num_entries + (size to build insert)", but
    it was wrong when "num_entries < entries_bound", i.e., it has a deleted
    entry.  "hash_bulk_insert" adds the given entries from entries_bound,
    which led to out-of-bounds write access.  [Bug #15536]

    As a simple fix, this commit changes the calculation to "entries_bound +
    size".  I'm afraid if this might be inefficient, but I think it is safe
    anyway.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66832 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 10d85b19da5a9c94c5e7af16c53679981aee963b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-15 22:52:38 +0900

    Clarify Array#- and Array#difference documentation

    Currently we are not explicit enough regarding the potentially confusing
    behavior of `Array#-` and `Array#difference` when it comes to duplicate items
    within receiver arrays.

    Although the original documentation for these methods does use an array with
    multiple instance of the same integers, the explanation for the behavior is
    actually imprecise.

    > removing any items that also appear in +other_ary+

    Not only does `Array#-` remove any items that also appear in `other_ary` but
    it also remove any instance of any item in `other_ary`.

    One may expect `Array#-` to behave like mathematical subtraction or difference
    when it doesn't. One could be forgiven to expect the following behavior:

    ```ruby
    [1,1,2,2,3,3,4,4] - [1,2,3,4]
    => [1,2,3,4]
    ```

    In reality this is the result:

    ```ruby
    [1,1,2,2,3,3,4,4] - [1,2,3,4]
    => []
    ```

    I hope that I've prevented this potential confusion with the clarifications
    in this change. I can offer this as evidence of likeliness for confusion:
    https://twitter.com/olivierlacan/status/1084930269533085696

    I'll freely admit I was surprised by this behavior myself since I needed to
    obtain an Array with only one instance of each item in the argument array
    removed.

    [Fix GH-2068] [ci skip]

    From: Olivier Lacan <hi@olivierlacan.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66831 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d7976d145193379d8c43f33e9a5714292a40d994
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-15 21:05:46 +0900

    Use `&` instead of `modulo`

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66830 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d154bec0d5f0dd32e0d30559ab8a0a7ed8be98d2
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-15 15:41:58 +0900

    setbyte / ungetbyte allow out-of-range integers

    * string.c: String#setbyte to accept arbitrary integers [Bug #15460]

    * io.c: ditto for IO#ungetbyte

    * ext/strringio/stringio.c: ditto for StringIO#ungetbyte



    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66824 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e84537d32c3e2f21071384e2c967fe0308d408d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-15 13:02:53 +0900

    Revert "mjit_worker.c: try passing -nostdlib to AIX"

    This reverts commit b32fb23083912c37a2601c66531ed786a7c9f3e5.

    This didn't work on AIX.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66823 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a01f2f0abd2691270e71cf2374607c2ca4bbce5f
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-15 12:43:47 +0900

    * 2019-01-15

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66822 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 01d63239e40902bcdc2effa91a9707132290f3ed
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-15 12:43:44 +0900

    Suppress warning: ambiguous first argument; put parentheses or a space even after `/' operator

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66821 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad10418eab9c70f188d8735ccd1e6f2e160c64e2
  Author: nagachika <nagachika@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-14 20:04:52 +0900

    update redmine-backporter to catch up Redmine 4.0. [ci skip]

    tool/redmine-backporter.rb: change revision resource URL.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66820 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4d727639b45a43e73ec8588e837f74315dafa619
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-14 19:16:54 +0900

    ast.c: fix missing head part in dynamic literal

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66819 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ec3cdb34ce6f19be7a6d887357fd1763f97992d1
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-14 16:28:34 +0900

    mjit_worker.c: pass -nostdlib when making pch as well

    [Bug #15513]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66817 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b32fb23083912c37a2601c66531ed786a7c9f3e5
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-14 15:45:24 +0900

    mjit_worker.c: try passing -nostdlib to AIX

    r66812 might have allowed this. Testing.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66816 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d14089fb3cef922a0c3a61661fd1c92bd083e991
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-14 15:18:53 +0900

    mjit_worker.c: pass -lgcc to GCC platforms

    using `-nodefaultlibs -nostdlib`.

    I assume libgcc is needed when we use -nostdlib, and it's linked on some
    platforms but not linked on some platforms (like aarch64, and possibly
    AIX as well) as said in https://wiki.osdev.org/Libgcc :

    > You can link with libgcc by passing -lgcc when linking your kernel
    with your compiler. You don't need to do this unless you pass the
    -nodefaultlibs option (implied by -nostdlib)

    Also note that -nostdlib is not strictly needed (rather implied
    -nodefaultlibs is problematic for Gentoo like Bug#15513, which will be
    approached later) but helpful for performance. So I want to keep it for
    now.

    [Bug #15522]

    I'm not trying to add `-nodefaultlibs -nostdlib` for AIX in this commit
    because AIX RubyCI is dead right now, but I'll try to add them again
    once RubyCI is fixed.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66812 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d89d1d468779ccea52d9b8da4f9d967543d28723
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-14 14:50:13 +0900

    mjit_worker.c: untangle CC_LIBS nesting

    This should have no impact.
    The CC_LIBS was too hard to read for human.

    I don't remember whether the order of -lmsvcrt and -lgcc matters or not,
    but I kept that for the best safety.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66811 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b4bc6ccb4ebf8be89ae0a7fa5f7e764a1cefac86
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-14 13:49:32 +0900

    * 2019-01-14

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66810 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4840771afb158c544d583384404d33dcb4405afe
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-14 13:49:28 +0900

    vm_insnhelper.c: make VM helpers inline

    In r66597, both VM and JIT seem to be made slower:

    ```
    $ benchmark-driver benchmark.yml --rbenv 'r66596::before --disable-gems;r66597::after --disable-gems;r66596+JIT::before --disable-gems --jit;r66597+JIT::after --disable-gems --jit' -v --repeat-count 24
    r66596: ruby 2.7.0dev (2018-12-28 trunk 66596) [x86_64-linux]
    r66597: ruby 2.7.0dev (2018-12-28 trunk 66597) [x86_64-linux]
    r66596+JIT: ruby 2.7.0dev (2018-12-28 trunk 66596) +JIT [x86_64-linux]
    r66597+JIT: ruby 2.7.0dev (2018-12-28 trunk 66597) +JIT [x86_64-linux]
    Calculating -------------------------------------
                                 r66596      r66597  r66596+JIT  r66597+JIT
    Optcarrot Lan_Master.nes     55.174      54.620      88.011      85.326 fps

    Comparison:
                 Optcarrot Lan_Master.nes
                  r66596+JIT:        88.0 fps
                  r66597+JIT:        85.3 fps - 1.03x  slower
                      r66596:        55.2 fps - 1.60x  slower
                      r66597:        54.6 fps - 1.61x  slower
    ```

    This commit makes JIT's situation a little better. But in 2.7 we seem to
    have some other regressions after that, and this can't still resurrect the
    2.6.0's performance.

    ```
    $ benchmark-driver benchmark.yml --rbenv 'before::before --disable-gems;after::after --disable-gems;before+JIT::before --disable-gems --jit;after+JIT::after --disable-gems --jit' -v --repeat-count 24
    before: ruby 2.7.0dev (2019-01-13 trunk 66808) [x86_64-linux]
    after: ruby 2.7.0dev (2019-01-13 trunk 66808) [x86_64-linux]
    last_commit=vm_insnhelper.c: make VM helpers inline
    before+JIT: ruby 2.7.0dev (2019-01-13 trunk 66808) +JIT [x86_64-linux]
    after+JIT: ruby 2.7.0dev (2019-01-13 trunk 66808) +JIT [x86_64-linux]
    last_commit=vm_insnhelper.c: make VM helpers inline
    Calculating -------------------------------------
                                 before       after  before+JIT   after+JIT
    Optcarrot Lan_Master.nes     51.710      51.535      83.629      85.486 fps

    Comparison:
                 Optcarrot Lan_Master.nes
                   after+JIT:        85.5 fps
                  before+JIT:        83.6 fps - 1.02x  slower
                      before:        51.7 fps - 1.65x  slower
                       after:        51.5 fps - 1.66x  slower
    ```

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66809 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit edb65a6254a1e06bb2155678676d6798acd7a51e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-13 22:49:25 +0900

    rdoc: ignore gemspec files

    [ruby-core:91067] [Bug #15531]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66808 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 71d2695d1725270caa1301ab39689c5a6e7e7072
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-13 22:41:36 +0900

    rdoc: fixup the test for r66806

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66807 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0fb782ea28b61035d56a8fb1f32754a18f2cee60
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-13 22:16:56 +0900

    rdoc: ignore garbage files

    * lib/rdoc/options.rb (RDoc::Options#init_ivars): exclude backup
      files by default.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66806 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6feee125b96cd03794fd670ad02ba16ce7120b0d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-13 22:16:55 +0900

    common.mk: common rdoc variables

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66805 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 665d9a4331059687e87a6e9c6c1ce9d39b48c35a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-13 13:36:45 +0900

    time.c: separate sign argument

    * time.c (vtm_add_offset): separate sign argument to get rid of
      repeated negations.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66804 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 019c891508334d0437140ac12badbceab86827bd
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-13 12:31:01 +0900

    time.c: do not set utc_offset in vtm_add_offset

    * time.c (vtm_add_offset): just add offset to other components
      only.  removed subtraction of utc_offset as it is overwritten
      always immediately in callers.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66803 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 128b6577b337e240f6e5141b9fbf380cd4d4d11a
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-13 12:27:18 +0900

    * 2019-01-13

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66802 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6d18187371c0b90eae41cea18f829363bd61e5f1
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-13 12:27:16 +0900

    Fix remaining syntax errors in Binding#irb docs

    Apologies for catching those so late.

    [Fix GH-2067] [ci skip]

    From: Olivier Lacan <hi@olivierlacan.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66801 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ad0ba0dc2739ebf54dd6df3e0f1d7bbe4712449f
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-12 21:39:41 +0900

    trivial fix r66778 [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66798 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4e28fdf417fcd2d9492277b46a556264ab9ba0de
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-12 18:36:52 +0900

    No FloatDomainError at non-finitive number if exception: false

    [ruby-core:91021] [Bug #15525]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66797 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 62c17a2f21b47243071075cbef37fe72b6ecd0ff
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-12 14:02:58 +0900

    No TypeError at nil if exception: false

    [ruby-core:91021] [Bug #15525]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66796 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 52a97e36d09ae15800c2a52094759c18e7be4ee0
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-12 13:53:13 +0900

    * 2019-01-12

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66795 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 056c24d3987e8608ebdddba864f112241ec21992
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-12 13:53:09 +0900

    RbConfig::CONFIG never had "exeext"

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66794 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0a5655a5be8a7447ca895a6e15a17fb2076d3f34
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 18:36:49 +0900

    Drop whole examples

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66793 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8197abf9aada88fd46bd6898bee21449ace9efaf
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 17:44:41 +0900

    Fix r66791

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66792 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d03771d85a77fb85d17bb072618e78a910beb594
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 16:50:23 +0900

    Fix r66772

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66791 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e4f46eabab70bfcde67f0032a902433d11afc166
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 13:58:33 +0900

    Fix make-snapshot for trunk

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66790 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bdc36b360ea093e51cae4f983752bf077982fde0
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 10:18:59 +0900

    Ensure to terminate the child

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66789 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d95b13ead18a22cf7328064f9a29c7de72bf8103
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 02:28:13 +0900

    Update refinements docs

    Co-Authored-By: Vladimir Dementyev <dementiev.vm@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66788 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dd67af4892d7e498357e0e5fbb58512a26367080
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 00:42:44 +0900

    addr2line.c: fix -Wextra-semi

    and ignore only -Wgnu-empty-initializer.
    https://travis-ci.org/ruby/ruby/jobs/477867392

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66787 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d74fc1b17548cc98b8a545b6c655f06e493a806e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 00:02:35 +0900

    addr2line.c: do not suppress -Wpedantic

    because it was for "-assi -Wpedantic" on Travis, but we changed the
    Travis build to "-std=c99 -Wpedantic".

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66786 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1e19973d98e24768506cc5d2198f92c12e03476b
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 00:00:42 +0900

    * 2019-01-11

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66783 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 299e9cd91a97fb298632d4c9a91723cffb5fd6ac
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-11 00:00:40 +0900

    revert r66768 for Ruby 2.7 due to Misc#15347

    It's safer to backport r66768 to 2.6 branch, but for 2.7 it's not
    needed anymore.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66782 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d31cbd4ff99c609f5a1b6b0ccf890c603db02e86
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 23:55:24 +0900

    test_jit.rb: change format of test error output

    to avoid breaking redmine quote like
    https://bugs.ruby-lang.org/issues/15522

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66781 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bb44d9ecf035f2dac47606c50f7e797c79a5a367
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 23:44:11 +0900

    configure: refuse to build with jemalloc when header is missing

    [ruby-core:90964] [Bug #15520]

    Freom: Misty De Meo <mistydemeo@github.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66779 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 56bf732aaf5a109964b0297b2158372de2e3ae97
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 23:31:18 +0900

    mjit.c: use boolean type for boolean variables

    and functions to clarify the intention and make sure it's not used in a
    surprising way (like using 2, 3, ... other than 0, 1 even while it seems
    to be a boolean).

    This is a retry of r66775. It included some typos...

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66778 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit efd99b533177d429dbc64ababfe342ebbd3f6502
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 22:29:29 +0900

    Revert "mjit.c: use boolean type for boolean variables"

    This reverts commit bb1a1aeab0f2a5fe437c89b841a887ba56653453.

    We hit something on ci.rvm.jp, reverting until investigation is done.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66776 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bb1a1aeab0f2a5fe437c89b841a887ba56653453
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 22:21:58 +0900

    mjit.c: use boolean type for boolean variables

    and functions to clarify the intention and make sure it's not used in a
    surprising way (like using 2, 3, ... other than 0, 1 even while it seems
    to be a boolean).

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66775 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5da9bd0ee5b9a4faf503942b803b8b54b70c98ee
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 21:41:06 +0900

    test/ruby/test_method.rb: Remove unreachable call

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66774 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bfb684c0295e4527ba6b494834d783d878c2ca93
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 17:22:23 +0900

    NEWS: announce C99 requirement [ci skip]

    [Misc #15347]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66773 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9f1fb0a17febc59356d58cef5e98db61a3c03550
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 17:19:14 +0900

    proc.c: proc without block

    * proc.c (proc_new): promoted lambda/proc/Proc.new with no block
      in a method called with a block to a warning/error.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66772 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ec336fb40e4df0c8615e584fbefb5e9e572cb9ec
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 17:04:35 +0900

    configure.ac: Require C99

    We already added AC_PROG_CC_C99 in r66605.
    This commit stops warning C99 features.

    [Misc #15347] [close https://github.com/ruby/ruby/pull/2064]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66771 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dfdd0e1d08fce51c563d69f15067bf2495158a2b
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 16:59:18 +0900

    .travis.yml: allow C99 on pedanticism build

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66770 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 33a75edd3cf6062796043ae75747b4b191db3789
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 15:01:32 +0900

    proc.c: check if callable

    * proc.c: check the argument at composition, expect a Proc,
      Method, or callable object.  [ruby-core:90591] [Bug #15428]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66769 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 671ef4e9e3d8cb3c397547934902a6a4fd312816
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 09:36:28 +0900

    Get rid of C99 feature for now [ruby-core:90949] [Bug #15519]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66768 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5577a8776ebcd801122f52d612285faee1dde0f2
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 08:04:00 +0900

    insns.def (duparray, duphash): add dtrace hooks

    They are considered Array and Hash creation events, so
    allow dtrace (and systemtap) to track those creations.

    Co-Authored-By: Eric Wong <e@80x24.org>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66767 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f17fa6c1935cfa145c41844f8d1faa47f532689
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 04:11:35 +0900

    * 2019-01-10

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66766 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3dbe84e12b3ebe95187edc3a5e9fe2f373a0388
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-10 04:11:32 +0900

    add setter of iter_lev.

    * hash.c: add special setter function (inc and dec).

    * internal.h: constify RHash::iter_leve.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66765 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 140f8b94ced86966fc6979e8cfc5ef3bfa68da5d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-09 23:04:21 +0900

    class.c: refactor class_instance_method_list

    * class.c (class_instance_method_list): gather singleton and
      extended methods first separately from ancestors.
      [ruby-core:90872] [Bug #15501]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66764 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 347f3f30d6743e8b7cd133ae298c0290f2ef3a1d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-09 22:58:51 +0900

    time.c: update error message for invalid utc_offset

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66763 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 78d6e3370238c47d5933703fb55d5ab9e8bc4692
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-09 22:58:49 +0900

    Fix styles [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66762 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit df0faba1ff958590a02fd668afbf2b525e845b54
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-09 21:55:21 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66761 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 730f2886b535709832494ebe8c98f88ba0a29cea
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-09 21:55:20 +0900

    Follow behaviour of IO#ungetbyte

    see r65802 and [Bug #14359]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66760 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bc27f87889934099f1b8b17512c634b615062e22
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-09 17:43:50 +0900

    Remove duplicate macro definition

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66759 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc9e0302ea6756e0ea95dbc11216a3a776ad16a6
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-09 16:05:37 +0900

    complex.c: optimize zero check for Float

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66758 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f7c0abeaeaba157b6535b397a4fd551e204608d3
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-09 04:22:11 +0900

    * 2019-01-09

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66757 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79c150f8a5af9ad555262646fb9631ac40f0c23f
  Author: tenderlove <tenderlove@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-09 04:22:05 +0900

    Mark array as "going to be modified" in `Array#reject!`

    Before this patch, if `reject!` is called on a shared array it can
    mutate the shared array rather than a copy.  This patch marks the array
    as "going to be modified" so that the shared source array isn't
    mutated.

    [Bug #15479] [ruby-core:90781]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66756 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e9dc6f6076207f84a93ae917ca682d7d2c973f86
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-08 19:53:43 +0900

    Check by #name [ruby-core:90853] [Bug #15497]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66755 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 497075b3a1b2021f882f13b86b1e96dc87513d6f
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-08 18:08:37 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66754 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 50784a0a4412df551d96dd01067473cd4226481b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-08 18:08:31 +0900

    Defer escaping control char in error messages

    * eval_error.c (print_errinfo): defer escaping control char in
      error messages until writing to stderr, instead of quoting at
      building the message.  [ruby-core:90853] [Bug #15497]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66753 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e52b102c36dc1dd609a97149e99edc7d1f96b7a4
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-08 16:45:04 +0900

    Test for "%p" in Time.strptime

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66752 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bbd1e83e5aa15f2f5fd3afa569de04bbd9c21eec
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-08 13:53:06 +0900

    complex.c: replace misused UNLIKELY with LIKELY

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66751 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1e87935958c0afc9e953079e99eb628865e55820
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-08 13:37:44 +0900

    * 2019-01-08

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66750 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2b9c6e1a8a1aa94ed8d300368abb4247cfb24d87
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-08 13:37:40 +0900

    range.c (range_last): disable optimization when each is redefined

    Do not use the optimized version of Range#last when Range#each is
    redefined.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66749 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8371a9a4ceea32f8e76f3d867722b42e5477fba1
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-07 16:03:23 +0900

    time.c: support military time zone names

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66747 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4f9ab3a01a475f5236632575fa4d3a6b6aef7d15
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-07 15:59:46 +0900

    time.c: UTC and Z timezones should be utc

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66746 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da1f9199bd659f6277d53cc41f6007911fb3a9c5
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-07 15:01:49 +0900

    Bump version to date-2.0.0.

      I forgot to change it when Ruby 2.6.0 was released.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66745 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a288ff502ed5267898fd8e38d291c611befe7f0b
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-07 13:49:34 +0900

    complex.c (f_divide): canonicalize a quotient

    Canonicalize resultant real and imaginary parts when complex number
    divided by non-complex number.

    [Fix GH-2065] [Bug #15505] [ruby-core:90891]

    From: Joe Peric <peric.joe@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66744 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 72ad092960c413b6a5687c552747b20a5ed78b22
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-07 11:05:21 +0900

    Time.strptime benchmarks

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66743 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9e3ffd41f5aa697bcfd2adac29498755f095d4a3
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-07 10:58:05 +0900

    Select ruby to run benchmarks with BENCH_RUBY

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66742 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 26ea03c04fdcd282d499b762017d78d8c06e68e5
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-07 00:46:22 +0900

    * 2019-01-07

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66741 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d41fb6ce0b35e197b98ca441b05011d28577ddc2
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-07 00:46:21 +0900

    benchmark/range_last.yml: remove needless prelude

    [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66740 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d8931259d0bfd8f4d97402250488a590be2a4453
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 23:53:43 +0900

    internal.h: unify our own stdtbool.h implementation

    because we had another one in missing/stdbool.h as well.
    Assuming that _Bool does not exist when stdbool.h is absent, I'm in
    favor of r57462 implementation rather than r61326.

    Note that Visual Studio 2013 has stdbool.h and thus r57462's commit
    message is somewhat misleading. This missing/stdbool.h is for Visual
    Studio 2012 or older, and for Oracle Solaris Studio 12.2 or older because
    it's added in 12.3 https://docs.oracle.com/cd/E24457_01/html/E21987/gkeza.html.

    missing/stdbool.h: ditto.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66739 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d9699fadf8b7031fb92854106d7703b8370eb95f
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 20:41:12 +0900

    simplify filename-related code

    (Thanks to Nobuyoshi Nakada for the hint!)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66738 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b991ccc2103eb468cc663a1263750fb86d0745ae
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 16:50:18 +0900

    add logic to handle Unicode beta period file names

    In downloader.rb, add logic to handle file names of the form
    UnicodeData-12.0.0d6.txt. To find the right file, we download
    the index of the directory. Then we download the files by finding
    the file names from the index. Files are always checked for changes,
    because changes might be frequent during the beta period.
    We also check whether any index.html files are left when we are not
    in the beta period. This would indicate that we might have stale
    data from the beta period rather than the actual release data.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66737 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit dd3ed41cd03f37da856e0af764d8cc8aec952531
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 14:07:10 +0900

    ast.c: argument must be a string

    [ruby-core:90904] [Bug #15511]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66736 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6629588aa555a21a6849f3b093c21fedf9880c23
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 13:36:56 +0900

    Fix mday overflow

    [ruby-core:90897] [Bug #15506]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66735 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6e1d498ac7cd6fcd18352a22d8a3e3ed19df9c6b
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 09:46:36 +0900

    range.c: optimize rb_range_last for int renage

    This change improves the performance of Range#last method for a range
    of integer.  This optimization directly computes only required values
    only in a range instead of converting all values in the range to an
    array.  The optimized implementation is 129-16.7k times faster than
    the previous one in the benchmark result given below.

    === Benchmark Result ===

    ```
    $ make benchmark ITEM=range_last COMPARE_RUBY=/Users/mrkn/.rbenv/versions/2.6.0/bin/ruby
    generating known_errors.inc
    known_errors.inc unchanged
    /Users/mrkn/src/github.com/ruby/ruby/revision.h unchanged
    /Users/mrkn/.rbenv/shims/ruby --disable=gems -rrubygems -I/Users/mrkn/src/github.com/ruby/ruby/benchmark/lib /Users/mrkn/src/github.com/ruby/ruby/benchmark/benchmark-driver/exe/benchmark-driver \
                        --executables="compare-ruby::/Users/mrkn/.rbenv/versions/2.6.0/bin/ruby -I.ext/common --disable-gem" \
                        --executables="built-ruby::./miniruby -I/Users/mrkn/src/github.com/ruby/ruby/lib -I. -I.ext/common  -r/Users/mrkn/src/github.com/ruby/ruby/prelude --disable-gem" \
                        $(find /Users/mrkn/src/github.com/ruby/ruby/benchmark -maxdepth 1 -name '*range_last*.yml' -o -name '*range_last*.rb' | sort)
    Warming up --------------------------------------
      (1..1_000_000).last(100)       35.600 i/s -      36.000 times in 1.011239s (28.09ms/i)
     (1..1_000_000).last(1000)       36.204 i/s -      39.000 times in 1.077240s (27.62ms/i)
    (1..1_000_000).last(10000)       36.470 i/s -      39.000 times in 1.069386s (27.42ms/i)
    Calculating -------------------------------------
                               compare-ruby  built-ruby
      (1..1_000_000).last(100)       36.477    609.196k i/s -     106.000 times in 2.905950s 0.000174s
     (1..1_000_000).last(1000)       35.936     50.350k i/s -     108.000 times in 3.005321s 0.002145s
    (1..1_000_000).last(10000)       35.641      4.602k i/s -     109.000 times in 3.058233s 0.023685s

    Comparison:
                   (1..1_000_000).last(100)
                    built-ruby:    609195.7 i/s
                  compare-ruby:        36.5 i/s - 16700.87x  slower

                  (1..1_000_000).last(1000)
                    built-ruby:     50349.7 i/s
                  compare-ruby:        35.9 i/s - 1401.08x  slower

                 (1..1_000_000).last(10000)
                    built-ruby:      4602.1 i/s
                  compare-ruby:        35.6 i/s - 129.12x  slower
    ```

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66734 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bf6584b5d0f88377ed448612e1170716f6f7dc83
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 09:46:35 +0900

    benchmark/range_last.yml: add benchmark cases

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66733 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fc7f99066608286f70fabcdec221e1502d40695b
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 07:41:59 +0900

    fix last commit.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66732 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 93583166c8cc9b28d36d8f4f8e23fe968849498c
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 07:40:32 +0900

    refactoring.

    * hash.c (EQUAL, PTR_EQUAL): make corresponding inline functions
      ar_equal() and ar_ptr_equal().

    * hash.c (SET_*): removed. set fields directly.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66731 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 70caae18f26fb305b73ca33e71c46f370c3e0d20
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 07:23:54 +0900

    add ar_ prefix for ar_table functions.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66730 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 89cbf307b5c354f04b84b405bbd297c21c34ec03
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 00:09:45 +0900

    * 2019-01-06

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66727 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6ce2ef33b562deaa4b4e3d94269fe64c93d3f985
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-06 00:09:44 +0900

    test/ruby/test_range.rb: add assertions

    Add assertions of Range#first and Range#last to examine the type
    conversion of the arguments and the negative value check.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66726 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b6b4c7cbb4581b8ce505e775a46531d33a6b3df6
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 23:31:12 +0900

    compile.c: initialize to suppress false warning.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66725 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9cbb4dde74f854b0cfcdb48b1ce0604894c83665
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 22:15:07 +0900

    parse.y: refactored symbol rules

    * parse.y (symbol): turned into a node, as well as `numeric`, for
      a symbol literal, and includes `dsym` now.

    * parse.y (ssym): previous `symbol`.  renamed as the counterpart
      of `dsym`.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66724 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 47834932368f9af3a57e50f606d9990c1cd54c46
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 21:13:39 +0900

    parse.y: hoisted out qcall_branch_start and qcall_branch_end

    * compile.c (qcall_branch_start, qcall_branch_end): hoisted out
      branch coverage traces generation for qcall.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66723 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 59f59f82d42e32980694ae7b8cd2b55384eb5918
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 20:35:24 +0900

    parse.y: refine error messages

    * parse.y: refine error messages for tSYMBEG and tSTRING_BEG, which
      can appear at invalid places.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66722 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 56a6dd66d4deff3edc2af09271c50619a05cf1ea
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 19:07:40 +0900

    benchmark/range_last.yml: add a benchmark of Range#last

    [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66721 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 89e3d2f8d3db4ae43ee1f3a922136f30595f8467
  Author: duerst <duerst@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 18:47:55 +0900

    separate downloading of Unicode property files and auxiliary files

    Separate downloading of Unicode property files in ucd and in ucd/auxiliary.
    This is needed because we need information from separate index.html files
    to discover the exact file names of property files during a beta period.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66720 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0c0d181e0fc9947b4d64b9bb3fcafcc65c3ec8bb
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 09:31:54 +0900

    fix trivial indentation.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66719 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 23801110085a691095fc9a8eb164880418b2215d
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 09:06:09 +0900

    call functions directly.

    * hash.c: ar_table only supports `objhash` so we can call compare/hash
      functions directly.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66718 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3a144485fc450465ba370cdf0d5501813d5962d7
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 08:48:33 +0900

    refactoring usage of ar_lookup().

    * hash.c (hash_stlike_lookup): introduce inline a function and use it
      instead of using ar_lookup()/st_lookup() directly.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66717 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eca91625b2ec367902a41a8a302bc802132ec02e
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 00:41:32 +0900

    * 2019-01-05

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66716 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6c1ed519ef51fe8afb7e0ed7f0df2cd2fc0db13d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-05 00:41:29 +0900

    win32/Makefile.sub: try to use __restrict on Visual Studio 2013

    as well. Follows up r66598.

    https://bugs.ruby-lang.org/issues/15347#note-7 is saying __restrict
    is supported on Visual Studio 2013.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66715 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a2eb04f52dccb9b42404f8b133acb36b577e3b54
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 22:14:18 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66714 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6304c0c4d1f2d582ccd2af15407bec3c5c647c8e
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 22:14:18 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66713 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 23444302d9200bcc41ce279a529f73cad63c3f05
  Author: normal <normal@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 22:14:11 +0900

    introduce rb_nogvl C-API to mark ubf as async-signal-safe

    zlib and bignum both contain unblocking functions which are
    async-signal-safe and do not require spawning additional
    threads.

    We can execute those functions directly in signal handlers
    without incurring overhead of extra threads, so provide C-API
    users the ability to deal with that.  Other C-API users may
    have similar need.

    This flexible API can supersede existing uses of
    rb_thread_call_without_gvl and rb_thread_call_without_gvl2 by
    introducing a flags argument to control behavior.

    Note: this API is NOT finalized.  It needs approval from other
    committers.  I prefer shorter name than previous
    rb_thread_call_without_gvl* functions because my eyes requires
    big fonts.

    [Bug #15499]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66712 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 16cfd26a57c30e17bc3c116c83134420693ba5c4
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 22:11:02 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66711 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e97741e12a22d78825a3a9dfcb7382adb0e27855
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 22:10:58 +0900

    Merge Bundler 2.0.1 from upstream.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66710 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4bbbbb6a3f5bd242f740041a644311f97c4a0052
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 21:53:10 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66709 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9e66910b3bd85de32e95cf019ed285a36aecfd9e
  Author: normal <normal@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 21:53:06 +0900

    thread.c (call_without_gvl): spawn thread for UBF iff single-threaded

    We need another native thread to call some unblocking functions
    which aren't RUBY_UBF_IO or RUBY_UBF_PROCESS.  Instead of a
    permanent thread in <= 2.5, we can now rely on the thread cache
    feature to perform interrupts.

    [ruby-core:90865] [Bug #15499]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66708 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 79aef1272e877b67b15b00a9cded806845556a0f
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 18:49:32 +0900

    [DOC] escape descriptions [ci skip]

    Escape descriptions not to get parsed as directives.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66707 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9035e73a14087c1d3d6e015758ec467e47fc2d19
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 18:41:13 +0900

    [DOC] mark function names [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66706 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8513c20370d2416632f36858edd076e099836a99
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 18:25:32 +0900

    [DOC] split a tag for each function name [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66705 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 44aaff6d310f8cf88d89af4437d678a64bd89aa4
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 18:10:10 +0900

    [DOC] Fix close tags [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66704 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 74c462a90047ca25be8c7cc922dfa2118fc06bfd
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 17:22:27 +0900

    class.c: [DOC] fix close tag [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66703 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 87e628d66b7bf98f276dbd38b810f0197f821081
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 16:49:00 +0900

    skip to calculate hash value on empty Hash ar_table lookup.

    * hash.c (ar_lookup): don't calculate hash_value if ar_table is empty.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66702 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 784df9e6fd41a73cbdfc22222c5917991aa0825e
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 10:59:54 +0900

    * 2019-01-04

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66701 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ba4672c2cb90c85bfeb7cac3295c68b116c7c6f5
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-04 10:59:49 +0900

    ar_table_entry::hash should be `st_hash_t`.

    * hash.c: the type of `ar_table_entry::hash` is not a `VALUE`,
      but a `st_hash_t`.
      Also `st_hash_t` is not a `st_data_t`, but `st_index_t` (same as st.c).


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66700 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b2a7a289e046cbbfc7f439f312a7204c174c3869
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 20:42:24 +0900

    Fix Random.urandom in a chroot on OpenBSD

    [ruby-core:90850] [Bug #15494]

    From: jeremyevans0 (Jeremy Evans) <merch-redmine@jeremyevans.net>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66699 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d0045da598f13c32606b1bf04f2eac5c3759761a
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 15:27:35 +0900

    .travis.yml: propagate -w properly

    r66692's `export RUBYOPT="-w"` does not seem to work.
    Passing `RUBYOPT="-w"` to `make test-all`'s argument works.

    Let's try having this for all environments.

    (see r66690 for motivation)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66698 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 673ff731c17bbbae4d672c8514d4991382179981
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 15:19:17 +0900

    complex.c: Optimize Complex#* and Complex#**

    Optimize f_mul for the core numeric class components.
    This change improves the computation time of Complex#* and Complex#**.

    ```
    $ make benchmark ITEM=complex_float_ COMPARE_RUBY=/Users/mrkn/.rbenv/versions/2.6.0/bin/ruby
    generating known_errors.inc
    known_errors.inc unchanged
    /Users/mrkn/src/github.com/ruby/ruby/revision.h unchanged
    /Users/mrkn/.rbenv/shims/ruby --disable=gems -rrubygems -I/Users/mrkn/src/github.com/ruby/ruby/benchmark/lib /Users/mrkn/src/github.com/ruby/ruby/benchmark/benchmark-driver/exe/benchmark-driver \
                        --executables="compare-ruby::/Users/mrkn/.rbenv/versions/2.6.0/bin/ruby -I.ext/common --disable-gem" \
                        --executables="built-ruby::./miniruby -I/Users/mrkn/src/github.com/ruby/ruby/lib -I. -I.ext/common  -r/Users/mrkn/src/github.com/ruby/ruby/prelude --disable-gem" \
                        $(find /Users/mrkn/src/github.com/ruby/ruby/benchmark -maxdepth 1 -name '*complex_float_*.yml' -o -name '*complex_float_*.rb' | sort)
    Calculating -------------------------------------
                         compare-ruby  built-ruby
       complex_float_add       6.558M     13.012M i/s -      1.000M times in 0.152480s 0.076850s
       complex_float_div     576.821k    567.969k i/s -      1.000M times in 1.733640s 1.760660s
       complex_float_mul       1.690M      2.628M i/s -      1.000M times in 0.591786s 0.380579s
       complex_float_new       1.350M      1.268M i/s -      1.000M times in 0.740669s 0.788762s
     complex_float_power       1.571M      1.835M i/s -      1.000M times in 0.636507s 0.544909s
       complex_float_sub       8.635M      8.779M i/s -      1.000M times in 0.115814s 0.113906s

    Comparison:
                    complex_float_add
              built-ruby:  13012361.7 i/s
            compare-ruby:   6558237.1 i/s - 1.98x  slower

                    complex_float_div
            compare-ruby:    576821.0 i/s
              built-ruby:    567968.8 i/s - 1.02x  slower

                    complex_float_mul
              built-ruby:   2627575.4 i/s
            compare-ruby:   1689800.0 i/s - 1.55x  slower

                    complex_float_new
            compare-ruby:   1350130.8 i/s
              built-ruby:   1267809.6 i/s - 1.06x  slower

                  complex_float_power
              built-ruby:   1835168.8 i/s
            compare-ruby:   1571074.6 i/s - 1.17x  slower

                    complex_float_sub
              built-ruby:   8779168.8 i/s
            compare-ruby:   8634534.7 i/s - 1.02x  slower
    ```

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66697 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 670725b08784e7467ffbd4b40c9a7c3cd9ca813e
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 14:51:19 +0900

    [DOC] Complex() default behaviour is `exception: true` [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66696 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bace0d4cdcfaec75e76145349f0b3c0b989a0b6d
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 14:51:18 +0900

    [DOC] Add `or nil` to call-seq [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66695 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 55cb93efc539cbc71de486aaba300457cf21e9b5
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 14:24:05 +0900

    test_complex.rb: use the same approach to fix failures

    as r66682.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66694 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2fd6ed62b4826c03bd6d41ae99a5bd7fecafec40
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 14:19:05 +0900

    test_complex.rb: fix tests for RUBYOPT="-w"

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66693 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3bc28f49330cc3114d39552399bf38aa31c19aa4
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 14:15:54 +0900

    .travis.yml: enforce -w in invoke_ruby as well

    actually current test-all does not fail with RUN_OPTS="-w".

    and chkbuild seems to use RUBYOPT="-w"
    https://github.com/ruby/chkbuild/blob/bad4681c30e71f132cdd80f324d4b8f132f6582c/chkbuild/ruby.rb#L605

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66692 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5e1e60c3462b38d01f385a3fd2018f576a6e2722
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 14:08:46 +0900

    * 2019-01-03

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66691 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5743c9e85897333c4e8e4bb59d2377f1780bc19b
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-03 14:08:43 +0900

    .travis.yml: add a test matrix with -w

    currently Travis and AppVeyor does not run tests with test-all,
    but RubyCI uses -w and currently all RubyCIs are failing.

    It might be better to fail at least one CI in Travis to notice it
    earlier.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66690 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit ee2ddf5411f51ea89a1569ea5d70b41cd4c6c7f2
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-02 13:25:11 +0900

    complex.c: fix against redefining component methods

    This fixes the incompatibility (maybe unintentionally) introduced by
    removal of `#ifndef PRESERVE_SIGNEDZERO` guards in f_add, f_mul, and
    f_sub functions in r62701.  [Bug #15491] [ruby-core:90843]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66688 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 888ddda157a3253eac9e2b8962826f55e2b8fb85
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-02 13:18:34 +0900

    test/net/fixtures/Makefile: moved from test/net/imap

    This Makefile can be used to update test certificates.  It should have been
    moved at which the certificates was moved at r56836.

    [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66687 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1e0b49a293d3792826c67b7e05c5fcbd09c9ea6e
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-02 12:29:01 +0900

    Try to update cert (2nd try)

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66686 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f234e6c3d3170f37508e214cdaef78d4b2584e5a
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-02 12:08:20 +0900

    Try to update cert

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66685 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6d957b2f1198514243b62abb381a876184d0a684
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-02 10:36:39 +0900

    complex.c: fix indentation

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66684 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f43b38abad6282809b2573d0bf8d364dbdd77869
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-02 07:49:58 +0900

    * 2019-01-02

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66683 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b70a215ebb59961dff17a646831ae8801b1cca1
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-02 07:49:55 +0900

    suppress warning: method redefined; discarding old + introduced at r66681

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66682 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5f90845420bd65be6926976a8a0dfd7a1b3173cf
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 21:20:05 +0900

    complex.c: Optimize Complex#+ for some conditions

    Optimize f_add defined in complex.c for some specific conditions.
    It makes Complex#+ about 1.4x faster than r66678.

    Compared to r66678:

    ```
    mrkn-mbp15-late2016:complex-optim-o3 mrkn$ make benchmark ITEM=complex_float_ COMPARE_RUBY=/Users/mrkn/.rbenv/versions/trunk-o3/bin/ruby
    /Users/mrkn/src/github.com/ruby/ruby/revision.h unchanged
    /Users/mrkn/.rbenv/shims/ruby --disable=gems -rrubygems -I/Users/mrkn/src/github.com/ruby/ruby/benchmark/lib /Users/mrkn/src/github.com/ruby/ruby/benchmark/benchmark-driver/exe/benchmark-driver \
                        --executables="compare-ruby::/Users/mrkn/.rbenv/versions/trunk-o3/bin/ruby -I.ext/common --disable-gem" \
                        --executables="built-ruby::./miniruby -I/Users/mrkn/src/github.com/ruby/ruby/lib -I. -I.ext/common  -r/Users/mrkn/src/github.com/ruby/ruby/prelude --disable-gem" \
                        $(find /Users/mrkn/src/github.com/ruby/ruby/benchmark -maxdepth 1 -name '*complex_float_*.yml' -o -name '*complex_float_*.rb' | sort)
    Calculating -------------------------------------
                         compare-ruby  built-ruby
       complex_float_add       9.132M     12.864M i/s -      1.000M times in 0.109511s 0.077734s
       complex_float_div     600.723k    627.878k i/s -      1.000M times in 1.664662s 1.592666s
       complex_float_mul       2.320M      2.347M i/s -      1.000M times in 0.431039s 0.426113s
       complex_float_new       1.473M      1.489M i/s -      1.000M times in 0.678791s 0.671750s
     complex_float_power       1.690M      1.722M i/s -      1.000M times in 0.591863s 0.580775s
       complex_float_sub       8.870M      9.516M i/s -      1.000M times in 0.112740s 0.105091s

    Comparison:
                    complex_float_add
              built-ruby:  12864383.7 i/s
            compare-ruby:   9131502.8 i/s - 1.41x  slower

                    complex_float_div
              built-ruby:    627878.0 i/s
            compare-ruby:    600722.5 i/s - 1.05x  slower

                    complex_float_mul
              built-ruby:   2346795.3 i/s
            compare-ruby:   2319975.7 i/s - 1.01x  slower

                    complex_float_new
              built-ruby:   1488649.1 i/s
            compare-ruby:   1473207.5 i/s - 1.01x  slower

                  complex_float_power
              built-ruby:   1721837.2 i/s
            compare-ruby:   1689580.2 i/s - 1.02x  slower

                    complex_float_sub
              built-ruby:   9515562.7 i/s
            compare-ruby:   8869966.3 i/s - 1.07x  slower
    ```

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66681 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8d473272dbd9f5c6adc518b780eafee3d1f0d6bc
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 21:20:04 +0900

    benchmark/complex_float_*.yml: New benchmarks

    Add new benchmark scripts for binary operations of Complex with float
    components.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66680 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 11ba186c4725ef7acecbf99243083bc909b7c960
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 18:52:15 +0900

    test_jit.rb: test methodref insn

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66679 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6e7213f427c8030396c2de6cc488cae5d8dd5ff9
  Author: hsbt <hsbt@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 13:53:52 +0900

    Merge rubygems-3.0.2.

      https://blog.rubygems.org/2019/01/01/3.0.2-released.html

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66678 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f77d381159419434b3c1f1a63839706967f348f9
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 12:03:20 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66677 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9613af6f34e46bc70528593b345824ccada18102
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 12:03:17 +0900

    compile.c (iseq_set_sequence): fix branch coverage table

    Not only TRACE_ELEMENT but also INSN_ELEMENT may have events.
    The old pc2branchindex was created using only events of TRACE_ELEMENTs.
    This change uses events of INSN_ELEMENTs too for pc2branchindex table.

    [Bug #15476]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66676 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 99d363184765ef6b11e739299a805c366171fd26
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 10:51:01 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66675 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d58bada6cc35187d61315eb881674ae37cbbfce6
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 10:50:57 +0900

    compile.c: support branch coverage for `a&.foo = 1`

    [Bug #15475]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66674 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7e035dcda7f8d2ce23d769424fdbf7d149c0b894
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 10:47:17 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66673 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4130969ea19835d0a69a69ee6ffc7fa3dfedb675
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 10:47:14 +0900

    Revert r66670 because of wrong ticket number

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66672 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 04dec2df733a7ca1cf895be3e82ad3b0cf374741
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 10:41:26 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66671 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 67a257cac091e44cd49a5c1a8c00cee59e284cff
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 10:41:23 +0900

    compile.c: support branch coverage for `a&.foo = 1`

    [Bug #15476]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66670 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8423533c25db3d5e427accfa8e66895777c36df6
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 00:00:52 +0900

    * 2019-01-01

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66669 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d935a0ab951510241450694c73361a03656ad15b
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 00:00:52 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66668 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 67c574736912003c377218153f9d3b9c0c96a17b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2019-01-01 00:00:37 +0900

    Method reference operator

    Introduce the new operator for method reference, `.:`.
    [Feature #12125] [Feature #13581]
    [EXPERIMENTAL]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66667 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 4a6f7633303f2d6eb5ec164dc656cf5d47531960
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 23:59:32 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66666 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1bdd422b9360c886c02c2216a230a6c95fe475a0
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 23:59:29 +0900

    Fix indents [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66665 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 705941a4925e6721fe300d263de11179010d02d5
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 23:59:27 +0900

    use a local variable

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66664 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 271c8f5d06bc92d3d3382fbddae616019555ed91
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 21:54:40 +0900

    test_io_wait.rb: try to stabilize test_wait_readable

    that randomly fails
    https://rubyci.org/logs/mswinci.japaneast.cloudapp.azure.com/vc12-x64/ruby-trunk/log/20181231T103312Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66663 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d7c7382f7afcba2d74454b24f9d1b9bb761c7242
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 10:14:52 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66662 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 58508e8b558e1ae83d2f15617cb09f1cee8e222e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 10:14:51 +0900

    load.c: resolve_feature_path

    * load.c (rb_resolve_feature_path): search the path for already
      loaded feature.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66661 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c5e8627f658c88b2403e7b20637cf25e31feff88
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 10:09:30 +0900

    Revert "lib/net/http.rb: use connect_timeout instead of Timeout"

    This reverts commit 69a1db96fe63ff3071cb3d272675a1d0470aab01.
    getaddrinfo(3) doesn't support timeout.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66660 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 69a1db96fe63ff3071cb3d272675a1d0470aab01
  Author: glass <glass@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 09:46:07 +0900

    lib/net/http.rb: use connect_timeout instead of Timeout

    lib/net/pop.rb: ditto

    lib/net/ftp.rb: ditto

    lib/net/smtp.rb: ditto

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66659 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f964fd3fa5070b95cb412cb529b47e168c0af25a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 06:42:52 +0900

    vm_args.c: search symbol proc in super classes

    * vm_args.c (refine_sym_proc_call): traverse ancestors to search
      inherited methods for symbol proc.
      [ruby-dev:50741] [Bug #15489]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66658 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7e4e641c009fede540a9e307ac1d3bb9dcf00f7a
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 02:48:11 +0900

    Exclude Solaris in Process.clock_gettime specs

    * It declares clocks which are invalid for clock_gettime(), which I consider OS bug.
    * I want to keep testing all declared clocks on other platforms.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66657 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8b8e5246e79971457489cf4bd37309c2945c33e1
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 02:47:57 +0900

    * 2018-12-31

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66656 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit eeedf7d57a4648fcfb75a54023c889fca3e78a3d
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-31 02:47:56 +0900

    Revert "clock_gettime_spec.rb: exclude invalid clocks for Solaris"

    * This reverts commit a7edd05f7dca44f56fd72d7bcc232e1b27df0eb3.
    * I prefer to exclude Solaris, I want to keep testing these clocks on Linux/macOS.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66655 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a46ce26870d8a758c596b95695429e177069f011
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 23:09:09 +0900

    [DOC] Update basename [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66654 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c6915042aba8525ab40a27342a04a2accf865955
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 22:21:30 +0900

    vm.c: Move the rdoc of RubyVM.resolve_feature_path [Bug #15482]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66653 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 695cc19be963e35dabd85ea824a02f698bc260c0
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 16:36:27 +0900

    accept_nonblock_spec.rb: wait before calling #accept_nonblock

    fixes r66593 in a better way like r66646.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66652 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6f0e4c755f7d5921dfa3263ac25cab6a012e99ce
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 15:19:10 +0900

    test_array.rb: increase timeout for RubyCI

    https://rubyci.org/logs/mswinci.japaneast.cloudapp.azure.com/vc12-x64/ruby-trunk/log/20181230T041101Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66651 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a7edd05f7dca44f56fd72d7bcc232e1b27df0eb3
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 15:17:16 +0900

    clock_gettime_spec.rb: exclude invalid clocks for Solaris

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable10x/ruby-trunk/log/20181230T041806Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-trunk/log/20181230T042407Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11s/ruby-trunk/log/20181230T032505Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/solaris11s-sunc/ruby-trunk/log/20181230T022505Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66650 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f110ebfd141710e65e230b9e79855e9ded91258e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 15:09:38 +0900

    test_optimization.rb: increase timeout for RubyCI

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/opensuseleap/ruby-trunk/log/20181230T040002Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66649 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6b861342b9ef41daf3a4c55d5a50a09f023a2180
  Author: sorah <sorah@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 12:15:58 +0900

    Unset SOURCE_DATE_EPOCH on Rubygems test cases

    Relates to r66554. When test suites run with SOURCE_DATE_EPOCH, several
    tests would fail.  Environment Variables are already kept with this
    setup & teardown phase.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66648 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e8d3fb6cdacd87a3f4d377ea13d8b47878d3006d
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 10:00:29 +0900

    test_refinement.rb: increase timeout for RubyCI

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/amazon/ruby-trunk/log/20181229T153003Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66647 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 230fe41825b45c92cf73e7c8d62f4941dae7beb9
  Author: normal <normal@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 09:46:02 +0900

    accept_nonblock_spec: IO.select instead of sleep

    Waiting on socket I/O using IO.select should work on all platforms.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66646 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7f54f1b5543b4a3267a64c47cff9127cbcafcc42
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 09:05:56 +0900

    Update to ruby/spec@2d89e48

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66645 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2eee74ef54a2e23eb870680a83dcf74c5d9d9d01
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 08:40:15 +0900

    Update NoMethodError/NameError docs [ci skip]

    [ruby-core:90796] [Bug #15481]

    From: zverok (Victor Shepelev) <zverok.offline@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66644 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 65b1cf0e82255db68262dfb8fdb001268981e223
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 06:55:12 +0900

    Skip specs on AIX as it doesn't have /dev/fd

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66643 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c608af0f1eef89581b1222793e8497d302fb6701
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 06:54:59 +0900

    Re-enable spec on Solaris to find out which clocks fail on Solaris

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66642 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit be8d3ed1fd2f8eb8ec5918c0a7ec30afc4fb34d4
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 06:54:45 +0900

    Exclude CLOCKs which require special permissions in Process.clock_gettime specs

    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-ad7f67/ruby-trunk/log/20181229T135406Z.fail.html.gz
    * https://rubyci.org/logs/rubyci.s3.amazonaws.com/rhel_zlinux/ruby-trunk/log/20181229T143303Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66641 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 94f4a0e91ee7077bcb4391a6f754c6ec58e78a15
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 01:44:09 +0900

    `TracePoint#enable(target_thraed:)` [Feature #15473]

    * vm_trace.c (tracepoint_enable_m): `TracePoint#enable` supports
      `target_thread:` keyword to filter a target thread.
      [Feature #15473]


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66640 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fd7d4a871cd3ae035a4a48eb728f9d3fcb37e669
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 01:29:52 +0900

    * 2018-12-30

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66639 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 8ee0a8e91a2dfcde0381949348268961b0f81393
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-30 01:29:44 +0900

    hide ar_table internals from internal.h.

    * internal.h: move ar_table def to hash.c because other files
      don't need to know implementation of ar_table.

    * hash.c (rb_hash_ar_table_size): added because gc.c needs to know
      the size_of(ar_table).


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66638 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9f3585afad86f7683fec377a0eb4bb53b8165529
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 20:04:42 +0900

    process.c: document system(..., exception: true) [ci skip]

    From: Victor Shepelev <zverok.offline@gmail.com>

    [Bug #15480]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66637 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 31a60184f4a91424419b13171c3b04780ac064e4
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 19:54:37 +0900

    Re-enable spec on Linux to find out which clocks fail on RHEL

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66636 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 21f4795e80c244f0931dc0509b3bf6b3d650e7bd
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 19:54:22 +0900

    Refactor Process.clock_gettime spec to give more information when it fails

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66635 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5049e4c5e8608848029710d441b5426766573a1c
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 19:50:31 +0900

    test_jit.rb: suppress random test failure

    on mswin RubyCI by Permission Denied.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66634 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d8008fc29dd0551c7fa5625c91b7eae923d62939
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 16:41:20 +0900

    clock_gettime_spec.rb: add more platform guards for RubyCI

    `Errno::EINVAL: Invalid argument - clock_gettime` could occur even on Linux.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66633 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1ae3e6f3ce9f16c49d0584e0ad3dc3e709cc4a81
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 16:26:22 +0900

    erb.rb: increase warn level only when non-zero safe_level

    is given.

    This is merging Eric's patch in [Bug #15479] to Ruby 2.6's behavior in r66631.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66632 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c02f03609036ba4e815c2ed67fa002492b39dda9
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 16:11:38 +0900

    Revert "erb.rb: print deprecation warning with warn level 1"

    This reverts commit b5569b9ab2ad5e0e4a997df7eb73e97ecbacc9dd.

    The deprecation is indefinitely postponed.

    [Bug #15478]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66631 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit a403cd3598932b3349b8ff5a786b8fe4abbc3f91
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 15:49:54 +0900

    test_gc.rb: increase timeout for RubyCI

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/amazon/ruby-trunk/log/20181229T033003Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66630 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7a859b6ae3000e47a36cff5603c414bb55a4a08f
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 15:48:34 +0900

    test_jit.rb: prevent mixing outputs by race condition

    to avoid random failures like
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11s/ruby-trunk/log/20181229T032506Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66629 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 63aaee923bdaab7b85fbbafa199b767e15523646
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 13:48:23 +0900

    test_notimp.rb: loosen timeout

    to prevent random failures like
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian8/ruby-trunk/log/20181229T033003Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66628 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 952b218ffe78b7319c5e02887e7dd30d46dbc40e
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 12:57:15 +0900

    spawn_spec.rb: add missing platform guard

    this exists for `context "when passed close_others: false" do`, but this
    seems to be missing for `context "when passed close_others: true"`.
    And this seems to hang forever on Windows since r66622.
    https://ci.appveyor.com/project/ruby/ruby/builds/21277729

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66627 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f9dc0fb649e66cc0791d1b9c265644ed0fea82fa
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 10:53:10 +0900

    test_iseq_load.rb: increase timeout for stressful roundtrip

    Even 60s is short for our CI environments:
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/amazon/ruby-trunk/log/20181228T153002Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66626 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bfd1980db2f482670430577e04f0add5960313ee
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 10:51:35 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66625 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 40b689c71a04d2033c5b2924bbaa21efaf395ea4
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 10:51:34 +0900

    clock_gettime_spec.rb: skip a new spec broken on solaris

    introduced in r66622, but this does not succeed on Solaris

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-trunk/log/20181229T002409Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66624 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c027f224431fe47ab5ea9ad2070a445244586fc4
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 09:54:10 +0900

    Update to ruby/spec@c8b36c4

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66623 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2076c2c3c401d9ab9324468818bbc46d4e4b870a
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 09:22:52 +0900

    Update to ruby/spec@944ea57

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66622 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 548defb608847973e78462a38c8418f90dce9911
  Author: eregon <eregon@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 09:22:31 +0900

    Update to ruby/mspec@2bd2ead

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66621 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2ceebcc37b8ef5a9ca55d1fe3c3b000ccb9eaeb1
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 00:19:13 +0900

    * 2018-12-29

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66620 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1317fefe53b95d763a281d8bf13e8bd023069068
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-29 00:19:11 +0900

    .travis.yml: increase timeout for test-all

    we reached 30min timeout on osx build
    https://travis-ci.org/ruby/ruby/jobs/473019623

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66619 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 26572d228d3ba804d275aa55dc4f06adbcefb4af
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 23:30:16 +0900

    test_io.rb: increase timeout for RubyCI

    to stabilize AIX powerpc CI

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/aix71_ppc/ruby-trunk/log/20181227T113302Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66618 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0bbf1eb7542a56cc00a6c77e3f8bfd89a7b5bdd5
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 23:24:46 +0900

    test_readline.rb: skip readline test for new solaris11s-sunc

    for now. This should be fixed, but let me make this new CI green
    first to introduce Solaris-related changes later.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66617 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b0b0ded5aa2cf7c4574b057d8326ed4e1c172c12
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 23:18:05 +0900

    webrick/test_utils.rb: loosen timeout severity

    to stabilize CI failure like:
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/osx1013/ruby-trunk/log/20181228T114501Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66616 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fa3fda1c620b14872dadc81b8b790e9dce80a619
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 23:12:42 +0900

    jit_support.rb: deal with -std=c99 flag

    CC is changed from "icc" to "icc -std=c99" by r66605.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/icc-x64/ruby-trunk/log/20181228T130003Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66615 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c42a872e5b960696f7ae4377ab80cbeb4b1d837b
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 23:05:45 +0900

    test_array.rb: increase timeout for RubyCI

    to prevent random failures.

    test/ruby/test_autoload.rb: ditto
    test/ruby/test_optimization.rb: ditto

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-trunk/log/20181228T101706Z.fail.html.gz
    https://rubyci.org/logs/mswinci.japaneast.cloudapp.azure.com/vc12-x64/ruby-trunk/log/20181228T114549Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66614 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 6e85a0ea7ee55e693148d82935da0c9b08e98974
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 22:20:38 +0900

    test_iseq_load.rb: increase timeout for RubyCI

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/arch/ruby-trunk/log/20181228T090001Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66613 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 78e3cd2bb1827eba1367b1ec9f4a58bce146d26b
  Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 22:03:18 +0900

    Fix #endif annotation.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66612 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9ee79b658123a2a4af65c80484d1f91ce73354e2
  Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 22:03:14 +0900

    Don't allow rb_fiber_resume to raise exception on unborn fiber.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66611 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5fb9d1e11fc50df359a1f9d2537a11f13cdb6d33
  Author: samuel <samuel@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 22:03:09 +0900

    Implement Fiber#raise. Fixes #10344.

    This allows raising exceptions in another fiber, similarly to
    Thread#raise.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66610 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b0d24baf8ab4fda0c24e15f9207984971cac8e07
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 19:33:04 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66609 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d54a86d49dfea10cfcd46fbde5046bdf13a479d1
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 19:33:02 +0900

    Hoisted out undefined_constant

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66608 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit f826cde5a9030e3ffb42bef2c09ee669b13d1465
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 18:44:32 +0900

    Add RUBY_API_VERSION to rbconfig.rb on mswin too

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66607 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 041b61e3407d317a0bff3bf4b85fe7b13833874f
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 18:34:51 +0900

    test_jit.rb: suppress random failure on RubyCI

    This failure is a known issue that exists mainly on CI environments.
    We should address this at some moment, but making CI red by this would
    be just a false-positive alarm for now.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66606 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 61885c9b7ca8ccdaf53d7c365fbb86bad3294d88
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 18:23:27 +0900

    configure.ac: try to fix addr2line build failure

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/debian8/ruby-trunk/log/20181228T063002Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/scw-9d6766/ruby-trunk/log/20181228T081706Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/gentoo/ruby-trunk/log/20181228T063002Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos6/ruby-trunk/log/20181228T063003Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/centos7/ruby-trunk/log/20181228T080003Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/opensuseleap/ruby-trunk/log/20181228T080002Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/rhel_zlinux/ruby-trunk/log/20181228T063303Z.fail.html.gz
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/icc-x64/ruby-trunk/log/20181228T090003Z.fail.html.gz

    I suspect r66598 triggered something.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66605 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e23a166995dc1d671f15e8a8e77d110019f05875
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 13:28:16 +0900

    .travis.yml: ignore non-existent files

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66604 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 971e1aaf635c42498497d38829137af8b949f04a
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 13:23:39 +0900

    .travis.yml: rbconfig.rb is not needed to setup sources

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66603 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9417d10fe18f2f51e80ecf415496e78fcdb3b64e
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 12:55:28 +0900

    RUBY_PROGRAM_VERSION for MJIT_PRECOMPILED_HEADER

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66602 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 91dfdf840ba3f1b26ca26e75ac5e3c8166c7d5cc
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 12:42:11 +0900

    vm_insnhelper.c: USE_FLONUM is always defined

    This changeset should fix the 32bit failures.
    See also: https://travis-ci.org/ruby/ruby/jobs/472855470


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66601 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit da8830e3de84717ca5dbb659b60dc94557f7258c
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 12:09:29 +0900

    fix r66599 to success install. please refix this patch @nobu

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66600 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 842272540886ff1da58e690907b08f2811a86607
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 11:12:34 +0900

    Moved version numbers

    * Define major and minor version numbers only in the public
      include/ruby/version.h header, as the API version numbers.

    * Define only teeny version number in the private version.h
      header.

    * RUBY_VERSION moved to version.c.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66599 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1095705c4218f8f752210f1a0b4f78d96ad675ac
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 10:56:20 +0900

    Check if restrict keyword is supported

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66598 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 24b1b433c5abf02e9f9c7eb3851f4417dc5d8751
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 10:06:04 +0900

    vm_insnhelper.c: delete unused macros

    - FIXNUM_2_P: moved to vm_insnhelper.c because that is the only
      place this macro is used.

    - FLONUM_2_P: ditto.

    - FLOAT_HEAP_P: not used anywhere.

    - FLOAT_INSTANCE_P: ditto.

    - GET_TOS: ditto.

    - USE_IC_FOR_SPECIALIZED_METHOD: ditto.

    - rb_obj_hidden_p: ditto.

    - REG_A: ditto.

    - REG_B: ditto.

    - GET_CONST_INLINE_CACHE: ditto.

    - vm_regan_regtype: moved inside of VM_COLLECT_USAGE_DETAILS
      because that os the only place this enum is used.

    - vm_regan_acttype: ditto.

    - GET_GLOBAL: used only once.  Removed with replacing that usage.

    - SET_GLOBAL: ditto.

    - rb_method_definition_create: declaration moved to
      vm_insnhelper.c because that is the only place this declaration
      makes sense.

    - rb_method_definition_set: ditto.

    - rb_method_definition_eq: ditto.

    - rb_make_no_method_exception: ditto.



    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66597 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d3c0b20949916aa7b432a0498a8016d67a7822ad
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 02:39:21 +0900

    * remove trailing spaces.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66596 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 496267023c490e717ad0598bf1e3364835b734a4
  Author: ko1 <ko1@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 02:39:17 +0900

    fix missed script_compiled events. [Bug #15471]

    * ruby.c (process_options): script_compiled events are missed on
      command line -e or specified file. this commit fix it.
      [Bug #15471]

      This patch should be backport to Ruby 2.6 branch.

    * vm_core.h (rb_exec_event_hook_script_compiled): introduce utility
      function to invoke a script_compiled event.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66595 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit fcc5a19e2f9801217691a842250db937de3ea5ee
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 01:42:41 +0900

    test_method.rb: do not kill RubyCI openSUSE machine

    with NoMemoryError on TestMethod#test_splat_long_array.

    https://rubyci.org/logs/rubyci.s3.amazonaws.com/opensuseleap/ruby-trunk/log/20181227T080002Z.log.html.gz

    Maybe better to check /proc/meminfo instead of /etc/os-release.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66594 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 006afb858d77efe9f63d056cf54c3bb578cd39da
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 01:28:40 +0900

    accept_nonblock_spec.rb: skip spurious failure

    on solaris until it gets stable.
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/unstable11x/ruby-trunk/log/20181227T142405Z.fail.html.gz

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66593 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3e3b8df5f95418d68af6bae659bd16b8c80a3830
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 01:24:47 +0900

    * 2018-12-28

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66592 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e1930666c76953ad8bcc3d4b95a5b94c553f525f
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-28 01:24:46 +0900

    test/mkmf/test_flags.rb: try to suppress random CI failure

    on AIX ppc
    https://rubyci.org/logs/rubyci.s3.amazonaws.com/aix71_ppc/ruby-trunk/log/20181226T113305Z.fail.html.gz

    test/lib/test/unit/assertions.rb: ditto, for TestIO#test_copy_stream_no_busy_wait

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66591 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 45918161a831c0ada6eecd79ba9500d50e308f72
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 23:53:02 +0900

    jit_support.rb: skip testing MJIT on oracle developer studio

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66590 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1922e6ad65b7a458eeeb84da9f07724b0f1c1145
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 23:32:29 +0900

    common.mk: pass CFLAGS to transform_mjit_header.rb

    so that flags like -msse4.1 are passed when checking compilation status
    in transform_mjit_header.rb. It matters for checking __builtin_xxx things.

    [Fix GH-2059] [Bug #14964]

    From: pavel <pavel.rosicky@easy.cz>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66589 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d9cce0814db58a506d549fea0f316a679335e22d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 23:18:16 +0900

    Fix restoration

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66588 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 71987f3f09ba51c34a002370ec5dd3202e9beae4
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 23:15:36 +0900

    Suppress warnings

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66587 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b7c2ca7a3225efcc79a72ee3798abc3320f5c304
  Author: akr <akr@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 21:42:45 +0900

    [DOC] SecureRandom is extended by Random::Formatter.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66586 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e3e09806a227acb9d1d4ced37c808d97f4eeb3cf
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 18:09:42 +0900

    Arrange as same as comment and return statement

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66585 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit bc64df876ebe96fa5da2b98d6227a8ef4163b911
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 15:12:09 +0900

    delete emacs mode lines [ci skip]

    These settings are now covered by .dir-locals.el.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66584 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 070a4aa0f00bd466fe52c526a0e862092cdcfa81
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 15:11:09 +0900

    add .dir-locals.el [ci skip]

    Recent Emacs (23 and up?)  has this feature called .dir-locals.el.
    See also: https://www.gnu.org/software/emacs/manual/html_node/emacs/Directory-Variables.html



    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66583 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1680a13a926b17661329beec1ded6b32aad16c1b
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 13:49:12 +0900

    Fix Net::Protocol::BufferedIO#write when sending large multi-byte string

    This commit should fix Net::Protocol::BufferedIO#write when sending
    large multi-byte string like following example.

    ```
    $ ruby -rnet/http -rjson -v -e "Net::HTTP.post(URI('http://httpbin.org/post'), { text: ''*100_000 }.to_json, 'Content-Type' => 'application/json')"
    ruby 2.6.0p0 (2018-12-25 revision 66547) [x86_64-linux]
    Traceback (most recent call last):
            19: from -e:1:in `<main>'
            18: from lib/ruby/2.6.0/net/http.rb:500:in `post'
            17: from lib/ruby/2.6.0/net/http.rb:605:in `start'
            16: from lib/ruby/2.6.0/net/http.rb:920:in `start'
            15: from lib/ruby/2.6.0/net/http.rb:502:in `block in post'
            14: from lib/ruby/2.6.0/net/http.rb:1281:in `post'
            13: from lib/ruby/2.6.0/net/http.rb:1493:in `send_entity'
            12: from lib/ruby/2.6.0/net/http.rb:1479:in `request'
            11: from lib/ruby/2.6.0/net/http.rb:1506:in `transport_request'
            10: from lib/ruby/2.6.0/net/http.rb:1506:in `catch'
             9: from lib/ruby/2.6.0/net/http.rb:1507:in `block in transport_request'
             8: from lib/ruby/2.6.0/net/http/generic_request.rb:123:in `exec'
             7: from lib/ruby/2.6.0/net/http/generic_request.rb:189:in `send_request_with_body'
             6: from lib/ruby/2.6.0/net/protocol.rb:247:in `write'
             5: from lib/ruby/2.6.0/net/protocol.rb:265:in `writing'
             4: from lib/ruby/2.6.0/net/protocol.rb:248:in `block in write'
             3: from lib/ruby/2.6.0/net/protocol.rb:275:in `write0'
             2: from lib/ruby/2.6.0/net/protocol.rb:275:in `each_with_index'
             1: from lib/ruby/2.6.0/net/protocol.rb:275:in `each'
    lib/ruby/2.6.0/net/protocol.rb:280:in `block in write0': undefined method `bytesize' for nil:NilClass (NoMethodError)
    ```

    [Fix GH-2058]

    From: Eito Katagiri <eitoball@gmail.com>

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66582 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1f866ddc1473588541f6b18761b43625857f7a37
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 13:21:56 +0900

    * 2018-12-27

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66581 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 384ca22a7a8d9ccaea86ea336e349bcbd536335d
  Author: nobu <nobu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-27 13:21:53 +0900

    io-console.gemspec: update

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66580 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 94bdc4edf0583109ce97e244f6423d840b11c092
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 23:43:25 +0900

    string.c: remove the deprecation warnings of `String#bytes` with block

    And its friends: lines, chars, grapheme_clusters, and codepoints.
    [Feature #6670] [ruby-core:90728]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66579 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 0df1de8b32f98793f596fd8d3b608fc6f3104e01
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 23:42:07 +0900

    Revert "string.c: remove the deprecation warnings of `String#bytes` with block"

    Forgot to write the ticket number in the commit log...

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66578 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 5281a0047f6f32103569372ae1a39cfadda4866c
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 18:14:28 +0900

    Fix typos [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66577 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit e030e9f0b8be42dd8c5eb43e3f390106f3b6a48e
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 18:04:12 +0900

    object.c (rb_obj_match): use rb_warn for deprecation warning

    Now the warning is printed even without -w option.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66576 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2b21744efa34a685d0b3d3b333622989a7615cda
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 17:52:19 +0900

    string.c: remove the deprecation warnings of `String#bytes` with block

    And its friends: lines, chars, grapheme_clusters, and codepoints.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66575 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 35b7af7503d380f220b5730d47b542ba295be37b
  Author: mrkn <mrkn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 17:17:30 +0900

    Import bigdecimal 1.4.2

    * https://github.com/ruby/bigdecimal/compare/v1.4.1..v1.4.2

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66574 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9b817107ce0fea9e4dcde6edf5664c734a2faa2b
  Author: naruse <naruse@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 17:01:51 +0900

    fix typo

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66573 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 9edb32dae72c2b45b524e9ca98650cd2b974fe22
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 16:23:35 +0900

    add #line [ci skip]

    These erb files are in fact erb comments + plain C.  Adding #line
    help us debug in case we have trouble there.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66572 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 2914522ffc39c22dfdccf5ad68162232c5cd0d35
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 16:04:31 +0900

    spec/ruby/library/socket/socket/bind_spec.rb: allow to run under docker

    A root user runs the spec without Errno::EACCES

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66571 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 7453cdba1b62d6f6533f8c7bfdf6011524e11853
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 16:02:31 +0900

    spec/ruby/core/process/setpriority_spec.rb: allow to run under docker

    Docker container is not always able to lower the nice value even if the
    euid is a root.  It depends upon the configuration of docker which
    cannot check from the container itself.

    This change does check it by actually trying to lower the value first.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66570 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 925a722ae2c453c351d6e9fff9776bb0a2061642
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 15:01:18 +0900

    test/rdoc: skip some tests when euid is root

    root user can access a file whose permission is 0000.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66569 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1df30008b2461c930a3fb8a8d887f54e403f8379
  Author: mame <mame@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 14:31:22 +0900

    test/ruby/test_process.rb (test_execopts_uid): rescue Errno::EACCES

    The tests fail under the following condition:

        * executed as a root
        * the code is in a directory that uid:30000 user cannot access
          (e.g., /root)

    So, this change rescues Errno::EACCES explicitly.
    Also, this change adds `exception: true` to `Kernel#system` calls.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66568 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b8d28b33b4df47f53d78b2f5587a72429cda3d91
  Author: normal <normal@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 13:04:01 +0900

    doc/extension.ja.rdoc (rb_gc_register_mark_object): fix prototype

    It takes VALUE, not a pointer to a VALUE.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66567 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 70398311d06e48016ce944db69fce23bb361460c
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 09:59:40 +0900

    * expand tabs.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66566 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d46ab953765e2114b6f2f58792be9a7a974e5f27
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 09:59:37 +0900

    insns.def: refactor to avoid CALL_METHOD macro

    These send and its variant instructions are the most frequently called
    paths in the entire process.  Reducing macro expansions to make them
    dedicated function called vm_sendish() is the main goal of this
    changeset.  It reduces the size of vm_exec_coref from 25,552 bytes to
    23,728 bytes on my machine.

    I see no significant slowdown.

    Fix: [GH-2056]

    vanilla: ruby 2.6.0dev (2018-12-19 trunk 66449) [x86_64-darwin15]
    ours: ruby 2.6.0dev (2018-12-19 refactor-send 66449) [x86_64-darwin15]
    last_commit=insns.def: refactor to avoid CALL_METHOD macro
    Calculating -------------------------------------
                             vanilla        ours
       vm2_defined_method     2.645M      2.823M i/s -      6.000M times in 5.109888s 4.783254s
               vm2_method     8.553M      8.873M i/s -      6.000M times in 1.579892s 1.524026s
       vm2_method_missing     3.772M      3.858M i/s -      6.000M times in 3.579482s 3.499220s
    vm2_method_with_block     8.494M      8.944M i/s -      6.000M times in 1.589774s 1.509463s
          vm2_poly_method      0.571       0.607 i/s -       1.000 times in 3.947570s 3.733528s
       vm2_poly_method_ov      5.514       5.168 i/s -       1.000 times in 0.408156s 0.436169s
     vm3_clearmethodcache      2.875       2.837 i/s -       1.000 times in 0.783018s 0.793493s

    Comparison:
                    vm2_defined_method
                     ours:   2822555.4 i/s
                  vanilla:   2644878.1 i/s - 1.07x  slower

                            vm2_method
                     ours:   8872947.8 i/s
                  vanilla:   8553433.1 i/s - 1.04x  slower

                    vm2_method_missing
                     ours:   3858192.3 i/s
                  vanilla:   3772296.3 i/s - 1.02x  slower

                 vm2_method_with_block
                     ours:   8943825.1 i/s
                  vanilla:   8493955.0 i/s - 1.05x  slower

                       vm2_poly_method
                     ours:         0.6 i/s
                  vanilla:         0.6 i/s - 1.06x  slower

                    vm2_poly_method_ov
                  vanilla:         5.5 i/s
                     ours:         5.2 i/s - 1.07x  slower

                  vm3_clearmethodcache
                  vanilla:         2.9 i/s
                     ours:         2.8 i/s - 1.01x  slower



    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66565 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 686881d383cfe44c67875aada64207c5e0abaa8d
  Author: shyouhei <shyouhei@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 09:58:26 +0900

    add _sp_inc_helpers.erb [ci skip]

    Just add more room for comments.  This is a pure refactoring that does
    not change anything but readability.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66564 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 756b200ad6623fdad76c30f19aaf25fb75a24f08
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 01:11:18 +0900

    [DOC] Remove heading with no content [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66561 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 1859c79190bd7f926d26b1f919e038c182080f2e
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 01:09:40 +0900

    * properties.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66560 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit d16509f1f009e06a1a9ff3bf9ab3f28aef415e87
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 01:09:39 +0900

    [DOC] Add doc/NEWS-2.6.0 [ci skip]

    fix previous commit miss

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66559 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 848a53d2b538d74730928737ec65325725f617f5
  Author: svn <svn@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 00:58:51 +0900

    * 2018-12-26

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66558 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit c14b9f9b638bc966923ae6fffa629ed171aea827
  Author: kazu <kazu@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-26 00:58:49 +0900

    [DOC] Move from NEWS to doc/NEWS-2.6.0 [ci skip]

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66557 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit b5569b9ab2ad5e0e4a997df7eb73e97ecbacc9dd
  Author: k0kubun <k0kubun@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-25 22:57:28 +0900

    erb.rb: print deprecation warning with warn level 1

    This was planned to be removed in Ruby 2.7 at first, but I changed my
    mind to just keep warning it in Ruby 2.7.

    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66556 b2dd03c8-39d4-4d8f-98ff-823fe69b080e

commit 3a0471faa0d383392ba05b3a6409b973b7b009d1
  Author: matz <matz@b2dd03c8-39d4-4d8f-98ff-823fe69b080e>
  Date:   2018-12-25 22:45:17 +0900

    version.h (RUBY_VERSION): 2.7.0 development has started.


    git-svn-id: svn+ssh://ci.ruby-lang.org/ruby/trunk@66555 b2dd03c8-39d4-4d8f-98ff-823fe69b080e
